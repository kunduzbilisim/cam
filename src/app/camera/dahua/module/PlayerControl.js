var PlayerControl=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=97)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(46);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";(function(t){var r=n(113),i=n(114),a=n(115);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):h(t,e);if("Buffer"===e.type&&a(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(t,a+h)!==c(e,h)){f=!1;break}if(f)return a}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function w(t,e,n,r){return V(U(e,t.length-n),t,n,r)}function b(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return b(t,e,n,r)}function D(t,e,n,r){return V(z(e),t,n,r)}function x(t,e,n,r){return V(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function _(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],o=l[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return D(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=N(t[a]);return i}function A(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function F(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,r,a){return a||F(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,a){return a||F(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:U(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(32))},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(188);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(14).default,i=n(189);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){(function(){var e;function n(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function r(){return new n(null)}var i="undefined"!==typeof navigator;i&&"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=function(t,e,n,r,i,a){for(var o=32767&e,s=e>>15;--a>=0;){var u=32767&this[t],c=this[t++]>>15,l=s*u+c*o;i=((u=o*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+s*c+(i>>>30),n[r++]=1073741823&u}return i},e=30):i&&"Netscape"!=navigator.appName?(n.prototype.am=function(t,e,n,r,i,a){for(;--a>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},e=26):(n.prototype.am=function(t,e,n,r,i,a){for(var o=16383&e,s=e>>14;--a>=0;){var u=16383&this[t],c=this[t++]>>14,l=s*u+c*o;i=((u=o*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+s*c,n[r++]=268435455&u}return i},e=28),n.prototype.DB=e,n.prototype.DM=(1<<e)-1,n.prototype.DV=1<<e;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-e,n.prototype.F2=2*e-52;var a,o,s="0123456789abcdefghijklmnopqrstuvwxyz",u=new Array;for(a="0".charCodeAt(0),o=0;o<=9;++o)u[a++]=o;for(a="a".charCodeAt(0),o=10;o<36;++o)u[a++]=o;for(a="A".charCodeAt(0),o=10;o<36;++o)u[a++]=o;function c(t){return s.charAt(t)}function l(t,e){var n=u[t.charCodeAt(e)];return null==n?-1:n}function f(t){var e=r();return e.fromInt(t),e}function h(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function d(t){this.m=t}function p(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function v(t,e){return t&e}function g(t,e){return t|e}function m(t,e){return t^e}function y(t,e){return t&~e}function w(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function b(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function S(){}function D(t){return t}function x(t){this.r2=r(),this.q3=r(),n.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}d.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},d.prototype.revert=function(t){return t},d.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},d.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.convert=function(t){var e=r();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(n.ZERO)>0&&this.m.subTo(e,e),e},p.prototype.revert=function(t){var e=r();return t.copyTo(e),this.reduce(e),e},p.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},p.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},p.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},n.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},n.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},n.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,a=!1,o=0;--i>=0;){var s=8==r?255&t[i]:l(t,i);s<0?"-"==t.charAt(i)&&(a=!0):(a=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&n.ZERO.subTo(this,this)},n.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},n.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},n.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},n.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,a=(1<<i)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>i|s,s=(this[n]&a)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},n.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,a=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&a)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&a)<<i),e.t=this.t-n,e.clamp()}},n.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},n.prototype.multiplyTo=function(t,e){var r=this.abs(),i=t.abs(),a=r.t;for(e.t=a+i.t;--a>=0;)e[a]=0;for(a=0;a<i.t;++a)e[a+r.t]=r.am(0,i[a],e,a,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&n.ZERO.subTo(e,e)},n.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},n.prototype.divRemTo=function(t,e,i){var a=t.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var s=r(),u=this.s,c=t.s,l=this.DB-h(a[a.t-1]);l>0?(a.lShiftTo(l,s),o.lShiftTo(l,i)):(a.copyTo(s),o.copyTo(i));var f=s.t,d=s[f-1];if(0!=d){var p=d*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),v=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,y=i.t,w=y-f,b=null==e?r():e;for(s.dlShiftTo(w,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),n.ONE.dlShiftTo(f,b),b.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--w>=0;){var S=i[--y]==d?this.DM:Math.floor(i[y]*v+(i[y-1]+m)*g);if((i[y]+=s.am(0,S,i,w,0,f))<S)for(s.dlShiftTo(w,b),i.subTo(b,i);i[y]<--S;)i.subTo(b,i)}null!=e&&(i.drShiftTo(f,e),u!=c&&n.ZERO.subTo(e,e)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&n.ZERO.subTo(i,i)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},n.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(t,e){if(t>4294967295||t<1)return n.ONE;var i=r(),a=r(),o=e.convert(this),s=h(t)-1;for(o.copyTo(i);--s>=0;)if(e.sqrTo(i,a),(t&1<<s)>0)e.mulTo(a,o,i);else{var u=i;i=a,a=u}return e.revert(i)},n.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%e;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(i=!0,a=c(n));o>=0;)s<e?(n=(this[o]&(1<<s)-1)<<e-s,n|=this[--o]>>(s+=this.DB-e)):(n=this[o]>>(s-=e)&r,s<=0&&(s+=this.DB,--o)),n>0&&(i=!0),i&&(a+=c(n));return i?a:"0"},n.prototype.negate=function(){var t=r();return n.ZERO.subTo(this,t),t},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+h(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(t){var e=r();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(n.ZERO)>0&&t.subTo(e,e),e},n.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new d(e):new p(e),this.exp(t,n)},n.ZERO=f(0),n.ONE=f(1),S.prototype.convert=D,S.prototype.revert=D,S.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},S.prototype.sqrTo=function(t,e){t.squareTo(e)},x.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=r();return t.copyTo(e),this.reduce(e),e},x.prototype.revert=function(t){return t},x.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},x.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},x.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var _,I,T,E=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k=(1<<26)/E[E.length-1];function M(){var t;t=(new Date).getTime(),I[T++]^=255&t,I[T++]^=t>>8&255,I[T++]^=t>>16&255,I[T++]^=t>>24&255,T>=B&&(T-=B)}if(n.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},n.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),i=f(n),a=r(),o=r(),s="";for(this.divRemTo(i,a,o);a.signum()>0;)s=(n+o.intValue()).toString(t).substr(1)+s,a.divRemTo(i,a,o);return o.intValue().toString(t)+s},n.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),a=!1,o=0,s=0,u=0;u<t.length;++u){var c=l(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(a=!0):(s=e*s+c,++o>=r&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),a&&n.ZERO.subTo(this,this)},n.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.ONE.shiftLeft(t-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(n.ONE.shiftLeft(t-1),this);else{var i=new Array,a=7&t;i.length=1+(t>>3),e.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}},n.prototype.bitwiseTo=function(t,e,n){var r,i,a=Math.min(t.t,this.t);for(r=0;r<a;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=a;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},n.prototype.changeBit=function(t,e){var r=n.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},n.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},n.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},n.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},n.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},n.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},n.prototype.millerRabin=function(t){var e=this.subtract(n.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var a=e.shiftRight(i);(t=t+1>>1)>E.length&&(t=E.length);for(var o=r(),s=0;s<t;++s){o.fromInt(E[Math.floor(Math.random()*E.length)]);var u=o.modPow(a,this);if(0!=u.compareTo(n.ONE)&&0!=u.compareTo(e)){for(var c=1;c++<i&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(n.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},n.prototype.clone=function(){var t=r();return this.copyTo(t),t},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},n.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},n.prototype.equals=function(t){return 0==this.compareTo(t)},n.prototype.min=function(t){return this.compareTo(t)<0?this:t},n.prototype.max=function(t){return this.compareTo(t)>0?this:t},n.prototype.and=function(t){var e=r();return this.bitwiseTo(t,v,e),e},n.prototype.or=function(t){var e=r();return this.bitwiseTo(t,g,e),e},n.prototype.xor=function(t){var e=r();return this.bitwiseTo(t,m,e),e},n.prototype.andNot=function(t){var e=r();return this.bitwiseTo(t,y,e),e},n.prototype.not=function(){for(var t=r(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},n.prototype.shiftLeft=function(t){var e=r();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},n.prototype.shiftRight=function(t){var e=r();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},n.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+w(this[t]);return this.s<0?this.t*this.DB:-1},n.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=b(this[n]^e);return t},n.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},n.prototype.setBit=function(t){return this.changeBit(t,g)},n.prototype.clearBit=function(t){return this.changeBit(t,y)},n.prototype.flipBit=function(t){return this.changeBit(t,m)},n.prototype.add=function(t){var e=r();return this.addTo(t,e),e},n.prototype.subtract=function(t){var e=r();return this.subTo(t,e),e},n.prototype.multiply=function(t){var e=r();return this.multiplyTo(t,e),e},n.prototype.divide=function(t){var e=r();return this.divRemTo(t,e,null),e},n.prototype.remainder=function(t){var e=r();return this.divRemTo(t,null,e),e},n.prototype.divideAndRemainder=function(t){var e=r(),n=r();return this.divRemTo(t,e,n),new Array(e,n)},n.prototype.modPow=function(t,e){var n,i,a=t.bitLength(),o=f(1);if(a<=0)return o;n=a<18?1:a<48?3:a<144?4:a<768?5:6,i=a<8?new d(e):e.isEven()?new x(e):new p(e);var s=new Array,u=3,c=n-1,l=(1<<n)-1;if(s[1]=i.convert(this),n>1){var v=r();for(i.sqrTo(s[1],v);u<=l;)s[u]=r(),i.mulTo(v,s[u-2],s[u]),u+=2}var g,m,y=t.t-1,w=!0,b=r();for(a=h(t[y])-1;y>=0;){for(a>=c?g=t[y]>>a-c&l:(g=(t[y]&(1<<a+1)-1)<<c-a,y>0&&(g|=t[y-1]>>this.DB+a-c)),u=n;0==(1&g);)g>>=1,--u;if((a-=u)<0&&(a+=this.DB,--y),w)s[g].copyTo(o),w=!1;else{for(;u>1;)i.sqrTo(o,b),i.sqrTo(b,o),u-=2;u>0?i.sqrTo(o,b):(m=o,o=b,b=m),i.mulTo(b,s[g],o)}for(;y>=0&&0==(t[y]&1<<a);)i.sqrTo(o,b),m=o,o=b,b=m,--a<0&&(a=this.DB-1,--y)}return i.revert(o)},n.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return n.ZERO;for(var r=t.clone(),i=this.clone(),a=f(1),o=f(0),s=f(0),u=f(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),e&&a.subTo(s,a),o.subTo(u,o)):(i.subTo(r,i),e&&s.subTo(a,s),u.subTo(o,u))}return 0!=i.compareTo(n.ONE)?n.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},n.prototype.pow=function(t){return this.exp(t,new S)},n.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),n.rShiftTo(a,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n},n.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=E[E.length-1]){for(e=0;e<E.length;++e)if(n[0]==E[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<E.length;){for(var r=E[e],i=e+1;i<E.length&&r<k;)r*=E[i++];for(r=n.modInt(r);e<i;)if(r%E[e++]==0)return!1}return n.millerRabin(t)},n.prototype.square=function(){var t=r();return this.squareTo(t),t},n.prototype.Barrett=x,null==I){var A;if(I=new Array,T=0,"undefined"!==typeof window&&window.crypto)if(window.crypto.getRandomValues){var R=new Uint8Array(32);for(window.crypto.getRandomValues(R),A=0;A<32;++A)I[T++]=R[A]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var C=window.crypto.random(32);for(A=0;A<C.length;++A)I[T++]=255&C.charCodeAt(A)}for(;T<B;)A=Math.floor(65536*Math.random()),I[T++]=A>>>8,I[T++]=255&A;T=0,M()}function P(){if(null==_){for(M(),(_=new F).init(I),T=0;T<I.length;++T)I[T]=0;T=0}return _.next()}function O(){}function F(){this.i=0,this.j=0,this.S=new Array}O.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=P()},F.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},F.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var B=256;t.exports={default:n,BigInteger:n,SecureRandom:O}}).call(this)},function(t,e,n){"use strict";t.exports={ATOM_MOOV:"moov",ATOM_MVHD:"mvhd",ATOM_TRAK:"trak",ATOM_TKHD:"tkhd",ATOM_MDIA:"mdia",ATOM_MDHD:"mdhd",ATOM_MINF:"minf",ATOM_HDLR:"hdlr",ATOM_VMHD:"vmhd",ATOM_SMHD:"smhd",ATOM_STBL:"stbl",ATOM_STSZ:"stsz",ATOM_STCO:"stco",ATOM_STSS:"stss",ATOM_STTS:"stts",ATOM_STSC:"stsc",ATOM_CO64:"co64",ATOM_STSD:"stsd",ATOM_CTTS:"ctts",ATOM_AVC1:"avc1",ATOM_AVCC:"avcC",ATOM_HEV1:"hev1",ATOM_HVC1:"hvc1",ATOM_HVCC:"hvcC",ATOM_MP4A:"mp4a",ATOM_ESDS:"esds",ATOM_MDAT:"mdat",ATOM_FTYP:"ftyp",TRACK_TYPE_VIDEO:"vide",TRACK_TYPE_AUDIO:"soun",COMPONENT_NAME_VIDEO:"VideoHandler",COMPONENT_NAME_AUDIO:"SoundHandler",COMPRESSOR_NAME:"NodeVideoLibrary",createAtom:function(t){return new(n(195)("./atom-"+t))}}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.util=void 0;var i=r(n(16)),a=n(10),o={moveFlag:!1,selectLineDiff:300,selectPointDiff:320,resizeFlag:!1,zindex:1,shapeId:1,drawState:0,coordinate:{},midLineLength:20,arrayLength:10,eventEnabled:!0,eventName:{drawFinish:"drawFinish",moveFinish:"moveFinish",resizeFinish:"resizeFinish",deleteFinish:"deleteFinish",selectedFinish:"selectedFinish",addFinish:"addFinish",drawStart:"drawStart"},defalutCoordinate:{width:8191,height:8191},resolution:{width:1920,height:1080},setCoordinate:function(t,e){this.coordinate={widthDraw:t/this.defalutCoordinate.width,heightDraw:e/this.defalutCoordinate.height,widthMouse:this.defalutCoordinate.width/t,heightMouse:this.defalutCoordinate.height/e}},onLine:function(t,e){var n,r,i,a,o=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]),s=(e[1][0]*e[0][1]-e[0][0]*e[1][1])/(e[1][0]-e[0][0]),u=Math.abs((o*t[0]-t[1]+s)/Math.sqrt(Math.pow(o,2)+1));return e[0][0]>e[1][0]?(n=e[0][0],r=e[1][0]):(n=e[1][0],r=e[0][0]),e[0][1]>e[1][1]?(i=e[0][1],a=e[1][1]):(i=e[1][1],a=e[0][1]),n===r&&t[0]>=r-this.selectLineDiff&&t[0]<=n+this.selectLineDiff&&t[1]>=a-this.selectLineDiff&&t[1]<=i+this.selectLineDiff||t[0]>=r-this.selectLineDiff&&t[0]<=n+this.selectLineDiff&&t[1]>=a-this.selectLineDiff&&t[1]<=i+this.selectLineDiff&&u<=this.selectLineDiff},pointInPoly:function(t,e){for(var n=!1,r=-1,i=e.length,a=i-1;++r<i;a=r)(e[r][1]<=t[1]&&t[1]<e[a][1]||e[a][1]<=t[1]&&t[1]<e[r][1])&&t[0]<(e[a][0]-e[r][0])*(t[1]-e[r][1])/(e[a][1]-e[r][1])+e[r][0]&&(n=!n);return n},pointInCircle:function(t,e,n){return!(Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))>n)},pointInRect:function(t,e){for(var n=this.rectToPoly(e),r=t[0],i=t[1],a=0,o=0,s=n.length,u=s-1;o<s;u=o,o++){var c=n[o][0],l=n[o][1],f=n[u][0],h=n[u][1],d=Math.atan2(l-i,c-r)-Math.atan2(h-i,f-r);d>=Math.PI?d-=2*Math.PI:d<=-Math.PI&&(d+=2*Math.PI),a+=d}return 0!==Math.round(a/Math.PI)},rectToPoly:function(t){var e=[],n={};return n[0]=t[0][0],n[1]=t[0][1],e.push(n),(n={})[0]=t[1][0],n[1]=t[0][1],e.push(n),(n={})[0]=t[1][0],n[1]=t[1][1],e.push(n),(n={})[0]=t[0][0],n[1]=t[1][1],e.push(n),e},setUnSelected:function(t){for(var e=0;e<t.length;e++)t[e].option.selected=!1},onPoint:function(t,e,n,r){if(n)return Array.isArray(r)?e=this.getNormalizeRect(e):r=new Array(4).fill(this.selectPointDiff),Math.sqrt(Math.pow(t[0]-e[0][0],2)+Math.pow(t[1]-e[0][1],2))<r[0]?0:Math.sqrt(Math.pow(t[0]-e[1][0],2)+Math.pow(t[1]-e[0][1],2))<r[1]?1:Math.sqrt(Math.pow(t[0]-e[1][0],2)+Math.pow(t[1]-e[1][1],2))<r[2]?2:Math.sqrt(Math.pow(t[0]-e[0][0],2)+Math.pow(t[1]-e[1][1],2))<r[3]&&3;for(var i=0;i<e.length;i++)if(Math.sqrt(Math.pow(t[0]-e[i][0],2)+Math.pow(t[1]-e[i][1],2))<this.selectPointDiff)return i;return!1},segmentsIntr:function(t,e,n,r){var i=(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0]);if(i*a>=0)return!1;var o=(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0]);if(o*(o+i-a)>=0)return!1;var s=o/(a-i),u=s*(e[0]-t[0]),c=s*(e[1]-t[1]);return[t[0]+u,t[1]+c]},segmentsInLine:function(t,e,n,r,i,a,o,s){var u=(r-e)*(o-i)-(t-n)*(a-s);if(0===u)return!1;var c=((n-t)*(o-i)*(a-e)+(r-e)*(o-i)*t-(s-a)*(n-t)*i)/u,l=-((r-e)*(s-a)*(i-t)+(n-t)*(s-a)*e-(o-i)*(r-e)*a)/u;return(c-i)*(c-o)<=0&&(l-a)*(l-s)<=0&&[Math.floor(c),Math.floor(l)]},lineCross:function(t,e){for(var n=0;n<e.length;n++){if(this.segmentsIntr(t[0],t[1],e[n][0],e[n][1]))return!0}return!1},lineAverageNum:function(t,e){if(e<2)return[];for(var n=[],r=1;r<e;r++)n[r-1]=[Math.floor(((e-r)*t[0][0]+r*t[1][0])/e),Math.floor(((e-r)*t[0][1]+r*t[1][1])/e)];return n},lineCrossPoly:function(t,e){if(t.length<=3)return!1;for(var n,r,i=[],s=0;s<t.length;s++)s===t.length-1?i.push([t[s],t[0]]):i.push([t[s],t[s+1]]);if(e===t.length-1){n=i.pop(),r=i.pop();var u=a.jQlib.extend(!0,[],i);if(u.pop(),!0===o.lineCross(r,u))return!0;var c=a.jQlib.extend(!0,[],i);return c.shift(),o.lineCross(n,c)}if(0===e){r=i.pop(),n=i.shift();var l=a.jQlib.extend(!0,[],i);if(l.pop(),!0===o.lineCross(r,l))return!0;var f=a.jQlib.extend(!0,[],i);return f.shift(),o.lineCross(n,f)}r=i.splice(e,1),n=i.splice(e-1,1);var h=a.jQlib.extend(!0,[],i);if(h.splice(e-1,1),!0===o.lineCross(r[0],h))return!0;var d=a.jQlib.extend(!0,[],i);return e-2<0?d.pop():d.splice(e-2,1),o.lineCross(n[0],d)},compare:function(t,e){return t.option.zindex-e.option.zindex},compareDesc:function(t,e){return e.option.zindex-t.option.zindex},compareArray:function(t,e){return t-e},drawSelectRect:function(t,e,n,r,i){r=r||2,t.beginPath(),t.fillStyle=i||"#FFFF00",t.fillRect(e-r,n-r,2*r,2*r),t.closePath()},getArrayLines:function(t,e,n,r){var i=this;if(!t||!e||t[0]===e[0]&&t[1]===e[1])return null;var a,o,s,u,c=i.getArrayLineMiddle(t,e),l=[],f=[(t[0]+e[0])/2,(t[1]+e[1])/2],h=[(f[0]+c[0][0])/2,(f[1]+c[0][1])/2],d=[(f[0]+c[1][0])/2,(f[1]+c[1][1])/2];if(l.push(c),2!==n&&1!==n||(a=i.getRotateByDegree(h,c[0],30),o=i.getRotateByDegree(h,c[0],330),l.push(a,o)),2!==n&&0!==n||(s=i.getRotateByDegree(d,c[1],30),u=i.getRotateByDegree(d,c[1],330),l.push(s,u)),r){var p=this.pointInPoly(d,r);"Both"!==n&&"Leave"!==n||(!0===p?(s=i.getRotateByDegree(h,c[0],30),u=i.getRotateByDegree(h,c[0],330)):(s=i.getRotateByDegree(d,c[1],30),u=i.getRotateByDegree(d,c[1],330)),l.push(s,u)),"Both"!==n&&"Enter"!==n||(!0===p?(s=i.getRotateByDegree(d,c[1],30),u=i.getRotateByDegree(d,c[1],330)):(s=i.getRotateByDegree(h,c[0],30),u=i.getRotateByDegree(h,c[0],330)),l.push(s,u))}return l},getArrayLineMiddle:function(t,e,n){var r;n=void 0!==n?n:this.midLineLength,r=e[0]===t[0]?Math.PI/180*90:Math.atan((e[1]-t[1])/(e[0]-t[0]));var i=[Math.sin(r),Math.cos(r)],a=i[0],o=i[1],s=[],u=[],c=[],l=[(t[0]+e[0])/2-n*a,(t[1]+e[1])/2+n*o];s[0]=l[0],s[1]=l[1];var f=[(t[0]+e[0])/2+n*a,(t[1]+e[1])/2-n*o];if(u[0]=f[0],u[1]=f[1],e[0]>=t[0]){var h=[u,s];c[0]=h[0],c[1]=h[1]}else{var d=[s,u];c[0]=d[0],c[1]=d[1]}return c},getVerticalSegmentOfLine:function(t,e,n,r){var i;r=r||this.midLineLength,i=e[0]===t[0]?Math.PI/180*90:Math.atan((e[1]-t[1])/(e[0]-t[0]));var a=[Math.sin(i),Math.cos(i)],o=a[0],s=a[1],u=[],c=[],l=[],f=[n[0]-r*o,n[1]+r*s];u[0]=f[0],u[1]=f[1];var h=[n[0]+r*o,n[1]-r*s];if(c[0]=h[0],c[1]=h[1],e[0]>=t[0]){var d=[c,u];l[0]=d[0],l[1]=d[1]}else{var p=[u,c];l[0]=p[0],l[1]=p[1]}return l},getRotateByDegree:function(t,e,n){var r=Math.sin(Math.PI/180*n),i=Math.cos(Math.PI/180*n),a=(t[0]-e[0])*i-(t[1]-e[1])*r+e[0],o=(t[1]-e[1])*i+(t[0]-e[0])*r+e[1];return[[e[0],e[1]],[a,o]]},lineInPoly:function(t,e){var n=this.pointInPoly(t[0],e),r=this.pointInPoly(t[1],e);if(!n||!r)return!1;for(var i=0;i<e.length;i++){var a=void 0,o=void 0;if(i===e.length-1?(a=e[0],o=e[i]):(a=e[i],o=e[i+1]),this.segmentsIntr(t[0],t[1],a,o))return!1}return!0},strokeText:function(t,e,n,r,i,a){t.textAlign=i||"left",t.fillStyle=a||"#FFFF00",t.fillText(e,n,r)},getStrokeTextAlign:function(t,e,n,r){var i="left";return e-r-t.measureText(n).width<0&&(i="right"),i},getPositionByLine:function(t,e,n){var r=[];r[0]=a.jQlib.extend(!0,[],e[0]),r[1]=a.jQlib.extend(!0,[],e[1]),e[1][1]<e[0][1]&&n&&(r[0]=a.jQlib.extend(!0,[],e[1]),r[1]=a.jQlib.extend(!0,[],e[0]));var i=r[1][1]-r[0][1],o=r[0][0]-r[1][0],s=r[1][0]*r[0][1]-r[0][0]*r[1][1],u=i*t[0]+o*t[1]+s;return u<0?"left":u>0?"right":"middle"},getNunberSign:function(t,e){return t-e>0?1:t-e<0?-1:0},getCoordinatePoint:function(t,e,n,r,i){var a=null,o=[],s=null,u=null;return n===t?(o[0]=t,o[1]=e>=r?e-i<r?r:e-i:e+i>r?r:e+i):(a=Math.atan((r-e)/(n-t)),s=i*Math.cos(a),u=i*Math.sin(a),t<n&&e<=r?(o[0]=t+s<n?t+s:n,o[1]=e+u<r?e+u:r):t<n&&e>r?(o[0]=t+s<n?t+s:n,o[1]=e+u>r?e+u:r):t>n&&e>=r?(o[0]=t-s>n?t-s:n,o[1]=e-u>r?e-u:r):(o[0]=t-s>n?t-s:n,o[1]=e-u<r?e-u:r)),o},drawAppendLine:function(t,e,n){t.beginPath(),n?(t.moveTo(e[0][0]*n.widthDraw,e[0][1]*n.heightDraw),t.lineTo(e[1][0]*n.widthDraw,e[1][1]*n.heightDraw)):(t.moveTo(e[0][0],e[0][1]),t.lineTo(e[1][0],e[1][1])),t.stroke()},setResolution:function(t){this.resolution={},this.resolution.width=t.width,this.resolution.height=t.height},offset:function(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},isConvexShape:function(t){var e=!0,n=t.length;if(n<4)e=!0;else for(var r=void 0,i=0;i<n;i++){var a=t[i%n],o=t[(i+1)%n],s=t[(i+2)%n],u={x:o[0]-a[0],y:o[1]-a[1]},c={x:s[0]-o[0],y:s[1]-o[1]},l=1;if(u.x*c.y-u.y*c.x<0&&(l=-1),r||(r=l),r*l<0){e=!1;break}}return e},getCenter:function(t){return t.reduce(function(e,n,r){return e[0]+=n[0],e[1]+=n[1],r===t.length-1&&(e[0]/=t.length,e[1]/=t.length),e},[0,0])},getNormalizeRect:function(t){var e=(0,i.default)(t[0]),n=(0,i.default)(t[1]),r=[(e[0]+n[0])/2,[e[1]+n[1]]/2],a=Math.abs(e[0]-n[0]),o=Math.abs(e[1]-n[1]);return[e=[r[0]-a/2,r[1]-o/2],n=[r[0]+a/2,r[1]+o/2]]}};e.util=o},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.jQlib=void 0;var i=r(n(14)),a={}.hasOwnProperty,o={class2type:{"object Boolean":"boolean","object Number":"number","object String":"string","object Function":"function","object Array":"array","object Date":"date","object RegExp":"regexp","object Object":"object","object Error":"error"},deepCopy:function(t,e,n){var r,a,o,s=e;if("object"===(0,i.default)(n))for(var u in n)n.hasOwnProperty(u)&&(r=s[u],o=n[u],"object"!==(0,i.default)(o)?s[u]=o:(a=r||(Array.isArray(o)?[]:{}),s[u]=this.deepCopy(t,a,o)));else s=n;return s},extend:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e[1],i=2;i<e.length;i++)e[i]&&(r=this.deepCopy(!0,r,e[i]));return r},isFunction:function(t){return"function"===this.type(t)},isArray:Array.isArray||function(t){return"array"===this.type(t)},isWindow:function(t){return null!==t&&t===t.window},isPlainObject:function(t){if(!t||"object"!==this.type(t)||t.nodeType||this.isWindow(t))return!1;try{if(t.constructor&&!a.call(t,"constructor")&&!a.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},type:function(t){return null===t?t+"":"object"===(0,i.default)(t)||"function"===typeof t?this.class2type[toString.call(t)]||"object":(0,i.default)(t)},each:function(t,e,n){var r=0,i=t.length,a=this.isArraylike(t);if(n){if(a)for(;r<i&&!1!==e.apply(t[r],n);r++);else for(r in t)if(!1===e.apply(t[r],n))break}else if(a)for(;r<i&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},isArraylike:function(t){var e=t.length,n=this.type(t);return"function"!==n&&!this.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"===typeof e&&e>0&&e-1 in t))},getHeight:function(t){var e=this;if(null!==t.getAttribute("height")&&t.getAttribute("height")>0)return parseFloat(t.getAttribute("height"));if(parseFloat(e._getStyleValue(t,"height"))>0)return parseFloat(e._getStyleValue(t,"height"));if(t.offsetHeight>0){var n=e._getStyleValue(t,"borderTopWidth"),r=e._getStyleValue(t,"borderBottomWidth"),i=e._getStyleValue(t,"paddingTop"),a=e._getStyleValue(t,"paddingBottom"),o=parseFloat(t.offsetHeight)-parseFloat(n)-parseFloat(r)-parseFloat(i)-parseFloat(a);return parseFloat(o)}return 0},getWidth:function(t){var e=this;if(null!==t.getAttribute("width")&&t.getAttribute("width")>0)return parseFloat(t.getAttribute("width"));if(parseFloat(e._getStyleValue(t,"width"))>0)return parseFloat(e._getStyleValue(t,"width"));if(t.offsetWidth>0){var n=e._getStyleValue(t,"borderLeftWidth"),r=e._getStyleValue(t,"borderRightWidth"),i=e._getStyleValue(t,"paddingLeft"),a=e._getStyleValue(t,"paddingRight"),o=parseFloat(t.offsetWidth)-parseFloat(n)-parseFloat(r)-parseFloat(i)-parseFloat(a);return parseFloat(o)}return 0},_getStyleValue:function(t,e){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=window),t.currentStyle?t.currentStyle[e]:n.getComputedStyle(t)[e]}};e.jQlib=o},function(t,e,n){"use strict";var r,i=n(48),a=Object.prototype.toString,o=(r=Object.create(null),function(t){var e=a.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())});function s(t){return t=t.toLowerCase(),function(e){return o(e)===t}}function u(t){return Array.isArray(t)}function c(t){return"undefined"===typeof t}var l=s("ArrayBuffer");function f(t){return null!==t&&"object"===typeof t}function h(t){if("object"!==o(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var d=s("Date"),p=s("File"),v=s("Blob"),g=s("FileList");function m(t){return"[object Function]"===a.call(t)}var y=s("URLSearchParams");function w(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),u(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var b,S=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return b&&t instanceof b});t.exports={isArray:u,isArrayBuffer:l,isBuffer:function(t){return null!==t&&!c(t)&&null!==t.constructor&&!c(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return t&&("function"===typeof FormData&&t instanceof FormData||"[object FormData]"===a.call(t)||m(t.toString)&&"[object FormData]"===t.toString())},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&l(t.buffer)},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:f,isPlainObject:h,isUndefined:c,isDate:d,isFile:p,isBlob:v,isFunction:m,isStream:function(t){return f(t)&&m(t.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:w,merge:function t(){var e={};function n(n,r){h(e[r])&&h(n)?e[r]=t(e[r],n):h(n)?e[r]=t({},n):u(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)w(arguments[r],n);return e},extend:function(t,e,n){return w(e,function(e,r){t[r]=n&&"function"===typeof e?i(e,n):e}),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var r,i,a,o={};e=e||{};do{for(i=(r=Object.getOwnPropertyNames(t)).length;i-- >0;)o[a=r[i]]||(e[a]=t[a],o[a]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:o,kindOfTest:s,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return-1!==r&&r===n},toArray:function(t){if(!t)return null;var e=t.length;if(c(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:S,isFileList:g}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventManager=void 0;var r={events:new WeakMap,on:function(t,e,n){if(t&&e){var r=e.split("."),i={};return i.fullType=e,i.type=r[0],i.fn=n,this.events.has(t)?this.events.get(t).push(i):this.events.set(t,[i]),t.addEventListener(r[0],i.fn),this}},off:function(t,e){if(!t)return this;var n=this.events.get(t)||[];if(!e){for(var r=0;r<n.length;r++)t.removeEventListener(n[r].type,n[r].fn);return this.events.set(t,[]),this}var i=e.split(".");if(2!==i.length){for(var a=[],o=0;o<n.length;o++)(u=n[o]).type===i[0]?t.removeEventListener(u.type,u.fn):a.push(u);return this.events.set(t,a),this}for(var s=0;s<n.length;s++){var u=n[s];if(u.fullType===e)return t.removeEventListener(u.type,u.fn),this.events.get(t).splice(s,1),this}return this},trigger:function(t,e){if(!t||!e)return this;var n=e.split("."),r=new Event(n[0]);return window.dispatchEvent(r),this}};e.EventManager=r},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,[{key:"type",value:function(){}},{key:"parse",value:function(){}},{key:"build",value:function(){}},{key:"bufferSize",value:function(){}}]),t}();t.exports=o},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserDetect=function(){var t=navigator.userAgent.toLowerCase(),e=navigator.appName,n=null;"Microsoft Internet Explorer"===e||t.indexOf("trident")>-1||t.indexOf("edge/")>-1?(n="ie","Microsoft Internet Explorer"===e?(t=/msie ([0-9]{1,}[\.0-9]{0,})/.exec(t),n+=parseInt(t[1])):t.indexOf("trident")>-1?n+=11:t.indexOf("edge/")>-1&&(n="edge")):t.indexOf("safari")>-1?n=t.indexOf("chrome")>-1?"chrome":"safari":t.indexOf("firefox")>-1&&(n="firefox");return n},e.CommonAudioUtil=function(){var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384],e=function(t,e,n){var r=0,i=0;for(r=0;r<n&&!(t<e[i]);r++)i++;return r},n=function(n,r){var i=0,a=0,o=0,s=0,u=0;return a=e(i=n>0?n:8191&-n,t,15)-6,o=a+(r>>6&15)-13,s=(0===i?32:a>=0?i>>a:i<<-a)*(r&parseInt("077",8))+48>>4,u=o>=0?s<<o&32767:s>>-o,(n^r)<0?-u:u};this.g726InitState=function(){var t={},e=0;for(t.pp=new Array(2),t.zp=new Array(6),t.pk=new Array(2),t.dq=new Array(6),t.sr=new Array(2),t.yl=34816,t.yu=544,t.dms=0,t.dml=0,t.ppp=0,e=0;e<2;e++)t.pp[e]=0,t.pk[e]=0,t.sr[e]=32;for(e=0;e<6;e++)t.zp[e]=0,t.dq[e]=32;return t.td=0,t},this.predictorZero=function(t){var e=0,r=0;for(r=n(t.zp[0]>>2,t.dq[0]),e=1;e<6;e++)r+=n(t.zp[e]>>2,t.dq[e]);return r},this.predictorPole=function(t){return n(t.pp[1]>>2,t.sr[1])+n(t.pp[0]>>2,t.sr[0])},this.stepSize=function(t){var e=0,n=0,r=0;return t.ppp>=256?t.yu:(e=t.yl>>6,n=t.yu-e,r=t.ppp>>2,n>0?e+=n*r>>6:n<0&&(e+=n*r+63>>6),e)},this.quantize=function(n,r,i,a){var o=0,s=0,u=0;return o=Math.abs(n),s=e(o>>1,t,15),u=e((s<<7)+(o<<7>>s&127)-(r>>2),i,a),n<0?1+(a<<1)-u:0===u?1+(a<<1):u},this.reconstruct=function(t,e,n){var r=0,i=0;return(r=e+(n>>2))<0?t?-32768:0:(i=128+(127&r)<<7>>14-(r>>7&15),t?i-32768:i)},this.update=function(n,r,i,a,o,s,u,c){var l=0,f=0,h=0,d=0,p=0,v=0,g=0,m=0,y=0,w=0,b=0,S=0,D=0,x=0;if(x=u<0?1:0,f=32767&o,y=c.yl>>15,S=c.yl>>10&31,D=32+S<<y,b=(w=y>9?31744:D)+(w>>1)>>1,m=0===c.td?0:f<=b?0:1,c.yu=r+(i-r>>5),c.yu<544?c.yu=544:c.yu>5120&&(c.yu=5120),c.yl+=c.yu+(-c.yl>>6),1===m)c.pp[0]=0,c.pp[1]=0,c.zp[0]=0,c.zp[1]=0,c.zp[2]=0,c.zp[3]=0,c.zp[4]=0,c.zp[5]=0,d=0;else for(v=x^c.pk[0],d=c.pp[1]-(c.pp[1]>>7),0!==u&&((g=v?c.pp[0]:-c.pp[0])<-8191?d-=256:d+=g>8191?255:g>>5,x^c.pk[1]?d<=-12160?d=-12288:d>=12416?d=12288:d-=128:d<=-12416?d=-12288:d>=12160?d=12288:d+=128),c.pp[1]=d,c.pp[0]-=c.pp[0]>>8,0!==u&&(0===v?c.pp[0]+=192:c.pp[0]-=192),p=15360-d,c.pp[0]<-p?c.pp[0]=-p:c.pp[0]>p&&(c.pp[0]=p),l=0;l<6;l++)c.zp[l]-=5===n?c.zp[l]>>9:c.zp[l]>>8,32767&o&&((o^c.dq[l])>=0?c.zp[l]+=128:c.zp[l]-=128);for(l=5;l>0;l--)c.dq[l]=c.dq[l-1];return 0===f?c.dq[0]=o>=0?32:64544:(h=e(f,t,15),c.dq[0]=o>=0?(h<<6)+(f<<6>>h):(h<<6)+(f<<6>>h)-1024),c.sr[1]=c.sr[0],0===s?c.sr[0]=32:s>0?(h=e(s,t,15),c.sr[0]=(h<<6)+(s<<6>>h)):s>-32768?(h=e(f=-s,t,15),c.sr[0]=(h<<6)+(f<<6>>h)-1024):c.sr[0]=64544,c.pk[1]=c.pk[0],c.pk[0]=x,c.td=1===m?0:d<-11776?1:0,c.dms+=a-c.dms>>5,c.dml+=(a<<2)-c.dml>>7,1===m?c.ppp=256:r<1536?c.ppp+=512-c.ppp>>4:1===c.td?c.ppp+=512-c.ppp>>4:Math.abs((c.dms<<2)-c.dml)>=c.dml>>3?c.ppp+=512-c.ppp>>4:c.ppp+=-c.ppp>>4,c}},e.Texture=e.Shader=e.Script=e.Queue=e.Program=void 0,e.VideoBufferList=function(){var t=0,e=0,n=null;function r(){t=360,e=240,n=null,this._length=0,this.head=null,this.tail=null,this.curIdx=0}return r.prototype={push:function(t,r,i,a,o,s){var u=new VideoBufferNode(t,r,i,a,o,s);return this._length>0?(this.tail.next=u,u.previous=this.tail,this.tail=u):(this.head=u,this.tail=u),this._length+=1,null!==n&&this._length>=e&&n(),u},pop:function(){var t=null;return this._length>1&&(t=this.head,this.head=this.head.next,null!==this.head?this.head.previous=null:this.tail=null,this._length-=1),t},setMaxLength:function(e){(t=e)>360?t=360:t<30&&(t=30)},setBUFFERING:function(t){(e=t)>240?e=240:e<6&&(e=6)},setBufferFullCallback:function(t){n=t},searchTimestamp:function(t){var e=this.head,n=this._length,r=1;if(0===n||t<=0||null===e)throw new Error("Failure: non-existent node in this list.");for(;null!==e&&(e.timeStamp.timestamp!==t.timestamp||e.timeStamp.timestamp_usec!==t.timestamp_usec);)e=e.next,r++;return n<r?e=null:this.curIdx=r,e},findIFrame:function(t){var e=this.head,n=this._length,r=1;if(0===n)throw new Error("Failure: non-existent node in this list.");for(;r<this.curIdx;)e=e.next,r++;if(!0===t)for(;"I"!==e.frameType;)e=e.next,r++;else for(;"I"!==e.frameType;)e=e.previous,r--;return n<r?e=null:this.curIdx=r,e}},new r},e.debug=void 0,e.formAuthorizationResponse=function(t,e,n,r,i,a){var s=null,u=null;return s=(0,o.default)(t+":"+r+":"+e).toLowerCase(),u=(0,o.default)(a+":"+n).toLowerCase(),(0,o.default)(s+":"+i+":"+u).toLowerCase()},e.stringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(new ArrayBuffer(e)),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n};var i=r(n(1)),a=r(n(2)),o=r(n(65)),s={log:function(){},error:function(){},count:function(){},info:function(){}};e.debug=s;var u=function(){function t(){}return t.createFromElementId=function(e){for(var n=document.getElementById(e),r="",i=n.firstChild;i;)3===i.nodeType&&(r+=i.textContent),i=i.nextSibling;var a=new t;return a.type=n.type,a.source=r,a},t.createFromSource=function(e,n){var r=new t;return r.type=e,r.source=n,r},t}();e.Script=u;var c=function(){return function(t,e){if("x-shader/x-fragment"===e.type)this.shader=t.createShader(t.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==e.type)return void error("Unknown shader type: "+e.type);this.shader=t.createShader(t.VERTEX_SHADER)}t.shaderSource(this.shader,e.source),t.compileShader(this.shader),t.getShaderParameter(this.shader,t.COMPILE_STATUS)||error("An error occurred compiling the shaders: "+t.getShaderInfoLog(this.shader))}}();e.Shader=c;var l=function(){function t(t){this.gl=t,this.program=this.gl.createProgram()}return t.prototype={attach:function(t){this.gl.attachShader(this.program,t.shader)},link:function(){this.gl.linkProgram(this.program)},use:function(){this.gl.useProgram(this.program)},getAttributeLocation:function(t){return this.gl.getAttribLocation(this.program,t)},setMatrixUniform:function(t,e){var n=this.gl.getUniformLocation(this.program,t);this.gl.uniformMatrix4fv(n,!1,e)}},t}();e.Program=l;var f=function(){var t=null;function e(t,e,n){this.gl=t,this.size=e,this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),this.format=n||t.LUMINANCE,t.texImage2D(t.TEXTURE_2D,0,this.format,e.w,e.h,0,this.format,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}return e.prototype={fill:function(t,e){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.size.w,this.size.h,this.format,n.UNSIGNED_BYTE,t):n.texImage2D(n.TEXTURE_2D,0,this.format,this.size.w,this.size.h,0,this.format,n.UNSIGNED_BYTE,t)},bind:function(e,n,r){var i=this.gl;t||(t=[i.TEXTURE0,i.TEXTURE1,i.TEXTURE2]),i.activeTexture(t[e]),i.bindTexture(i.TEXTURE_2D,this.texture),i.uniform1i(i.getUniformLocation(n.program,r),e)}},e}();e.Texture=f;var h=function(){function t(){(0,i.default)(this,t),this.first=null,this.size=0}return(0,a.default)(t,[{key:"enqueue",value:function(t){if(null===this.first)this.first=t;else{for(var e=this.first;null!==e.next;)e=e.next;e.next=t}this.size+=1}},{key:"dequeue",value:function(){var t=null;return null!==this.first&&(t=this.first,this.first=this.first.next,this.size-=1),t}},{key:"clear",value:function(){this.size=0,this.first=null}}]),t}();e.Queue=h},function(t,e,n){var r=n(101),i=n(102),a=n(103),o=n(104);t.exports=function(t){return r(t)||i(t)||a(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(11);function i(t,e,n,r,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=i.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){o[t]={value:t}}),Object.defineProperties(i,o),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=function(t,e,n,o,s,u){var c=Object.create(a);return r.toFlatObject(t,c,function(t){return t!==Error.prototype}),i.call(c,t.message,e,n,o,s),c.name=t.name,u&&Object.assign(c,u),c},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=n(13),d=n(8),p=function(t){(0,o.default)(n,t);var e=f(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).atoms=[],t}return(0,a.default)(n,[{key:"availableAtoms",value:function(){return[]}},{key:"addAtom",value:function(t){this.atoms.push(t)}},{key:"createAtom",value:function(t){var e=d.createAtom(t);return this.addAtom(e),e}},{key:"getAtoms",value:function(t){var e,n=[],r=c(this.atoms);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.type()===t&&n.push(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"getAtom",value:function(t){var e,n=c(this.atoms);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.type()===t)return r}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"parse",value:function(t){for(var e=t.length,n=0;n<e;){var r=t.readUInt32BE(n),i=t.toString("ascii",n+4,n+8);if(0===r)break;if(n+=8,-1!==this.availableAtoms().indexOf(i)){var a=d.createAtom(i);null!==a&&(a.parse(t.slice(n,n+r-8)),this.addAtom(a))}if(!(n+r-8<=e))break;n+=r-8}}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),e+=8;var n,r=c(this.atoms);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.build(t,e),e+=i.bufferSize()}}catch(t){r.e(t)}finally{r.f()}}},{key:"bufferSize",value:function(){return 8+this.atoms.reduce(function(t,e){return t+e.bufferSize()},0)}}]),n}(h);t.exports=p},function(t,e,n){var r=n(3).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"===typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e,n){var r=n(46);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(0),i=r(n(2)),a=r(n(1)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,a.default)(this,n),(t=e.call(this)).compositionOffset=0,t.keyframe=!1,t}return(0,i.default)(n)}(n(39));t.exports=l},function(t,e,n){"use strict";var r=n(0),i=r(n(2)),a=r(n(1)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,a.default)(this,n),e.call(this)}return(0,i.default)(n)}(n(39));t.exports=l},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=4294967295,s=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"readUInt64BE",value:function(t,e){var n=t.readUInt32BE(e),r=t.readUInt32BE(e+4);return n>0&&(r+=n*(o+1)),r}},{key:"writeUInt64BE",value:function(t,e,n){var r=0,i=e;e>o&&(r=e/(o+1)<<0,i=e%(o+1)),t.writeUInt32BE(r,n),t.writeUInt32BE(i,n+4)}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).entries=[],t}return(0,a.default)(n,[{key:"countMultiplier",value:function(){return 1}},{key:"parse",value:function(t){var e=t.readUInt32BE(4);this.entries=new Array(e*this.countMultiplier());for(var n=0,r=this.entries.length;n<r;n++)this.entries[n]=t.readUInt32BE(8+4*n)}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(this.entries.length/this.countMultiplier()<<0,e+12);for(var n=0,r=this.entries.length;n<r;n++)t.writeUInt32BE(this.entries[n],e+16+4*n)}},{key:"bufferSize",value:function(){return 16+4*this.entries.length}}]),n}(n(13));t.exports=l},function(t,e,n){"use strict";var r=n(17);function i(t){r.call(this,null==t?"canceled":t,r.ERR_CANCELED),this.name="CanceledError"}n(11).inherits(i,r,{__CANCEL__:!0}),t.exports=i},function(t,e,n){"use strict";var r=n(0),i=r(n(2)),a=r(n(1)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,a.default)(this,n),(t=e.call(this)).channels=null,t.sampleRate=null,t.sampleSize=null,t}return(0,i.default)(n)}(n(38));t.exports=l},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).width=0,t.height=0,t}return(0,a.default)(n,[{key:"resolution",value:function(){return this.width&&this.height?"".concat(this.width,"x").concat(this.height):""}}]),n}(n(38));t.exports=l},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2)),o=n(41),s=n(192),u=n(193),c=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"create",value:function(t){return t instanceof o?t:t instanceof e?new u(t):new s(t)}}]),t}();t.exports=c}).call(this,n(3).Buffer)},function(t,e,n){"use strict";t.exports={CODEC_AAC:"aac",CODEC_H264:"h264",CODEC_H265:"h265"}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e._setSession=e._setCookie=e._sendEx=e._send=e._outData=e._multicall=e._intelliSchemeMulticall=e._intelliSchemeConfig=e._getSession=e._getCookie=e._dataEx=e._data=e._config=void 0,e.default=function(){this.Global=x.Global(),this.ConfigManager=x.ConfigManager(),this.UserManager=x.UserManager(),this.RecordFinder=x.RecordFinder(),this.DevInit=x.DevInit(),this.Security=x.Security(),this.System=x.System(),this.Encode=x.Encode(),this.MediaFileFind=x.MediaFileFind(),this.PTZ=x.PTZ(),this.WebInit=x.WebInit(),this.DevVideoInput=x.DevVideoInput(),this.MagicBox=x.MagicBox(),this.Storage=x.Storage(),this.LogicDeviceManager=x.LogicDeviceManager()},e.setIP=e.getIP=void 0;var i,a=r(n(20)),o=r(n(47)),s=(r(n(33)),n(128));function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){(0,a.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var l=1,f=0,h=null,d=function(){return f};e._getSession=d;var p=function(t){f=t};e._setSession=p;var v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return c(c({},{method:t,params:e,id:l++,session:d()}),n)};e._data=v;var g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return c(c({},{method:t,params:e,id:l++,session:e.sessionId}),n)};e._dataEx=g;var m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return c(c({},{method:t,params:e,id:l++}),n)};e._outData=m;var y=function(t){var e=t.name,n=void 0===e?[]:e,r=t.channel,i=t.params,a=t.options,o=void 0===a?[]:a,s=t.onlyLocal,u=t.type,c={method:"configManager.".concat(u),params:{name:n},id:l++,session:d()};return(r||0===r)&&(c.params.channel=r-0),null!==i&&void 0!==i&&(c.params.table=i),o&&(c.params.options=o),s&&(c.params.onlyLocal=s.onlyLocal),c};e._config=y;e._intelliSchemeConfig=function(t){var e=t.id,n=t.name,r=void 0===n?[]:n,i=t.channel,a=t.params,o=t.options,s=void 0===o?[]:o,u=t.onlyLocal,c=t.type,f={method:"intelliScheme.".concat(c),params:{name:r},id:l++,session:d()};return e&&(f.params.schemeID=e),(i||0===i)&&(f.params.channel=i-0),a&&(f.params.table=a),s&&(f.params.options=s),u&&(f.params.onlyLocal=u.onlyLocal),f};var w=function(t){var e=t.name,n=void 0===e?[]:e,r=t.channel,i=t.params,a=void 0===i?[]:i,o=t.options,s=void 0===o?[]:o,u=t.type;if(a.length&&n.length!==a.length)throw new Error("multicall params error");return{method:"system.multicall",params:n.map(function(t,e){var n={method:"configManager.".concat(u),params:{name:t},id:l++,session:d()};return(r||0===r)&&(n.params.channel=r-0),a[e]&&(n.params.table=a[e]),s&&(n.params.options=s),n}),id:l++,session:d()}};e._multicall=w;e._intelliSchemeMulticall=function(t){var e=t.id,n=t.name,r=void 0===n?[]:n,i=t.channel,a=t.params,o=void 0===a?[]:a,s=t.options,u=void 0===s?[]:s,c=t.type;if(o.length&&r.length!==o.length)throw new Error("multicall params error");return{method:"system.multicall",params:r.map(function(t,n){var r={method:"intelliScheme.".concat(c),params:{name:t},id:l++,session:d()};return e&&(r.params.schemeID=e),(i||0===i)&&(r.params.channel=i-0),o[n]&&(r.params.table=o[n]),u&&(r.params.options=u),r}),id:l++,session:d()}};var b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/RPC2";return new Promise(function(n,r){(0,o.default)({method:"POST",url:e,headers:{"Content-Type":"application/json","Self-TargetIP":h},data:JSON.stringify(t),dataType:"json"}).then(function(i){(i=i.data).result?(i=i.params&&"/RPC2_Login"!==e?i.params.table?i.params.table:i.params:i,n(i)):i.error&&i.error.code&&(287637504===i.error.code||287637505===i.error.code)?("global.keepAlive"!==t.method&&(0,s.reload)(),r(i)):r(i)}).catch(function(e){e.error&&e.error.code&&(287637504===e.error.code||287637505===e.error.code)?("global.keepAlive"!==t.method&&(0,s.reload)(),r(e)):r(e)})})};e._send=b;var S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/RPC2";return new Promise(function(n,r){(0,o.default)({method:"POST",url:e,headers:{"Content-Type":"application/json","Self-TargetIP":t.params.targetIP},data:JSON.stringify(t),dataType:"json"}).then(function(i){(i=i.data).result?(i=i.params&&"/RPC2_Login"!==e?i.params.table?i.params.table:i.params:i,n(i)):i.error&&i.error.code&&(287637504===i.error.code||287637505===i.error.code)?("global.keepAlive"!==t.method&&(0,s.reload)(),r(i)):r(i)}).catch(function(e){e.error&&e.error.code&&(287637504===e.error.code||287637505===e.error.code)?("global.keepAlive"!==t.method&&(0,s.reload)(),r(e)):r(e)})})};e._sendEx=S;var D=function(t,e,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=t+"="+e+"; "+i};e._setCookie=D;e._getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(-1!==i.indexOf(e))return i.substring(e.length,i.length)}return""};e.setIP=function(t){h=t};e.getIP=function(){return h};var x=(i={},(0,a.default)(i,"Global",function(){return{firstLogin:function(t,e){var n={method:"global.login",params:c(c({},{userName:t,password:"",clientType:"Web5.0"}),e),id:l++};return b(n,"/RPC2_Login").catch(function(t){return p(t.session),t})},secondLogin:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return new Promise(function(i,a){b(v("global.login",c(c({},{userName:t,password:e,clientType:"Web5.0"}),n)),"/RPC2_Login").then(function(e){p(e.session),r?D("WebClientSessionID","",-1):D("WebClientSessionID",d()),D("username",t),i(e)}).catch(function(t){a(t)})})},logout:function(){return b(v("global.logout"))},keepAlive:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return S(g("global.keepAlive",{timeout:t,active:!0,sessionId:e,targetIP:n})).then(function(t){return t})},getCurrentTime:function(){return b(v("global.getCurrentTime")).then(function(t){return t.time})},setCurrentTime:function(t,e){return b(v("global.setCurrentTime",{time:t,tolerance:e}))}}}),(0,a.default)(i,"ConfigManager",function(){return{getConfig:function(t,e,n,r){return"[object Object]"===Object.prototype.toString.call(t)?b(y(c(c({},t),{},{type:"getConfig"}))):t instanceof Array?b(w({name:t,channel:e,params:n,type:"getConfig"})):b(y({name:t,channel:e,params:n,onlyLocal:r,type:"getConfig"}))},setConfig:function(t,e,n,r){return"[object Object]"===Object.prototype.toString.call(t)?b(y(c(c({},t),{},{type:"setConfig"}))):t instanceof Array?b(w({name:t,channel:n,params:e,type:"setConfig",options:r})):b(y({name:t,channel:n,params:e,type:"setConfig",options:r}))},getDefault:function(t,e,n){return"[object Object]"===Object.prototype.toString.call(t)?b(y(c(c({},t),{},{type:"getDefault"}))):t instanceof Array?b(w({name:t,channel:e,params:n,type:"getDefault"})):b(y({name:t,channel:e,params:n,type:"getDefault"}))},instance:function(){return b(v("configManager.factory.instance"))},destroy:function(t){return b(v("configManager.destroy",null,{object:t}))},exportPackConfig:function(t){return b(v("configManager.exportPackConfig",null,{object:t}))},restoreExcept:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return b(v("configManager.restoreExcept",t,{object:e}))},deleteFile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return b(v("configManager.deleteFile",t,{object:e}))},restore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return b(v("configManager.restore",t,{object:e}))},setTemporaryConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;if(t instanceof Array){var n=[];return t.map(function(t){n.push(v("configManager.setTemporaryConfig",t,e))}),b(v("system.multicall",n))}return b(v("configManager.setTemporaryConfig",t,{object:e}))},restoreTemporaryConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;if(t instanceof Array){var n=[];return t.map(function(t){n.push(v("configManager.restoreTemporaryConfig",t,e))}),b(v("system.multicall",n))}return b(v("configManager.restoreTemporaryConfig",t,{object:e}))},saveFile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("configManager.saveFile",t))}}}),(0,a.default)(i,"UserManager",function(){return{getAuthorityList:function(){return b(v("userManager.getAuthorityList"))},getTemporaryToken:function(t){return b(v("userManager.getTemporaryToken",t))},getCaps:function(t){return b(v("userManager.getCaps",null,{object:t}))},addGroup:function(t){return b(v("userManager.addGroup",{group:t}))},deleteGroup:function(t){return b(v("userManager.deleteGroup",{name:t}))},modifyGroup:function(t,e){return b(v("userManager.modifyGroup",{name:t,group:e}))},getGroupInfo:function(t){return b(v("userManager.getGroupInfo",{name:t}))},getGroupInfoAll:function(){return b(v("userManager.getGroupInfoAll"))},addUser:function(t){return b(v("userManager.addUser",{user:t}))},deleteUser:function(t){return b(v("userManager.deleteUser",{name:t}))},modifyUser:function(t,e){return b(v("userManager.modifyUser",{name:t,user:e}))},modifyPassword:function(t,e,n){return b(v("userManager.modifyPassword",{name:t,pwd:e,pwdOld:n}))},modifyPasswordByManager:function(t){var e=t.name,n=t.pwd,r=t.nameManager,i=t.pwdManager,a=t.accountType;return b(v("userManager.modifyPasswordByManager",{name:e,pwd:n,nameManager:r,pwdManager:i,accountType:a}))},getUserInfo:function(t){return b(v("userManager.getUserInfo",{name:t}))},getErrorNo:function(){return b(v("userManager.getErrorNo"))},getUserInfoAll:function(){return b(v("userManager.getUserInfoAll"))},setDefault:function(){return b(v("userManager.setDefault"))},getActiveUserInfoAll:function(){return b(v("userManager.getActiveUserInfoAll"))},getAnonymityInfo:function(t){return b(v("userManager.getUserInfo",t))}}}),(0,a.default)(i,"RecordFinder",function(){return{create:function(t){return b(v("RecordFinder.factory.create",{name:t}))},destroy:function(t){return b(v("RecordFinder.destroy",null,{object:t}))},startFind:function(t,e){return b(v("RecordFinder.startFind",{condition:t},{object:e}))},doFind:function(t,e){return b(v("RecordFinder.doFind",{count:t},{object:e}))},doSeekFind:function(t,e,n){return b(v("RecordFinder.doSeekFind",{offset:t,count:e},{object:n}))},stopFind:function(t){return b(v("RecordFinder.stopFind",null,{object:t}))},getQuerySize:function(t){return b(v("RecordFinder.getQuerySize",null,{object:t}))}}}),(0,a.default)(i,"DevVideoInput",function(){return{instance:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return b(v("devVideoInput.factory.instance",{channel:t}))},getFocusPresets:function(t){return b(v("devVideoInput.getFocusPresets",null,{object:t}))},setFocusPreset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.setFocusPreset",e,{object:t}))},removeFocusPreset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.setFocusPreset",e,{object:t}))},gotoFocusPreset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.setFocusPreset",e,{object:t}))},getCollect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("devVideoInput.factory.getCollect",t))},destroy:function(t){return b(v("devVideoInput.destroy",null,{object:t}))},getCaps:function(t){return b(v("devVideoInput.getCaps",null,{object:t}))},getFocusStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.getFocusStatus",e,{object:t}))},getVideoInStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.getVideoInStatus",e,{object:t}))},adjustFocus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.adjustFocus",e,{object:t}))},stopAutoFocus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.stopAutoFocus",e,{object:t}))},autoFocus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.autoFocus",e,{object:t}))},focusRegion:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.focusRegion",e,{object:t}))},adjustFocusContinuously:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("devVideoInput.adjustFocusContinuously",e,{object:t}))},getCapsEx:function(t,e){return b(v("devVideoInput.getCapsEx",e,{object:t}))},getFishEyeWinInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return b(v("devVideoInput.getFishEyeWinInfo",{winIdSet:t,channel:e}))},setFishEyeEPtz:function(t,e,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return b(v("devVideoInput.setFishEyeEPtz",{winID:t,cmd:e,arg1:n,arg2:r,arg3:i,arg4:a,channel:o}))},resetFocusOptions:function(t,e){return b(v("devVideoInput.resetFocusOptions",e,{object:t}))}}}),(0,a.default)(i,"DevInit",function(){return{getStatus:function(){return b(m("DevInit.getStatus"),"/OutsideCmd")},account:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(m("DevInit.account",{cipher:e,salt:n,content:r}),"/OutsideCmd")},getDevCaps:function(){return b(m("DevInit.getDevCaps"),"/OutsideCmd")},setCurrentTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("DevInit.setCurrentTime",t),"/OutsideCmd")},setLocalityConfig:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("DevInit.setLocalityConfig",{cipher:e,salt:n,content:r}),"/OutsideCmd")},getLocalityConfig:function(){return b(m("DevInit.getLocalityConfig"),"/OutsideCmd")},getCurrentTime:function(){return b(m("DevInit.getCurrentTime",{}),"/OutsideCmd")},access:function(t){var e=t.salt,n=t.cipher,r=t.content;return b(m("DevInit.access",{salt:e,cipher:n,content:r}),"/OutsideCmd")}}}),(0,a.default)(i,"Security",function(){return{getEncryptInfo:function(){return b(v("Security.getEncryptInfo"))},getEncryptInfoOut:function(){return b(m("Security.getEncryptInfo"),"/OutsideCmd")},getConfig:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("Security.getConfig",{cipher:e,salt:n,content:r}))},setConfig:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("Security.setConfig",{cipher:e,salt:n,content:r}))},getDefault:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("configManager.secGetDefault",{cipher:e,salt:n,content:r}))},addUser:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("Security.addUser",{cipher:e,salt:n,content:r}))},addUserPlain:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("Security.addUserPlain",{cipher:e,salt:n,content:r}))},modifyPasswordPlain:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("Security.modifyPasswordPlain",{cipher:e,salt:n,content:r}))},getCaps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("Security.getCaps",t))}}}),(0,a.default)(i,"System",function(){return{multiSec:function(t){var e=t.cipher,n=t.salt,r=t.content;return b(v("system.multiSec",{cipher:e,salt:n,content:r}))},multicall:function(t){return t.forEach(function(t){t.id=l++,t.session=d()}),b(v("system.multicall",t))},listMethod:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("system.listMethod",t))}}}),(0,a.default)(i,"Encode",function(){return{getConfigCaps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("encode.getConfigCaps",t))},getCropCaps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{channel:0};return b(v("encode.getCropCaps",t))},getSmartCaps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("encode.getSmartCaps",t))},getCaps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("encode.getCaps",t))},updateOverlayPicture:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("encode.updateOverlayPicture",t))},getFlexStreamCaps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("encode.getFlexStreamCaps",t))},getNAACaps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("encode.getNAACaps",t))}}}),(0,a.default)(i,"MediaFileFind",function(){return{instance:function(){return b(v("mediaFileFind.factory.create"))},destroy:function(t,e){return b(v("mediaFileFind.destroy",e,{object:t}))},close:function(t,e){return b(v("mediaFileFind.close",e,{object:t}))},getCount:function(t,e){return b(v("mediaFileFind.getCount",e,{object:t}))},setQueryResultOptions:function(t,e){return b(v("mediaFileFind.setQueryResultOptions",e,{object:t}))},findFile:function(t,e){return b(v("mediaFileFind.findFile",e,{object:t}))},findNextFile:function(t,e){return b(v("mediaFileFind.findNextFile",e,{object:t}))}}}),(0,a.default)(i,"PTZ",function(){return{instance:function(t){return b(v("ptz.factory.instance",{channel:t}))},destroy:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.destroy",e,{object:t}))},start:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.start",e,{object:t}))},getPresets:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getPresets",e,{object:t}))},setDirection:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.setDirection",e,{object:t}))},getTours:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getTours",e,{object:t}))},stop:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.stop",e,{object:t}))},restartPtz:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.restartPtz",e,{object:t}))},lensInit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.lensInit",e,{object:t}))},reset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.reset",e,{object:t}))},markLimit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.markLimit",e,{object:t}))},gotoLimit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.gotoLimit",e,{object:t}))},enableLimit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.enableLimit",e,{object:t}))},setScanLimit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.setScanLimit",e,{object:t}))},startScan:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.startScan",e,{object:t}))},stopScan:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.stopScan",e,{object:t}))},getCurrentProtocolCaps:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getCurrentProtocolCaps",e,{object:t}))},removePreset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.removePreset",e,{object:t}))},setPreset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.setPreset",e,{object:t}))},gotoPreset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.gotoPreset",e,{object:t}))},startPatternReplay:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.startPatternReplay",e,{object:t}))},stopPatternReplay:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.stopPatternReplay",e,{object:t}))},startPatternRecord:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.startPatternRecord",e,{object:t}))},stopPatternRecord:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.stopPatternRecord",e,{object:t}))},startTour:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.startTour",e,{object:t}))},stopTour:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.stopTour",e,{object:t}))},focusRegion:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.focusRegion",e,{object:t}))},getOperationStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getOperationStatus",e,{object:t}))},getLifetimeEncrypt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getLifetimeEncrypt",e,{object:t}))},moveDirectly:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.moveDirectly",e,{object:t}))},getProtocolList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getProtocolList",e,{object:t}))},getProtocol:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getProtocol",e,{object:t}))},getStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.getStatus",e,{object:t}))},moveAbsolutely:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(v("ptz.moveAbsolutely",e,{object:t}))}}}),(0,a.default)(i,"WebInit",function(){return{getCaps:function(){return b(m("WebInit.getCaps",null),"/OutsideCmd")}}}),(0,a.default)(i,"MagicBox",function(){return{instance:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("magicBox.factory.instance",t))},getProductDefinition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return b(v("magicBox.getProductDefinition",{name:t}))}}}),(0,a.default)(i,"Storage",function(){return{instance:function(){return b(v("storage.factory.instance"))},destroy:function(t,e){return b(v("storage.destroy",e,{object:t}))},getDeviceNames:function(t,e){return b(v("storage.getDeviceNames",e,{object:t}))},getGroupNames:function(t,e){return b(v("storage.getGroupNames",e,{object:t}))},getDirectoryPaths:function(t,e){return b(v("storage.getDirectoryPaths",e,{object:t}))},getFileInfo:function(t,e){return b(v("storage.getFileInfo",e,{object:t}))},addFileInfo:function(t,e){return b(v("storage.addFileInfo",e,{object:t}))},attachAddFileInfoState:function(t,e){return b(v("storage.attachAddFileInfoState",e,{object:t}))},detachAddFileInfoState:function(t,e){return b(v("storage.detachAddFileInfoState",e,{object:t}))},markFile:function(t){return b(v("storage.markFile",t))},getiSCSITargets:function(t,e){return b(v("storage.getiSCSITargets",e,{object:t}))},secGetiSCSITargets:function(t,e){return b(v("storage.secGetiSCSITargets",e,{object:t}))},getPortInfo:function(t,e){return b(v("storage.getPortInfo",e,{object:t}))},getStreamUri:function(t,e){return b(v("storage.getStreamUri",e,{object:t}))},testNAS:function(t,e){return b(v("storage.testNAS",e,{object:t}))},secTestNAS:function(t,e){return b(v("storage.secTestNAS",e,{object:t}))},getBoundTime:function(t,e){return b(v("storage.getBoundTime",e,{object:t}))},getBoundTimeEx:function(t,e){return b(v("storage.getBoundTimeEx",e,{object:t}))},getBitmap:function(t,e){return b(v("storage.getBitmap",e,{object:t}))},getBitmapEx:function(t,e){return b(v("storage.getBitmapEx",e,{object:t}))},getiSCSITargetsAll:function(t,e){return b(v("storage.getiSCSITargetsAll",e,{object:t}))},getCaps:function(t,e){return b(v("storage.getCaps",e,{object:t}))},attachRecordInfo:function(t,e){return b(v("storage.attachRecordInfo",e,{object:t}))},detachRecordInfo:function(t,e){return b(v("storage.detachRecordInfo",e,{object:t}))},getDeviceAllInfo:function(t,e){return b(v("storage.getDeviceAllInfo",e,{object:t}))},getTankInfo:function(t,e){return b(v("storage.getTankInfo",e,{object:t}))},startHealthcheck:function(t,e){return b(v("storage.startHealthcheck",e,{object:t}))},getHealthcheckProcess:function(t,e){return b(v("storage.getHealthcheckProcess",e,{object:t}))},getHealthStatusEx:function(t,e){return b(v("storage.getHealthStatusEx",e,{object:t}))}}}),(0,a.default)(i,"LogicDeviceManager",function(){return{getCameraAll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return b(v("LogicDeviceManager.getCameraAll",{params:t}))}}}),i)},function(t,e,n){"use strict";(function(e){var r=n(11),i=n(112),a=n(17),o=n(51),s=n(52),u={"Content-Type":"application/x-www-form-urlencoded"};function c(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l={transitional:o,adapter:function(){var t;return"undefined"!==typeof XMLHttpRequest?t=n(53):"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e)&&(t=n(53)),t}(),transformRequest:[function(t,e){if(i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return c(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n,a=r.isObject(t),o=e&&e["Content-Type"];if((n=r.isFileList(t))||a&&"multipart/form-data"===o){var u=this.env&&this.env.FormData;return s(n?{"files[]":t}:t,u&&new u)}return a||"application/json"===o?(c(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||l.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(o){if("SyntaxError"===t.name)throw a.from(t,a.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(123)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){l.headers[t]={}}),r.forEach(["post","put","patch"],function(t){l.headers[t]=r.merge(u)}),t.exports=l}).call(this,n(50))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={},i=-1,a={publish:function(t,e){if(!r[t])return!1;for(var n=r[t],i=n?n.length:0;i--;)n[i].func(e);return this},subscribe:function(t,e){r[t]||(r[t]=[]);var n=(++i).toString();return r[t].push({token:n,func:e}),n},unsubscribe:function(t){for(var e in r)if(r[e])for(var n=0,i=r[e].length;n<i;n++)if(r[e][n].token===t)return r[e].splice(n,1),t},getTopicFunc:function(t){return r[t]?r[t]:[]}};e.default=a},function(t,e){t.exports={InvalidAsn1Error:function(t){var e=new Error;return e.name="InvalidAsn1Error",e.message=t||"",e}}},function(t,e){t.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(t,e,n){"use strict";var r=n(143);t.exports=Function.prototype.bind||r},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2));function o(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u=n(26),c=n(27),l=function(){function t(){(0,i.default)(this,t),this.duration=0,this.timescale=0,this.tracks=[]}return(0,a.default)(t,[{key:"relativeDuration",value:function(){return this.timescale?this.duration/this.timescale:this.duration||0}},{key:"resolution",value:function(){var t=this.videoTrack();return null!==t?t.resolution():""}},{key:"size",value:function(){return this.tracks.reduce(function(t,e){return t+e.size()},0)}},{key:"addTrack",value:function(t){this.tracks.push(t)}},{key:"videoTrack",value:function(){var t,e=o(this.tracks);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n instanceof c)return n}}catch(t){e.e(t)}finally{e.f()}return null}},{key:"audioTrack",value:function(){var t,e=o(this.tracks);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n instanceof u)return n}}catch(t){e.e(t)}finally{e.f()}return null}},{key:"samples",value:function(){return[this.videoTrack(),this.audioTrack()].filter(function(t){return null!==t}).map(function(t){return t.samples}).reduce(function(t,e){return t.concat(e)},[]).sort(function(t,e){return t.timescale===e.timescale?t.timestamp-e.timestamp:t.timestamp*e.timescale-e.timestamp*t.timescale})}},{key:"ensureDuration",value:function(){var t=this;return 0===this.duration&&(this.duration=this.tracks.reduce(function(e,n){return Math.max(e,t.timescale*n.relativeDuration())},0)),this.duration}}]),t}();t.exports=l},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=function(){function t(){(0,i.default)(this,t),this.duration=0,this.timescale=0,this.extraData=null,this.codec=null,this.samples=[]}return(0,a.default)(t,[{key:"relativeDuration",value:function(){return this.timescale?this.duration/this.timescale:this.duration||0}},{key:"size",value:function(){return this.samples.reduce(function(t,e){return t+e.size},0)}},{key:"ensureDuration",value:function(){return 0===this.duration&&(this.duration=this.samples.reduce(function(t,e){return Math.max(t,e.duration)},0)),this.duration}},{key:"sortSamples",value:function(){this.samples.sort(function(t,e){return t.timestamp-e.timestamp})}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=function(){function t(){(0,i.default)(this,t),this.timestamp=0,this.timescale=0,this.size=0,this.offset=0}return(0,a.default)(t,[{key:"relativeTimestamp",value:function(){return this.timescale?this.timestamp/this.timescale:this.timestamp}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=function(){function t(){(0,i.default)(this,t),this.timestamp=0,this.duration=0,this.timescale=0,this.videoExtraData=null,this.audioExtraData=null,this.samples=[]}return(0,a.default)(t,[{key:"hasVideo",value:function(){return null!==this.videoExtraData}},{key:"hasAudio",value:function(){return null!==this.audioExtraData}},{key:"relativeTimestamp",value:function(){return this.timescale?this.timestamp/this.timescale:this.timestamp}},{key:"relativeDuration",value:function(){return this.timescale?this.duration/this.timescale:this.duration||0}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,[{key:"size",value:function(){}},{key:"read",value:function(){}}]),t}();t.exports=o},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).width=null,t.height=null,t.extraData=null,t}return(0,a.default)(n,[{key:"extraType",value:function(){}},{key:"parse",value:function(t){var e=24;for(this.width=t.readUInt16BE(e),e+=2,this.height=t.readUInt16BE(e),e+=52;e<t.length-8;){var n=t.readUInt32BE(e);e+=4;var r=t.toString("ascii",e,e+4);if(e+=4,0===n)break;if(r===this.extraType()){this.extraData=t.slice(e-4,e+n-4);break}e+=n-8}}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt16BE(1,e+14),t.writeUInt32BE(1,e+20),t.writeUInt16BE(this.width,e+32),t.writeUInt16BE(this.height,e+34),t.writeUInt32BE(72<<16,e+36),t.writeUInt32BE(72<<16,e+40),t.writeUInt16BE(1,e+48),t.write(f.COMPRESSOR_NAME.substring(0,16),e+50),t.writeUInt16BE(24,e+82),t.writeUInt16BE(65535,e+84),t.writeUInt32BE(this.extraData.length+4,e+86),t.write(this.extraType(),e+90),this.extraData.copy(t,e+94,4)}},{key:"bufferSize",value:function(){return 90+this.extraData.length}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o={mp4a:n(199),avcC:n(200),hvcC:n(201)},s=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"parse",value:function(t){var e=t.toString("ascii",0,4),n=o[e];if(n){var r=new n(t.slice(4,t.length));return r.parse(),r}throw new Error("Unknown codec name ".concat(e))}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,[{key:"type",value:function(){}},{key:"parse",value:function(){}},{key:"codec",value:function(){}}]),t}();t.exports=o},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(14).default,i=n(106);t.exports=function(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){t.exports=n(107)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(11);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var a;if(n)a=n(e);else if(r.isURLSearchParams(e))a=e.toString();else{var o=[];r.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))}))}),a=o.join("&")}if(a){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},function(t,e,n){"use strict";(function(e){var r=n(11);t.exports=function(t,n){n=n||new FormData;var i=[];function a(t){return null===t?"":r.isDate(t)?t.toISOString():r.isArrayBuffer(t)||r.isTypedArray(t)?"function"===typeof Blob?new Blob([t]):e.from(t):t}return function t(e,o){if(r.isPlainObject(e)||r.isArray(e)){if(-1!==i.indexOf(e))throw Error("Circular reference detected in "+o);i.push(e),r.forEach(e,function(e,i){if(!r.isUndefined(e)){var s,u=o?o+"."+i:i;if(e&&!o&&"object"===typeof e)if(r.endsWith(i,"{}"))e=JSON.stringify(e);else if(r.endsWith(i,"[]")&&(s=r.toArray(e)))return void s.forEach(function(t){!r.isUndefined(t)&&n.append(u,a(t))});t(e,u)}}),i.pop()}else n.append(o,a(e))}(t),n}}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=n(11),i=n(116),a=n(117),o=n(49),s=n(54),u=n(120),c=n(121),l=n(51),f=n(17),h=n(25),d=n(122);t.exports=function(t){return new Promise(function(e,n){var p,v=t.data,g=t.headers,m=t.responseType;function y(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}r.isFormData(v)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var w=new XMLHttpRequest;if(t.auth){var b=t.auth.username||"",S=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(b+":"+S)}var D=s(t.baseURL,t.url);function x(){if(w){var r="getAllResponseHeaders"in w?u(w.getAllResponseHeaders()):null,a={data:m&&"text"!==m&&"json"!==m?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:r,config:t,request:w};i(function(t){e(t),y()},function(t){n(t),y()},a),w=null}}if(w.open(t.method.toUpperCase(),o(D,t.params,t.paramsSerializer),!0),w.timeout=t.timeout,"onloadend"in w?w.onloadend=x:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(x)},w.onabort=function(){w&&(n(new f("Request aborted",f.ECONNABORTED,t,w)),w=null)},w.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,t,w,w)),w=null},w.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||l;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new f(e,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,t,w)),w=null},r.isStandardBrowserEnv()){var _=(t.withCredentials||c(D))&&t.xsrfCookieName?a.read(t.xsrfCookieName):void 0;_&&(g[t.xsrfHeaderName]=_)}"setRequestHeader"in w&&r.forEach(g,function(t,e){"undefined"===typeof v&&"content-type"===e.toLowerCase()?delete g[e]:w.setRequestHeader(e,t)}),r.isUndefined(t.withCredentials)||(w.withCredentials=!!t.withCredentials),m&&"json"!==m&&(w.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&w.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){w&&(n(!t||t&&t.type?new h:t),w.abort(),w=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),v||(v=null);var I=d(D);I&&-1===["http","https","file"].indexOf(I)?n(new f("Unsupported protocol "+I+":",f.ERR_BAD_REQUEST,t)):w.send(v)})}},function(t,e,n){"use strict";var r=n(118),i=n(119);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function a(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function o(t){if(!r.isUndefined(e[t]))return i(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function u(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(t).concat(Object.keys(e)),function(t){var e=c[t]||a,i=e(t);r.isUndefined(i)&&e!==u||(n[t]=i)}),n}},function(t,e){t.exports={version:"0.27.2"}},function(t,e,n){"use strict";(function(e){var r=n(136)();function i(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function a(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(146),s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function f(t){return!a(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=y,d=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(o.isFunction(t)){if(c)return t.name;var e=t.toString().match(d);return e&&e[1]}}function v(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(c||!o.isFunction(t))return o.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function m(t,e,n,r,i){throw new h.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function y(t,e){t||m(t,!0,e,"==",h.ok)}function w(t,e,n,r){if(t===e)return!0;if(a(t)&&a(e))return 0===i(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(f(t)&&f(e)&&l(t)===l(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(a(t)!==a(e))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==s&&s===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=b(t),a=b(e);if(i&&!a||!i&&a)return!1;if(i)return t=u.call(t),e=u.call(e),w(t,e,n);var s,c,l=x(t),f=x(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(s=l[c],!w(t[s],e[s],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function S(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function D(t,e,n,r){var i;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&m(i,n,"Missing expected exception"+r);var a="string"===typeof r,s=!t&&i&&!n;if((!t&&o.isError(i)&&a&&S(i,n)||s)&&m(i,n,"Got unwanted exception"+r),t&&i&&n&&!S(i,n)||!t&&i)throw i}h.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=v(g((e=this).actual),128)+" "+e.operator+" "+v(g(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,a=p(n),o=i.indexOf("\n"+a);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},o.inherits(h.AssertionError,Error),h.fail=m,h.ok=y,h.equal=function(t,e,n){t!=e&&m(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&m(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){w(t,e,!1)||m(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){w(t,e,!0)||m(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){w(t,e,!1)&&m(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,r){w(e,n,!0)&&m(e,n,r,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&m(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&m(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){D(!0,t,e,n)},h.doesNotThrow=function(t,e,n){D(!1,t,e,n)},h.ifError=function(t){if(t)throw t},h.strict=r(function t(e,n){e||m(e,!0,n,"==",t)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var x=Object.keys||function(t){var e=[];for(var n in t)s.call(t,n)&&e.push(n);return e}}).call(this,n(32))},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e,n){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=SyntaxError,i=Function,a=TypeError,o=function(t){try{return i('"use strict"; return ('+t+").constructor;")()}catch(t){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(t){s=null}var u=function(){throw new a},c=s?function(){try{return arguments.callee,u}catch(t){try{return s(arguments,"callee").get}catch(t){return u}}}():u,l=n(141)(),f=n(142)(),h=Object.getPrototypeOf||(f?function(t){return t.__proto__}:null),d={},p="undefined"!==typeof Uint8Array&&h?h(Uint8Array):void 0,v={"%AggregateError%":"undefined"===typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":l&&h?h([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"===typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l&&h?h(h([][Symbol.iterator]())):void 0,"%JSON%":"object"===typeof JSON?JSON:void 0,"%Map%":"undefined"===typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&l&&h?h((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?void 0:Promise,"%Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&l&&h?h((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l&&h?h(""[Symbol.iterator]()):void 0,"%Symbol%":l?Symbol:void 0,"%SyntaxError%":r,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet};if(h)try{null.error}catch(t){var g=h(h(t));v["%Error.prototype%"]=g}var m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(36),w=n(144),b=y.call(Function.call,Array.prototype.concat),S=y.call(Function.apply,Array.prototype.splice),D=y.call(Function.call,String.prototype.replace),x=y.call(Function.call,String.prototype.slice),_=y.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,E=function(t,e){var n,i=t;if(w(m,i)&&(i="%"+(n=m[i])[0]+"%"),w(v,i)){var s=v[i];if(s===d&&(s=function t(e){var n;if("%AsyncFunction%"===e)n=o("async function () {}");else if("%GeneratorFunction%"===e)n=o("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=o("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&h&&(n=h(i.prototype))}return v[e]=n,n}(i)),"undefined"===typeof s&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new r("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new a('"allowMissing" argument must be a boolean');if(null===_(/^%?[^%]*%?$/,t))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=x(t,0,1),n=x(t,-1);if("%"===e&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return D(t,I,function(t,e,n,r){i[i.length]=n?D(r,T,"$1"):e||t}),i}(t),i=n.length>0?n[0]:"",o=E("%"+i+"%",e),u=o.name,c=o.value,l=!1,f=o.alias;f&&(i=f[0],S(n,b([0,1],f)));for(var h=1,d=!0;h<n.length;h+=1){var p=n[h],g=x(p,0,1),m=x(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new r("property names with quotes must have matching quotes");if("constructor"!==p&&d||(l=!0),w(v,u="%"+(i+="."+p)+"%"))c=v[u];else if(null!=c){if(!(p in c)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(s&&h+1>=n.length){var y=s(c,p);c=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[p]}else d=w(c,p),c=c[p];d&&!l&&(v[u]=c)}}return c}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.GetFirstWeekBegDay=v,e.GetWeekIndex=function(t){var e=v(t.getFullYear());t<e&&(e=v(t.getFullYear()-1));var n=Math.floor((t.valueOf()-e.valueOf())/864e5);return Math.floor(n/7)+1},e.arrayInclude=e.arrayErase=e.ajax=void 0,e.chkMutilCallRet=function(t,e){var n=!0;if(Array.isArray(t)){var r=f(t,function(t){return t&&!t.result}).length;n=e?r!==t.length:!r}return n},e.clone=function t(e){var n;if("object"===(0,i.default)(e))if(null===e)n=null;else if(Array.isArray(e)){n=[];for(var r=0,a=e.length;r<a;r++)n.push(t(e[r]))}else for(var o in n={},e)n[o]=t(e[o]);else n=e;return n},e.debounce=e.copy=void 0,e.formatDate=h,e.getBeginDateOfWeek=function(t,e){var n=v(t),r=7*(e-1)*24*36e5,i=n;return i.setTime(n.valueOf()+r),h(i,"yyyy-MM-dd")},e.getBrowserInfo=void 0,e.getEndDateOfWeek=function(t,e){var n=v(t),r=7*(e-1)*24*36e5,i=n;return i.setTime(n.valueOf()+5184e5+r),h(i,"yyyy-MM-dd")},e.getMonthDays=p,e.getMonthEndDate=function(t,e){return h(new Date(t,e,p(t,e)),"yyyy-MM-dd")},e.getMonthStartDate=function(t,e){return h(new Date(t,e,1),"yyyy-MM-dd")},e.getQuarterEndDate=function(t,e){switch(e){case 1:return t+"-03-31";case 2:return t+"-06-30";case 3:return t+"-09-30";case 4:return t+"-12-31"}},e.getQuarterStartDate=function(t,e){switch(e){case 1:return t+"-01-01";case 2:return t+"-04-01";case 3:return t+"-07-01";case 4:return t+"-10-01"}},e.getType=void 0,e.grep=f,e.iframe=void 0,e.isEmptyRect=function(t){if(!Array.isArray(t))return!0;if(2!==t.length)return!0;if(!Array.isArray(t[0]))return!0;if(!Array.isArray(t[1]))return!0;if(t[0][0]||t[0][1]||t[1][0]||t[1][1])return!1;return!1},e.isZeroArray=function(t){if(Array.isArray(t)){var e=t.toString().split(","),n=Math.max.apply(null,e),r=Math.min.apply(null,e);return 0===n&&0===r}return!0},e.translation=e.tl=e.throttle=e.setLanguage=e.setDocumentContains=e.playMode=void 0;var i=r(n(14)),a=n(30),o=void 0,s=1e3,u={},c=function(t){return Object.prototype.toString.call(t).replace(/^\[object |\]$/g,"")};e.getType=c;e.copy=function t(e,n){for(var r in n||(n=e,e="Array"===c(e)?[]:{}),n)"Array"===c(n[r])?(e[r]=e[r]||[],t(e[r],n[r])):"Object"===c(n[r])?(e[r]=e[r]||{},t(e[r],n[r])):e[r]=n[r];return e};var l={devNotify:{comet:!1,form:"",topics:{},initComet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!1===this.comet){var e="/SubscribeNotify.cgi?sessionId="+t;WebApp.httpOnly&&(e="/SubscribeNotify.cgi"),this.sessionID=t;var n=document.createElement("iframe");n.setAttribute("id","comet_iframe_new"),n.setAttribute("src",e),n.style.display="none",document.body.appendChild(n),this.iframe=n,window.receiveMessage=this.publish.bind(this),this.comet=!0}else window.receiveMessage=this.publish.bind(this)},subscribe:function(t,e){this.topics[t]||(this.topics[t]=new Set),this.topics[t].add(e)},publish:function(t){var e=t.method;if(this.topics[e])try{this.topics[e].forEach(function(e){e(t.params)})}catch(t){}},detach:function(t,e){e?this.topics[t]&&this.topics[t].delete(e):delete this.topics[t]},reconnect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.iframe.src="/SubscribeNotify.cgi?sessionId="+t,WebApp.httpOnly&&(this.iframe.src="/SubscribeNotify.cgi")}}};function f(t,e,n){for(var r=[],i=0,a=t.length,o=!n;i<a;i++)!e(t[i],i)!==o&&r.push(t[i]);return r}function h(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var r in n)if(new RegExp("(".concat(r,")")).test(e)){var i=n[r]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?i:d(i))}return e}function d(t){return("00"+t).substr(t.length)}function p(t,e){var n=new Date(t,e,1);return(new Date(t,e+1,1)-n)/864e5}function v(t){var e=new Date(t,0,1),n=e.getDay();return 1===n?e:(n=0===n?7:n,e=e.setDate(e.getDate()+(8-n)),new Date(e))}e.iframe=l;var g=function(){var t=navigator.userAgent.toLowerCase(),e=navigator.platform.toLowerCase(),n=t.match(/(opera|ie|trident|firefox|chrome|version)[\s/:]([\w\d.]+)?.*?(safari|version[\s/:]([\w\d.]+)|rv:(\d.?)|$)/)||[null,"unknown",0],r=("ie"===n[1]||"trident"===n[1])&&document.documentMode,i={name:"version"===n[1]?n[3]:"trident"===n[1]?"ie":n[1],version:r||parseFloat("opera"===n[1]&&n[4]?n[4]:"trident"===n[1]&&n[5]?n[5]:n[2]),Platform:{name:t.match(/ip(?:ad|od|hone)/)?"ios":(t.match(/(?:webos|android)/)||e.match(/mac|win|linux/)||["other"])[0]}};return i[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.Platform[i.Platform.name]=!0,i};e.getBrowserInfo=g;var m=g(),y=m.chrome&&m.version>=42||m.firefox&&m.version>=52?"H5":"ocx";e.playMode=y;e.ajax=function(t){var e=Object.assign({},{params:null,session:(0,a._getSession)(),id:s++},{method:t.url});if(t.data=JSON.stringify(e),t.url="RPC2",t.method="post",t.callback=t.callback||"",t.async=t.async||!1,"get"===t.method.toLowerCase()){if("object"===(0,i.default)(t.data))for(var n in t.data=[],t.data)t.data.push(n+"="+t.data[n]),t.data.join("&");t.url+=(t.url.indexOf(!1)?"?":"")+t.data}if("post"===t.method.toLowerCase()&&"object"===(0,i.default)(t.data)){var r=[];for(var o in t.data)r.push(o+"="+t.data[o]);t.data=r.join("&")}var u=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");function c(){200===u.status?t.callback&&t.callback(u.responseText):t.callback&&t.callback("error:"+u.status+u.statusText)}u.open(t.method,t.url,t.async),"post"===t.method?(u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(t.data)):u.send(null),!0===t.async&&(u.onreadystatechange=function(){4===u.readyState&&c()}),!1===t.async&&c()};e.throttle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];clearTimeout(n),r.persist&&r.persist(),n=setTimeout(function(){t.call.apply(t,[o,r].concat(a))},e)}};e.debounce=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];e&&(clearTimeout(e),e=setTimeout(function(){t.call.apply(t,[o].concat(i))},n))}};e.arrayInclude=function(t,e){e.includes(t)||e.push(t)};e.arrayErase=function(t,e){for(var n=e.length;n--;)e[n]===t&&e.splice(n,1)};e.setDocumentContains=function(){Document.prototype.contains||(Document.prototype.contains=function(t){var e=t.parentNode;do{if(e===this)return!0;e=e.parentNode}while(null!==e);return!1})};e.translation=function(t){function e(e){if("function"===typeof t)return t(e)||"";if(function(t){if("object"!==(0,i.default)(t)||null===t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}(t))return t[e]||"";if("function"===typeof w){var n=e.split(/[\[\]]/),r=w(n[0]),a=n[1]-0;if(!isNaN(a)){var o=r.split("|");r=o[a]}return r}return e}document.querySelectorAll("[t]").forEach(function(t,n){var r=t,i=r.getAttribute("t");i&&i.split(";").forEach(function(t,n){var i=t.split("::"),a="";1===i.length?(i[0].split("+").forEach(function(t,n){a+=e(t)}),"INPUT"===r.tagName?r.setAttribute("value",a):r.innerHTML=a):(i[1].split("+").forEach(function(t,n){a+=e(t)}),r.setAttribute(i[0],a))})})};var w=function(t,e){var n=u&&(u[t]||"").trim()||t,r=["s"],i=0;return void 0===e?n:n=n.replace(/(%+)([A-Za-z]{1})/g,function(t,n,a){return t.length>2?t.substr(1,t.length-1):r.indexOf(a)>-1?e instanceof Array?e[i]?e[i++]:e[--i]:0==e||e?e:t:t})};e.tl=w;e.setLanguage=function(t){u=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PluginCanvasES6=void 0;var r=n(64),i=n(153),a=n(154),o=n(155),s=n(156),u=n(157),c=n(158),l=n(159),f=n(160),h=n(161),d=n(162),p=n(163),v=n(164),g=n(165),m=n(166),y=n(167),w=n(9),b=n(10),S=n(12),D=n(168);e.PluginCanvasES6=function(){var t={strokeColor:"#0000FF",selectedColor:"#FFFF00",lineWidth:1,font:"normal normal 100 10px arial",closeEnable:!0},e=this;this.beginPoint="",this.tempShape="",this.tempData="",this.tempDataCopy="",this.parents={};var n={contextmenuFun:function(t){t.preventDefault()}};this.init=function(D,x){for(var _ in e.canvasDom||(e.canvasDom=D,e.ctx=e.canvasDom.getContext("2d"),e.ctx.font=t.font,b.jQlib.getWidth(e.canvasDom),b.jQlib.getHeight(e.canvasDom),e.coordinate={widthDraw:b.jQlib.getWidth(e.canvasDom)/w.util.defalutCoordinate.width,heightDraw:b.jQlib.getHeight(e.canvasDom)/w.util.defalutCoordinate.height,widthMouse:w.util.defalutCoordinate.width/b.jQlib.getWidth(e.canvasDom),heightMouse:w.util.defalutCoordinate.height/b.jQlib.getHeight(e.canvasDom)},t.maxPoly=[[0,0],[b.jQlib.getWidth(e.canvasDom)*e.coordinate.widthMouse,0],[b.jQlib.getWidth(e.canvasDom)*e.coordinate.widthMouse,b.jQlib.getHeight(e.canvasDom)*e.coordinate.heightMouse],[0,b.jQlib.getHeight(e.canvasDom)*e.coordinate.heightMouse]],e.eventFunc=x),w.util.eventEnabled=!0,e.shape={},e.shape.circleShape=new r.CircleShape,e.shape.lineShape=new i.LineShape,e.shape.rectShape=new a.RectShape,e.shape.polyShape=new o.PolyShape,e.shape.ellipseShape=new s.EllipseShape,e.shape.textShape=new c.TextShape,e.shape.laneShape=new u.LaneShape,e.shape.motionDetectShape=new l.MotionDetectShape,e.shape.reSpotShape=new f.ReSpotShape,e.shape.rhombusShape=new h.RhombusShape,e.shape.rectADShape=new d.RectADShape,e.shape.parkingLotShape=new p.ParkingLotShape,e.shape.crossLineShape=new v.CrossLine,e.shape.waterLevelShape=new g.WaterLevel,e.shape.rectRotatableShape=new m.RectRotatableShape,e.shape.imageShape=new y.ImageShape,e.shape)e.shape[_].init(e.canvasDom,e.ctx,e.drawShape,x,e.coordinate);S.EventManager.off(e.canvasDom,"contextmenu").on(e.canvasDom,"contextmenu",n.contextmenuFun)},this.addChangeShapeEvent=function(){var t=null,n={},r=!1,i=[];S.EventManager.off(e.canvasDom,"mousedown.move").on(e.canvasDom,"mousedown.move",function(a){if(r=!1,e.beginPoint=null,1!==w.util.drawState){b.jQlib.each(e.shape,function(t,e){w.util.setUnSelected(e.data)}),w.util.moveFlag=!1,w.util.resizeFlag=!1;var o=[];b.jQlib.each(e.shape,function(t,e){o=o.concat(e.data)}),o.sort(w.util.compareDesc),b.jQlib.each(o,function(r,o){if(e.tempData=e.shape[o.option.type+"Shape"].checkOnPoint(a,o),!1!==e.tempData)return w.util.resizeFlag=!0,i=e.parents[e.tempData.data.shapeId],e.tempShape=e.shape[o.option.type+"Shape"],e.tempData.data.option.zindex=w.util.zindex++,e.tempDataCopy=b.jQlib.extend(!0,{},e.tempData),!1;if("rhombus"===o.option.type){var s=e.shape.rhombusShape.checkOnLine(a,o);if(s)return w.util.moveFlag=!0,t=null,e.tempShape=e.shape[o.option.type+"Shape"],e.tempData=s,e.tempData.data.option.zindex=w.util.zindex++,e.beginPoint=[Math.round((a.clientX-w.util.offset(e.canvasDom).left+window.scrollX)*e.coordinate.widthMouse),Math.round((a.clientY-w.util.offset(e.canvasDom).top+window.scrollY)*e.coordinate.heightMouse)],e.tempDataCopy=b.jQlib.extend(!0,{},s),!1}if(e.tempData=e.shape[o.option.type+"Shape"].checkSelected(a,o),e.tempData){w.util.moveFlag=!0;var u=e.tempData.data.shapeId;e.beginPoint=[Math.round((a.clientX-w.util.offset(e.canvasDom).left+window.scrollX)*e.coordinate.widthMouse),Math.round((a.clientY-w.util.offset(e.canvasDom).top+window.scrollY)*e.coordinate.heightMouse)];var c=e.getParent(u);return c&&c.children&&c.children.length>0?(t={},n={},e.shape[e.getShapeById(c.parentId).option.type+"Shape"],t.parentShapeData=e.getShapeById(c.parentId),e.tempShape=e.shape[t.parentShapeData.option.type+"Shape"],e.tempData.data=t.parentShapeData,t.childrenShapeData=[],e.tempData.data.option.zindex=w.util.zindex++,b.jQlib.each(c.children,function(n,r){var i=e.getShapeById(r);i.option.zindex=w.util.zindex++,i.option.selected=!0,t.childrenShapeData.push(i)}),e.beginPoint=[Math.round((a.clientX-w.util.offset(e.canvasDom).left+window.scrollX)*e.coordinate.widthMouse),Math.round((a.clientY-w.util.offset(e.canvasDom).top+window.scrollY)*e.coordinate.heightMouse)],n=b.jQlib.extend(!0,{},t)):(t=null,e.tempShape=e.shape[o.option.type+"Shape"],e.tempData.data.option.zindex=w.util.zindex++,e.beginPoint=[Math.round((a.clientX-w.util.offset(e.canvasDom).left+window.scrollX)*e.coordinate.widthMouse),Math.round((a.clientY-w.util.offset(e.canvasDom).top+window.scrollY)*e.coordinate.heightMouse)],e.tempDataCopy=b.jQlib.extend(!0,{},e.tempData)),!1}}),e.drawShape()}}),S.EventManager.off(e.canvasDom,"mousemove.move").on(e.canvasDom,"mousemove.move",function(a){if(w.util.resizeFlag&&e.tempData.data.option.resizeEnable){if(r=!0,"poly"===e.tempData.data.option.type&&i&&i.length>0){var o=e.tempDataCopy.point,s=b.jQlib.extend(!0,[],e.tempData.data.data),u=[Math.round((a.clientX-w.util.offset(e.canvasDom).left+window.scrollX)*e.coordinate.widthMouse),Math.round((a.clientY-w.util.offset(e.canvasDom).top+window.scrollY)*e.coordinate.heightMouse)];s[o]=u;var c=o-1,l=o+1;c<0&&(c=e.tempData.data.data.length-1),l>e.tempData.data.data.length-1&&(l=0);var f=[];f[0]=[e.tempData.data.data[c],e.tempData.data.data[o]],f[1]=[e.tempData.data.data[o],e.tempData.data.data[l]];var h=[];h[0]=[s[c],s[o]],h[1]=[s[o],s[l]];for(var d=0;d<i.length;d++){var p=e.getShapeById(i[d]);if(p&&"line"===p.option.type){var v=w.util.lineCross(p.data,f),g=w.util.lineCross(p.data,h);if(!0===v&&!0===g)return}}}e.tempShape.resizeShape(e.tempDataCopy.point,a,e.tempData.data)}else if(w.util.moveFlag&&e.tempData.data.option.moveEnable)if(r=!0,t){if(e.shape[t.parentShapeData.option.type+"Shape"].moveShape(e.beginPoint,n.parentShapeData,a,t.parentShapeData))for(var m=0;m<t.childrenShapeData.length;m++){var y=t.childrenShapeData[m],S=n.childrenShapeData[m];e.shape[y.option.type+"Shape"].moveShape(e.beginPoint,S,a,y,!0)}}else e.tempShape.moveShape(e.beginPoint,e.tempDataCopy.data,a,e.tempData.data,!1,e.tempDataCopy.resizeLineIndex)});var a=function(){if(w.util.moveFlag)if(t){var n=t.parentShapeData;n.event={},n.event.type=r?w.util.eventName.moveFinish:w.util.eventName.selectedFinish,[].push(n),w.util.eventEnabled&&e.eventFunc&&e.eventFunc(n)}else e.tempData.data.event={},e.tempData.data.event.type=r?w.util.eventName.moveFinish:w.util.eventName.selectedFinish,w.util.eventEnabled&&e.eventFunc&&e.eventFunc(e.tempData.data);else w.util.resizeFlag&&(e.tempData.data.event={},e.tempData.data.event.type=r?w.util.eventName.resizeFinish:w.util.eventName.selectedFinish,w.util.eventEnabled&&e.eventFunc&&e.eventFunc(e.tempData.data));w.util.moveFlag=!1,w.util.resizeFlag=!1,r=!1};S.EventManager.off(e.canvasDom,"mouseup.move").on(e.canvasDom,"mouseup.move",a),S.EventManager.off(e.canvasDom,"mouseleave.move").on(e.canvasDom,"mouseleave.move",a)},this.removeShapeEvent=function(){S.EventManager.off(e.canvasDom,"mousedown.move").off(e.canvasDom,"mousemove.move").off(e.canvasDom,"mouseup.move").off(e.canvasDom,"mouseleave.move")},this.removeShapeDrawEvent=function(){S.EventManager.off(e.canvasDom,"mousedown.draw").off(e.canvasDom,"mousemove.draw").off(e.canvasDom,"mouseup.draw").off(e.canvasDom,"mouseleave.draw")},this.setRegionNum=function(t,n){e.shape[t+"Shape"].regionNum=n},this.addShape=function(n,r,i){var a=b.jQlib.extend(!0,{},t,i);a.zindex=w.util.zindex++,a.type=r;var o=e.shape[r+"Shape"].add(n,a);return o?(o.event={},o.event.type=w.util.eventName.addFinish,w.util.eventEnabled&&e.eventFunc&&e.eventFunc(o),o):null},this.drawStart=function(n,r){var i=b.jQlib.extend(!0,{},t,r);e.shape[n+"Shape"].drawStart(i)},this.drawShape=function(){e.ctx.clearRect(0,0,b.jQlib.getWidth(e.canvasDom),b.jQlib.getHeight(e.canvasDom));var t=function(t){var e=[];for(var n in t)e=e.concat(t[n].data);return e.sort(w.util.compare),e}(e.shape);new D.FactoryGridShapeAction(t,e.canvasDom);for(var n=0;n<t.length;n++)e.ctx.lineWidth=t[n].option.lineWidth||1,e.shape[t[n].option.type+"Shape"].draw(t[n])},this.getShapeById=function(t){if(void 0===t||null===t||""===t){var n=[];return b.jQlib.each(e.shape,function(t,e){n=n.concat(e.data)}),b.jQlib.extend(!0,[],n)}for(var r in e.shape){n=e.shape[r].data;for(var i=0;i<n.length;i++)if(n[i].shapeId===t)return n[i]}return!1},this.delShapeById=function(t){if(void 0===t||null===t||""===t)return b.jQlib.each(e.shape,function(t,e){e.data.length=0}),!0;for(var n in e.shape)for(var r=e.shape[n].data,i=0;i<r.length;i++)if(r[i].shapeId===t){var a=b.jQlib.extend(!0,{},r[i]);return a.event={},r.splice(i,1),e.parents&&e.parents[t]&&e.disParent(t),e.parents&&b.jQlib.each(e.parents,function(e,n){if(n)for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}),a.event.type=w.util.eventName.deleteFinish,w.util.eventEnabled&&e.eventFunc&&e.eventFunc(a),null}return!1},this.selectedById=function(t,n){for(var r in e.shape)for(var i=e.shape[r].data,a=0;a<i.length;a++)if(i[a].shapeId===t)return i[a].option.selected=!0===n,e.drawShape(),i[a];return!1},this.clear=function(){e.ctx.clearRect(0,0,b.jQlib.getWidth(e.canvasDom),b.jQlib.getHeight(e.canvasDom)),e.ctx.globalAlpha=1,S.EventManager.off(e.canvasDom,"contextmenu").on(e.canvasDom,"contextmenu",n.contextmenuFun),e.beginPoint="",e.tempShape="",e.tempData="",e.tempDataCopy="",e.parents={},w.util.moveFlag=!1,w.util.resizeFlag=!1,w.util.zindex=1,w.util.shapeId=1,w.util.drawState=0,w.util.eventEnabled=!0,b.jQlib.each(e.shape,function(t,e){e.regionNum=999999,e.data=[]})},this.resize=function(t,n){for(var r in e.coordinate.widthDraw=b.jQlib.getWidth(e.canvasDom)/w.util.defalutCoordinate.width,e.coordinate.heightDraw=b.jQlib.getHeight(e.canvasDom)/w.util.defalutCoordinate.height,e.coordinate.widthMouse=w.util.defalutCoordinate.width/b.jQlib.getWidth(e.canvasDom),e.coordinate.heightMouse=w.util.defalutCoordinate.height/b.jQlib.getHeight(e.canvasDom),e.shape)"rectShape"===r&&e.shape[r].resize(e.coordinate.widthDraw,e.coordinate.heightDraw,e.coordinate.widthMouse,e.coordinate.heightMouse);e.drawShape()},this.reset=function(){e.ctx.clearRect(0,0,b.jQlib.getWidth(e.canvasDom),b.jQlib.getHeight(e.canvasDom))},this.setParent=function(t,n){e.parents[t]=n},this.disParent=function(t){e.parents[t]=null},this.getParent=function(t){return{parentId:t,children:e.parents[t]}},this.getFamily=function(t){var n=!1;return e.parents[t]?n={parentId:t,children:e.parents[t]}:b.jQlib.each(e.parents,function(r,i){for(var a=0;a<i.length;a++)if(i[a]===t)return n={parentId:t,children:e.parents[t]},!1}),n},this.hideShape=function(t,n,r){for(var i in e.shape)for(var a=e.shape[i].data,o=0;o<a.length;o++)if(a[o].shapeId===t)return a[o].option.hide=n,r||e.drawShape(),a[o]},this.setOption=function(t,n){for(var r in e.shape)for(var i=e.shape[r].data,a=0;a<i.length;a++)if(i[a].shapeId===t)return i[a].option=b.jQlib.extend(!0,i[a].option,n),e.drawShape(),i[a]},this.strokeText=function(t,n,r){t?w.util.strokeText(e.ctx,t,b.jQlib.getWidth(e.canvasDom)/2,b.jQlib.getHeight(e.canvasDom)/2,n,r):e.drawShape()},this.drawGrid=function(t,n){e.shape.motionDetectShape.drawGrid(t,n)},this.setResolution=function(t){w.util.setResolution(t)},this.setEventEnabled=function(t){w.util.eventEnabled=t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CircleShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="circle",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[],t.r=100},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),a.option.fillStyle=a.option.fillStyle||"#0000FF",a.option.fillStyleSelected=a.option.fillStyleSelected||"#00FF00",t.data.push(a),a}},this.drawStart=function(e){var n=null;a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),!r.util.moveFlag&&!r.util.resizeFlag){if(t.data.length>=t.regionNum)return 0,void(n=null);n=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];var o={data:[]};o.option=i.jQlib.extend(!0,{},e),o.shapeId=r.util.shapeId++,o.option.zindex=r.util.zindex++,o.option.type=t.type,o.option.selected=!0,o.option.fillStyle=o.option.fillStyle||"#0000FF",o.option.fillStyleSelected=o.option.fillStyleSelected||"#00FF00",t.data.push(o),t.data[t.data.length-1].data=i.jQlib.extend(!0,[],n),r.util.drawState=1,t.drawFunc()}}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(t){});var o=function(e){if(1===r.util.drawState){var n=t.data[t.data.length-1];n.event={},n.event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(n),r.util.drawState=2}};a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",o),a.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",o)},this.draw=function(e){if(!0!==e.option.hide){e.option.selected?this.ctx.fillStyle=e.option.fillStyleSelected:this.ctx.fillStyle=e.option.fillStyle;var n=e.option.radius||t.r;this.ctx.beginPath(),this.ctx.arc(e.data[0]*this.coordinate.widthDraw,e.data[1]*this.coordinate.heightDraw,n*this.coordinate.widthDraw,0,2*Math.PI,!0),this.ctx.closePath(),"stroke"===e.option.circleStyle?(this.ctx.strokeStyle=this.ctx.fillStyle,this.ctx.stroke()):this.ctx.fill()}},this.checkOnPoint=function(t){return!1},this.checkSelected=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=n.option.radius||t.r,o=r.util.pointInCircle(i,n.data,a);return!!o&&(n.option.selected=!0,{data:n})},this.moveShape=function(e,n,i,a){var o=[Math.round((i.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((i.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],s=o[0]-e[0],u=o[1]-e[1];a.data[0]=n.data[0]+s,a.data[1]=n.data[1]+u,t.drawFunc()}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(14));if("undefined"==typeof a)var a={};a.MD5=function(t){function e(t){var e=(t>>>0).toString(16);return"00000000".substr(0,8-e.length)+e}function n(t,e,n){return t&e|~t&n}function r(t,e,n){return n&t|~n&e}function a(t,e,n){return t^e^n}function o(t,e,n){return e^(t|~n)}function s(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function c(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}var l=null,f=null;function h(t,e){return 4294967295&t+e}return"string"==typeof t?l=u(t):t.constructor==Array?0===t.length?l=t:"string"==typeof t[0]?l=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(u(t[n]));return e}(t):"number"==typeof t[0]?l=t:f=(0,i.default)(t[0]):"undefined"!=typeof ArrayBuffer?t instanceof ArrayBuffer?l=c(new Uint8Array(t)):t instanceof Uint8Array||t instanceof Int8Array?l=c(t):t instanceof Uint32Array||t instanceof Int32Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Float32Array||t instanceof Float64Array?l=c(new Uint8Array(t.buffer)):f=(0,i.default)(t):f=(0,i.default)(t),f&&alert("MD5 type mismatch, cannot process "+f),function(){function t(t,e,n,r){var i,a,o=w;w=y,y=m,m=h(m,(i=h(g,h(t,h(e,n))))<<(a=r)&4294967295|i>>>32-a),g=o}var i=l.length;l.push(128);var u=l.length%64;if(u>56){for(var c=0;c<64-u;c++)l.push(0);u=l.length%64}for(c=0;c<56-u;c++)l.push(0);l=l.concat(function(t){for(var e=[],n=0;n<8;n++)e.push(255&t),t>>>=8;return e}(8*i));var f=1732584193,d=4023233417,p=2562383102,v=271733878,g=0,m=0,y=0,w=0;for(c=0;c<l.length/64;c++){g=f;var b=64*c;t(n(m=d,y=p,w=v),3614090360,s(l,b),7),t(n(m,y,w),3905402710,s(l,b+4),12),t(n(m,y,w),606105819,s(l,b+8),17),t(n(m,y,w),3250441966,s(l,b+12),22),t(n(m,y,w),4118548399,s(l,b+16),7),t(n(m,y,w),1200080426,s(l,b+20),12),t(n(m,y,w),2821735955,s(l,b+24),17),t(n(m,y,w),4249261313,s(l,b+28),22),t(n(m,y,w),1770035416,s(l,b+32),7),t(n(m,y,w),2336552879,s(l,b+36),12),t(n(m,y,w),4294925233,s(l,b+40),17),t(n(m,y,w),2304563134,s(l,b+44),22),t(n(m,y,w),1804603682,s(l,b+48),7),t(n(m,y,w),4254626195,s(l,b+52),12),t(n(m,y,w),2792965006,s(l,b+56),17),t(n(m,y,w),1236535329,s(l,b+60),22),t(r(m,y,w),4129170786,s(l,b+4),5),t(r(m,y,w),3225465664,s(l,b+24),9),t(r(m,y,w),643717713,s(l,b+44),14),t(r(m,y,w),3921069994,s(l,b),20),t(r(m,y,w),3593408605,s(l,b+20),5),t(r(m,y,w),38016083,s(l,b+40),9),t(r(m,y,w),3634488961,s(l,b+60),14),t(r(m,y,w),3889429448,s(l,b+16),20),t(r(m,y,w),568446438,s(l,b+36),5),t(r(m,y,w),3275163606,s(l,b+56),9),t(r(m,y,w),4107603335,s(l,b+12),14),t(r(m,y,w),1163531501,s(l,b+32),20),t(r(m,y,w),2850285829,s(l,b+52),5),t(r(m,y,w),4243563512,s(l,b+8),9),t(r(m,y,w),1735328473,s(l,b+28),14),t(r(m,y,w),2368359562,s(l,b+48),20),t(a(m,y,w),4294588738,s(l,b+20),4),t(a(m,y,w),2272392833,s(l,b+32),11),t(a(m,y,w),1839030562,s(l,b+44),16),t(a(m,y,w),4259657740,s(l,b+56),23),t(a(m,y,w),2763975236,s(l,b+4),4),t(a(m,y,w),1272893353,s(l,b+16),11),t(a(m,y,w),4139469664,s(l,b+28),16),t(a(m,y,w),3200236656,s(l,b+40),23),t(a(m,y,w),681279174,s(l,b+52),4),t(a(m,y,w),3936430074,s(l,b),11),t(a(m,y,w),3572445317,s(l,b+12),16),t(a(m,y,w),76029189,s(l,b+24),23),t(a(m,y,w),3654602809,s(l,b+36),4),t(a(m,y,w),3873151461,s(l,b+48),11),t(a(m,y,w),530742520,s(l,b+60),16),t(a(m,y,w),3299628645,s(l,b+8),23),t(o(m,y,w),4096336452,s(l,b),6),t(o(m,y,w),1126891415,s(l,b+28),10),t(o(m,y,w),2878612391,s(l,b+56),15),t(o(m,y,w),4237533241,s(l,b+20),21),t(o(m,y,w),1700485571,s(l,b+48),6),t(o(m,y,w),2399980690,s(l,b+12),10),t(o(m,y,w),4293915773,s(l,b+40),15),t(o(m,y,w),2240044497,s(l,b+4),21),t(o(m,y,w),1873313359,s(l,b+32),6),t(o(m,y,w),4264355552,s(l,b+60),10),t(o(m,y,w),2734768916,s(l,b+24),15),t(o(m,y,w),1309151649,s(l,b+52),21),t(o(m,y,w),4149444226,s(l,b+16),6),t(o(m,y,w),3174756917,s(l,b+44),10),t(o(m,y,w),718787259,s(l,b+8),15),t(o(m,y,w),3951481745,s(l,b+36),21),f=h(f,g),d=h(d,m),p=h(p,y),v=h(v,w)}return function(t,n,r,i){for(var a="",o=0,s=0,u=3;u>=0;u--)o=255&(s=arguments[u]),o<<=8,o|=255&(s>>>=8),o<<=8,o|=255&(s>>>=8),o<<=8,a+=e(o|=s>>>=8);return a}(v,p,d,f).toUpperCase()}()};var o=function(t){return a.MD5(t)};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.YUVWebGLCanvas=e.WebGLCanvas=e.ImageWebGLCanvas=void 0;var r=n(15),i=n(172),a=function(){function t(t,e,n){r.Texture.call(this,t,e,n)}return t.prototype=c(r.Texture,{fill:function(t,e){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.size.w,this.size.h,this.format,n.UNSIGNED_BYTE,t):n.texImage2D(n.TEXTURE_2D,0,this.format,this.format,n.UNSIGNED_BYTE,t)}}),t}(),o=function(){var t=r.Script.createFromSource("x-shader/x-vertex",l(["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","varying highp vec2 vTextureCoord;","void main(void) {","  gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","  vTextureCoord = aTextureCoord;","}"])),e=r.Script.createFromSource("x-shader/x-fragment",l(["precision highp float;","varying highp vec2 vTextureCoord;","uniform sampler2D texture;","void main(void) {","  gl_FragColor = texture2D(texture, vTextureCoord);","}"])),n=[192,368,608,1088,1472,1952,3008];function a(t,e,a){this.canvas=t,this.size=e;var c=!0;for(var l in n)e.w===n[l]&&(c=!1);c?this.canvas.width=e.w:192===e.w?this.canvas.width=e.w-12:this.canvas.width=e.w-8,this.canvas.height=e.h,this.onInitWebGL(),this.onInitShaders(),function(){var t=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],e=this.gl;this.quadVPBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.quadVPBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),this.quadVPBuffer.itemSize=3,this.quadVPBuffer.numItems=4;this.quadVTCBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.quadVTCBuffer),t=[1,0,0,0,1,1,0,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW)}.call(this),a&&function(){var t=this.gl;this.framebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.framebufferTexture=new r.Texture(this.gl,this.size,t.RGBA);var e=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,e),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.size.w,this.size.h),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.framebufferTexture.texture,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}.call(this),this.onInitTextures(),function(){var t=this.gl;this.perspectiveMatrix=function(t,e,n,r){var a=n*Math.tan(t*Math.PI/360),o=-a;return function(t,e,n,r,a,o){var s=2*a/(e-t),u=2*a/(r-n),c=(e+t)/(e-t),l=(r+n)/(r-n),f=-(o+a)/(o-a),h=-2*o*a/(o-a);return(0,i.$M)([[s,0,c,0],[0,u,l,0],[0,0,f,h],[0,0,-1,0]])}(o*e,a*e,o,a,n,r)}(45,1,.1,100),o.call(this),s.call(this,[0,0,-2.415]),t.bindBuffer(t.ARRAY_BUFFER,this.quadVPBuffer),t.vertexAttribPointer(this.vertexPositionAttribute,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.quadVTCBuffer),t.vertexAttribPointer(this.textureCoordAttribute,2,t.FLOAT,!1,0,0),this.onInitSceneTextures(),u.call(this),this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)}.call(this)}function o(){this.mvMatrix=i.Matrix.I(4)}function s(t){(function(t){this.mvMatrix=this.mvMatrix.x(t)}).call(this,i.Matrix.Translation((0,i.$V)([t[0],t[1],t[2]])).ensure4x4())}function u(){this.program.setMatrixUniform("uPMatrix",new Float32Array(this.perspectiveMatrix.flatten())),this.program.setMatrixUniform("uMVMatrix",new Float32Array(this.mvMatrix.flatten()))}return a.prototype={toString:function(){return"WebGLCanvas Size: "+this.size},checkLastError:function(t){var e=this.gl.getError();if(e!==this.gl.NO_ERROR){var n=this.glNames[e];n="undefined"!==typeof n?n+"("+e+")":"Unknown WebGL ENUM (0x"+e.toString(16)+")",t?r.debug.log("WebGL Error: %s, %s",t,n):r.debug.log("WebGL Error: %s",n),r.debug.trace()}},onInitWebGL:function(){try{this.gl=this.canvas.getContext("experimental-webgl")}catch(t){r.debug.log("inInitWebGL error = "+t)}if(this.gl||r.debug.error("Unable to initialize WebGL. Your browser may not support it."),!this.glNames)for(var t in this.glNames={},this.gl)"number"===typeof this.gl[t]&&(this.glNames[this.gl[t]]=t)},onInitShaders:function(){this.program=new r.Program(this.gl),this.program.attach(new r.Shader(this.gl,t)),this.program.attach(new r.Shader(this.gl,e)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){var t=this.gl;t.viewport(0,0,this.canvas.width,this.canvas.height),this.texture=new r.Texture(t,this.size,t.RGBA)},onInitSceneTextures:function(){this.texture.bind(0,this.program,"texture")},drawScene:function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},updateVertexArray:function(t){this.zoomScene(t)},readPixels:function(t){var e=this.gl;e.readPixels(0,0,this.size.w,this.size.h,e.RGBA,e.UNSIGNED_BYTE,t)},zoomScene:function(t){o.call(this),s.call(this,[t[0],t[1],t[2]]),u.call(this),this.drawScene()},setViewport:function(t,e){var n,i;r.debug.log("toWidth="+t+",toHeight="+e),this.gl.drawingBufferWidth<t||this.gl.drawingBufferHeight<e?(n=this.gl.drawingBufferWidth,i=this.gl.drawingBufferHeight,this.canvas.width=n,this.canvas.height=i):(n=t,i=e),this.gl.viewport(0,0,n,i)},clearCanvas:function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT)}},a}();e.WebGLCanvas=o;var s=function(){function t(t,e){o.call(this,t,e)}return t.prototype=c(o,{drawCanvas:function(t){this.texture.fill(t),this.drawScene()},onInitTextures:function(){var t=this.gl;this.setViewport(this.canvas.width,this.canvas.height),this.texture=new a(t,this.size,t.RGBA)},initCanvas:function(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT)}}),t}();e.ImageWebGLCanvas=s;var u=function(){var t=r.Script.createFromSource("x-shader/x-vertex",l(["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","varying highp vec2 vTextureCoord;","void main(void) {","  gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","  vTextureCoord = aTextureCoord;","}"])),e=r.Script.createFromSource("x-shader/x-fragment",l(["precision highp float;","varying highp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.16438, 0.00000, 1.59603, -.87079,"," 1.16438, -.39176, -.81297, .52959,"," 1.16438, 2.01723, 0, -1.08139,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture,  vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"]));function n(t,e){o.call(this,t,e)}return n.prototype=c(o,{onInitShaders:function(){this.program=new r.Program(this.gl),this.program.attach(new r.Shader(this.gl,t)),this.program.attach(new r.Shader(this.gl,e)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){this.setViewport(this.size.w,this.size.h),this.YTexture=new r.Texture(this.gl,this.size),this.UTexture=new r.Texture(this.gl,this.size.getHalfSize()),this.VTexture=new r.Texture(this.gl,this.size.getHalfSize())},onInitSceneTextures:function(){this.YTexture.bind(0,this.program,"YTexture"),this.UTexture.bind(1,this.program,"UTexture"),this.VTexture.bind(2,this.program,"VTexture")},fillYUVTextures:function(t,e,n){this.YTexture.fill(t),this.UTexture.fill(e),this.VTexture.fill(n),this.drawScene()},drawCanvas:function(t,e){var n=new Uint8Array(t.buffer,t.byteOffset,e.ylen*e.height),r=new Uint8Array(t.buffer,t.byteOffset+e.ylen*e.height,e.ylen*e.height/4),i=new Uint8Array(t.buffer,t.byteOffset+e.ylen*e.height*1.25,e.ylen*e.height/4);this.YTexture.fill(n),this.UTexture.fill(r),this.VTexture.fill(i),this.drawScene()},updateVertexArray:function(t){this.zoomScene(t)},toString:function(){return"YUVCanvas Size: "+this.size},initCanvas:function(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT)}}),n}();function c(t,e){for(var n=Object.create(t.prototype),r=Object.keys(e),i=0;i<r.length;i++)n[r[i]]=e[r[i]];return n}function l(t){return t.join("\n")}e.YUVWebGLCanvas=u},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),a=r(n(2)),o=r(n(185)),s=n(186),u=function(){function t(){(0,i.default)(this,t),this.CodecCallback=function(){},this.TrackCallback=function(){}}return(0,a.default)(t,[{key:"init",value:function(t){this.MovieBuffer=new Uint8Array(0),this.currentFrame=0,this.currentDeleteLen=0,this.length=0,this.position=0,this.isMoov=0,this.isSeek=!1,this.track=this.concatArray(t.tracks[0].samples,t.tracks[1].samples),this.VideoCodec=this.getCodec(t.tracks[0].codec),this.AudioCodec=this.getCodec(t.tracks[1].codec),this.Framerate=this.getFPS(t.tracks[0].samples),this.clockFreq=t.tracks[1].samples[0].timescale,this.AudioCodecInfo={config:"1408",clockFreq:this.clockFreq,bitrate:void 0},this.packetDHAV=new o.default(0,this.VideoCodec,this.AudioCodec),this.CodecCallback({VideoCodec:this.VideoCodec,AudioCodec:this.AudioCodec,Framerate:this.Framerate,AudioCodecInfo:this.AudioCodecInfo})}},{key:"setMovieData",value:function(t){var e=t.subarray(0,20);if(this.isMoov=e[8],t=t.subarray(20,t.length),this.isMoov){var n=s.MovieParser.parse(t);n&&this.init(n)}else this.length=(e[7]<<24|e[6]<<16|e[5]<<8|e[4])-20,this.position=e[15]<<48|e[14]<<40|e[13]<<32|e[12]<<24|e[11]<<16|e[10]<<8|e[9],this.currentDeleteLen+this.MovieBuffer.length<this.position&&(this.isSeek=!0,this.currentDeleteLen=this.position,this.currentFrame=this.getCurrentSeekFrame(),this.MovieBuffer=new Uint8Array(0)),this.MovieBuffer=this.concatUint8Array(this.MovieBuffer,new Uint8Array(t)),this.getFrameData()}},{key:"getFrameData",value:function(){var t=this.track[this.currentFrame];if(this.MovieBuffer.length+this.currentDeleteLen>=t.offset+t.size){var e=null;if(t instanceof s.VideoSample){var n=this.set_nal_unit_type(this.MovieBuffer.subarray(t.offset-this.currentDeleteLen,t.offset+t.size-this.currentDeleteLen));e=this.packetDHAV.getRTPPacket(n,t)}else e=this.packetDHAV.getRTPPacket(this.MovieBuffer.subarray(t.offset-this.currentDeleteLen,t.offset+t.size-this.currentDeleteLen),t);(this.isSeek&&t.keyframe||!this.isSeek)&&(this.TrackCallback(e),this.isSeek=!1),this.MovieBuffer=this.MovieBuffer.subarray(t.offset+t.size-this.currentDeleteLen,this.MovieBuffer.length),this.currentDeleteLen=t.offset+t.size,this.currentFrame++,this.currentFrame<this.track.length&&this.getFrameData()}}},{key:"getCurrentSeekFrame",value:function(){var t=0,e=this.track.length-1,n=this.position;if(this.track[0].offset>=n)return 0;for(;t<=e;){var r=parseInt((e+t)/2),i=this.track[r];if(n===i.offset)return r;if(n>i.offset){if(n<i.offset+i.size)return r+1;t=r+1}else{if(!(n<i.offset))return-1;e=r-1}}}},{key:"set_nal_unit_type",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array,e=0,n=0,r=function(e,n){var r="";return t.slice(e,n).map(function(t){return r+=1===t.toString(16).length?"0"+t.toString(16):t.toString(16)}),parseInt(r,16)};t.length>4&&n<t.length;)e=r(n,n+4),t.set([0,0,0,1],n),n=n+e+4;return t}},{key:"concatUint8Array",value:function(){for(var t=0,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){t+=a[i].length}for(var o=new Uint8Array(t),s=0,u=0,c=n;u<c.length;u++){var l=c[u];o.set(l,s),s+=l.length}return o}},{key:"concatArray",value:function(t,e){return t.concat(e).sort(function(t,e){return t.offset-e.offset})}},{key:"getCodec",value:function(t){var e="";return/hvc1/g.test(t)&&(e="H265"),/avc1/g.test(t)&&(e="H264"),/mp4a/g.test(t)&&(e="mpeg4-generic"),e}},{key:"getFPS",value:function(t){for(var e=60,n=0,r=t.length>=60?60:t.length;n<r;n++)if(t[n].timestamp<=t[n].timescale&&t[n+1].timestamp>t[n].timescale){e=n;break}return e}},{key:"parseToString",value:function(t){for(var e="",n=0,r=t.length;n<r;n++)e+=(1===t[n].toString(16).length?"0"+t[n].toString(16):t[n].toString(16))+((n+1)%16===0?"\n":(n+1)%8===0?"  ":" ");return e}}]),t}();e.default=u},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=n(8),s=n(198),u=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"parse",value:function(t){return new s(t).parse()}},{key:"check",value:function(t){return t.readUInt32BE(0)>0&&-1!==[o.ATOM_FTYP,o.ATOM_MOOV,o.ATOM_MDAT].indexOf(t.toString("ascii",4,8))}}]),t}();t.exports=u},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(42),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_AVC1}},{key:"extraType",value:function(){return f.ATOM_AVCC}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(23),h=n(8),d=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).entries=[],t}return(0,a.default)(n,[{key:"type",value:function(){return h.ATOM_CO64}},{key:"parse",value:function(t){var e=t.readUInt32BE(4);this.entries=new Array(e);for(var n=0;n<e;n++)this.entries[n]=f.readUInt64BE(t,8+8*n)}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(this.entries.length,e+12);for(var n=0,r=this.entries.length;n<r;n++)f.writeUInt64BE(t,this.entries[n],e+16+8*n)}},{key:"bufferSize",value:function(){return 16+8*this.entries.length}}]),n}(l);t.exports=d},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(24),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_CTTS}},{key:"countMultiplier",value:function(){return 2}}]),n}(l);t.exports=h},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8);function h(t,e){var n,r=0;for(n=0;n<4;n++){var i=255&t[e+n];if(r<<=7,r|=127&i,0===(128&i))break}return{size:r,read:n+1}}var d=function(t){(0,o.default)(r,t);var n=c(r);function r(){var t;return(0,i.default)(this,r),(t=n.call(this)).streamId=null,t.extraData=null,t}return(0,a.default)(r,[{key:"type",value:function(){return f.ATOM_ESDS}},{key:"parse",value:function(t){var n=5;n+=h(t,n).read,this.streamId=t.readUInt16BE(n),n+=2;var r=t[n++];for(1===(r>>7&1)&&(n+=2),1===(r>>6&1)&&(n+=t[n]+1),1===(r>>5&1)&&(n+=2);n<t.length;){var i=t[n++],a=h(t,n);if(n+=a.read,4===i){n+=13,a.size>13&&5===t[n++]&&(n+=(a=h(t,n)).read,this.extraData=e.allocUnsafe(a.size),t.copy(this.extraData,0,n,n+a.size));break}n+=a.size}}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),e+=8,e+=4,t[e++]=3,t[e++]=23+this.extraData.length,t.writeUInt16BE(this.streamId,e),e+=2,t[e++]=0,t[e++]=4,t[e++]=15+this.extraData.length,t[e++]=64,t[e++]=21,e+=11,t[e++]=5,t[e++]=this.extraData.length,this.extraData.copy(t,e),e+=this.extraData.length,t[e++]=6,t[e++]=1,t[e++]=2}},{key:"bufferSize",value:function(){return 37+this.extraData.length}}]),r}(l);t.exports=d}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).majorBrand=null,t.minorVersion=0,t.compatibleBrands=[],t}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_FTYP}},{key:"parse",value:function(t){this.majorBrand=t.toString("ascii",0,4),this.minorVersion=t.readUInt32BE(4);for(var e=0;e<(t.length-8)/4;e++)this.compatibleBrands.push(t.toString("ascii",8+4*e,12+4*e))}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.write(this.majorBrand,e+8),t.writeUInt32BE(this.minorVersion,e+12);for(var n=0;n<this.compatibleBrands.length;n++)t.write(this.compatibleBrands[n],e+16+4*n)}},{key:"bufferSize",value:function(){return 16+4*this.compatibleBrands.length}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).handlerType=null,t.componentName=null,t}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_HDLR}},{key:"parse",value:function(t){this.handlerType=t.toString("ascii",8,12),this.componentName=t.toString("ascii",16)}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.write(this.handlerType.substring(0,4),e+16),t.write(this.componentName.substring(0,16),e+24)}},{key:"bufferSize",value:function(){return 48}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(42),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_HEV1}},{key:"extraType",value:function(){return f.ATOM_HVCC}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(42),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_HVC1}},{key:"extraType",value:function(){return f.ATOM_HVCC}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=n(23),d=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_MDHD}},{key:"parse",value:function(t){1===t[0]?(this.timescale=t.readUInt32BE(20),this.duration=h.readUInt64BE(t,24)):(this.timescale=t.readUInt32BE(12),this.duration=t.readUInt32BE(16))}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(this.timescale,e+20),t.writeUInt32BE(this.duration,e+24)}},{key:"bufferSize",value:function(){return 32}}]),n}(l);t.exports=d},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(18),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_MDIA}},{key:"availableAtoms",value:function(){return[f.ATOM_MDHD,f.ATOM_MINF,f.ATOM_HDLR]}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(18),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_MINF}},{key:"availableAtoms",value:function(){return[f.ATOM_VMHD,f.ATOM_SMHD,f.ATOM_STBL]}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(18),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_MOOV}},{key:"availableAtoms",value:function(){return[f.ATOM_MVHD,f.ATOM_TRAK]}}]),n}(l);t.exports=h},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=function(t){(0,o.default)(r,t);var n=c(r);function r(){var t;return(0,i.default)(this,r),(t=n.call(this)).channels=null,t.sampleSize=null,t.sampleRate=null,t.streamId=null,t.extraData=null,t}return(0,a.default)(r,[{key:"type",value:function(){return f.ATOM_MP4A}},{key:"parse",value:function(t){var n=8,r=t.readUInt16BE(n);for(n+=8,this.channels=t.readUInt16BE(n),n+=2,this.sampleSize=t.readUInt16BE(n),n+=4,this.sampleRate=t.readUInt32BE(n),n+=6,r>0&&(n+=16);n<t.length-8;){var i=t.readUInt32BE(n),a=t.toString("ascii",n+4,n+8);if(0===i)break;if(n+=8,a===f.ATOM_ESDS){var o=f.createAtom(a);null!==o&&(o.parse(t.slice(n,n+i-8)),this.streamId=o.streamId,o.extraData&&(this.extraData=e.allocUnsafe(4+o.extraData.length),this.extraData.write(f.ATOM_MP4A),o.extraData.copy(this.extraData,4,0)));break}n+=i-8}}},{key:"build",value:function(t,n){t.writeUInt32BE(this.bufferSize(),n),t.write(this.type(),n+4),t.writeUInt16BE(1,n+14),t.writeUInt16BE(this.channels,n+24),t.writeUInt16BE(this.sampleSize,n+26),t.writeUInt32BE(this.sampleRate,n+30);var r=f.createAtom(f.ATOM_ESDS);r.streamId=this.streamId,r.extraData=e.allocUnsafe(this.extraData.length-4),this.extraData.copy(r.extraData,0,4),r.build(t,n+36)}},{key:"bufferSize",value:function(){return 73+this.extraData.length}}]),r}(l);t.exports=h}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=n(23),d=[65536,0,0,0,65536,0,0,0,1073741824],p=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).timescale=null,t.duration=null,t.nextTrackId=null,t}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_MVHD}},{key:"parse",value:function(t){1===t[0]?(this.timescale=t.readUInt32BE(20),this.duration=h.readUInt64BE(t,24),this.nextTrackId=t.readUInt32BE(104)):(this.timescale=t.readUInt32BE(12),this.duration=t.readUInt32BE(16),this.nextTrackId=t.readUInt32BE(96))}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(this.timescale,e+20),t.writeUInt32BE(this.duration,e+24),t.writeUInt32BE(65536,e+28),t.writeUInt16BE(256,e+32);for(var n=0;n<d.length;n++)t.writeUInt32BE(d[n],e+44+4*n);t.writeUInt32BE(this.nextTrackId,e+104)}},{key:"bufferSize",value:function(){return 108}}]),n}(l);t.exports=p},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_SMHD}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4)}},{key:"bufferSize",value:function(){return 16}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(18),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_STBL}},{key:"availableAtoms",value:function(){return[f.ATOM_STSZ,f.ATOM_STCO,f.ATOM_STSS,f.ATOM_STTS,f.ATOM_STSC,f.ATOM_CO64,f.ATOM_STSD,f.ATOM_CTTS]}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(24),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_STCO}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(24),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_STSC}},{key:"countMultiplier",value:function(){return 3}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(196)),s=r(n(5)),u=r(n(6)),c=r(n(4));function l(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,c.default)(t);if(e){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var d=n(18),p=n(8),v=function(t){(0,s.default)(n,t);var e=h(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return p.ATOM_STSD}},{key:"availableAtoms",value:function(){return[p.ATOM_AVC1,p.ATOM_HEV1,p.ATOM_HVC1,p.ATOM_MP4A]}},{key:"getVideoAtom",value:function(){return this.getAtom(p.ATOM_AVC1)||this.getAtom(p.ATOM_HEV1)||this.getAtom(p.ATOM_HVC1)}},{key:"getAudioAtom",value:function(){return this.getAtom(p.ATOM_MP4A)}},{key:"parse",value:function(t){(0,o.default)((0,c.default)(n.prototype),"parse",this).call(this,t.slice(8))}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(1,e+12),e+=16;var n,r=l(this.atoms);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.build(t,e),e+=i.bufferSize()}}catch(t){r.e(t)}finally{r.f()}}},{key:"bufferSize",value:function(){return 8+(0,o.default)((0,c.default)(n.prototype),"bufferSize",this).call(this)}}]),n}(d);t.exports=v},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(24),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_STSS}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).entries=[],t}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_STSZ}},{key:"parse",value:function(t){var e=t.readUInt32BE(4),n=t.readUInt32BE(8);if(this.entries=new Array(n),0===e)for(var r=0;r<n;r++)this.entries[r]=t.readUInt32BE(12+4*r);else this.entries.fill(e)}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(this.entries.length,e+16);for(var n=0,r=this.entries.length;n<r;n++)t.writeUInt32BE(this.entries[n],e+20+4*n)}},{key:"bufferSize",value:function(){return 20+4*this.entries.length}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(24),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_STTS}},{key:"countMultiplier",value:function(){return 2}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(23),h=n(8),d=[65536,0,0,0,65536,0,0,0,1073741824],p=function(t){(0,o.default)(n,t);var e=c(n);function n(){var t;return(0,i.default)(this,n),(t=e.call(this)).duration=null,t.trackId=null,t.width=null,t.height=null,t}return(0,a.default)(n,[{key:"type",value:function(){return h.ATOM_TKHD}},{key:"parse",value:function(t){this.trackId=t.readUInt32BE(12),1===t[0]?(this.duration=f.readUInt64BE(t,28),this.width=t.readUInt16BE(88),this.height=t.readUInt16BE(92)):(this.duration=t.readUInt32BE(20),this.width=t.readUInt16BE(76),this.height=t.readUInt16BE(80))}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(3,e+8),t.writeUInt32BE(this.trackId,e+20),t.writeUInt32BE(this.duration,e+28),null===this.width||null===this.height?(t.writeUInt16BE(1,e+42),t.writeUInt16BE(256,e+44)):(t.writeUInt16BE(this.width,e+84),t.writeUInt16BE(this.height,e+88));for(var n=0;n<d.length;n++)t.writeUInt32BE(d[n],e+48+4*n)}},{key:"bufferSize",value:function(){return 92}}]),n}(l);t.exports=p},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(18),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_TRAK}},{key:"availableAtoms",value:function(){return[f.ATOM_TKHD,f.ATOM_MDIA]}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(13),f=n(8),h=function(t){(0,o.default)(n,t);var e=c(n);function n(){return(0,i.default)(this,n),e.apply(this,arguments)}return(0,a.default)(n,[{key:"type",value:function(){return f.ATOM_VMHD}},{key:"build",value:function(t,e){t.writeUInt32BE(this.bufferSize(),e),t.write(this.type(),e+4),t.writeUInt32BE(1,e+8)}},{key:"bufferSize",value:function(){return 20}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=n(95),s=n(202),u=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"parse",value:function(t){return new s(t).parse()}},{key:"check",value:function(t){return t.toString("ascii",0,3)===o.HEADER_PREFIX&&t[3]===o.HEADER_VERSION}}]),t}();t.exports=u},function(t,e,n){"use strict";t.exports={MOVIE_TIMESCALE:1e3,HEADER_SIZE:9,HEADER_PREFIX:"FLV",HEADER_VERSION:1,TYPE_SCRIPT:18,TYPE_VIDEO:9,TYPE_AUDIO:8,AUDIO_FORMAT_AAC:10,VIDEO_FORMAT_H264:7}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(20));function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){(0,i.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e){return e=(e=e.toLowerCase())[0].toUpperCase()+e.substr(1),Object.prototype.toString.call(t)==="[object "+e+"]"}function u(t,e,n){if(void 0===n&&(n=2),void 0===e&&(e=0),(t=t.toString()).length>=n)return t;var r=n-t.length;return new Array(r).fill(String(e)).join("")+t}function c(t,e){return void 0!==t&&t?(e=e||new Date,t=(t=(t=(t=(t=(t=t.replace(/y/gi,u(e.getFullYear()),0)).replace(/m/gi,u(e.getMonth()+1),0)).replace(/d/gi,u(e.getDate()),0)).replace(/h/gi,u(e.getHours()),0)).replace(/i/gi,u(e.getMinutes()),0)).replace(/s/gi,u(e.getSeconds()),0)):""}function l(t,e){var n=(t=t||{}).nameFormat||["ymd_his"];e=e||new Date;var r="";if(s(n,"string"))n=[n,{}];else{if(!s(n,"array"))return void function(t){throw new Error(t)}("name format must be string or array");s(n[0],"string")||(n[0]="ymd_his"),s(n[1],"object")||(n[1]={})}var i=n[0].split(/\{(?:[^{}]+)\}/),a=n[1];n[0].replace(/\{([^{}]*)\}/g,function(t,e,n){i.shift();r+=c(),r+=e in a?a[e]:t});var o=i.shift();return r+=c(o,e)}function f(t,e){this.name=t,this.allowUpDateName=!0,this.byteLength=0,this.options=e,this.startTime=(new Date).toLocaleString()}f.prototype.setEndTime=function(){this.endTime=(new Date).toLocaleString()},f.prototype.updateNameByStream=function(t,e){if(this.allowUpDateName){var n=new Uint8Array(e),r=(n[19]<<24)+(n[18]<<16)+(n[17]<<8)+n[16]>>>0,i=(r>>26===0?"2000":"20"+(r>>26))+"/"+(r>>22&15)+"/"+(r>>17&31)+" "+(r>>12&31)+":"+(r>>6&63)+":"+(63&r);this.name=l(t,new Date(i)),this.allowUpDateName=!1,n=null}e=null};var h=new function(){var t={count:0,total:0,group:[]},e=function(){};return e.prototype.add=function(e){t.count++,t.total+=e.byteLength,t.group.push(e)},e.prototype.get=function(e){return e in t?t[e]:t},new e};var d=function(){var t=1048576,e=null,n=null,r=0,i=void 0,a=null;function s(){this.onMessage=function(){},this.postMessage=function(t){this.__onMessage(t)},this.__postMessage=function(t){this.onMessage(t)}}return s.prototype.__onMessage=function(t){var e=t;switch(e.type){case"init":this.init(e.options);break;case"addBuffer":this.addBuffer(e);break;case"close":this.close()}},s.prototype.init=function(e){this.fullSize=e.fullSize||1/0,this.singleSize=e.singleSize+20*t||520*t,i="init",this.limitOptions=Object.assign({limitBy:"fullSize"},e.limitOptions),this.nameOptions=Object.assign({namedBy:"date",nameFormat:["ymd_his",{}]},e.nameOptions)},s.prototype._malloc=function(t){e&&n&&(n=null,e=null),e=new ArrayBuffer(t),n=new DataView(e);var r=this.nameOptions,i="";switch(this.nameOptions.namedBy.toLowerCase()){case"date":i=l(r);break;default:i=l()}a=new f(i)},s.prototype._initVideoMem=function(){!e&&this.singleSize&&this._malloc(this.singleSize)},s.prototype.appendVideoBuf=function(e){var i=e.byteLength,a=r+i;if(a>this.singleSize-20*t)this.inNodePlace(),this.addBuffer({buffer:e});else{for(var o=r;o<a;o++)n.setUint8(o,e[o-r]);r=a,this.__postMessage({type:"pendding",size:r,total:this.singleSize})}},s.prototype.addBuffer=function(t){if("closed"!==i){var e=t.buffer;this._initVideoMem(),i="addBuffer";var n=e.length,a=r+n;h.get("total")+a>this.fullSize?this.close():this.appendVideoBuf(e)}},s.prototype.inNodePlace=function(){if("addBuffer"===i){var t;i="download",a.updateNameByStream(this.nameOptions,e.slice(0,20)),a.byteLength=r,a.setEndTime(),h.add(a),a.name&&(t=a.name);var n=e.slice(0,r);if(this.reset(),a.name=t,this.__postMessage({type:"download",data:o(o({},a),{},{buffer:n})}),n=null,"count"===this.limitOptions.limitBy){var s=this.limitOptions.count;s&&s===h.get("count")&&this.close()}}},s.prototype.reset=function(){r=0,this._malloc(this.singleSize)},s.prototype.close=function(){this.inNodePlace(),"closed"!==i&&void 0!==i&&(i="closed",this.__postMessage({type:"closed",message:"record was closed"}),e=null,n=null)},new s};e.default=d},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(98)),a=n(30),o=n(62),s=r(n(33)),u=n(150),c=n(151),l=n(152),f=n(63),h=r(n(169)),d=r(n(209));window.RPC=i.default,window._getSession=a._getSession,window._setSession=a._setSession,window.setIP=a.setIP,window.ajax=o.ajax,window.pubsub=s.default,window.loginError=u.loginError,window.setCookie=c.setCookie,window.BrowserType=l.BrowserType,window.PluginCanvasES6=f.PluginCanvasES6,window.H5Canvas=d.default,window.translation=o.translation,window.setLanguage=o.setLanguage,window.tl=o.tl;var p=function(t){this.wsURL=t.wsURL,this.rtspURL=t.rtspURL,this.isTalkService=t.isTalkService,this.isPlayback=t.playback||!1,this.playBackRange=t.range||!1,this.isPrivateProtocol=t.isPrivateProtocol||!1,this.isAudioFlag=t.isAudioFlag||!1,this.lessRateCanvas=t.lessRateCanvas||!1,this.audioState="stop",this.realm=t.realm||"",this.ws=null,this.decodeMode=t.decodeMode,this.supportExtraError=t.supportExtraError||!1,this.playbackIndex=t.playbackIndex,this.wndIndex=t.wndIndex,this.events={ResolutionChanged:function(){},PlayStart:function(){},DecodeStart:function(){},UpdateCanvas:function(){},GetFrameRate:function(){},FrameTypeChange:function(){},Error:function(){},MSEResolutionChanged:function(){},audioChange:function(){},WorkerReady:function(){},IvsDraw:function(){},Waiting:function(){},UpdateTime:function(){},recordChanged:function(){},GetFirstFrame:function(){},GetTotalTime:function(){},UpdateTimeStamp:function(){},FileOver:function(){}},this.username=t.username,this.password=t.password,this.deployType=t.deployType,this.duration=t.duration,this.speed=t.speed,this.isDownLoad=t.isDownLoad};p.prototype={init:function(t,e,n){for(var r in this.ws=new h.default(this.wsURL,this.rtspURL,{dType:this.deployType,isPrivateProtocol:this.isPrivateProtocol,realm:this.realm,speed:this.speed,wndIndex:this.wndIndex}),this.ws.setExtraError(this.supportExtraError),this.ws.init(t,e,n,this.isPlayback,this.isAudioFlag),this.ws.setLiveMode(this.decodeMode),this.ws.setUserInfo(this.username,this.password),this.ws.setPlayMode(this.isPlayback,this.playBackRange),this.ws.setLessRate(this.lessRateCanvas),this.events)this.ws.setCallback(r,this.events[r]);this.events=null},startCut:function(t,e){t?this.controlPlayer("startRecord",!0):this.ws&&(this.controlPlayer("startRecord",!1,e),this.ws.disconnect(),this.ws=null)},startRecord:function(t){if(t){if(this.ws)return;for(var e in this.ws=new h.default(this.wsURL,this.rtspURL,{isRecord:!0,isPrivateProtocol:this.isPrivateProtocol,realm:this.realm}),this.ws.setUserInfo(this.username,this.password),this.events)this.ws.setCallback(e,this.events[e]);this.controlPlayer("startRecord",!0),this.connect()}else this.ws&&(this.controlPlayer("startRecord",!1),this.ws.disconnect(),this.ws=null)},connect:function(t){this.ws.connect(),t||(this.audioState="play")},play:function(){this.controlPlayer("PLAY")},pause:function(){this.controlPlayer("PAUSE")},stop:function(){this.controlPlayer("TEARDOWN")},close:function(){this.ws.disconnect(),this.audioState="stop"},playByTime:function(t){t=t<0?0:t,this.duration>0&&t>this.duration&&(t=this.duration),this.controlPlayer("PLAY","video",t)},playFF:function(t){this.controlPlayer("PAUSE"),this.controlPlayer("SCALE",t)},playRewind:function(){},playNextFrame:function(){this.controlPlayer("playNextFrame")},getCurFrameInfo:function(){return this.controlPlayer("getCurFrameInfo")},audioPlay:function(){this.controlPlayer("audioPlay","start"),this.audioState="play"},audioStop:function(){this.controlPlayer("audioPlay","stop")},audioPause:function(){this.controlPlayer("audioPlay","pause"),this.audioState="pause"},setAudioSamplingRate:function(t){this.controlPlayer("audioSamplingRate",t)},setAudioVolume:function(t){this.controlPlayer("volumn",t)},gotoSecond:function(t){var e=this;window.clearInterval(e.checkRsPre),window.clearInterval(e.checkRsNext),window.clearInterval(e.checkRsGoto),e.ws.clearMap(),!0===e.running&&(e.pause(),e.running=!1),e.playByTime(t-5),e.running=!0,e.checkRsGoto=window.setTimeout(function(){e.pause(),e.running=!1},12e3)},nextFrame:function(t,e,n){var r=this,i=t>Math.pow(2,32)?0:t,a=r.ws.gotoFrame(i);!1===a?r.nextSecond(e,function(e){n(r.ws.gotoFrame(t))}):n(a)},preFrame:function(t,e,n){var r=this,i=r.ws.gotoFrame(t);!1===i?r.preSecond(e,function(e){n(r.ws.gotoFrame(t))}):n(i)},nextSecond:function(t,e){var n=this,r=n.ws.gotoSecond(t);!1===r?(!1===n.running&&(n.playByTime(t),n.running=!0),n.checkRsNext=window.setInterval(function(){!1!==(r=n.ws.gotoSecond(t))&&(window.clearInterval(n.checkRsNext),window.setTimeout(function(){n.running=!1,n.pause()},9e3),e(r))},2e3)):(n.ws.checkLeftSize(t,"next")<=2&&!1===n.running&&(n.playByTime(t+1),n.running=!0,window.setTimeout(function(){n.pause(),n.running=!1},9e3)),e(r))},preSecond:function(t,e){var n=this,r=n.ws.gotoSecond(t);!1===r?(!1===n.running&&(n.playByTime(t-5),n.running=!0),n.checkRsPre=window.setInterval(function(){!1!==(r=n.ws.gotoSecond(t))&&(window.clearInterval(n.checkRsPre),window.setTimeout(function(){n.running=!1,n.pause()},9e3),e(r))},2e3)):(n.ws.checkLeftSize(t,"pre")<=2&&!1===n.running&&(n.playByTime(t-5),n.running=!0,window.setTimeout(function(){n.pause(),n.running=!1},9e3)),e(r))},controlPlayer:function(t,e,n){var r;return r="video"===e?{command:t,range:n||0}:"audioPlay"===t?{command:t,data:e,range:n||0}:"startRecord"===t?{command:t,data:e,stopDown:n}:{command:t,data:e},this.ws.controlPlayer(r)},setPlayMode:function(t){this.ws.setLiveMode(t)},setPlayPath:function(t){this.ws.setRTSPURL(t)},capture:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ivsCanvasArr:[]};this.ws.capture(t,e)},getCapture:function(t,e,n){return this.ws.getCapture(t,e,n)},talk:function(t){if("on"===t){for(var e in this.ws=new h.default(this.wsURL,this.rtspURL,{isTalkService:this.isTalkService,isPrivateProtocol:this.isPrivateProtocol,realm:this.realm}),this.ws.talkInit(),this.ws.setUserInfo(this.username,this.password),this.events)this.ws.setCallback(e,this.events[e]);this.ws.connect()}else this.ws.disconnect()},on:function(t,e){this.events[t]=e}};var v=p;e.default=v},function(t,e,n){"use strict";var r=n(0),i=n(14);Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomStr=e.default=void 0;var a,o=r(n(99)),s=r(n(14)),u=r(n(16)),c=r(n(105)),l=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!==typeof t)return{default:t};var n=g(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=a?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}r.default=t,n&&n.set(t,r);return r}(n(30)),f=r(n(47)),h=r(n(129)),d=r(n(130)),p=r(n(131)),v=r(n(33));function g(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(g=function(t){return t?n:e})(t)}var m=n(132),y=m.SM4,w=m.SM2,b=n(133),S=n(3).Buffer,D=y.constants.CBC,x=new l.default,_=20,I=function(t,e){var n={},r=t.split(","),i=r[0].split(":"),a=r[1].split(":");n[i[0]]=i[1],n[a[0]]=a[1];var o=new d.default;return o.setPublic(n.N,n.E),o.encrypt(e)},T=function(t){return p.default.enc.Utf8.parse(t)},E=function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r},k=function(t){for(var e=new S(t.byteLength),n=new Uint8Array(t),r=0;r<e.length;++r)e[r]=n[r];return e},M=function(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1===r.length&&(r="0"+r),e+=r}return e},A=function(t){return new Uint8Array(t.match(/.{1,2}/g).map(function(t){return parseInt(t,16)}))},R=function(t){if(""===t)return"";for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n).toString(16));return e.join("")},C=function(t){for(var e="",n=window.crypto||window.msCrypto;e.length<t;){var r=(Math.random().toString().substr(2)-0).toString();n&&(r=n.getRandomValues(new Uint32Array(1))[0].toString()),"0"!==r&&(e+=r)}return e.substr(0,t)};e.getRandomStr=C;var P=C(16)+"",O=R(P),F=R("0000000000000000");function B(t){var e="04"+t.SM.replace("Y:","").replace("X:","").replace(",",""),n=w.encrypt(P,e,{inputEncoding:"utf8",outputEncoding:"base64"});n=E(n);for(var r=[],i=0;i<4;i++){var a=new b.BerWriter;a.startSequence(),0===i?a.writeBuffer(k(n.slice(0,32)),2):1===i?a.writeBuffer(k(n.slice(32,64)),2):2===i?a.writeBuffer(k(n.slice(64,96)),4):a.writeBuffer(k(n.slice(96,n.byteLength)),4),a.endSequence();var o=a.buffer;r.push(M(o))}var s=(r=r.map(function(t){return t.slice(4)})).join(""),u=A(s),c=new b.BerWriter;c.startSequence(),c.writeBuffer(k(u)),c.endSequence();var l=c.buffer;return M(l)}var L=function(t,e,n){return function(r,i){return new Promise(function(a){var o=p.default.mode.ECB,s={padding:p.default.pad.ZeroPadding};e&&t&&(~t.indexOf("ROAE")?o=p.default.mode.ECB:~t.indexOf("RPAC")&&(o=p.default.mode.CBC,s.iv=p.default.enc.Utf8.parse("0000000000000000"))),s.mode=o;var u="";n&&"SM"===n?(u=y.decrypt(r,O,{iv:F,mode:D,inputEncoding:"base64",outputEncoding:"utf8"}),a(JSON.parse(u))):(u=p.default.AES.decrypt(r,i,s),a(JSON.parse(p.default.enc.Utf8.stringify(u))))})}},j=function(t,e,n,r,i){return function(a,o,s){return new Promise(function(u){var c="AES-128",l=p.default.mode.ECB,f={padding:p.default.pad.ZeroPadding};if(n&&e&&(~e.indexOf("ROAE")?(l=p.default.mode.ECB,c="ROAE-256"):~e.indexOf("RPAC")&&(l=p.default.mode.CBC,c="RPAC-256",f.iv=p.default.enc.Utf8.parse("0000000000000000"))),r&&"SM"===r){var h=y.encrypt(JSON.stringify(a),O,{iv:F,mode:D,inputEncoding:"utf8",outputEncoding:"base64"});c="SM4_CBC_PKCS7_PADDING",u({salt:B(i),content:h,cipher:c})}else{f.mode=l;var d=p.default.AES.encrypt(p.default.enc.Utf8.parse(JSON.stringify(a)),s,f).toString();u({salt:I(t,o),content:d,cipher:c})}})}},N={},U=function(t){return(a=a||(0,c.default)(o.default.mark(function t(e){var n,r,i,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={channel:e||0},r=(0,l._getSession)(),i=JSON.stringify(n),!N[r]||!N[r][i]){t.next=7;break}return t.abrupt("return",N[r][i]);case 7:return N[r]={},t.next=10,x.PTZ.instance(e);case 10:return a=t.sent,N[r][i]=a.result,t.abrupt("return",a.result);case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)};function z(){var t,e=this;l.default.call(this),this.cipher=["AES"],this.saltLen=16,this.pub="",this.newSecVersion=!1,this._getKeyt=function(){return C(e.saltLen)},this._decrypt=L,this._encrypt=j,this.suggestedAsymmetric="",this.pubEx=null,this.keepAliveTimer=[],this._encryptDoFind=function(n,r){return(t=t||(0,c.default)(o.default.mark(function t(n,r){var i,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=[(0,l._data)("".concat(n,".doFind"),{count:_},{object:r})],t.next=3,e.multiRecordSec(i);case 3:return a=t.sent,t.abrupt("return",a[0].params);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}}z.prototype={realm:"",login:function(t,e,n){return new Promise(function(r,i){x.Global.firstLogin(t).then(function(a){if(268632075===a.error.code)i(a);else if(a.session){var o=a.params.realm,s=(0,h.default)(t+":"+o+":"+e),u=(0,h.default)(t+":"+a.params.random+":"+s),c={realm:o,random:a.params.random,passwordType:"Default",authorityType:a.params.encryption};x.Global.secondLogin(t,u,c,n).then(function(t){z.prototype.realm=o,r(t)}).catch(function(t){i(t)})}else i(a)}).catch(function(t){i(t)})})},keepAlive:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=v.default.subscribe("_clearTime_",function(e){clearInterval(t.keepAliveTimer[e]),t.keepAliveTimer[e]=null,v.default.unsubscribe(o)});clearInterval(this.keepAliveTimer[a]),this.keepAliveTimer[a]=setInterval(function(){return x.Global.keepAlive(e,r,i)},n)},getUrlData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new Promise(function(i,a){(0,f.default)({method:r,url:t,headers:{"Self-TargetIP":(0,l.getIP)()}}).then(function(t){t=t.data,e.saltLen="V2.0"===n.SecurityBaselineVersion||"V2.0"===t.SecurityBaselineVersion?32:16,e.newSecVersion="V2.0"===n.SecurityBaselineVersion||"V2.0"===t.SecurityBaselineVersion,i(t)}).catch(function(t){a()})})},getEncrypt:function(t){var e=this;return x.Security.getEncryptInfoOut().then(function(n){var r=n.cipher,i=n.pub,a=n.suggestedAsymmetric,o=n.pubEx;return e.cipher=r,e.pub=i,e.suggestedAsymmetric=a,e.pubEx=o,t&&(e.saltLen="V2.0"===t.SecurityBaselineVersion?32:16,e.newSecVersion="V2.0"===t.SecurityBaselineVersion),e._decrypt=e._decrypt(e.cipher,e.newSecVersion,e.suggestedAsymmetric),e._encrypt=e._encrypt(e.pub,e.cipher,e.newSecVersion,e.suggestedAsymmetric,e.pubEx),!0}).catch(function(){})},getSecConfig:function(t,e){var n=this;return(0,c.default)(o.default.mark(function r(){var i,a,s,u,c;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,i=n._getKeyt(),a=T(i),s={},!(t instanceof Array)){r.next=14;break}return u=t.map(function(t){return(0,l._config)({name:t,channel:e,type:"getConfig"})}),r.next=8,n._encrypt(u,i,a);case 8:return s=r.sent,r.next=11,x.System.multiSec(s);case 11:s=r.sent,r.next=20;break;case 14:return r.next=16,n._encrypt({name:t},i,a);case 16:return s=r.sent,r.next=19,x.Security.getConfig(s);case 19:s=r.sent;case 20:return r.next=22,n._decrypt(s.content,a);case 22:return c=r.sent,r.abrupt("return",c.table?c.table:c);case 26:throw r.prev=26,r.t0=r.catch(0),r.t0,String("Error:getSecConfig is error,please check ".concat(t," is exists"));case 30:case"end":return r.stop()}},r,null,[[0,26]])}))()},getSecDefault:function(t,e){var n=this;return(0,c.default)(o.default.mark(function r(){var i,a,s,u,c;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,i=n._getKeyt(),a=T(i),s={},!(t instanceof Array)){r.next=14;break}return u=t.map(function(t){return(0,l._config)({name:t,channel:e,type:"getDefault"})}),r.next=8,n._encrypt(u,i,a);case 8:return s=r.sent,r.next=11,x.System.multiSec(s);case 11:s=r.sent,r.next=20;break;case 14:return r.next=16,n._encrypt({name:t},i,a);case 16:return s=r.sent,r.next=19,x.Security.getDefault(s);case 19:s=r.sent;case 20:return r.next=22,n._decrypt(s.content,a);case 22:return c=r.sent,r.abrupt("return",c.table?c.table:c);case 26:throw r.prev=26,r.t0=r.catch(0),String("Error:getSecDefault is error,please check ".concat(t," is exists"));case 29:case"end":return r.stop()}},r,null,[[0,26]])}))()},setSecConfig:function(t,e,n,r){var i=this;return(0,c.default)(o.default.mark(function a(){var s,u,c,f,h;return o.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,s=i._getKeyt(),u=T(s),c={},!(t instanceof Array)){a.next=16;break}if(!e.length||t.length===e.length){a.next=7;break}throw new Error("setSecConfig params error");case 7:return f=t.map(function(t,i){return(0,l._config)({name:t,channel:n,params:e[i],type:"setConfig",options:r})}),a.next=10,i._encrypt(f,s,u);case 10:return c=a.sent,a.next=13,x.System.multiSec(c);case 13:c=a.sent,a.next=22;break;case 16:return a.next=18,i._encrypt({name:t,table:e},s,u);case 18:return c=a.sent,a.next=21,x.Security.setConfig(c);case 21:c=a.sent;case 22:return a.next=24,i._decrypt(c.content,u);case 24:return h=a.sent,a.abrupt("return",h.table?h.table:h);case 28:throw a.prev=28,a.t0=a.catch(0),a.t0;case 31:case"end":return a.stop()}},a,null,[[0,28]])}))()},access:function(t){var e=this;return(0,c.default)(o.default.mark(function n(){var r,i,a,s;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=e._getKeyt(),i=T(r),n.next=5,e._encrypt(t,r,i);case 5:return a=n.sent,n.next=8,x.DevInit.access(a);case 8:return s=n.sent,n.abrupt("return",s.table?s.table:s);case 12:throw n.prev=12,n.t0=n.catch(0),String("Error:access is error");case 15:case"end":return n.stop()}},n,null,[[0,12]])}))()},multiSec:function(t){var e=this;return(0,c.default)(o.default.mark(function n(){var r,i,a,s,u,c,f,h,d,p;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],t instanceof Array?r=t.map(function(t){return(0,l._data)(t.method,t.params,t.object&&{object:t.object})}):(i=t.method,a=t.params,s=void 0===a?null:a,u=t.object,c=void 0===u?void 0:u,r=[r=(0,l._data)(i,s,c&&{object:c})]),n.prev=2,f=e._getKeyt(),h=T(f),n.next=7,e._encrypt(r,f,h);case 7:return d=n.sent,n.next=10,x.System.multiSec(d);case 10:return d=n.sent,n.next=13,e._decrypt(d.content,h);case 13:return p=n.sent,n.abrupt("return",p.table?p.table:p);case 17:throw n.prev=17,n.t0=n.catch(2),String("Error:multiSec is error");case 20:case"end":return n.stop()}},n,null,[[2,17]])}))()},getRecords:function(t,e){var n=arguments,r=this;return(0,c.default)(o.default.mark(function i(){var a,s,c,l;return o.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=!(n.length>2&&void 0!==n[2])||n[2],s={},c="",i.prev=2,i.next=5,x.RecordFinder.create(t);case 5:return l=i.sent,c=l.result,i.next=9,x.RecordFinder.startFind(e,c);case 9:if((l=i.sent).result){i.next=12;break}throw String("startFind is error");case 12:if(!a){i.next=18;break}return i.next=15,r._encryptDoFind("RecordFinder",c);case 15:i.t0=i.sent,i.next=21;break;case 18:return i.next=20,x.RecordFinder.doFind(_,c);case 20:i.t0=i.sent;case 21:l=i.t0,s=l.records;case 23:if(l.found!==_){i.next=37;break}if(!a){i.next=30;break}return i.next=27,r._encryptDoFind("RecordFinder",c);case 27:i.t1=i.sent,i.next=33;break;case 30:return i.next=32,x.RecordFinder.doFind(_,c);case 32:i.t1=i.sent;case 33:l=i.t1,s=null===l.records?(0,u.default)(s):[].concat((0,u.default)(s),(0,u.default)(l.records)),i.next=23;break;case 37:return i.abrupt("return",s||[]);case 40:throw i.prev=40,i.t2=i.catch(2),String("Error:getRecords is error, please check ".concat(t," is exists"));case 43:return i.prev=43,i.next=46,x.RecordFinder.stopFind(c);case 46:return i.next=48,x.RecordFinder.destroy(c);case 48:return i.finish(43);case 49:case"end":return i.stop()}},i,null,[[2,40,43,49]])}))()},createDoSeekFind:function(t,e){var n,r,i,a,s=this,u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=null,h=!1,d=function(){return(n=n||(0,c.default)(o.default.mark(function n(){var r;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f&&!h){n.next=2;break}return n.abrupt("return");case 2:return h=!0,n.next=5,x.RecordFinder.create(t);case 5:return r=n.sent,n.next=8,x.RecordFinder.startFind(e,r.result);case 8:f=r.result,h=!1;case 10:case"end":return n.stop()}},n)}))).apply(this,arguments)};return{getQuerySize:function(){return(r=r||(0,c.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:if(f){e.next=6;break}return console.warn("Error:createDoSeekFind is error, please check object is exists"),e.abrupt("return",0);case 6:return e.next=8,x.RecordFinder.getQuerySize(f);case 8:return n=e.sent,e.abrupt("return",n.count);case 12:throw e.prev=12,e.t0=e.catch(0),String("Error:createDoSeekFind is error, please check getQuerySize(".concat(t,") is exists"));case 15:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)},doSeekFind:function(e){return(i=i||(0,c.default)(o.default.mark(function e(n){var r,i,a,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(f){e.next=5;break}return console.warn("Error:createDoSeekFind is error, please check object is exists"),e.abrupt("return",!1);case 5:if(r=[],i=null,e.prev=7,a=(n-1)*_,!u){e.next=19;break}return c=[(0,l._data)("RecordFinder.doSeekFind",{offset:a,count:_},{object:f})],e.next=13,s.multiRecordSec(c);case 13:if(!(i=e.sent)[0].error){e.next=16;break}throw String("Error:doSeekFind ".concat(t," is error with Encrypt"));case 16:r=i[0].params.records,e.next=23;break;case 19:return e.next=21,x.RecordFinder.doSeekFind(a,_,f);case 21:i=e.sent,r=i.records;case 23:return e.abrupt("return",r||[]);case 26:throw e.prev=26,e.t0=e.catch(7),String("Error:createDoSeekFind is error, please check doSeekFind(".concat(t,") is exists"));case 29:case"end":return e.stop()}},e,null,[[7,26]])}))).apply(this,arguments)},destroy:function(){return(a=a||(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,x.RecordFinder.stopFind(f);case 5:return t.next=7,x.RecordFinder.destroy(f);case 7:return f=null,t.abrupt("return",!0);case 11:throw t.prev=11,t.t0=t.catch(2),String("Error:createDoSeekFind is error, please check object is undefined");case 14:case"end":return t.stop()}},t,null,[[2,11]])}))).apply(this,arguments)}}},getVideoCaps:function(t){return(0,c.default)(o.default.mark(function e(){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,x.DevVideoInput.instance(t);case 4:return r=e.sent,n=r.result,e.next=8,x.DevVideoInput.getCaps(n);case 8:return r=e.sent,e.abrupt("return",r.caps);case 12:throw e.prev=12,e.t0=e.catch(1),String("Error:getVideoCaps is error, please check channel:".concat(t," is exists"));case 15:return e.prev=15,x.DevVideoInput.destroy(n),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[1,12,15,18]])}))()},DevVideoInputManager:function(t){var e=arguments;return(0,c.default)(o.default.mark(function n(){var r,i,a,s;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,i=e.length>2&&void 0!==e[2]?e[2]:0,a="",n.prev=3,n.next=6,x.DevVideoInput.instance(i);case 6:return s=n.sent,a=s.result,n.next=10,x.DevVideoInput[t](a,r);case 10:return s=n.sent,n.abrupt("return",s.caps);case 14:throw n.prev=14,n.t0=n.catch(3),String("Error:getVideoCaps is error, please check channel:".concat(i," is exists"));case 17:return n.prev=17,x.DevVideoInput.destroy(a),n.finish(17);case 20:case"end":return n.stop()}},n,null,[[3,14,17,20]])}))()},getVideoCapsEx:function(t,e){return(0,c.default)(o.default.mark(function n(){var r,i;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="",n.prev=1,n.next=4,x.DevVideoInput.instance(e);case 4:return i=n.sent,r=i.result,n.next=8,x.DevVideoInput.getCapsEx(r,t);case 8:return i=n.sent,n.abrupt("return",i.caps);case 12:throw n.prev=12,n.t0=n.catch(1),n.t0,String("Error:getVideoCapsEx is error, please check channel:".concat(e," is exists"));case 16:return n.prev=16,x.DevVideoInput.destroy(r),n.finish(16);case 19:case"end":return n.stop()}},n,null,[[1,12,16,19]])}))()},multiRecordSec:function(t){var e=this;return(0,c.default)(o.default.mark(function n(){var r,i,a,s;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=e._getKeyt(),i=T(r),n.next=5,e._encrypt(t,r,i);case 5:return a=n.sent,n.next=8,x.System.multiSec(a);case 8:return a=n.sent,n.next=11,e._decrypt(a.content,i);case 11:return s=n.sent,n.abrupt("return",s.table?s.table:s);case 15:throw n.prev=15,n.t0=n.catch(0),String("Error:multiRecordSec is error");case 18:case"end":return n.stop()}},n,null,[[0,15]])}))()},getDeviceAllInfo:function(t){var e=arguments;return(0,c.default)(o.default.mark(function n(){var r,i,a;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,i="",n.prev=2,n.next=5,x.Storage.instance();case 5:return a=n.sent,i=a.result,n.next=9,x.Storage[t](i,r);case 9:return a=n.sent,n.abrupt("return",a);case 13:throw n.prev=13,n.t0=n.catch(2),String("Error:getDeviceAllInfo is error, please check channel:".concat(t," is exists"));case 16:return n.prev=16,x.Storage.destroy(i),n.finish(16);case 19:case"end":return n.stop()}},n,null,[[2,13,16,19]])}))()},getStorage:function(t){var e=arguments;return(0,c.default)(o.default.mark(function n(){var r,i,a;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,i="",n.prev=2,n.next=5,x.Storage.instance();case 5:return a=n.sent,i=a.result,n.next=9,x.Storage[t](i,r);case 9:return a=n.sent,n.abrupt("return",a);case 13:throw n.prev=13,n.t0=n.catch(2),n.t0,String("Error:getStorage is error, please check channel:".concat(t," is exists"));case 17:return n.prev=17,x.Storage.destroy(i),n.finish(17);case 20:case"end":return n.stop()}},n,null,[[2,13,17,20]])}))()},getMediaFile:function(t){var e=arguments;return(0,c.default)(o.default.mark(function n(){var r,i,a;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,i="",n.prev=2,n.next=5,x.MediaFileFind.instance();case 5:return a=n.sent,i=a.result,n.next=9,x.MediaFileFind[t](i,r);case 9:return a=n.sent,n.abrupt("return",a);case 13:throw n.prev=13,n.t0=n.catch(2),n.t0,String("Error:getMediaFile is error, please check channel:".concat(t," is exists"));case 17:return n.prev=17,x.MediaFileFind.destroy(i),n.finish(17);case 20:case"end":return n.stop()}},n,null,[[2,13,17,20]])}))()},getPlaybackList:function(t){var e=arguments;return(0,c.default)(o.default.mark(function n(){var r,i,a,s,u,c;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,i="",a=r.condition.count,s=r.condition,n.prev=3,n.next=6,x.MediaFileFind.instance();case 6:return c=n.sent,i=c.result,n.next=10,x.MediaFileFind.findFile(i,{condition:s});case 10:if(!(c=n.sent)){n.next=15;break}return n.next=14,x.MediaFileFind.findNextFile(i,{count:a});case 14:u=n.sent;case 15:return n.abrupt("return",u);case 18:throw n.prev=18,n.t0=n.catch(3),"Error:getPlaybackList is error, please check channel:".concat(t," is exists"),n.t0;case 22:return n.prev=22,x.MediaFileFind.destroy(i),n.finish(22);case 25:case"end":return n.stop()}},n,null,[[3,18,22,25]])}))()},getEncode:function(t){var e=arguments;return(0,c.default)(o.default.mark(function n(){var r,i;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,n.prev=1,n.next=4,x.Encode[t](r);case 4:return i=n.sent,n.abrupt("return",i);case 8:throw n.prev=8,n.t0=n.catch(1),n.t0,String("Error:Encode is error, please check channel:".concat(t," is exists"));case 12:return n.prev=12,n.finish(12);case 14:case"end":return n.stop()}},n,null,[[1,8,12,14]])}))()},PTZManager:function(t){var e=arguments;return(0,c.default)(o.default.mark(function n(){var r,i,a,u,c;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:0,i=e.length>2&&void 0!==e[2]?e[2]:null,"object"===(0,s.default)(r)&&(a=r,r=i,i=a),n.prev=3,n.next=6,U(r);case 6:return u=n.sent,n.next=9,x.PTZ[t](u,i);case 9:return c=n.sent,n.abrupt("return",c);case 13:throw n.prev=13,n.t0=n.catch(3),n.t0,n.t0;case 17:return n.prev=17,n.finish(17);case 19:case"end":return n.stop()}},n,null,[[3,13,17,19]])}))()}};var V=new z;e.default=V},function(t,e,n){var r=n(100)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(14).default;function i(){"use strict";t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),o=new P(r||[]);return s(a,"_invoke",{value:M(t,n,o)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",w={};function b(){}function S(){}function D(){}var x={};h(x,c,function(){return this});var _=Object.getPrototypeOf,I=_&&_(_(O([])));I&&I!==a&&o.call(I,c)&&(x=I);var T=D.prototype=b.prototype=Object.create(x);function E(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){function n(i,a,s,u){var c=p(t[i],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,s,u)},function(t){n("throw",t,s,u)}):e.resolve(f).then(function(t){l.value=t,s(l)},function(t){return n("throw",t,s,u)})}u(c.arg)}var i;s(this,"_invoke",{value:function(t,r){function a(){return new e(function(e,i){n(t,r,e,i)})}return i=i?i.then(a,a):a()}})}function M(t,n,r){var i=v;return function(a,o){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===w)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?y:g,c.arg===w)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),w;var a=p(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,w;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,w):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return S.prototype=D,s(T,"constructor",{value:D,configurable:!0}),s(D,"constructor",{value:S,configurable:!0}),S.displayName=h(D,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,D):(t.__proto__=D,h(t,f,"GeneratorFunction")),t.prototype=Object.create(T),t},n.awrap=function(t){return{__await:t}},E(k.prototype),h(k.prototype,l,function(){return this}),n.AsyncIterator=k,n.async=function(t,e,r,i,a){void 0===a&&(a=Promise);var o=new k(d(t,e,r,i),a);return n.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},E(T),h(T,f,"Generator"),h(T,c,function(){return this}),h(T,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),w}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(45);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(45);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(i,a){var o=t.apply(e,r);function s(t){n(o,i,a,s,u,"next",t)}function u(t){n(o,i,a,s,u,"throw",t)}s(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(14).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(11),i=n(48),a=n(108),o=n(56);var s=function t(e){var n=new a(e),s=i(a.prototype.request,n);return r.extend(s,a.prototype,n),r.extend(s,n),s.create=function(n){return t(o(e,n))},s}(n(31));s.Axios=a,s.CanceledError=n(25),s.CancelToken=n(125),s.isCancel=n(55),s.VERSION=n(57).version,s.toFormData=n(52),s.AxiosError=n(17),s.Cancel=s.CanceledError,s.all=function(t){return Promise.all(t)},s.spread=n(126),s.isAxiosError=n(127),t.exports=s,t.exports.default=s},function(t,e,n){"use strict";var r=n(11),i=n(49),a=n(109),o=n(110),s=n(56),u=n(54),c=n(124),l=c.validators;function f(t){this.defaults=t,this.interceptors={request:new a,response:new a}}f.prototype.request=function(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach(function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))});var a,u=[];if(this.interceptors.response.forEach(function(t){u.push(t.fulfilled,t.rejected)}),!i){var f=[o,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(u),a=Promise.resolve(e);f.length;)a=a.then(f.shift(),f.shift());return a}for(var h=e;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(t){p(t);break}}try{a=o(h)}catch(t){return Promise.reject(t)}for(;u.length;)a=a.then(u.shift(),u.shift());return a},f.prototype.getUri=function(t){t=s(this.defaults,t);var e=u(t.baseURL,t.url);return i(e,t.params,t.paramsSerializer)},r.forEach(["delete","get","head","options"],function(t){f.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}}),r.forEach(["post","put","patch"],function(t){function e(e){return function(n,r,i){return this.request(s(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[t]=e(),f.prototype[t+"Form"]=e(!0)}),t.exports=f},function(t,e,n){"use strict";var r=n(11);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){"use strict";var r=n(11),i=n(111),a=n(55),o=n(31),s=n(25);function u(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s}t.exports=function(t){return u(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return u(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(u(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(11),i=n(31);t.exports=function(t,e,n){var a=this||i;return r.forEach(n,function(n){t=n.call(a,t,e)}),t}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),o=r[0],s=r[1],u=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),l=0,f=s>0?o-4:o;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(l(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+t[e+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+t[e+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+d]=255&o,d+=p,o/=256,c-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(17);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(11);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,a,o){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(11),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,a,o={};return t?(r.forEach(t.split("\n"),function(t){if(a=t.indexOf(":"),e=r.trim(t.substr(0,a)).toLowerCase(),n=r.trim(t.substr(a+1)),e){if(o[e]&&i.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}}),o):o}},function(t,e,n){"use strict";var r=n(11);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},function(t,e){t.exports=null},function(t,e,n){"use strict";var r=n(57).version,i=n(17),a={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){a[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var o={};a.transitional=function(t,e,n){function a(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,s){if(!1===t)throw new i(a(r," has been removed"+(e?" in "+e:"")),i.ERR_DEPRECATED);return e&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,s)}},t.exports={assertOptions:function(t,e,n){if("object"!==typeof t)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),a=r.length;a-- >0;){var o=r[a],s=e[o];if(s){var u=t[o],c=void 0===u||s(u,o,t);if(!0!==c)throw new i("option "+o+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+o,i.ERR_BAD_OPTION)}},validators:a}},function(t,e,n){"use strict";var r=n(25);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;this.promise.then(function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}}),this.promise.then=function(t){var e,r=new Promise(function(t){n.subscribe(t),e=t}).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reload=void 0;var r=function(t){var e=Array.prototype.slice.call(arguments,1)||[];return t=new t,function n(){return e=e.concat(Array.prototype.slice.call(arguments)),0===arguments.length&&0!==e.length?(t.apply(this,e),void(e=[])):n}}(function(){var t=null;return function(n){return t||(t=new e(n)),t};function e(e){return new Promise(function(n){var r=e.setIsLogin;e.$t,alert("\u9274\u6743\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u3002"),setTimeout(function(){r(!1),sessionStorage.setItem("_Anonymous_",1),setTimeout(function(){window.location.reload()},1e3),t=null,n(!0)},5e3)})}});e.reload=r},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return a.MD5(t)};var i=r(n(14));if("undefined"==typeof a)var a={};a.MD5=function(t){function e(t){var e=(t>>>0).toString(16);return"00000000".substr(0,8-e.length)+e}function n(t,e,n){return t&e|~t&n}function r(t,e,n){return n&t|~n&e}function a(t,e,n){return t^e^n}function o(t,e,n){return e^(t|~n)}function s(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function c(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}var l=null,f=null;function h(t,e){return 4294967295&t+e}return"string"==typeof t?l=u(t):t.constructor==Array?0===t.length?l=t:"string"==typeof t[0]?l=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(u(t[n]));return e}(t):"number"==typeof t[0]?l=t:f=(0,i.default)(t[0]):"undefined"!=typeof ArrayBuffer?t instanceof ArrayBuffer?l=c(new Uint8Array(t)):t instanceof Uint8Array||t instanceof Int8Array?l=c(t):t instanceof Uint32Array||t instanceof Int32Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Float32Array||t instanceof Float64Array?l=c(new Uint8Array(t.buffer)):f=(0,i.default)(t):f=(0,i.default)(t),f&&alert("MD5 type mismatch, cannot process "+f),function(){function t(t,e,n,r){var i,a,o=w;w=y,y=m,m=h(m,(i=h(g,h(t,h(e,n))))<<(a=r)&4294967295|i>>>32-a),g=o}var i=l.length;l.push(128);var u=l.length%64;if(u>56){for(var c=0;c<64-u;c++)l.push(0);u=l.length%64}for(c=0;c<56-u;c++)l.push(0);l=l.concat(function(t){for(var e=[],n=0;n<8;n++)e.push(255&t),t>>>=8;return e}(8*i));var f=1732584193,d=4023233417,p=2562383102,v=271733878,g=0,m=0,y=0,w=0;for(c=0;c<l.length/64;c++){g=f;var b=64*c;t(n(m=d,y=p,w=v),3614090360,s(l,b),7),t(n(m,y,w),3905402710,s(l,b+4),12),t(n(m,y,w),606105819,s(l,b+8),17),t(n(m,y,w),3250441966,s(l,b+12),22),t(n(m,y,w),4118548399,s(l,b+16),7),t(n(m,y,w),1200080426,s(l,b+20),12),t(n(m,y,w),2821735955,s(l,b+24),17),t(n(m,y,w),4249261313,s(l,b+28),22),t(n(m,y,w),1770035416,s(l,b+32),7),t(n(m,y,w),2336552879,s(l,b+36),12),t(n(m,y,w),4294925233,s(l,b+40),17),t(n(m,y,w),2304563134,s(l,b+44),22),t(n(m,y,w),1804603682,s(l,b+48),7),t(n(m,y,w),4254626195,s(l,b+52),12),t(n(m,y,w),2792965006,s(l,b+56),17),t(n(m,y,w),1236535329,s(l,b+60),22),t(r(m,y,w),4129170786,s(l,b+4),5),t(r(m,y,w),3225465664,s(l,b+24),9),t(r(m,y,w),643717713,s(l,b+44),14),t(r(m,y,w),3921069994,s(l,b),20),t(r(m,y,w),3593408605,s(l,b+20),5),t(r(m,y,w),38016083,s(l,b+40),9),t(r(m,y,w),3634488961,s(l,b+60),14),t(r(m,y,w),3889429448,s(l,b+16),20),t(r(m,y,w),568446438,s(l,b+36),5),t(r(m,y,w),3275163606,s(l,b+56),9),t(r(m,y,w),4107603335,s(l,b+12),14),t(r(m,y,w),1163531501,s(l,b+32),20),t(r(m,y,w),2850285829,s(l,b+52),5),t(r(m,y,w),4243563512,s(l,b+8),9),t(r(m,y,w),1735328473,s(l,b+28),14),t(r(m,y,w),2368359562,s(l,b+48),20),t(a(m,y,w),4294588738,s(l,b+20),4),t(a(m,y,w),2272392833,s(l,b+32),11),t(a(m,y,w),1839030562,s(l,b+44),16),t(a(m,y,w),4259657740,s(l,b+56),23),t(a(m,y,w),2763975236,s(l,b+4),4),t(a(m,y,w),1272893353,s(l,b+16),11),t(a(m,y,w),4139469664,s(l,b+28),16),t(a(m,y,w),3200236656,s(l,b+40),23),t(a(m,y,w),681279174,s(l,b+52),4),t(a(m,y,w),3936430074,s(l,b),11),t(a(m,y,w),3572445317,s(l,b+12),16),t(a(m,y,w),76029189,s(l,b+24),23),t(a(m,y,w),3654602809,s(l,b+36),4),t(a(m,y,w),3873151461,s(l,b+48),11),t(a(m,y,w),530742520,s(l,b+60),16),t(a(m,y,w),3299628645,s(l,b+8),23),t(o(m,y,w),4096336452,s(l,b),6),t(o(m,y,w),1126891415,s(l,b+28),10),t(o(m,y,w),2878612391,s(l,b+56),15),t(o(m,y,w),4237533241,s(l,b+20),21),t(o(m,y,w),1700485571,s(l,b+48),6),t(o(m,y,w),2399980690,s(l,b+12),10),t(o(m,y,w),4293915773,s(l,b+40),15),t(o(m,y,w),2240044497,s(l,b+4),21),t(o(m,y,w),1873313359,s(l,b+32),6),t(o(m,y,w),4264355552,s(l,b+60),10),t(o(m,y,w),2734768916,s(l,b+24),15),t(o(m,y,w),1309151649,s(l,b+52),21),t(o(m,y,w),4149444226,s(l,b+16),6),t(o(m,y,w),3174756917,s(l,b+44),10),t(o(m,y,w),718787259,s(l,b+8),15),t(o(m,y,w),3951481745,s(l,b+36),21),f=h(f,g),d=h(d,m),p=h(p,y),v=h(v,w)}return function(t,n,r,i){for(var a="",o=0,s=0,u=3;u>=0;u--)o=255&(s=arguments[u]),o<<=8,o|=255&(s>>>=8),o<<=8,o|=255&(s>>>=8),o<<=8,a+=e(o|=s>>>=8);return a}(v,p,d,f).toUpperCase()}()}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function i(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function a(){return new i(null)}"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(t,e,n,r,i,a){for(var o=32767&e,s=e>>15;--a>=0;){var u=32767&this[t],c=this[t++]>>15,l=s*u+c*o;i=((u=o*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+s*c+(i>>>30),n[r++]=1073741823&u}return i},r=30):"Netscape"!=navigator.appName?(i.prototype.am=function(t,e,n,r,i,a){for(;--a>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},r=26):(i.prototype.am=function(t,e,n,r,i,a){for(var o=16383&e,s=e>>14;--a>=0;){var u=16383&this[t],c=this[t++]>>14,l=s*u+c*o;i=((u=o*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+s*c,n[r++]=268435455&u}return i},r=28),i.prototype.DB=r,i.prototype.DM=(1<<r)-1,i.prototype.DV=1<<r;i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-r,i.prototype.F2=2*r-52;var o,s,u="0123456789abcdefghijklmnopqrstuvwxyz",c=new Array;for(o="0".charCodeAt(0),s=0;s<=9;++s)c[o++]=s;for(o="a".charCodeAt(0),s=10;s<36;++s)c[o++]=s;for(o="A".charCodeAt(0),s=10;s<36;++s)c[o++]=s;function l(t){return u.charAt(t)}function f(t,e){var n=c[t.charCodeAt(e)];return null==n?-1:n}function h(t){var e=a();return e.fromInt(t),e}function d(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function p(t){this.m=t}function v(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function g(){this.i=0,this.j=0,this.S=new Array}p.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},p.prototype.revert=function(t){return t},p.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},p.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},p.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},v.prototype.convert=function(t){var e=a();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e},v.prototype.revert=function(t){var e=a();return t.copyTo(e),this.reduce(e),e},v.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},v.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},v.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},i.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},i.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},i.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,a=!1,o=0;--r>=0;){var s=8==n?255&t[r]:f(t,r);s<0?"-"==t.charAt(r)&&(a=!0):(a=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},i.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},i.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},i.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,a=(1<<i)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>i|s,s=(this[n]&a)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},i.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,a=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&a)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&a)<<i),e.t=this.t-n,e.clamp()}},i.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},i.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),a=n.t;for(e.t=a+r.t;--a>=0;)e[a]=0;for(a=0;a<r.t;++a)e[a+n.t]=n.am(0,r[a],e,a,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)},i.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},i.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=a());var s=a(),u=this.s,c=t.s,l=this.DB-d(r[r.t-1]);l>0?(r.lShiftTo(l,s),o.lShiftTo(l,n)):(r.copyTo(s),o.copyTo(n));var f=s.t,h=s[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),v=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,y=n.t,w=y-f,b=null==e?a():e;for(s.dlShiftTo(w,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),i.ONE.dlShiftTo(f,b),b.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--w>=0;){var S=n[--y]==h?this.DM:Math.floor(n[y]*v+(n[y-1]+m)*g);if((n[y]+=s.am(0,S,n,w,0,f))<S)for(s.dlShiftTo(w,b),n.subTo(b,n);n[y]<--S;)n.subTo(b,n)}null!=e&&(n.drShiftTo(f,e),u!=c&&i.ZERO.subTo(e,e)),n.t=f,n.clamp(),l>0&&n.rShiftTo(l,n),u<0&&i.ZERO.subTo(n,n)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},i.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},i.prototype.exp=function(t,e){if(t>4294967295||t<1)return i.ONE;var n=a(),r=a(),o=e.convert(this),s=d(t)-1;for(o.copyTo(n);--s>=0;)if(e.sqrTo(n,r),(t&1<<s)>0)e.mulTo(r,o,n);else{var u=n;n=r,r=u}return e.revert(n)},i.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%e;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(i=!0,a=l(n));o>=0;)s<e?(n=(this[o]&(1<<s)-1)<<e-s,n|=this[--o]>>(s+=this.DB-e)):(n=this[o]>>(s-=e)&r,s<=0&&(s+=this.DB,--o)),n>0&&(i=!0),i&&(a+=l(n));return i?a:"0"},i.prototype.negate=function(){var t=a();return i.ZERO.subTo(this,t),t},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},i.prototype.mod=function(t){var e=a();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e},i.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new p(e):new v(e),this.exp(t,n)},i.ZERO=h(0),i.ONE=h(1),g.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},g.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var m,y,w,b=256;function S(){var t;t=(new Date).getTime(),y[w++]^=255&t,y[w++]^=t>>8&255,y[w++]^=t>>16&255,y[w++]^=t>>24&255,w>=b&&(w-=b)}if(null==y){var D;if(y=new Array,w=0,"Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var x=window.crypto.random(32);for(D=0;D<x.length;++D)y[w++]=255&x.charCodeAt(D)}for(;w<b;)D=Math.floor(65536*Math.random()),y[w++]=D>>>8,y[w++]=255&D;w=0,S()}function _(){if(null==m){for(S(),(m=new g).init(y),w=0;w<y.length;++w)y[w]=0;w=0}return m.next()}function I(){}function T(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}I.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=_()},T.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},T.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=new i(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")},T.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=t.length-1;r>=0&&e>0;){var a=t.charCodeAt(r--);a<128?n[--e]=a:a>127&&a<2048?(n[--e]=63&a|128,n[--e]=a>>6|192):(n[--e]=63&a|128,n[--e]=a>>6&63|128,n[--e]=a>>12|224)}n[--e]=0;for(var o=new I,s=new Array;e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--e]=s[0]}return n[--e]=2,n[--e]=0,new i(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r};var E=T;e.default=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=r||function(t,e){var n={},r=n.lib={},i=function(){},a=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new o.init(n,e)}}),s=n.enc={},u=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a);if(e=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,i=t.min(4*e,i),e){for(var u=0;u<e;u+=a)this._doProcessBlock(r,u);u=r.splice(0,e),n.sigBytes-=i}return new o.init(u,i)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=f.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}});var h=n.algo={};return n}(Math);!function(){var t=r,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)t.push(r.charAt(a>>>6*(3-o)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map;(i=r.charAt(64))&&(-1!=(i=t.indexOf(i))&&(n=i));for(var i=[],a=0,o=0;o<n;o++)if(o%4){var s=r.indexOf(t.charAt(o-1))<<o%4*2,u=r.indexOf(t.charAt(o))>>>6-o%4*2;i[a>>>2]|=(s|u)<<24-a%4*8,a++}return e.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,i,a,o){return((t=t+(e&n|~e&r)+i+o)<<a|t>>>32-a)+e}function n(t,e,n,r,i,a,o){return((t=t+(e&r|n&~r)+i+o)<<a|t>>>32-a)+e}function i(t,e,n,r,i,a,o){return((t=t+(e^n^r)+i+o)<<a|t>>>32-a)+e}function a(t,e,n,r,i,a,o){return((t=t+(n^(e|~r))+i+o)<<a|t>>>32-a)+e}for(var o=r,s=(c=o.lib).WordArray,u=c.Hasher,c=o.algo,l=[],f=0;64>f;f++)l[f]=4294967296*t.abs(t.sin(f+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(var o=0;16>o;o++){var s=t[u=r+o];t[u]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}o=this._hash.words;var u=t[r+0],c=(s=t[r+1],t[r+2]),f=t[r+3],h=t[r+4],d=t[r+5],p=t[r+6],v=t[r+7],g=t[r+8],m=t[r+9],y=t[r+10],w=t[r+11],b=t[r+12],S=t[r+13],D=t[r+14],x=t[r+15],_=e(_=o[0],E=o[1],T=o[2],I=o[3],u,7,l[0]),I=e(I,_,E,T,s,12,l[1]),T=e(T,I,_,E,c,17,l[2]),E=e(E,T,I,_,f,22,l[3]);_=e(_,E,T,I,h,7,l[4]),I=e(I,_,E,T,d,12,l[5]),T=e(T,I,_,E,p,17,l[6]),E=e(E,T,I,_,v,22,l[7]),_=e(_,E,T,I,g,7,l[8]),I=e(I,_,E,T,m,12,l[9]),T=e(T,I,_,E,y,17,l[10]),E=e(E,T,I,_,w,22,l[11]),_=e(_,E,T,I,b,7,l[12]),I=e(I,_,E,T,S,12,l[13]),T=e(T,I,_,E,D,17,l[14]),_=n(_,E=e(E,T,I,_,x,22,l[15]),T,I,s,5,l[16]),I=n(I,_,E,T,p,9,l[17]),T=n(T,I,_,E,w,14,l[18]),E=n(E,T,I,_,u,20,l[19]),_=n(_,E,T,I,d,5,l[20]),I=n(I,_,E,T,y,9,l[21]),T=n(T,I,_,E,x,14,l[22]),E=n(E,T,I,_,h,20,l[23]),_=n(_,E,T,I,m,5,l[24]),I=n(I,_,E,T,D,9,l[25]),T=n(T,I,_,E,f,14,l[26]),E=n(E,T,I,_,g,20,l[27]),_=n(_,E,T,I,S,5,l[28]),I=n(I,_,E,T,c,9,l[29]),T=n(T,I,_,E,v,14,l[30]),_=i(_,E=n(E,T,I,_,b,20,l[31]),T,I,d,4,l[32]),I=i(I,_,E,T,g,11,l[33]),T=i(T,I,_,E,w,16,l[34]),E=i(E,T,I,_,D,23,l[35]),_=i(_,E,T,I,s,4,l[36]),I=i(I,_,E,T,h,11,l[37]),T=i(T,I,_,E,v,16,l[38]),E=i(E,T,I,_,y,23,l[39]),_=i(_,E,T,I,S,4,l[40]),I=i(I,_,E,T,u,11,l[41]),T=i(T,I,_,E,f,16,l[42]),E=i(E,T,I,_,p,23,l[43]),_=i(_,E,T,I,m,4,l[44]),I=i(I,_,E,T,b,11,l[45]),T=i(T,I,_,E,x,16,l[46]),_=a(_,E=i(E,T,I,_,c,23,l[47]),T,I,u,6,l[48]),I=a(I,_,E,T,v,10,l[49]),T=a(T,I,_,E,D,15,l[50]),E=a(E,T,I,_,d,21,l[51]),_=a(_,E,T,I,b,6,l[52]),I=a(I,_,E,T,f,10,l[53]),T=a(T,I,_,E,y,15,l[54]),E=a(E,T,I,_,s,21,l[55]),_=a(_,E,T,I,g,6,l[56]),I=a(I,_,E,T,x,10,l[57]),T=a(T,I,_,E,p,15,l[58]),E=a(E,T,I,_,S,21,l[59]),_=a(_,E,T,I,h,6,l[60]),I=a(I,_,E,T,w,10,l[61]),T=a(T,I,_,E,c,15,l[62]),E=a(E,T,I,_,m,21,l[63]);o[0]=o[0]+_|0,o[1]=o[1]+E|0,o[2]=o[2]+T|0,o[3]=o[3]+I|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var a=t.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}}),o.MD5=u._createHelper(c),o.HmacMD5=u._createHmacHelper(c)}(Math),function(){var t,e=r,n=(t=e.lib).Base,i=t.WordArray,a=(t=e.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=(s=this.cfg).hasher.create(),r=i.create(),a=r.words,o=s.keySize,s=s.iterations;a.length<o;){u&&n.update(u);var u=n.update(t).finalize(e);n.reset();for(var c=1;c<s;c++)u=n.finalize(u),n.reset();r.concat(u)}return r.sigBytes=4*o,r}});e.EvpKDF=function(t,e,n){return a.create(n).compute(t,e)}}(),r.lib.Cipher||function(t){var e=(p=r).lib,n=e.Base,i=e.WordArray,a=e.BufferedBlockAlgorithm,o=p.enc.Base64,s=p.algo.EvpKDF,u=e.Cipher=a.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?v:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?v:d).decrypt(t,e,n,r)}}}});e.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=p.mode={},l=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)t[e+i]^=r[i]},f=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;l.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),f.Decryptor=f.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=t.slice(e,e+r);n.decryptBlock(t,e),l.call(this,t,e,r),this._prevBlock=i}}),c=c.CBC=f,f=(p.pad={}).Pkcs7={pad:function(t,e){for(var n,r=(n=(n=4*e)-t.sigBytes%n)<<24|n<<16|n<<8|n,a=[],o=0;o<n;o+=4)a.push(r);n=i.create(a,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:f}),reset:function(){u.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),d=(c=(p.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(o)},parse:function(t){var e=(t=o.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var n=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:n})}},e.SerializableCipher=n.extend({cfg:n.extend({format:c}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return e=i.finalize(e),i=i.cfg,h.create({ciphertext:e,key:n,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),p=(p.kdf={}).OpenSSL={execute:function(t,e,n,r){return r||(r=i.random(8)),t=s.create({keySize:e+n}).compute(t,r),n=i.create(t.words.slice(e),4*n),t.sigBytes=4*e,h.create({key:t,iv:n,salt:r})}},v=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:p}),encrypt:function(t,e,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,(t=d.encrypt.call(this,t,e,n.key,r)).mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],a=[],o=[],s=[],u=[],c=[],l=[],f=[],h=[],d=[],p=[],v=0;256>v;v++)p[v]=128>v?v<<1:v<<1^283;var g=0,m=0;for(v=0;256>v;v++){var y=(y=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&y^99;i[g]=y,a[y]=g;var w=p[g],b=p[w],S=p[b],D=257*p[y]^16843008*y;o[g]=D<<24|D>>>8,s[g]=D<<16|D>>>16,u[g]=D<<8|D>>>24,c[g]=D,D=16843009*S^65537*b^257*w^16843008*g,l[y]=D<<24|D>>>8,f[y]=D<<16|D>>>16,h[y]=D<<8|D>>>24,d[y]=D,g?(g=w^p[p[p[S^w]]],m^=p[p[m]]):g=m=1}var x=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),r=this._keySchedule=[],a=0;a<n;a++)if(a<e)r[a]=t[a];else{var o=r[a-1];a%e?6<e&&4==a%e&&(o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o]):(o=i[(o=o<<8|o>>>24)>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o],o^=x[a/e|0]<<24),r[a]=r[a-e]^o}for(t=this._invKeySchedule=[],e=0;e<n;e++)a=n-e,o=e%4?r[a]:r[a-4],t[e]=4>e||4>=a?o:l[i[o>>>24]]^f[i[o>>>16&255]]^h[i[o>>>8&255]]^d[i[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,s,u,c,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,f,h,d,a),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,a,o,s){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],f=t[e+2]^n[2],h=t[e+3]^n[3],d=4,p=1;p<u;p++){var v=r[c>>>24]^i[l>>>16&255]^a[f>>>8&255]^o[255&h]^n[d++],g=r[l>>>24]^i[f>>>16&255]^a[h>>>8&255]^o[255&c]^n[d++],m=r[f>>>24]^i[h>>>16&255]^a[c>>>8&255]^o[255&l]^n[d++];h=r[h>>>24]^i[c>>>16&255]^a[l>>>8&255]^o[255&f]^n[d++],c=v,l=g,f=m}v=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[d++],g=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^n[d++],m=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[d++],h=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++],t[e]=v,t[e+1]=g,t[e+2]=m,t[e+3]=h},keySize:8});t.AES=e._createHelper(n)}(),r.mode.ECB=function(){var t=r.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),t.Decryptor=t.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),t}(),r.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}};var i=r;e.default=i},function(t,e,n){"use strict";n.r(e),n.d(e,"SM2",function(){return I}),n.d(e,"SM3",function(){return y}),n.d(e,"SM4",function(){return L});var r=n(19),i=n.n(r),a=n(3),o=n(7),s=o.BigInteger.prototype.Barrett;function u(t,e){this.x=e,this.q=t}function c(t,e,n,r){this.curve=t,this.x=e,this.y=n,this.z=null==r?o.BigInteger.ONE:r,this.zinv=null}function l(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new c(this,null,null),this.reducer=new s(this.q)}u.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},u.prototype.toBigInteger=function(){return this.x},u.prototype.negate=function(){return new u(this.q,this.x.negate().mod(this.q))},u.prototype.add=function(t){return new u(this.q,this.x.add(t.toBigInteger()).mod(this.q))},u.prototype.subtract=function(t){return new u(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},u.prototype.multiply=function(t){return new u(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},u.prototype.square=function(){return new u(this.q,this.x.square().mod(this.q))},u.prototype.divide=function(t){return new u(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},c.prototype.getX=function(){null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q));var t=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(t),this.curve.fromBigInteger(t)},c.prototype.getY=function(){null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q));var t=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(t),this.curve.fromBigInteger(t)},c.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(o.BigInteger.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(o.BigInteger.ZERO))},c.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(o.BigInteger.ZERO)&&!this.y.toBigInteger().equals(o.BigInteger.ZERO)},c.prototype.negate=function(){return new c(this.curve,this.x,this.y.negate(),this.z)},c.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(o.BigInteger.ZERO.equals(n))return o.BigInteger.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new o.BigInteger("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),s=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),u=s.multiply(n),l=i.multiply(s),f=e.square().multiply(this.z),h=f.subtract(l.shiftLeft(1)).multiply(t.z).subtract(u).multiply(n).mod(this.curve.q),d=l.multiply(r).multiply(e).subtract(a.multiply(u)).subtract(f.multiply(e)).multiply(t.z).add(e.multiply(u)).mod(this.curve.q),p=u.multiply(this.z).multiply(t.z).mod(this.curve.q);return new c(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(d),p)},c.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new o.BigInteger("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),a=this.curve.a.toBigInteger(),s=e.square().multiply(t);o.BigInteger.ZERO.equals(a)||(s=s.add(this.z.square().multiply(a)));var u=(s=s.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),l=s.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),f=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new c(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(l),f)},c.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new o.BigInteger("3")),i=this.negate(),a=this;for(e=r.bitLength()-2;e>0;--e){a=a.twice();var s=r.testBit(e);s!=n.testBit(e)&&(a=a.add(s?this:i))}return a},c.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?i=n.testBit(r)?i.add(a):i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i},l.prototype.getQ=function(){return this.q},l.prototype.getA=function(){return this.a},l.prototype.getB=function(){return this.b},l.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},l.prototype.getInfinity=function(){return this.infinity},l.prototype.fromBigInteger=function(t){return new u(this.q,t)},l.prototype.reduce=function(t){this.reducer.reduce(t)},l.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),r=t.substr(e+2,e);return new c(this,this.fromBigInteger(new o.BigInteger(n,16)),this.fromBigInteger(new o.BigInteger(r,16)));default:return null}},l.prototype.encodePointHex=function(t){if(t.isInfinity())return"00";var e=t.getX().toBigInteger().toString(16),n=t.getY().toBigInteger().toString(16),r=this.getQ().toString(16).length;for(r%2!=0&&r++;e.length<r;)e="0"+e;for(;n.length<r;)n="0"+n;return"04"+e+n};var f=function(t,e){return t<<(e%=32)|t>>>32-e},h=function(t,e){var n=e-t.length;return(n>0?"0".repeat(n):"")+t},d=function(t){return t<16?2043430169:2055708042},p=function(t,e,n,r){return r<16?t^e^n:t&e|t&n|e&n},v=function(t,e,n,r){return r<16?t^e^n:t&e|~t&n},g=function(t,e,n){for(var r,i,a,o,s,u=function(t){var e,n=new Array(132);t.forEach(function(t,e){n[e]=t});for(var r=16;r<68;r++)n[r]=(e=n[r-16]^n[r-9]^f(n[r-3],15))^f(e,15)^f(e,23)^f(n[r-13],7)^n[r-6];for(var i=0;i<64;i++)n[i+68]=n[i]^n[i+4];return n}(e),c=t[0],l=t[1],h=t[2],g=t[3],m=t[4],y=t[5],w=t[6],b=t[7],S=0;S<64;S++)i=(r=f(f(c,12)+m+f(d(S),S),7))^f(c,12),a=p(c,l,h,S)+g+i+u[S+68],o=v(m,y,w,S)+b+r+u[S],g=h,h=f(l,9),l=c,c=a,b=w,w=f(y,19),y=m,m=(s=o)^f(s,9)^f(s,17);return[c^t[0],l^t[1],h^t[2],g^t[3],m^t[4],y^t[5],w^t[6],b^t[7]]},m=function(t,e,n){if("string"==typeof t?t=a.Buffer.from(t,e||"utf8"):t instanceof ArrayBuffer&&(t=a.Buffer.from(t)),!a.Buffer.isBuffer(t))throw new TypeError('Expected "string" | "Buffer" | "ArrayBuffer" but received "'+Object.prototype.toString.call(t)+'"');var r,o,s,u,c,l;r=t,o=a.Buffer.alloc(1,128),u=a.Buffer.alloc(s=(s=r.length%64)>=56?64-s%56-1:56-s-1,0),c=a.Buffer.alloc(8),l=8*r.length,c.writeUInt32BE(Math.floor(l/Math.pow(2,32)),0),c.writeUInt32BE(l%Math.pow(2,32),4);for(var f=(t=a.Buffer.concat([r,o,u,c],r.length+1+s+8)).length/64,h=new Array(f),d=0;d<f;d++){h[d]=new Array(16);for(var p=0;p<16;p++)h[d][p]=t.readUInt32BE(64*d+4*p)}var v=new Array(f);v[0]=[1937774191,1226093241,388252375,3666478592,2842636476,372324522,3817729613,2969243214];for(var m=0;m<f;m++)v[m+1]=g(v[m],h[m]);var y=a.Buffer.alloc(32);return v[f].forEach(function(t,e){return y.writeInt32BE(t,4*e)}),n?y.toString(n):i()(y)},y={__proto__:null,digest:m},w=new o.SecureRandom,b=function(){var t=new l(new o.BigInteger("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF",16),new o.BigInteger("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC",16),new o.BigInteger("28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93",16)),e=t.decodePointHex("0432C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0");return{curve:t,G:e,n:new o.BigInteger("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123",16)}}(),S=b.curve,D=b.G,x=b.n;function _(t,e){for(var n=[],r=Math.ceil(e/32),i=e%32,o=1;o<=r;o++){var s=a.Buffer.allocUnsafe(4);s.writeUInt32BE(o);var u=m(a.Buffer.concat([t,s]));n.push(o===r&&i?a.Buffer.from(u).slice(0,i):a.Buffer.from(u))}return a.Buffer.concat(n,e)}var I={__proto__:null,constants:{C1C2C3:0,C1C3C2:1,PC:"04"},generateKeyPair:function(){var t=new o.BigInteger(x.bitLength(),w).mod(x.subtract(new o.BigInteger("2"))).add(o.BigInteger.ONE),e=h(t.toString(16),64),n=D.multiply(t);return{privateKey:e,publicKey:"04"+h(n.getX().toBigInteger().toString(16),64)+h(n.getY().toBigInteger().toString(16),64)}},encrypt:function(t,e,n){var r=n||{},s=r.mode,u=void 0===s?1:s,c=r.outputEncoding,l=r.pc;if("string"==typeof t?t=a.Buffer.from(t,r.inputEncoding||"utf8"):t instanceof ArrayBuffer&&(t=a.Buffer.from(t)),!a.Buffer.isBuffer(t))throw new TypeError('Expected "string" | "Buffer" | "ArrayBuffer" but received "'+Object.prototype.toString.call(t)+'"');var f=new o.BigInteger(x.bitLength(),w).mod(x.subtract(o.BigInteger.ONE)).add(o.BigInteger.ONE),d=D.multiply(f),p=h(d.getX().toBigInteger().toString(16),64)+h(d.getY().toBigInteger().toString(16),64),v=S.decodePointHex(e).multiply(f),g=h(v.getX().toBigInteger().toString(16),64),y=h(v.getY().toBigInteger().toString(16),64),b=_(a.Buffer.from(g+y,"hex"),t.length),I=h(new o.BigInteger(t.toString("hex"),16).xor(new o.BigInteger(b.toString("hex"),16)).toString(16),2*t.length),T=m(g+t.toString("hex")+y,"hex","hex"),E=a.Buffer.from((l?"04":"")+(0===u?p+I+T:p+T+I),"hex");return c?E.toString(c):i()(E)},decrypt:function(t,e,n){var r=n||{},s=r.mode,u=void 0===s?1:s,c=r.outputEncoding,l=r.pc;if("string"==typeof t?t=a.Buffer.from(t,r.inputEncoding):t instanceof ArrayBuffer&&(t=a.Buffer.from(t)),!a.Buffer.isBuffer(t))throw new TypeError('Expected "string" | "Buffer" | "ArrayBuffer" but received "'+Object.prototype.toString.call(t)+'"');var f=(t=l?t.slice(1):t).slice(0,32).toString("hex"),d=t.slice(32,64).toString("hex"),p=S.decodePointHex("04"+f+d).multiply(new o.BigInteger(e,16)),v=h(p.getX().toBigInteger().toString(16),64),g=h(p.getY().toBigInteger().toString(16),64),y=t.slice(64,96),w=t.slice(96);0===u&&(y=t.slice(t.length-32),w=t.slice(64,t.length-32));var b=_(a.Buffer.from(v+g,"hex"),w.length),D=new o.BigInteger(w.toString("hex"),16).xor(new o.BigInteger(b.toString("hex"),16)).toString(16),x=m(v+D+g,"hex","hex")===y.toString("hex")?a.Buffer.from(D,"hex"):a.Buffer.alloc(0);return c?x.toString(c):i()(x)}},T=[[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5],[43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153],[156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98],[228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166],[71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168],[104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53],[30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135],[212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158],[234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161],[224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227],[29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111],[213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81],[141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216],[10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176],[137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132],[24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72]],E=[2746333894,1453994832,1736282519,2993693404],k=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257],M=/^[0-9a-f]{32}$/i,A=function(t){return T[(4026531840&t)>>>28][(251658240&t)>>>24]<<24|T[(15728640&t)>>>20][(983040&t)>>>16]<<16|T[(61440&t)>>>12][(3840&t)>>>8]<<8|T[(240&t)>>>4][(15&t)>>>0]<<0},R=function(t){return(e=A(t))^f(e,2)^f(e,10)^f(e,18)^f(e,24);var e},C=function(t){var e,n=new Array(36);n[0]=t[0]^E[0],n[1]=t[1]^E[1],n[2]=t[2]^E[2],n[3]=t[3]^E[3];for(var r=new Array(32),i=0;i<32;i++)n[i+4]=n[i]^(e=A(n[i+1]^n[i+2]^n[i+3]^k[i]))^f(e,13)^f(e,23),r[i]=n[i+4];return r},P=function(t,e){for(var n=C(e),r=0;r<32;r++)t[r+4]=t[r]^R(t[r+1]^t[r+2]^t[r+3]^n[r]);return[t[35],t[34],t[33],t[32]]},O=function(t,e){for(var n=C(e).reverse(),r=0;r<32;r++)t[r+4]=t[r]^R(t[r+1]^t[r+2]^t[r+3]^n[r]);return[t[35],t[34],t[33],t[32]]},F=function(t){return[t.readInt32BE(0),t.readInt32BE(4),t.readInt32BE(8),t.readInt32BE(12)]},B=function(t){for(var e=a.Buffer.alloc(16),n=0;n<4;n++)e.writeInt32BE(t[n],4*n);return e},L={__proto__:null,constants:{ECB:1,CBC:2},encrypt:function(t,e,n){var r=n||{},o=r.mode,s=r.iv,u=r.outputEncoding;if("string"==typeof t?t=a.Buffer.from(t,r.inputEncoding||"utf8"):t instanceof ArrayBuffer&&(t=a.Buffer.from(t)),!a.Buffer.isBuffer(t))throw new TypeError('Expected "string" | "Buffer" | "ArrayBuffer" but received "'+Object.prototype.toString.call(t)+'"');if(!M.test(e))throw new TypeError("Invalid value of cipher `key`");if(e=a.Buffer.from(e,"hex"),2===o&&!M.test(s))throw new TypeError("Invalid value of `iv` option");return function(t,e,n,r){n&&(n=F(n)),e=F(e);for(var o=[],s=(t=function(t){var e=16-t.length%16,n=a.Buffer.alloc(e,e);return a.Buffer.concat([t,n],t.length+e)}(t)).length/16,u=0;u<s;u++)if(n){var c=16*u,l=[n[0]^t.readInt32BE(c),n[1]^t.readInt32BE(c+4),n[2]^t.readInt32BE(c+8),n[3]^t.readInt32BE(c+12)],f=P(l,e);o.push(B(f)),n=f.slice(0)}else{var h=16*u,d=[t.readInt32BE(h),t.readInt32BE(h+4),t.readInt32BE(h+8),t.readInt32BE(h+12)],p=P(d,e);o.push(B(p))}var v=a.Buffer.concat(o,t.length);return r?v.toString(r):i()(v)}(t,e,s=2===o?a.Buffer.from(s,"hex"):null,u)},decrypt:function(t,e,n){var r=n||{},o=r.mode,s=r.iv,u=r.outputEncoding;if("string"==typeof t?t=a.Buffer.from(t,r.inputEncoding):t instanceof ArrayBuffer&&(t=a.Buffer.from(t)),!a.Buffer.isBuffer(t))throw new TypeError('Expected "string" | "Buffer" | "ArrayBuffer" but received "'+Object.prototype.toString.call(t)+'"');if(!M.test(e))throw new TypeError("Invalid value of cipher `key`");if(e=a.Buffer.from(e,"hex"),2===o&&!M.test(s))throw new TypeError("Invalid value of `iv` option");return function(t,e,n,r){n&&(n=F(n)),e=F(e);var o=[],s=t.length/16;if(n)for(var u=s-1;u>=0;u--){var c,l=16*u;c=u>0?[t.readInt32BE(l-16),t.readInt32BE(l-16+4),t.readInt32BE(l-16+8),t.readInt32BE(l-16+12)]:n;var f=[t.readInt32BE(l),t.readInt32BE(l+4),t.readInt32BE(l+8),t.readInt32BE(l+12)],h=O(f,e);o.unshift(B([h[0]^c[0],h[1]^c[1],h[2]^c[2],h[3]^c[3]]))}else for(var d=0;d<s;d++){var p=16*d,v=[t.readInt32BE(p),t.readInt32BE(p+4),t.readInt32BE(p+8),t.readInt32BE(p+12)],g=O(v,e);o.push(B(g))}var m=a.Buffer.concat(o,t.length-o[o.length-1][15]);return r?m.toString(r):i()(m)}(t,e,s=2===o?a.Buffer.from(s,"hex"):null,u)}}},function(t,e,n){var r=n(134);e.Ber=r,e.BerReader=r.Reader,e.BerWriter=r.Writer},function(t,e,n){var r=n(34),i=n(35),a=n(135),o=n(149);for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s]);for(var u in r)r.hasOwnProperty(u)&&(e[u]=r[u]);e.Reader=a,e.Writer=o},function(t,e,n){(function(e){n(58);var r=n(35),i=n(34).InvalidAsn1Error;function a(t){if(!t||!e.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128==(128&e)){if(0==(e&=127))throw i("Indefinite length not supported");if(this._size-t<e)return null;this._len=0;for(var n=0;n<e;n++)this._len*=256,this._len+=255&this._buf[t++]}else this._len=e;return t},a.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw i("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var n=this.readLength(this._offset+1);return null===n?null:(this._offset=n,e)},a.prototype.readInt=function(t){return this._readTag(t)},a.prototype.readBoolean=function(t){return"number"!==typeof t&&(t=r.Boolean),0!==this._readTag(t)},a.prototype.readEnumeration=function(t){return"number"!==typeof t&&(t=r.Enumeration),this._readTag(t)},a.prototype.readString=function(t,n){t||(t=r.OctetString);var a=this.peek();if(null===a)return null;if(a!==t)throw i("Expected 0x"+t.toString(16)+": got 0x"+a.toString(16));var o=this.readLength(this._offset+1);if(null===o)return null;if(this.length>this._size-o)return null;if(this._offset=o,0===this.length)return n?e.alloc(0):"";var s=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,n?s:s.toString("utf8")},a.prototype.readOID=function(t){t||(t=r.OID);var e=this.readString(t,!0);if(null===e)return null;for(var n=[],i=0,a=0;a<e.length;a++){var o=255&e[a];i<<=7,i+=127&o,0==(128&o)&&(n.push(i>>>0),i=0)}return i=n.shift(),n.unshift(i%40),n.unshift(i/40>>0),n.join(".")},a.prototype.readBitString=function(t){t||(t=r.BitString);var e=this.peek();if(null===e)return null;if(e!==t)throw i("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return"";var a=this._buf[this._offset++],o=this._buf.slice(this._offset,this._offset+this.length-1),s=parseInt(o.toString("hex"),16).toString(2).padStart(8*o.length,"0");return this._offset+=this.length-1,s.substring(0,s.length-a)},a.prototype._readTag=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&e!==t)throw i("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(0===this.length)throw i("Zero-length integer");if(this.length>this._size-n)return null;this._offset=n;for(var r=this._buf.readInt8(this._offset++),a=1;a<this.length;a++)r*=256,r+=this._buf[this._offset++];if(!Number.isSafeInteger(r))throw i("Integer not representable as javascript number");return r},t.exports=a}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=n(137);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),a="";for(var o in i)a+=o;return t!==a}()?r:function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?r:Object.assign:r}},function(t,e,n){"use strict";var r=n(138),i=n(60)(),a=n(140),o=Object,s=a("Array.prototype.push"),u=a("Object.prototype.propertyIsEnumerable"),c=i?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var n=o(t);if(1===arguments.length)return n;for(var a=1;a<arguments.length;++a){var l=o(arguments[a]),f=r(l),h=i&&(Object.getOwnPropertySymbols||c);if(h)for(var d=h(l),p=0;p<d.length;++p){var v=d[p];u(l,v)&&s(f,v)}for(var g=0;g<f.length;++g){var m=f[g];if(u(l,m)){var y=l[m];n[m]=y}}}return n}},function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(59),a=Object.keys,o=a?function(t){return a(t)}:n(139),s=Object.keys;o.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return i(t)?s(r.call(t)):s(t)}):Object.keys=o;return Object.keys||o},t.exports=o},function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=n(59),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===a.call(t),r=o(t),s=e&&"[object String]"===a.call(t),h=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=c&&n;if(s&&t.length>0&&!i.call(t,0))for(var v=0;v<t.length;++v)h.push(String(v));if(r&&t.length>0)for(var g=0;g<t.length;++g)h.push(String(g));else for(var m in t)p&&"prototype"===m||!i.call(t,m)||h.push(String(m));if(u)for(var y=function(t){if("undefined"===typeof window||!d)return f(t);try{return f(t)}catch(t){return!1}}(t),w=0;w<l.length;++w)y&&"constructor"===l[w]||!i.call(t,l[w])||h.push(l[w]);return h}}t.exports=r},function(t,e,n){"use strict";var r=n(61),i=n(145),a=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&a(t,".prototype.")>-1?i(n):n}},function(t,e,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(60);t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},function(t,e,n){"use strict";var r={foo:{}},i=Object;t.exports=function(){return{__proto__:r}.foo===r.foo&&!({__proto__:null}instanceof i)}},function(t,e,n){"use strict";var r=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!==typeof e||"[object Function]"!==i.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,a=r.call(arguments,1),o=Math.max(0,e.length-a.length),s=[],u=0;u<o;u++)s.push("$"+u);if(n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var i=e.apply(this,a.concat(r.call(arguments)));return Object(i)===i?i:this}return e.apply(t,a.concat(r.call(arguments)))}),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n}},function(t,e,n){"use strict";var r=n(36);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=n(36),i=n(61),a=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(o,a),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=s(r,o,arguments);u&&c&&(u(e,"length").configurable&&c(e,"length",{value:1+l(0,t.length-(arguments.length-1))}));return e};var f=function(){return s(r,a,arguments)};c?c(t.exports,"apply",{value:f}):t.exports.apply=f},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<a;u=r[++n])v(u)||!b(u)?o+=" "+u:o+=" "+s(u);return o},e.deprecate=function(n,r){if("undefined"!==typeof t&&!0===t.noDeprecation)return n;if("undefined"===typeof t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var a,o={};function s(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&e._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=l(t,i,r)),i}var a=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(g(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,n);if(a)return a;var o=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),D(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(x(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(D(n))return f(n)}var c,b="",_=!1,I=["{","}"];(d(n)&&(_=!0,I=["[","]"]),x(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(b=" "+RegExp.prototype.toString.call(n)),S(n)&&(b=" "+Date.prototype.toUTCString.call(n)),D(n)&&(b=" "+f(n)),0!==o.length||_&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=_?function(t,e,n,r,i){for(var a=[],o=0,s=e.length;o<s;++o)E(e,String(o))?a.push(h(t,e,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(h(t,e,n,r,i,!0))}),a}(t,n,r,s,o):o.map(function(e){return h(t,n,r,s,e,_)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,b,I)):I[0]+b+I[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),E(r,i)||(o="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=v(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),y(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"===typeof t}function v(t){return null===t}function g(t){return"number"===typeof t}function m(t){return"string"===typeof t}function y(t){return void 0===t}function w(t){return b(t)&&"[object RegExp]"===_(t)}function b(t){return"object"===typeof t&&null!==t}function S(t){return b(t)&&"[object Date]"===_(t)}function D(t){return b(t)&&("[object Error]"===_(t)||t instanceof Error)}function x(t){return"function"===typeof t}function _(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(y(a)&&(a=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=t.pid;o[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else o[n]=function(){};return o[n]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=m,e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=y,e.isRegExp=w,e.isObject=b,e.isDate=S,e.isError=D,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=n(147);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){(function(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");[t.getDate(),T[t.getMonth()],e].join(" ")})(),e.format.apply(e,arguments)},e.inherits=n(148),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var k="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(k&&t[k]){var e;if("function"!==typeof(e=t[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push(function(t,r){t?n(t):e(r)});try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),k&&Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=k,e.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};e.apply(this,n).then(function(e){t.nextTick(o,null,e)},function(e){t.nextTick(M,e,o)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(50))},function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(e){var r=n(58),i=n(35),a=n(34).InvalidAsn1Error,o={size:1024,growthFactor:8};function s(t){var n,i;n=o,i=t||{},r.ok(n),r.equal(typeof n,"object"),r.ok(i),r.equal(typeof i,"object"),Object.getOwnPropertyNames(n).forEach(function(t){if(!i[t]){var e=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(i,t,e)}}),t=i,this._buf=e.alloc(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(s.prototype,"buffer",{get:function(){if(this._seq.length)throw new a(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),s.prototype.writeByte=function(t){if("number"!==typeof t)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t},s.prototype.writeInt=function(t,e){if(!Number.isInteger(t))throw new TypeError("argument must be an integer");"number"!==typeof e&&(e=i.Integer);let n=[];for(;t<-128||t>=128;)n.push(255&t),t=Math.floor(t/256);for(n.push(255&t),this._ensure(2+n.length),this._buf[this._offset++]=e,this._buf[this._offset++]=n.length;n.length;)this._buf[this._offset++]=n.pop()},s.prototype.writeNull=function(){this.writeByte(i.Null),this.writeByte(0)},s.prototype.writeEnumeration=function(t,e){if("number"!==typeof t)throw new TypeError("argument must be a Number");return"number"!==typeof e&&(e=i.Enumeration),this.writeInt(t,e)},s.prototype.writeBoolean=function(t,e){if("boolean"!==typeof t)throw new TypeError("argument must be a Boolean");"number"!==typeof e&&(e=i.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},s.prototype.writeString=function(t,n){if("string"!==typeof t)throw new TypeError("argument must be a string (was: "+typeof t+")");"number"!==typeof n&&(n=i.OctetString);var r=e.byteLength(t);this.writeByte(n),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)},s.prototype.writeBuffer=function(t,n){if(!e.isBuffer(t))throw new TypeError("argument must be a buffer");"number"===typeof n&&(this.writeByte(n),this.writeLength(t.length)),t.length>0&&(this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length)},s.prototype.writeStringArray=function(t,e){if(!(t instanceof Array))throw new TypeError("argument must be an Array[String]");var n=this;t.forEach(function(t){n.writeString(t,e)})},s.prototype.writeOID=function(t,e){if("string"!==typeof t)throw new TypeError("argument must be a string");if("number"!==typeof e&&(e=i.OID),!/^([0-9]+\.){0,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");var n=t.split("."),r=[];r.push(40*parseInt(n[0],10)+parseInt(n[1],10)),n.slice(2).forEach(function(t){!function(t,e){e<128?t.push(e):e<16384?(t.push(e>>>7|128),t.push(127&e)):e<2097152?(t.push(e>>>14|128),t.push(255&(e>>>7|128)),t.push(127&e)):e<268435456?(t.push(e>>>21|128),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e)):(t.push(255&(e>>>28|128)),t.push(255&(e>>>21|128)),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e))}(r,parseInt(t,10))});var a=this;this._ensure(2+r.length),this.writeByte(e),this.writeLength(r.length),r.forEach(function(t){a.writeByte(t)})},s.prototype.writeLength=function(t){if("number"!==typeof t)throw new TypeError("argument must be a Number");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(t<=16777215))throw new a("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},s.prototype.startSequence=function(t){"number"!==typeof t&&(t=i.Sequence|i.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},s.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,n=this._offset-e;if(n<=127)this._shift(e,n,-2),this._buf[t]=n;else if(n<=255)this._shift(e,n,-1),this._buf[t]=129,this._buf[t+1]=n;else if(n<=65535)this._buf[t]=130,this._buf[t+1]=n>>8,this._buf[t+2]=n;else{if(!(n<=16777215))throw new a("Sequence too long");this._shift(e,n,1),this._buf[t]=131,this._buf[t+1]=n>>16,this._buf[t+2]=n>>8,this._buf[t+3]=n}},s.prototype._shift=function(t,e,n){r.ok(void 0!==t),r.ok(void 0!==e),r.ok(n),this._buf.copy(this._buf,t+n,t,t+e),this._offset+=n},s.prototype._ensure=function(t){if(r.ok(t),this._size-this._offset<t){var n=this._size*this._options.growthFactor;n-this._offset<t&&(n+=t);var i=e.alloc(n);this._buf.copy(i,0,0,this._offset),this._buf=i,this._size=n}},t.exports=s}).call(this,n(3).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loginError=function(t,e){var n=t.error&&t.error.code,i=t.params&&t.params.remainLockSecond||void 0,a=t.params&&t.params.remainLoginTimes||void 0;switch(n){case 268632081:i?alert("".concat((0,r.tl)("com.ModifyPwdLockedSecond").replace("XXX",i))):alert((0,r.tl)("com.LoginErrorNo5"));break;case 268632085:a?alert("".concat((0,r.tl)("com.AccountOrpasswordFailedTip").replace("%d",a))):alert((0,r.tl)("com.LoginErrorNo1"));break;case 268632070:alert((0,r.tl)("com.LoginErrorNo2"));break;case 268632071:alert((0,r.tl)("com.LoginErrorNo1"));break;case 268632073:alert((0,r.tl)("com.AccoutBlockTip"));break;case 268632074:alert((0,r.tl)("com.LoginErrorNo4"));break;case 268632075:alert((0,r.tl)("com.LoginErrorNo10"));break;case 268632090:alert((0,r.tl)("com.LoginFailedPleaseRefresh"));break;case 268632093:alert((0,r.tl)("com.LoginByPrevent"));break;default:alert((0,r.tl)("com.LoginFailTip"))}};var r=n(62)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setCookie=e.getCookie=void 0;e.setCookie=function(t,e,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=t+"="+e+"; "+i};e.getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(-1!==i.indexOf(e))return i.substring(e.length,i.length)}return""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserInfo=function(){var t=navigator.userAgent.toLowerCase(),e=navigator.platform.toLowerCase(),n=t.match(/(opera|ie|trident|firefox|chrome|version)[\s/:]([\w\d.]+)?.*?(safari|version[\s/:]([\w\d.]+)|rv:(\d.?)|$)/)||[null,"unknown",0],r=("ie"===n[1]||"trident"===n[1])&&document.documentMode,i={name:"version"===n[1]?n[3]:"trident"===n[1]?"ie":n[1],version:r||parseFloat("opera"===n[1]&&n[4]?n[4]:"trident"===n[1]&&n[5]?n[5]:n[2]),Platform:{name:t.match(/ip(?:ad|od|hone)/)?"ios":(t.match(/(?:webos|android)/)||e.match(/mac|win|linux/)||["other"])[0]}};return i[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.Platform[i.Platform.name]=!0,i},e.BrowserType=function(){var t=navigator.userAgent.toLowerCase(),e=navigator.appName,n=null,r=0;if(t.replace(/(chrome\/|firefox\/|version\/|rv:)(\d+)(?=.)/gi,function(t,e,n){r=n}),"Microsoft Internet Explorer"===e||t.indexOf("trident")>-1||t.indexOf("edge/")>-1||t.indexOf("edg/")>-1)return n="ie","Microsoft Internet Explorer"===e?(t=/msie ([0-9]{1,}[.0-9]{0,})/.exec(t),n+=parseInt(t[1])):t.indexOf("trident")>-1?n+=11:(t.indexOf("edge/")>-1||t.indexOf("edg/")>-1)&&(n="edge"),n;t.indexOf("safari")>-1?n=t.indexOf("chrome")>-1?"chrome":"safari":t.indexOf("firefox")>-1&&(n="firefox");return n+"-"+r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="line",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data.push(a),a}},this.drawStart=function(e){var n=null,o=0;a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),!r.util.moveFlag&&!r.util.resizeFlag)if(n=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],1===++o){if(t.data.length>=t.regionNum)return o=0,void(n=null);var s={data:[]};s.option=i.jQlib.extend(!0,{},e),s.shapeId=r.util.shapeId++,s.option.zindex=r.util.zindex++,s.option.type=t.type,s.option.selected=!0,t.data.push(s),t.data[t.data.length-1].data[0]=i.jQlib.extend(!0,[],n),r.util.drawState=1}else 2===o&&(t.data[t.data.length-1].data[1]=i.jQlib.extend(!0,[],n))}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){var n=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(1===o){var a=t.data[t.data.length-1];a.option.vertical?(a.data[1]=[],a.data[1][0]=a.data[0][0],a.data[1][1]=n[1]):a.option.horizontal?(a.data[1]=[],a.data[1][1]=a.data[0][1],a.data[1][0]=n[0]):a.data[1]=i.jQlib.extend(!0,[],n),r.util.drawState=1,t.drawFunc()}});var s=function(e){if(2===o){var n=t.data[t.data.length-1],a=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(n.option.vertical?(n.data[1]=[],n.data[1][0]=n.data[0][0],n.data[1][1]=a[1]):n.option.horizontal?(n.data[1]=[],n.data[1][1]=n.data[0][1],n.data[1][0]=a[0]):n.data[1]=i.jQlib.extend(!0,[],a),n.option.segment&&n.option.segment.length>1){for(var s=[],u=0,c=0;c<n.option.segment.length;c++){var l=r.util.segmentsIntr(n.data[0],n.data[1],n.option.segment[c][0],n.option.segment[c][1]);if(l&&(s[u]=l,u++),s&&2===s.length)break}if(!s||2!==s.length)return t.data.length=t.data.length-1,o=0,r.util.drawState=0,void t.drawFunc();n.data[0]=s[0],n.data[1]=s[1]}if(n.option.maxPoly&&n.option.maxPoly.length>0){var f=r.util.lineInPoly(n.data,n.option.maxPoly);if(!1===f)return t.data.length=t.data.length-1,o=0,r.util.drawState=0,void t.drawFunc()}t.drawFunc(),o=0,n.event={},n.event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(n),r.util.drawState=2}};a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",s),a.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",s)},this.draw=function(e){if(!0!==e.option.hide&&2===e.data.length){var n=null;if(e.option.selected?(this.ctx.strokeStyle=e.option.selectedColor,n=e.option.selectedColor,r.util.drawSelectRect(t.ctx,e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw),t.ctx.closePath()):(this.ctx.strokeStyle=e.option.strokeColor,n=e.option.strokeColor),this.ctx.beginPath(),2===e.option.PenStyle&&this.ctx.setLineDash([10]),this.ctx.moveTo(e.data[0][0]*this.coordinate.widthDraw,e.data[0][1]*this.coordinate.heightDraw),this.ctx.lineTo(e.data[1][0]*this.coordinate.widthDraw,e.data[1][1]*this.coordinate.heightDraw),this.ctx.stroke(),this.ctx.setLineDash([]),this.ctx.closePath(),(0===e.option.direction||1===e.option.direction||2===e.option.direction)&&2===e.data.length){var a=r.util.getArrayLines([e.data[0][0]*this.coordinate.widthDraw,e.data[0][1]*this.coordinate.heightDraw],[e.data[1][0]*this.coordinate.widthDraw,e.data[1][1]*this.coordinate.heightDraw],e.option.direction);if(a&&a.length>=3){i.jQlib.each(a,function(e,n){r.util.drawAppendLine(t.ctx,n)});var o=["A","B"];e.option.directionNames&&2===e.option.directionNames.length&&(o=[e.option.directionNames[0],e.option.directionNames[1]]),r.util.strokeText(t.ctx,o[0],a[0][0][0]+10,a[0][0][1]+10,null,n),r.util.strokeText(t.ctx,o[1],a[0][1][0]+10,a[0][1][1]+10,null,n)}}if(e.option.array){var s=r.util.getCoordinatePoint(e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw,e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw,r.util.arrayLength),u=r.util.getRotateByDegree(s,[e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw],30),c=r.util.getRotateByDegree(s,[e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw],330);r.util.drawAppendLine(t.ctx,u),r.util.drawAppendLine(t.ctx,c)}if(e.option.endPointLineEnable){var l=[e.data[0][0]*this.coordinate.widthDraw,e.data[0][1]*this.coordinate.heightDraw],f=[e.data[1][0]*this.coordinate.widthDraw,e.data[1][1]*this.coordinate.heightDraw],h=r.util.getVerticalSegmentOfLine(l,f,l,e.option.endPointLineLength),d=r.util.getVerticalSegmentOfLine(l,f,f,e.option.endPointLineLength);r.util.drawAppendLine(t.ctx,h),r.util.drawAppendLine(t.ctx,d)}if(e.option.ruleName&&e.option.ruleName.length>0){var p=10,v=r.util.getStrokeTextAlign(t.ctx,t.canvasDom.width,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+p);"right"===v&&(p=-10);var g=10;e.option.font&&(g=parseInt(e.option.font.split(" ")[3]));var m=e.data[0][1]*t.coordinate.heightDraw+g;r.util.strokeText(t.ctx,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+p,m,v,n)}}},this.checkOnPoint=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.onPoint(i,n.data,!1);return!1!==a&&(n.option.selected=!0,{data:n,point:a})},this.checkSelected=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.onLine(i,n.data);return!!a&&(n.option.selected=!0,{data:n})},this.moveShape=function(e,n,a,o,s){var u=i.jQlib.extend(!0,[],o.data),c=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],l=c[0]-e[0],f=c[1]-e[1];if(!0===(s=s||o.option.ignoreMaxPoly));else if(o.option.maxPoly&&o.option.maxPoly.length>0){var h=r.util.lineInPoly([[n.data[0][0]+l,n.data[0][1]+f],[n.data[1][0]+l,n.data[1][1]+f]],o.option.maxPoly);if(!1===h)return!0}o.data[0][0]=n.data[0][0]+l,o.data[0][1]=n.data[0][1]+f,o.data[1][0]=n.data[1][0]+l,o.data[1][1]=n.data[1][1]+f,o.beforModifyData=u,t.drawFunc(),delete o.beforModifyData},this.resizeShape=function(e,n,a,o){var s=i.jQlib.extend(!0,[],a.data),u=[Math.round((n.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===(o=o||a.option.ignoreMaxPoly));else if(a.option.maxPoly&&a.option.maxPoly.length>0){var c;if(a.option.vertical)if(a.option.horizontal){var l=i.jQlib.extend(!0,[],a.data);l[e][0]=u[0],c=r.util.lineInPoly(l,a.option.maxPoly)}else{var f=i.jQlib.extend(!0,[],a.data);f[e][1]=u[1],c=r.util.lineInPoly(f,a.option.maxPoly)}else{var h=i.jQlib.extend(!0,[],a.data);h[e][0]=u[0],h[e][1]=u[1],c=r.util.lineInPoly(h,a.option.maxPoly)}if(!1===c)return!0}a.option.vertical?a.data[e][1]=u[1]:a.option.horizontal?a.data[e][0]=u[0]:(a.data[e][0]=u[0],a.data[e][1]=u[1]),a.beforModifyData=s,t.drawFunc(),delete a.beforModifyData}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="rect",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data.push(a),a}},this.drawStart=function(e){var n=null;a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),!(r.util.moveFlag||r.util.resizeFlag||t.data.length>=t.regionNum)){n=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];var o={data:[]};o.option=i.jQlib.extend(!0,{},e),o.shapeId=r.util.shapeId++,o.option.zindex=r.util.zindex++,o.option.type=t.type,t.data.push(o),t.data[t.data.length-1].data[0]=i.jQlib.extend(!0,[],n),r.util.drawState=1}}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){if(!r.util.moveFlag&&!r.util.resizeFlag){var a=t.data.length-1,o=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(n){if(t.data[a].option.defaultSize)t.data[a].data[1]=[t.data[a].data[0][0]+t.data[a].option.defaultSize.width||2e3,t.data[a].data[0][1]+t.data[a].option.defaultSize.height||1e3];else{var s=t.data[a];if(s.option.lockWH){var u=Math.ceil(0-(s.data[0][0]-o[0])*s.option.lockWH.height/s.option.lockWH.width+s.data[0][1]);if(u>8191||u<0)return;s.data[1]=i.jQlib.extend(!0,[],[o[0],u])}else s.data[1]=i.jQlib.extend(!0,[],o)}r.util.drawState=1,t.drawFunc()}}});var o=function(e){if(!r.util.moveFlag&&!r.util.resizeFlag){var a=null,o=null,s=t.data.length-1;if(n){var u=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(u[0]===n[0]&&u[1]===n[1])t.data.length=t.data.length-1,r.util.drawState=2,n=null;else{if(t.data[s].option.lockWH);else{if(t.data[s].option.maxRect){var c={};c.width=u[0]-t.data[s].data[0][0],c.height=u[1]-t.data[s].data[0][1],a=t.checkRectSize(t.data[s],c,"maxRect")}if(t.data[s].option.minRect){var l={};l.width=u[0]-t.data[s].data[0][0],l.height=u[1]-t.data[s].data[0][1],o=t.checkRectSize(t.data[s],l,"minRect")}t.data[s].option.defaultSize||(t.data[s].data[1]=i.jQlib.extend(!0,[],a||o||u))}t.drawFunc(),r.util.drawState=2,n=null,t.data[s].event={},t.data[s].event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[s]),!0===t.data[s].option.disappear&&(t.data.length=t.data.length-1,t.drawFunc())}}}};a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",o),a.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",o)},this.draw=function(e){if(!0!==e.option.hide){var n=null;if(e.option.selected?(t.ctx.strokeStyle=e.option.selectedColor,n=e.option.selectedColor,r.util.drawSelectRect(t.ctx,e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[1][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[0][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw),t.ctx.closePath()):(t.ctx.strokeStyle=e.option.strokeColor,n=e.option.strokeColor),t.ctx.beginPath(),t.ctx.rect(e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw,(e.data[1][0]-e.data[0][0])*t.coordinate.widthDraw,(e.data[1][1]-e.data[0][1])*t.coordinate.heightDraw),t.ctx.closePath(),t.ctx.stroke(),e.option.fillStyle&&(t.ctx.fillStyle=e.option.fillStyle,t.ctx.fillRect(e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw,(e.data[1][0]-e.data[0][0])*t.coordinate.widthDraw,(e.data[1][1]-e.data[0][1])*t.coordinate.heightDraw)),e.option.title&&r.util.strokeText(t.ctx,e.option.title,(e.data[0][0]/2+e.data[1][0]/2)*t.coordinate.widthDraw,(e.data[0][1]/2+e.data[1][1]/2+100)*t.coordinate.heightDraw,"center",n),(0===e.option.direction||1===e.option.direction||2===e.option.direction)&&2===e.data.length){var a=r.util.getArrayLines([e.data[0][0]*this.coordinate.widthDraw,e.data[0][1]*this.coordinate.heightDraw],[e.data[0][0]*this.coordinate.widthDraw,e.data[1][1]*this.coordinate.heightDraw],e.option.direction);a&&a.length>=3&&(i.jQlib.each(a,function(e,n){r.util.drawAppendLine(t.ctx,n)}),r.util.strokeText(t.ctx,"A",a[0][0][0]+10,a[0][0][1]+10,null,n),r.util.strokeText(t.ctx,"B",a[0][1][0]+10,a[0][1][1]+10,null,n))}if(e.option.ruleName&&e.option.ruleName.length>0){var o=10,s=r.util.getStrokeTextAlign(t.ctx,t.canvasDom.width,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+o);"right"===s&&(o=-10),r.util.strokeText(t.ctx,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+o,e.data[0][1]*t.coordinate.heightDraw+10,s,n)}if(e.option.showSize){var u=Math.ceil(Math.abs(e.data[0][0]-e.data[1][0])*r.util.resolution.width/r.util.defalutCoordinate.width),c=Math.ceil(Math.abs(e.data[0][1]-e.data[1][1])*r.util.resolution.height/r.util.defalutCoordinate.height);r.util.strokeText(t.ctx,u+"*"+c,(e.data[0][0]+e.data[1][0])/2*t.coordinate.widthDraw,(e.data[0][1]+e.data[1][1])/2*t.coordinate.heightDraw,"center",n)}}},this.checkOnPoint=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.onPoint(i,n.data,!0);return!1!==a&&(n.option.selected=!0,{data:n,point:a})},this.checkSelected=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;if(!n.option.selectType||"onLine"===n.option.selectType){var a=[];a[0]=n.data[0],a[1]=[n.data[1][0],n.data[0][1]],a[2]=n.data[1],a[3]=[n.data[0][0],n.data[1][1]],a[4]=n.data[0];for(var o=0;o<4;o++){var s=r.util.onLine(i,[a[o],a[o+1]]);if(s)return n.option.selected=!0,{data:n}}}if(!n.option.selectType||"inSide"===n.option.selectType){var u=r.util.pointInRect(i,n.data);if(u)return n.option.selected=!0,{data:n}}return!1},this.moveShape=function(e,n,i,a){var o=[Math.round((i.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((i.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],s=o[0]-e[0],u=o[1]-e[1];!0===a.option.horizontalMove&&(u=0);var c=a.option.maxPoly[2][0]||8191,l=a.option.maxPoly[2][1]||8191;return n.data[0][0]+s<0&&(s=0-n.data[0][0]),n.data[0][0]+s>c&&(s=c-n.data[0][0]),n.data[1][0]+s<0&&(s=0-n.data[1][0]),n.data[1][0]+s>c&&(s=c-n.data[1][0]),n.data[0][1]+u<0&&(u=0-n.data[0][1]),n.data[0][1]+u>l&&(u=l-n.data[0][1]),n.data[1][1]+u<0&&(u=0-n.data[1][1]),n.data[1][1]+u>l&&(u=l-n.data[1][1]),a.data[0][0]=n.data[0][0]+s,a.data[0][1]=n.data[0][1]+u,a.data[1][0]=n.data[1][0]+s,a.data[1][1]=n.data[1][1]+u,t.drawFunc(),!0},this.resizeShape=function(e,n,i){var a=[Math.round((n.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];this.resizeRectByRegion(i,e,a),t.drawFunc()},this.resize=function(e,n,r,i){t.coordinate.widthDraw=e,t.coordinate.heightDraw=n,t.coordinate.widthMouse=r,t.coordinate.heightMouse=i},this.checkRectSize=function(t,e,n){var r=null,i=Math.abs(t.option[n][1][0]-t.option[n][0][0]),a=Math.abs(t.option[n][1][1]-t.option[n][0][1]),o=Math.abs(e.width),s=Math.abs(e.height);return"maxRect"===n?(o>=i||s>=a)&&(r=[],e.width>0?r[0]=t.data[0][0]+i:r[0]=t.data[0][0]-i,e.height>0?r[1]=t.data[0][1]+a:r[1]=t.data[0][1]-a):"minRect"===n&&(o<=i||s<=a)&&(r=[],e.width>0?r[0]=t.data[0][0]+i:r[0]=t.data[0][0]-i,e.height>0?r[1]=t.data[0][1]+a:r[1]=t.data[0][1]-a),r},this.checkRectSizeForResize=function(t,e,n){var r=Math.abs(t.option[n][1][0]-t.option[n][0][0]),i=Math.abs(t.option[n][1][1]-t.option[n][0][1]),a=Math.abs(e.width),o=Math.abs(e.height),s=[];return"maxRect"===n?(a>r&&(s[0]="maxRectWidth"),o>i&&(s[1]="maxRectHeight")):"minRect"===n&&(a<r&&(s[0]="minRectWidth"),o<i&&(s[1]="minRectHeight")),s},this.resizeRectByRegion=function(e,n,r){var i,a,o,s={},u=[],c=[];if(e.option.lockWH)switch(n){case 0:if((o=Math.ceil(0-(e.data[0][0]-r[0])*e.option.lockWH.height/e.option.lockWH.width+e.data[0][1]))>8191||o<0)return;if(r[1]=o,e.option.minRect&&(s.width=r[0]-e.data[1][0],s.height=r[1]-e.data[1][1],"minRectHeight"===(c=t.checkRectSizeForResize(e,s,"minRect"))[1]||"minRectWidth"===c[0]))return;e.data[0]=r;break;case 1:if((o=Math.ceil(0-(r[0]-e.data[0][0])*e.option.lockWH.height/e.option.lockWH.width+e.data[1][1]))>8191||o<0)return;if(r[1]=o,e.option.minRect&&(s.width=r[0]-e.data[0][0],s.height=r[1]-e.data[1][1],"minRectHeight"===(c=t.checkRectSizeForResize(e,s,"minRect"))[1]||"minRectWidth"===c[0]))return;e.data[1][0]=r[0],e.data[0][1]=r[1];break;case 2:if((o=Math.ceil(0-(e.data[0][0]-r[0])*e.option.lockWH.height/e.option.lockWH.width+e.data[0][1]))>8191||o<0)return;if(r[1]=o,e.option.minRect&&(s.width=r[0]-e.data[0][0],s.height=r[1]-e.data[0][1],"minRectHeight"===(c=t.checkRectSizeForResize(e,s,"minRect"))[1]||"minRectWidth"===c[0]))return;e.data[1]=r;break;case 3:if((o=Math.ceil(0-(r[0]-e.data[1][0])*e.option.lockWH.height/e.option.lockWH.width+e.data[0][1]))>8191||o<0)return;if(r[1]=o,e.option.minRect&&(s.width=r[0]-e.data[1][0],s.height=r[1]-e.data[0][1],"minRectHeight"===(c=t.checkRectSizeForResize(e,s,"minRect"))[1]||"minRectWidth"===c[0]))return;e.data[0][0]=r[0],e.data[1][1]=r[1]}else{switch(n){case 0:s.width=r[0]-e.data[1][0],s.height=r[1]-e.data[1][1],i=[0,0],a=[0,1];break;case 1:s.width=r[0]-e.data[0][0],s.height=r[1]-e.data[1][1],i=[1,0],a=[0,1];break;case 2:s.width=r[0]-e.data[0][0],s.height=r[1]-e.data[0][1],i=[1,0],a=[1,1];break;case 3:s.width=r[0]-e.data[1][0],s.height=r[1]-e.data[0][1],i=[0,0],a=[1,1]}e.option.maxRect&&(u=t.checkRectSizeForResize(e,s,"maxRect")),e.option.minRect&&(c=t.checkRectSizeForResize(e,s,"minRect")),"maxRectWidth"!==u[0]&&"minRectWidth"!==c[0]&&(e.data[i[0]][i[1]]=r[0]),(null===u||"maxRectHeight"!==u[1]&&"minRectHeight"!==c[1])&&(e.data[a[0]][a[1]]=r[1])}}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolyShape=function(){var t=this;this.init=function(e,n,r,i,o){t.type="poly",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=o,t.anchorPoint=new a.CircleShape,t.anchorPoint.init(e,n,function(){},function(){},o),t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data.push(a),a}},this.checkAnchorClick=function(t){for(var e=this.anchorPoint.data,n=-1,r=0,i=e.length;r<i;r++)if(this.anchorPoint.checkSelected(t,e[r])){n=r;break}return n},this.addVertexByAnchor=function(e){var n=this.checkAnchorClick(e);if(-1!==n){for(var i=this.anchorPoint.data[n],a=i.data,o=0,s=this.data.length;o<s;o++){var u=this.data[o];if(u.shapeId===i.option.superPolyShapeId){u.data.splice(n+1,0,[a[0],a[1]]),r.util.moveFlag=!1,t.eventFunc(u);break}}t.drawFunc()}},this.drawStart=function(e){var n=0;o.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),r.util.moveFlag||r.util.resizeFlag||t.data.length>=t.regionNum)t.addVertexByAnchor(a);else if(2===r.util.drawState||0===r.util.drawState){r.util.drawState=1,n=0;var o={data:[]};o.option=i.jQlib.extend(!0,{},e),o.shapeId=r.util.shapeId++,o.option.zindex=r.util.zindex++,o.option.type=t.type,o.option.selected=!0,o.option.maxPointNum=o.option.maxPointNum||20,o.option.minPointNum=o.option.minPointNum||2,t.data.push(o)}}),o.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){var i=t.data.length-1;if(1===r.util.drawState){var a=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];t.data[i].data[n]=a,t.drawFunc()}});var a=function(a){if(1===r.util.drawState){var o=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],s=r.util.pointInPoly([o[0],o[1]],t.data[t.data.length-1].option.maxPoly);if(!s)return;if(2!==a.button&&t.data[t.data.length-1].data.length>=t.data[t.data.length-1].option.maxPointNum){if(!0===t.data[t.data.length-1].option.allowLineCrossPoly);else{var u=r.util.lineCrossPoly(t.data[t.data.length-1].data,n);if(!0===u)return}r.util.drawState=2,n=0,t.drawFunc(),t.data[t.data.length-1].event={},t.data[t.data.length-1].event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[t.data.length-1])}else if(2===a.button&&t.data[t.data.length-1].data.length>t.data[t.data.length-1].option.minPointNum)t.drawFunc(),r.util.drawState=2,n=0,t.data[t.data.length-1].data.length=t.data[t.data.length-1].data.length-1,t.drawFunc(),t.data[t.data.length-1].event={},t.data[t.data.length-1].event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[t.data.length-1]);else{if(!0===t.data[t.data.length-1].option.allowLineCrossPoly);else{var c=r.util.lineCrossPoly(t.data[t.data.length-1].data,n);if(!0===c)return}var l=!0,f=i.jQlib.extend(!0,[],t.data[t.data.length-1].data);if(e.convex&&!r.util.isConvexShape(f)&&(l=!1),!l)return;t.data[t.data.length-1].data.push(o),n++,t.drawFunc()}}};o.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",a),o.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",a)},this.draw=function(e){if(!0!==e.option.hide){var n=null,a=null;e.option.selected?(t.ctx.strokeStyle=e.option.selectedColor,n=e.option.selectedColor,i.jQlib.each(e.data,function(e,n){r.util.drawSelectRect(t.ctx,n[0]*t.coordinate.widthDraw,n[1]*t.coordinate.heightDraw)}),t.ctx.closePath()):(t.ctx.strokeStyle=e.option.strokeColor,t.ctx.font=e.option.font,n=e.option.strokeColor,a=n,e.option.fontColor&&(a=e.option.fontColor)),t.ctx.beginPath();for(var o=0;e.data&&e.data.length>1&&o<e.data.length;o++)0===o?t.ctx.moveTo(e.data[o][0]*t.coordinate.widthDraw,e.data[o][1]*t.coordinate.heightDraw):t.ctx.lineTo(e.data[o][0]*t.coordinate.widthDraw,e.data[o][1]*t.coordinate.heightDraw);if(e.option.closeEnable&&e.data&&e.data.length>1&&t.ctx.lineTo(e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw),t.ctx.stroke(),e.option.fillStyle&&(t.ctx.fillStyle=e.option.fillStyle,t.ctx.fill()),t.ctx.closePath(),(0===e.option.direction||1===e.option.direction||2===e.option.direction)&&e.data.length>=2){var s=r.util.getArrayLines([e.data[0][0]*this.coordinate.widthDraw,e.data[0][1]*this.coordinate.heightDraw],[e.data[1][0]*this.coordinate.widthDraw,e.data[1][1]*this.coordinate.heightDraw],e.option.direction);if(s&&s.length>=3){i.jQlib.each(s,function(e,n){r.util.drawAppendLine(t.ctx,n)});var u=["A","B"];e.option.directionNames&&2===e.option.directionNames.length&&(u=[e.option.directionNames[0],e.option.directionNames[1]]),r.util.strokeText(t.ctx,u[0],s[0][0][0]+10,s[0][0][1]+10,null,n),r.util.strokeText(t.ctx,u[1],s[0][1][0]+10,s[0][1][1]+10,null,n)}}else if(("Enter"===e.option.direction||"Leave"===e.option.direction||"Both"===e.option.direction)&&e.data.length>=3){for(var c=[],l=0;l<e.data.length;l++)c[l]=[],c[l][0]=e.data[l][0]*this.coordinate.widthDraw,c[l][1]=e.data[l][1]*this.coordinate.heightDraw;var f=r.util.getArrayLines([e.data[0][0]*this.coordinate.widthDraw,e.data[0][1]*this.coordinate.heightDraw],[e.data[1][0]*this.coordinate.widthDraw,e.data[1][1]*this.coordinate.heightDraw],e.option.direction,c);f&&f.length>=3&&i.jQlib.each(f,function(e,n){r.util.drawAppendLine(t.ctx,n)})}if(e.option.ruleName&&e.option.ruleName.length>0){var h=10,d=r.util.getStrokeTextAlign(t.ctx,t.canvasDom.width,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+h);"right"===d&&(h=-10);var p=10;e.option.font&&(p=parseInt(e.option.font.split(" ")[3]));var v=e.data[0][1]*t.coordinate.heightDraw+p;r.util.strokeText(t.ctx,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+h,v,d,a)}if(e.option.textArr&&e.option.textArr.length>0){var g=10,m=r.util.getStrokeTextAlign(t.ctx,t.canvasDom.width,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+h);"right"===m&&(g=-10);var y=e.data[0][1]*t.coordinate.heightDraw+10;e.option.textArr.forEach(function(n){y+=1.2*parseInt(e.option.font.split(" ")[3]),r.util.strokeText(t.ctx,n,e.data[0][0]*t.coordinate.widthDraw+g,y,m,a)})}this.addAnchorPoint(e)}},this.getLineMiddlePoint=function(t,e){var n=(t[0]+e[0])/2,r=(t[1]+e[1])/2;return[n,r]},this.addAnchorPoint=function(t){if(t.option.showAnchorPoint&&(this.anchorPoint.data.length=0,!(t.data.length>=t.option.maxPointNum))){var e=i.jQlib.extend(!0,{},t.option);e.moveEnable=!1,e.circleStyle=t.option.circleStyle||"fill",e.fillStyleSelected=e.selectedColor,e.superPolyShapeId=t.shapeId,e.radius=t.option.radius;var n=t.data,r=n.length,a=r;if(t.option.closeEnable||(a-=1),r>=2)for(var o=0;o<a;o++){var s=this.getLineMiddlePoint(n[o%r],n[(o+1)%r]);this.anchorPoint.add(s,e)}for(o=0,r=this.anchorPoint.data.length;o<r;o++)this.anchorPoint.draw(this.anchorPoint.data[o])}},this.checkOnPoint=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.onPoint(i,n.data,!1);return!1!==a&&(n.option.selected=!0,{data:n,point:a})},this.checkSelected=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=null;if((!n.option.selectType||"inSide"===n.option.selectType)&&r.util.pointInPoly(i,n.data))return n.option.selected=!0,{data:n};if(!n.option.selectType||"onLine"===n.option.selectType){for(var o=0;o<n.data.length-1;o++){var s=[n.data[o],n.data[o+1]];if(a=r.util.onLine(i,s))break}if(n.option.closeEnable&&!a){var u=[n.data[n.data.length-1],n.data[0]];a=r.util.onLine(i,u)}if(a)return n.option.selected=!0,{data:n}}return!1},this.moveShape=function(e,n,a,o){for(var s=i.jQlib.extend(!0,[],o.data),u=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],c=u[0]-e[0],l=u[1]-e[1],f=0;f<o.data.length;f++){var h=r.util.pointInPoly([n.data[f][0]+c,n.data[f][1]+l],o.option.maxPoly);if(!h)return!1}for(var d=0;d<o.data.length;d++)o.data[d][0]=n.data[d][0]+c,o.data[d][1]=n.data[d][1]+l;return o.beforModifyData=s,t.drawFunc(),delete o.beforModifyData,!0},this.resizeShape=function(e,n,a){var o=i.jQlib.extend(!0,[],a.data),s=[Math.round((n.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],u=i.jQlib.extend(!0,[],a);if(u.data[e][0]=s[0],u.data[e][1]=s[1],!0===u.option.allowLineCrossPoly);else{var c=r.util.lineCrossPoly(u.data,e);if(!0===c)return!1}var l=!0;if(a.option.convex&&!r.util.isConvexShape(u.data)&&(l=!1),!l)return!1;var f=r.util.pointInPoly([s[0],s[1]],a.option.maxPoly);if(!f)return!1;a.data[e][0]=s[0],a.data[e][1]=s[1],a.beforModifyData=o,t.drawFunc(),delete a.beforModifyData}};var r=n(9),i=n(10),a=n(64),o=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="ellipse",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data.push(a),a}},this.drawStart=function(e){var n=null;a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),!(r.util.moveFlag||r.util.resizeFlag||t.data.length>=t.regionNum)){n=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];var o={data:[]};o.option=i.jQlib.extend(!0,{},e),o.shapeId=r.util.shapeId++,o.option.zindex=r.util.zindex++,o.option.type=t.type,o.option.selected=!0,t.data.push(o),t.data[t.data.length-1].data[0]=i.jQlib.extend(!0,[],n),r.util.drawState=1}}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){if(!r.util.moveFlag&&!r.util.resizeFlag){var a=t.data.length-1,o=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];n&&(t.data[a].data[2]=i.jQlib.extend(!0,[],o),t.data[a].data[1]=[t.data[a].data[2][0],t.data[a].data[0][1]],t.data[a].data[3]=[t.data[a].data[0][0],t.data[a].data[2][1]],r.util.drawState=1,t.drawFunc())}});var o=function(e){if(!r.util.moveFlag&&!r.util.resizeFlag){var i=t.data.length-1;n&&(t.drawFunc(),r.util.drawState=2,n=null,t.data[i].event={},t.data[i].event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[i]))}};a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",o),a.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",o)},this.draw=function(e){if(e&&4===e.data.length&&!0!==e.option.hide){var n=null;if(e.option.selected){t.ctx.strokeStyle=e.option.selectedColor,n=e.option.selectedColor,r.util.drawSelectRect(t.ctx,e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[2][0]*t.coordinate.widthDraw,e.data[2][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[3][0]*t.coordinate.widthDraw,e.data[3][1]*t.coordinate.heightDraw);var i=t._getCrossPoint(e.data);r.util.drawSelectRect(t.ctx,i[0][0]*t.coordinate.widthDraw,i[0][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,i[1][0]*t.coordinate.widthDraw,i[1][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,i[2][0]*t.coordinate.widthDraw,i[2][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,i[3][0]*t.coordinate.widthDraw,i[3][1]*t.coordinate.heightDraw),t.ctx.closePath()}else t.ctx.strokeStyle=e.option.strokeColor,n=e.option.strokeColor;e.option.title&&r.util.strokeText(t.ctx,e.option.title,e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw,"left",n),this._drawEllipse(e.data)}},this._drawEllipse=function(t){var e=(t[0][0]*this.coordinate.widthDraw+t[1][0]*this.coordinate.widthDraw)/2,n=(t[0][1]*this.coordinate.heightDraw+t[3][1]*this.coordinate.heightDraw)/2,r=Math.abs(t[0][0]*this.coordinate.widthDraw-t[1][0]*this.coordinate.widthDraw)/2,i=Math.abs(t[0][1]*this.coordinate.heightDraw-t[3][1]*this.coordinate.heightDraw)/2,a=r>i?1/r:1/i;this.ctx.beginPath(),this.ctx.moveTo(e+r,n);for(var o=0;o<2*Math.PI;o+=a)this.ctx.lineTo(e+r*Math.cos(o),n+i*Math.sin(o));this.ctx.closePath(),this.ctx.stroke()},this.checkOnPoint=function(e,n){if(n&&4===n.data.length){var a=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var o=[];o[0]=i.jQlib.extend(!0,[],n.data[0]),o[2]=i.jQlib.extend(!0,[],n.data[1]),o[4]=i.jQlib.extend(!0,[],n.data[2]),o[6]=i.jQlib.extend(!0,[],n.data[3]);var s=t._getCrossPoint(n.data);o[1]=s[0],o[3]=s[1],o[5]=s[2],o[7]=s[3];var u=r.util.onPoint(a,o,!1);if(!1!==u)return n.option.selected=!0,{data:n,point:u}}return!1},this.checkSelected=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.pointInPoly(i,n.data);return!!a&&(n.option.selected=!0,{data:n})},this.moveShape=function(e,n,i,a){var o=[Math.round((i.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((i.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],s=o[0]-e[0],u=o[1]-e[1],c=r.util.pointInPoly([n.data[0][0]+s,n.data[0][1]+u],a.option.maxPoly),l=r.util.pointInPoly([n.data[2][0]+s,n.data[2][1]+u],a.option.maxPoly);return!(!c||!l)&&(a.data[0][0]=n.data[0][0]+s,a.data[0][1]=n.data[0][1]+u,a.data[2][0]=n.data[2][0]+s,a.data[2][1]=n.data[2][1]+u,a.data[1][0]=a.data[2][0],a.data[1][1]=a.data[0][1],a.data[3][0]=a.data[0][0],a.data[3][1]=a.data[2][1],t.drawFunc(),!0)},this.resizeShape=function(e,n,i){var a=[Math.round((n.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];this.resizeRectByRegion(i,e,a),t.drawFunc()},this.resizeRectByRegion=function(t,e,n){switch(e){case 0:t.data[0]=n,t.data[1][1]=n[1],t.data[3][0]=n[0];break;case 1:t.data[0][1]=n[1],t.data[1][1]=n[1];break;case 2:t.data[1]=n,t.data[0][1]=n[1],t.data[2][0]=n[0];break;case 3:t.data[1][0]=n[0],t.data[2][0]=n[0];break;case 4:t.data[2]=n,t.data[1][0]=n[0],t.data[3][1]=n[1];break;case 5:t.data[2][1]=n[1],t.data[3][1]=n[1];break;case 6:t.data[3]=n,t.data[0][0]=n[0],t.data[2][1]=n[1];break;case 7:t.data[0][0]=n[0],t.data[3][0]=n[0]}},this._getCrossPoint=function(t){var e=[];return e[0]=[(t[0][0]+t[1][0])/2,t[0][1]],e[1]=[t[1][0],(t[1][1]+t[2][1])/2],e[2]=[(t[0][0]+t[1][0])/2,t[2][1]],e[3]=[t[0][0],(t[0][1]+t[3][1])/2],e}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LaneShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="lane",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[],t.tempDetectLine=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data.push(a),a}},this.drawStart=function(e){var n=null,o=0;t.tempDetectLine=[],a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),!(r.util.moveFlag||r.util.resizeFlag||t.data.length>=t.regionNum&&!0!==e.drawDetectLine))if(n=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],!0===e.drawDetectLine){if(0===t.data.length)return;1===++o&&(t.tempDetectLine[0]=i.jQlib.extend(!0,[],n),r.util.drawState=1),2===o&&(t.tempDetectLine[1]=i.jQlib.extend(!0,[],n),r.util.drawState=2)}else if((2===r.util.drawState||0===r.util.drawState)&&(r.util.drawState=1,0===o)){o=0;var s={data:[]};s.option=i.jQlib.extend(!0,{},e),s.shapeId=r.util.shapeId++,s.option.zindex=r.util.zindex++,s.option.type=t.type,s.option.selected=!0,t.data.push(s)}}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(n){var a=[Math.round((n.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===e.drawDetectLine)1===o&&1===r.util.drawState&&(t.tempDetectLine[1]=i.jQlib.extend(!0,[],a),t.drawFunc());else if(1===r.util.drawState){var s=t.data[t.data.length-1];s.data[o]=a,t.drawFunc()}});a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",function(i){if(!0===e.drawDetectLine){if(2===r.util.drawState){o=0,r.util.drawState=0;for(var a=[],s=0;s<t.data.length;s++){var u=t.data[s],c=r.util.segmentsIntr(u.data[0],u.data[1],t.tempDetectLine[0],t.tempDetectLine[1]),l=r.util.segmentsIntr(u.data[2],u.data[3],t.tempDetectLine[0],t.tempDetectLine[1]);c&&l&&(u.data[4]=[Math.floor(c[0]),Math.floor(c[1])],u.data[5]=[Math.floor(l[0]),Math.floor(l[1])],u.event={},u.event.type=r.util.eventName.drawFinish,a.push(u))}return t.tempDetectLine=[],t.drawFunc(),n=null,void(r.util.eventEnabled&&t.eventFunc&&t.eventFunc(a))}}else if(1===r.util.drawState){var f=[Math.round((i.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((i.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],h=t.data[t.data.length-1];if(4===h.data.length){h.data[3]=f;var d=r.util.segmentsIntr(h.data[0],h.data[1],h.data[2],h.data[3]);if(!0===h.option.unCheckLeftRight){if(d)return h.data.length=h.data.length-1,void(o=3);var p=r.util.segmentsIntr(h.data[0],h.data[2],h.data[1],h.data[3]);if(p){var v=[h.data[3][0],h.data[3][1]];h.data[3]=[h.data[2][0],h.data[2][1]],h.data[2]=v}}else{var g=r.util.getNunberSign(h.data[0][1],h.data[1][1]),m=r.util.getNunberSign(h.data[2][1],h.data[3][1]),y=r.util.getPositionByLine(f,[h.data[0],h.data[1]],!0);if("right"!==y||g!==m||d)return h.data.length=h.data.length-1,void(o=3)}t.drawFunc(),r.util.drawState=2,n=null,o=0,t.drawFunc(),h.event={},h.event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(h)}else{if(h.data[o]=f,h.data.length>2)if(!0===h.option.unCheckLeftRight);else{var w=r.util.getPositionByLine(f,[h.data[0],h.data[1]],!0);if("right"!==w)return void(h.data.length=h.data.length-1)}o++,t.drawFunc()}}})},this.draw=function(e){if(!0!==e.option.hide){var n,a=null;if(e.option.selected?(n=e.option.selectedColor,a=e.option.selectedColor,i.jQlib.each(e.data,function(e,n){r.util.drawSelectRect(t.ctx,n[0]*t.coordinate.widthDraw,n[1]*t.coordinate.heightDraw)})):(n=e.option.strokeColor,a=e.option.strokeColor),1===e.data.length||(2===e.data.length?t.drawLine(e.data[0][0],e.data[0][1],e.data[1][0],e.data[1][1],null,!0,n):3===e.data.length?(t.drawLine(e.data[0][0],e.data[0][1],e.data[1][0],e.data[1][1],null,!0,n),t.drawLine(e.data[1][0],e.data[1][1],e.data[2][0],e.data[2][1],!0,null,"#FFFFFF"),t.drawLine(e.data[2][0],e.data[2][1],e.data[0][0],e.data[0][1],!0,null,"#FFFFFF")):4===e.data.length?(t.drawLine(e.data[0][0],e.data[0][1],e.data[1][0],e.data[1][1],null,!0,n),t.drawLine(e.data[2][0],e.data[2][1],e.data[3][0],e.data[3][1],null,!0,n),t.drawLine(e.data[0][0],e.data[0][1],e.data[2][0],e.data[2][1],!0,null,"#FFFFFF"),t.drawLine(e.data[1][0],e.data[1][1],e.data[3][0],e.data[3][1],!0,null,"#FFFFFF")):!0===e.option.detectLine&&6===e.data.length&&(t.drawLine(e.data[0][0],e.data[0][1],e.data[1][0],e.data[1][1],null,!0,n),t.drawLine(e.data[2][0],e.data[2][1],e.data[3][0],e.data[3][1],null,!0,n),t.drawLine(e.data[0][0],e.data[0][1],e.data[2][0],e.data[2][1],!0,null,"#FFFFFF"),t.drawLine(e.data[1][0],e.data[1][1],e.data[3][0],e.data[3][1],!0,null,"#FFFFFF"),t.ctx.save(),t.drawLine(e.data[4][0],e.data[4][1],e.data[5][0],e.data[5][1],!1,null,e.option.detectLineColor),t.ctx.restore())),e.data.length>=2){t.ctx.strokeStyle=n;var o=r.util.getCoordinatePoint(e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw,e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw,r.util.arrayLength),s=r.util.getRotateByDegree(o,[e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw],30),u=r.util.getRotateByDegree(o,[e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw],330);r.util.drawAppendLine(t.ctx,s),r.util.drawAppendLine(t.ctx,u)}if(e.data.length>=4){t.ctx.strokeStyle=n;var c=r.util.getCoordinatePoint(e.data[3][0]*t.coordinate.widthDraw,e.data[3][1]*t.coordinate.heightDraw,e.data[2][0]*t.coordinate.widthDraw,e.data[2][1]*t.coordinate.heightDraw,r.util.arrayLength),l=r.util.getRotateByDegree(c,[e.data[3][0]*t.coordinate.widthDraw,e.data[3][1]*t.coordinate.heightDraw],30),f=r.util.getRotateByDegree(c,[e.data[3][0]*t.coordinate.widthDraw,e.data[3][1]*t.coordinate.heightDraw],330);r.util.drawAppendLine(t.ctx,l),r.util.drawAppendLine(t.ctx,f)}e.option.leftLaneName&&e.option.leftLaneName.length>0&&e.data.length>=2&&r.util.strokeText(t.ctx,e.option.leftLaneName,(e.data[0][0]+e.data[1][0])/2*t.coordinate.widthDraw+10,(e.data[0][1]+e.data[1][1])/2*t.coordinate.heightDraw+10,null,a),e.option.rightLaneName&&e.option.rightLaneName.length>0&&e.data.length>=4&&r.util.strokeText(t.ctx,e.option.rightLaneName,(e.data[2][0]+e.data[3][0])/2*t.coordinate.widthDraw+10,(e.data[2][1]+e.data[3][1])/2*t.coordinate.heightDraw+10,null,a),2===t.tempDetectLine.length&&(t.ctx.save(),t.drawLine(t.tempDetectLine[0][0],t.tempDetectLine[0][1],t.tempDetectLine[1][0],t.tempDetectLine[1][1],!1,null,e.option.detectLineColor),t.ctx.restore())}},this.checkOnPoint=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.onPoint(i,n.data,!1);return!1!==a&&(n.option.selected=!0,{data:n,point:a})},this.checkSelected=function(e,n){var a=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var o=[];if(o[0]=i.jQlib.extend(!0,[],n.data[0]),o[1]=i.jQlib.extend(!0,[],n.data[1]),o[2]=i.jQlib.extend(!0,[],n.data[3]),o[3]=i.jQlib.extend(!0,[],n.data[2]),6===n.data.length){var s=r.util.onLine(a,[n.data[4],n.data[5]]);if(!0===s)return{data:n,resizeLineIndex:3}}var u=r.util.onLine(a,[o[0],o[1]]),c=r.util.onLine(a,[o[2],o[3]]);if(!0===u||!0===c)return n.option.selected=!0,{data:n,resizeLineIndex:!0===u?1:2};var l=r.util.pointInPoly(a,o);return!!l&&(n.option.selected=!0,{data:n,resizeLineIndex:0})},this.moveShape=function(e,n,i,a,o,s){var u=[Math.round((i.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((i.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],c=u[0]-e[0],l=u[1]-e[1];if(!0===o);else if(0===s)for(var f=0;f<a.data.length;f++){var h=r.util.pointInPoly([n.data[f][0]+c,n.data[f][1]+l],a.option.maxPoly);if(!h)return!1}else if(1===s){var d=r.util.lineInPoly([[n.data[0][0]+c,n.data[0][1]+l],[n.data[1][0]+c,n.data[1][1]+l]],a.option.maxPoly);if(!d)return!1}else if(2===s){var p=r.util.lineInPoly([[n.data[2][0]+c,n.data[2][1]+l],[n.data[3][0]+c,n.data[3][1]+l]],a.option.maxPoly);if(!p)return!1}if(0===s)for(var v=0;v<a.data.length;v++)a.data[v][0]=n.data[v][0]+c,a.data[v][1]=n.data[v][1]+l;else if(1===s){var g=r.util.segmentsIntr([n.data[0][0]+c,n.data[0][1]+l],[n.data[1][0]+c,n.data[1][1]+l],[a.data[2][0],a.data[2][1]],[a.data[3][0],a.data[3][1]]);if(g)return;if(!0===a.option.detectLine&&6===a.data.length){var m=a.data[4][0],y=a.data[4][1],w=a.data[5][0],b=a.data[5][1],S=r.util.segmentsInLine(m,y,w,b,n.data[0][0]+c,n.data[0][1]+l,n.data[1][0]+c,n.data[1][1]+l);if(!1===S)return!1;a.data[4][0]=S[0],a.data[4][1]=S[1]}a.data[0][0]=n.data[0][0]+c,a.data[0][1]=n.data[0][1]+l,a.data[1][0]=n.data[1][0]+c,a.data[1][1]=n.data[1][1]+l}else if(2===s){var D=r.util.segmentsIntr([n.data[2][0]+c,n.data[2][1]+l],[n.data[3][0]+c,n.data[3][1]+l],[a.data[0][0],a.data[0][1]],[a.data[1][0],a.data[1][1]]);if(D)return;if(!0===a.option.detectLine&&6===a.data.length){var x=a.data[4][0],_=a.data[4][1],I=a.data[5][0],T=a.data[5][1],E=r.util.segmentsInLine(x,_,I,T,n.data[2][0]+c,n.data[2][1]+l,n.data[3][0]+c,n.data[3][1]+l);if(!1===E)return!1;a.data[5][0]=E[0],a.data[5][1]=E[1]}a.data[2][0]=n.data[2][0]+c,a.data[2][1]=n.data[2][1]+l,a.data[3][0]=n.data[3][0]+c,a.data[3][1]=n.data[3][1]+l}else if(3===s){var k=n.data[4][0]+c,M=n.data[4][1]+l,A=n.data[5][0]+c,R=n.data[5][1]+l,C=!1,P=!1;C=r.util.segmentsInLine(k,M,A,R,a.data[0][0],a.data[0][1],a.data[1][0],a.data[1][1]),P=r.util.segmentsInLine(k,M,A,R,a.data[2][0],a.data[2][1],a.data[3][0],a.data[3][1]),!1!==C&&!1!==P&&(a.data[4][0]=C[0],a.data[4][1]=C[1],a.data[5][0]=P[0],a.data[5][1]=P[1])}return t.drawFunc(),!0},this.resizeShape=function(e,n,a){var o=[Math.round((n.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(e<4){var s=i.jQlib.extend(!0,{},a);s.data[e][0]=o[0],s.data[e][1]=o[1];var u=r.util.segmentsIntr(s.data[0],s.data[1],s.data[2],s.data[3]);if(!0===s.option.unCheckLeftRight){if(u)return}else{var c=r.util.getNunberSign(s.data[0][1],s.data[1][1]),l=r.util.getNunberSign(s.data[2][1],s.data[3][1]);if(2===e||3===e){var f=r.util.getPositionByLine(o,[s.data[0],s.data[1]],!0);if("right"!==f||c!==l||u)return}else if(0===e||1===e){var h=r.util.getPositionByLine(o,[s.data[2],s.data[3]],!0);if("left"!==h||c!==l||u)return}}if(!0===a.option.detectLine&&6===a.data.length){var d=s.data[4][0],p=s.data[4][1],v=s.data[5][0],g=s.data[5][1],m=r.util.segmentsInLine(d,p,v,g,s.data[0][0],s.data[0][1],s.data[1][0],s.data[1][1]),y=r.util.segmentsInLine(d,p,v,g,s.data[2][0],s.data[2][1],s.data[3][0],s.data[3][1]);if(!1===m||!1===y)return!1;a.data[4][0]=m[0],a.data[4][1]=m[1],a.data[5][0]=y[0],a.data[5][1]=y[1]}if(a.data[e][0]=o[0],a.data[e][1]=o[1],!0===a.option.detectLine){a.data[e][0]=o[0],a.data[e][1]=o[1];var w=r.util.segmentsIntr(a.data[0],a.data[2],a.data[1],a.data[3]);if(w)return!1}}t.drawFunc()},this.drawLine=function(e,n,r,i,a,o,s){s=s||"#00FFFF",t.ctx.strokeStyle=s,t.ctx.beginPath(),t.ctx.moveTo(e*t.coordinate.widthDraw,n*t.coordinate.heightDraw),t.ctx.lineTo(r*t.coordinate.widthDraw,i*t.coordinate.heightDraw),t.ctx.setLineDash([]),a&&(t.ctx.setLineDash([3,5]),t.ctx.lineDashOffset=0),t.ctx.closePath(),t.ctx.stroke(),t.ctx.setLineDash([])}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="text",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data.push(a),a}},this.draw=function(e){if(!0!==e.option.hide){var n=t.ctx.font,i=t.ctx.textAlign,a=t.ctx.textBaseline,o=t.ctx.fillStyle;t.ctx.font=e.option.font,t.ctx.textAlign=e.option.textAlign,t.ctx.textBaseline=e.option.textBaseline,t.ctx.fillStyle=e.option.strokeColor,r.util.strokeText(t.ctx,e.option.title,e.data[0]*t.coordinate.widthDraw,e.data[1]*t.coordinate.heightDraw,e.option.textAlign,e.option.strokeColor),t.ctx.font=n,t.ctx.textAlign=i,t.ctx.textBaseline=a,t.ctx.fillStyle=o}},this.checkOnPoint=function(t){return!1},this.checkSelected=function(t,e){return!1}};var r=n(9),i=n(10);n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MotionDetectShape=function(){var t=this,e=0,n=0,o=0,s=0,u=[],c=[],l=0,f=0;this.init=function(e,n,r,i,a){t.type="motionDetect",t.regionNum=1,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[],u=[]},this.add=function(e,n){if(0===o||0===s)return!1;c=[],l=0;var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data[0]=a,u=[],i.jQlib.each(e,function(t,e){u[t]=[],c[t]=l++,i.jQlib.each(e.Region,function(e,n){var r=function(t,e,n){if(t+="",!e||0===e.length||n<=0)return t;for(;t.length<n;)t=e+t;return t}(n.toString(2),"0",o),i=r.split("");u[t][e]=i})}),t.draw(),a},this.drawGrid=function(r,a){if(o=a,s=r,t.ctx.clearRect(0,0,i.jQlib.getWidth(t.canvasDom),i.jQlib.getHeight(t.canvasDom)),0!==r&&0!==a){var u;for(t.ctx.globalAlpha=.5,e=i.jQlib.getWidth(t.canvasDom)/o,n=i.jQlib.getHeight(t.canvasDom)/s,t.ctx.strokeStyle="#C8C8C8",t.ctx.beginPath(),u=0;u<o+1;u++)t.ctx.moveTo(e*u,0),t.ctx.lineTo(e*u,i.jQlib.getHeight(t.canvasDom));for(u=0;u<s+1;u++)t.ctx.moveTo(0,n*u),t.ctx.lineTo(i.jQlib.getWidth(t.canvasDom),n*u);t.ctx.closePath(),t.ctx.stroke()}},this.drawStart=function(e){var n=null,c=null,l=0;a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(e){e.preventDefault(),0!==o&&0!==s&&t.data[0]&&t.data[0].data&&t.data[0].data.length>0&&(n=[e.clientX-r.util.offset(t.canvasDom).left+window.scrollX,e.clientY-r.util.offset(t.canvasDom).top+window.scrollY],c=t.getColumnRow(n),l=u[f][c.row][c.column]-0===0?1:0,u[f][c.row][c.column]=l,t.drawFunc())}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){if(n){var a=[e.clientX-r.util.offset(t.canvasDom).left+window.scrollX,e.clientY-r.util.offset(t.canvasDom).top+window.scrollY],o=t.getColumnRow(a);if(o.row===c.row&&o.column===c.column)return;var s=t.getDataByRect(n,a);i.jQlib.each(s,function(t,e){u[f][e.row][e.column]=l}),c=i.jQlib.extend(!0,{},o),t.drawFunc()}});var h=function(e){n&&(t.data[0].event={},t.data[0].event.type=r.util.eventName.drawFinish,t.matrixToNumber(u),r.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[0])),n=null,null};a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",h),a.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",h)},this.getColumnRow=function(t){var r=0===t[0]?0:Math.ceil(t[0]/e)-1,i=0===t[1]?0:Math.ceil(t[1]/n)-1;return{column:r,row:i}},this.getDataByRect=function(t,r){var i={},a=[],o=0===t[0]?0:Math.ceil(t[0]/e)-1,s=0===t[1]?0:Math.ceil(t[1]/n)-1,u=0===r[0]?0:Math.ceil(r[0]/e)-1,c=0===r[1]?0:Math.ceil(r[1]/n)-1;if(o>u){var l=o;o=u,u=l}s>c&&(l=s,s=c,c=l);for(var f=u-o,h=c-s,d=o;d<=o+f;d++)for(var p=s;p<=s+h;p++)(i={}).column=d,i.row=p,a.push(i);return a},this.draw=function(e){t.drawGrid(s,o),t.drawData(e)},this.drawData=function(a){var o=i.jQlib.extend(!0,[],c);o.sort(r.util.compareArray);for(var s=0;s<o.length;s++){var l=c.indexOf(o[s]),f=u[l];switch(l+""){case"0":t.ctx.fillStyle="#FF2D11";break;case"1":t.ctx.fillStyle="#FFE011";break;case"2":t.ctx.fillStyle="#06C8F9";break;case"3":t.ctx.fillStyle="#3DFF00"}i.jQlib.each(f,function(r,a){i.jQlib.each(a,function(i,a){1===Number.parseInt(a)&&t.ctx.fillRect(i*e,r*n,e,n)})})}},this.checkOnPoint=function(t){return!1},this.checkSelected=function(t){return!1},this.moveShape=function(t,e,n,r){},this.resizeShape=function(t,e,n){},this.matrixToNumber=function(e){i.jQlib.each(e,function(e,n){i.jQlib.each(n,function(n,r){t.data[0].data[e].Region[n]=parseInt(r.join(""),2)})})},this.deleteMotionDetect=function(e){if(t.data[0]&&t.data[0].data&&t.data[0].data.length>0){if(null===e||void 0===e)i.jQlib.each(t.data[0].data,function(t,e){for(var n=0;n<e.Region.length;n++){e.Region[n]=0;for(var r=0;r<o;r++)u[t][n][r]=0}});else for(var n=0;n<t.data[0].data[e].Region.length;n++){t.data[0].data[e].Region[n]=0;for(var a=0;a<o;a++)u[e][n][a]=0}t.draw(),t.data[0].event={},t.data[0].event.type=r.util.eventName.deleteFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[0])}else{var s={event:{}};s.event.type=r.util.eventName.deleteFinish,s.data=null,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(s)}},this.setCurrentDrawId=function(e){c[f=e]=l++,t.drawFunc()}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReSpotShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="reSpot",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[],t.r=6,t.size={width:70,height:20,distance:10}},this.add=function(e,n){if(t.regionNum=1,t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data[0]=a,t.drawStart(n),a}},this.drawStart=function(e){var n=null;t.regionNum=1,a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),!r.util.moveFlag&&!r.util.resizeFlag){n=[Math.round((a.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((a.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];var o={data:[]};o.option=i.jQlib.extend(!0,{},e),o.shapeId=r.util.shapeId++,o.option.zindex=r.util.zindex++,o.option.type=t.type,o.option.selected=!0,o.option.fillStyle=o.option.fillStyle||"#00FF00",t.data[0]=o,t.data[0].data=i.jQlib.extend(!0,[],n),r.util.drawState=1,t.drawFunc()}}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(t){});var o=function(e){if(1===r.util.drawState){var n=t.data[0];n.event={},n.event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(n),r.util.drawState=2}};a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",o),a.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",o)},this.draw=function(e){if(!0!==e.option.hide&&(t.ctx.fillStyle=e.option.fillStyle||"#00FF00",t.ctx.beginPath(),t.ctx.arc(e.data[0]*t.coordinate.widthDraw,e.data[1]*this.coordinate.heightDraw,t.r,0,2*Math.PI,!0),t.ctx.closePath(),t.ctx.fill(),e.option.title)){var n=0,i=0;t.ctx.font="normal normal bold 16px arial";var a=r.util.getStrokeTextAlign(t.ctx,t.canvasDom.width,e.option.title,(e.data[0]+t.size.distance)*t.coordinate.widthDraw);"right"===a&&(n=20,i=t.size.width+20),t.ctx.beginPath(),t.ctx.fillRect(e.data[0]*t.coordinate.widthDraw+t.size.distance-i,e.data[1]*t.coordinate.heightDraw-t.size.height/2,t.size.width,t.size.height),t.ctx.closePath(),r.util.strokeText(t.ctx,e.option.title,e.data[0]*t.coordinate.widthDraw+t.size.distance-n,e.data[1]*t.coordinate.heightDraw+t.size.height/4,a,"#000000"),t.ctx.font="normal normal 100 10px arial"}},this.checkOnPoint=function(t){return!1},this.checkSelected=function(t,e){return!1},this.moveShape=function(t,e,n,r){return!1}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RhombusShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="rhombus",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),a.option.maxRect||(a.option.maxRect=[[0,0],[8191,8191]]),t.data.push(a),a}},this.drawStart=function(e){var n=0;a.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(a){if(a.preventDefault(),!(r.util.moveFlag||r.util.resizeFlag||t.data.length>=t.regionNum)&&(2===r.util.drawState||0===r.util.drawState)&&(r.util.drawState=1,0===n)){var o={data:[]};o.option=i.jQlib.extend(!0,{},e),o.shapeId=r.util.shapeId++,o.option.zindex=r.util.zindex++,o.option.type=t.type,o.option.selected=!0,o.option.maxRect||(o.option.maxRect=[[0,0],[8191,8191]]),t.data.push(o)}}),a.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){if(1===r.util.drawState){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],a=t.data[t.data.length-1];if(a.data[n]=i,a.data.length>=3){var o=a.data[0][0]+a.data[2][0]-a.data[1][0],s=a.data[0][1]+a.data[2][1]-a.data[1][1];a.data[3]=[o,s]}t.drawFunc()}});var o=function(e){if(1===r.util.drawState){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],a=t.data[t.data.length-1];if(4===a.data.length){if(a.data[3][0]<0||a.data[3][0]>a.option.maxRect[1][0]-a.option.maxRect[0][0]||a.data[3][1]<0||a.data[3][1]>a.option.maxRect[1][1]-a.option.maxRect[0][1])return;t.drawFunc(),r.util.drawState=2,n=0,t.drawFunc(),a.event={},a.event.type=r.util.eventName.drawFinish,r.util.eventEnabled&&t.eventFunc&&t.eventFunc(a)}else a.data[n]=i,n++,t.drawFunc()}};a.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",o),a.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",o)},this.draw=function(e){if(!0!==e.option.hide){var n=null;if(e.option.selected?(t.ctx.strokeStyle=e.option.selectedColor,n=e.option.selectedColor,e.data.length>=2&&(r.util.drawSelectRect(t.ctx,e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw)),e.data.length>=3&&(r.util.drawSelectRect(t.ctx,e.data[2][0]*t.coordinate.widthDraw,e.data[2][1]*t.coordinate.heightDraw),r.util.drawSelectRect(t.ctx,e.data[3][0]*t.coordinate.widthDraw,e.data[3][1]*t.coordinate.heightDraw))):(t.ctx.strokeStyle=e.option.strokeColor,n=e.option.strokeColor),t.ctx.beginPath(),e.data.length>=2&&(t.ctx.moveTo(e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw),t.ctx.lineTo(e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw)),e.data.length>=3&&(t.ctx.lineTo(e.data[2][0]*t.coordinate.widthDraw,e.data[2][1]*t.coordinate.heightDraw),t.ctx.lineTo(e.data[3][0]*t.coordinate.widthDraw,e.data[3][1]*t.coordinate.heightDraw),t.ctx.lineTo(e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw)),t.ctx.closePath(),t.ctx.stroke(),(0===e.option.direction||1===e.option.direction||2===e.option.direction)&&e.data.length>=2){var a=r.util.getArrayLines([e.data[0][0]*this.coordinate.widthDraw,e.data[0][1]*this.coordinate.heightDraw],[e.data[1][0]*this.coordinate.widthDraw,e.data[1][1]*this.coordinate.heightDraw],e.option.direction);a&&a.length>=3&&(i.jQlib.each(a,function(e,n){r.util.drawAppendLine(t.ctx,n)}),r.util.strokeText(t.ctx,"A",a[0][0][0]+10,a[0][0][1]+10,null,n),r.util.strokeText(t.ctx,"B",a[0][1][0]+10,a[0][1][1]+10,null,n))}if(e.option.ruleName&&e.option.ruleName.length>0){var o=10,s=r.util.getStrokeTextAlign(t.ctx,t.canvasDom.width,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+o);"right"===s&&(o=-10);var u=10;e.option.font&&(u=parseInt(e.option.font.split(" ")[3]));var c=e.data[0][1]*t.coordinate.heightDraw+u;r.util.strokeText(t.ctx,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+o,c,s,n)}}},this.checkOnPoint=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.onPoint(i,n.data);return!1!==a&&(n.option.selected=!0,{data:n,point:a})},this.checkOnLine=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;for(var a=0;a<4;a++){var o=[];if(o=3===a?[[n.data[3][0],n.data[3][1]],[n.data[0][0],n.data[0][1]]]:[[n.data[a][0],n.data[a][1]],[n.data[a+1][0],n.data[a+1][1]]],r.util.onLine(i,o))return n.option.selected=!0,{data:n,resizeLineIndex:a}}return!1},this.checkSelected=function(e,n){var i=[Math.round((e.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var a=r.util.pointInPoly(i,n.data);return!!a&&(n.option.selected=!0,{data:n})},this.moveShape=function(e,n,i,a,o,s){for(var u=[Math.round((i.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((i.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],c=u[0]-e[0],l=u[1]-e[1],f=0;f<a.data.length;f++){var h=r.util.pointInPoly([n.data[f][0]+c,n.data[f][1]+l],a.option.maxPoly);if(!h)return!1}if(0===s)a.data[0][0]=n.data[0][0]+c,a.data[0][1]=n.data[0][1]+l,a.data[1][0]=n.data[1][0]+c,a.data[1][1]=n.data[1][1]+l;else if(1===s)a.data[2][0]=n.data[2][0]+c,a.data[2][1]=n.data[2][1]+l,a.data[1][0]=n.data[1][0]+c,a.data[1][1]=n.data[1][1]+l;else if(2===s)a.data[3][0]=n.data[3][0]+c,a.data[3][1]=n.data[3][1]+l,a.data[2][0]=n.data[2][0]+c,a.data[2][1]=n.data[2][1]+l;else if(3===s)a.data[0][0]=n.data[0][0]+c,a.data[0][1]=n.data[0][1]+l,a.data[3][0]=n.data[3][0]+c,a.data[3][1]=n.data[3][1]+l;else for(var d=0;d<a.data.length;d++)a.data[d][0]=n.data[d][0]+c,a.data[d][1]=n.data[d][1]+l;return t.drawFunc(),!0},this.resizeShape=function(e,n,i){var a,o,s,u=[Math.round((n.clientX-r.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-r.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];0===e?(a=i.data[3][0]+i.data[1][0]-u[0],o=i.data[3][1]+i.data[1][1]-u[1],s=2):1===e?(a=i.data[0][0]+i.data[2][0]-u[0],o=i.data[0][1]+i.data[2][1]-u[1],s=3):2===e?(a=i.data[1][0]+i.data[3][0]-u[0],o=i.data[1][1]+i.data[3][1]-u[1],s=0):3===e&&(a=i.data[2][0]+i.data[0][0]-u[0],o=i.data[2][1]+i.data[0][1]-u[1],s=1),a<0||a>i.option.maxRect[1][0]-i.option.maxRect[0][0]||o<0||o>i.option.maxRect[1][1]-i.option.maxRect[0][1]||(i.data[s]=[a,o],i.data[e][0]=u[0],i.data[e][1]=u[1],t.drawFunc())}};var r=n(9),i=n(10),a=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectADShape=function(){var t=this,e=[3,3];this.init=function(e,n,r,i,a){t.type="rectAD",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(n,a){if(t.data.length<t.regionNum){var o={};o.data=i.jQlib.extend(!0,[],n),o.shapeId=r.util.shapeId++;var s={borderWidth:2,lineDash:e,borderLength:50,centerLength:30};return o.option=i.jQlib.extend(!0,{},a,s),t.data.push(o),o}},this.drawStart=function(t){return!1},this.draw=function(e){if(!0!==e.option.hide){var n=null;e.option.selected?(t.ctx.strokeStyle=e.option.selectedColor,n=e.option.selectedColor):(t.ctx.strokeStyle=e.option.strokeColor,n=e.option.strokeColor),t.ctx.beginPath();var i=[];i[0]=[e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw],i[1]=[e.data[1][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw],i[2]=[e.data[1][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw],i[3]=[e.data[0][0]*t.coordinate.widthDraw,e.data[1][1]*t.coordinate.heightDraw];var a=e.option.borderLength*t.coordinate.widthDraw,o=e.option.borderWidth,s=e.option.lineDash,u=e.option.centerLength*t.coordinate.widthDraw,c=0,l=0;e.option.rectLine&&(c=Math.min(i[1][0]-i[0][0],i[3][1]-i[0][1]),l=Math.floor(c/2),this.ctx.moveTo((i[0][0]+i[1][0])/2,i[0][1]),this.ctx.lineTo((i[0][0]+i[1][0])/2,i[0][1]-l),this.ctx.moveTo(i[1][0],(i[1][1]+i[2][1])/2),this.ctx.lineTo(i[1][0]+l,(i[1][1]+i[2][1])/2),this.ctx.moveTo((i[2][0]+i[3][0])/2,i[2][1]),this.ctx.lineTo((i[2][0]+i[3][0])/2,i[2][1]+l),this.ctx.moveTo(i[3][0],(i[3][1]+i[0][1])/2),this.ctx.lineTo(i[3][0]-l,(i[3][1]+i[0][1])/2));var f=this.ctx.lineWidth;if(this.ctx.lineWidth=o,this.ctx.moveTo(i[0][0],i[0][1]),this.ctx.lineTo(i[0][0]+a,i[0][1]),this.ctx.moveTo(i[0][0],i[0][1]),this.ctx.lineTo(i[0][0],i[0][1]+a),this.ctx.moveTo(i[1][0],i[1][1]),this.ctx.lineTo(i[1][0]-a,i[1][1]),this.ctx.moveTo(i[1][0],i[1][1]),this.ctx.lineTo(i[1][0],i[1][1]+a),this.ctx.moveTo(i[2][0],i[2][1]),this.ctx.lineTo(i[2][0],i[2][1]-a),this.ctx.moveTo(i[2][0],i[2][1]),this.ctx.lineTo(i[2][0]-a,i[2][1]),this.ctx.moveTo(i[3][0],i[3][1]),this.ctx.lineTo(i[3][0]+a,i[3][1]),this.ctx.moveTo(i[3][0],i[3][1]),this.ctx.lineTo(i[3][0],i[3][1]-a),t.ctx.closePath(),t.ctx.stroke(),this.ctx.lineWidth=f,this.ctx.setLineDash(s),this.ctx.moveTo(i[0][0]+a,i[0][1]),this.ctx.lineTo(i[1][0]-a,i[1][1]),this.ctx.moveTo(i[1][0],i[1][1]+a),this.ctx.lineTo(i[2][0],i[2][1]-a),this.ctx.moveTo(i[2][0]-a,i[2][1]),this.ctx.lineTo(i[3][0]+a,i[3][1]),this.ctx.moveTo(i[3][0],i[3][1]-a),this.ctx.lineTo(i[0][0],i[0][1]+a),t.ctx.stroke(),t.ctx.beginPath(),this.ctx.setLineDash([]),this.ctx.moveTo((i[0][0]+i[1][0])/2,i[0][1]),this.ctx.lineTo((i[0][0]+i[1][0])/2,i[0][1]+u),this.ctx.moveTo(i[1][0],(i[1][1]+i[2][1])/2),this.ctx.lineTo(i[1][0]-u,(i[1][1]+i[2][1])/2),this.ctx.moveTo((i[2][0]+i[3][0])/2,i[2][1]),this.ctx.lineTo((i[2][0]+i[3][0])/2,i[2][1]-u),this.ctx.moveTo(i[3][0],(i[3][1]+i[0][1])/2),this.ctx.lineTo(i[3][0]+u,(i[3][1]+i[0][1])/2),e.option.textArr&&e.option.textArr.length>0){var h=10,d=r.util.getStrokeTextAlign(this.ctx,t.canvasDom.width,e.option.textArr,e.data[0][0]*t.coordinate.widthDraw+h);"right"===d&&(h=-10);var p=e.data[0][1]*t.coordinate.heightDraw+10;e.option.textArr.forEach(function(i){p+=1.2*parseInt(e.option.font.split(" ")[3]),r.util.strokeText(t.ctx,i,e.data[0][0]*t.coordinate.widthDraw+h,p,d,n)})}t.ctx.closePath(),t.ctx.stroke()}},this.checkOnPoint=function(t,e){return!1},this.checkSelected=function(t,e){return!1},this.moveShape=function(t,e,n,r,i){return!1},this.resizeShape=function(t,e,n){}};var r=n(9),i=n(10);n(12)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.ParkingLotShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="parkingLot",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var r={};return r.data=o.jQlib.extend(!0,[],e),r.shapeId=a.util.shapeId++,r.option=o.jQlib.extend(!0,{},n),t.data.push(r),r}},this.drawStart=function(e){var n=0;s.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(r){if(r.preventDefault(),!(a.util.moveFlag||a.util.resizeFlag||t.data.length>=t.regionNum)&&([Math.round((r.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((r.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],2===a.util.drawState||0===a.util.drawState)){a.util.drawState=1,n=0;var i={data:[]};i.option=o.jQlib.extend(!0,{},e),i.shapeId=a.util.shapeId++,i.option.zindex=a.util.zindex++,i.option.type=t.type,i.option.selected=!0,i.option.maxPointNum=i.option.maxPointNum||20,t.data.push(i)}}),s.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){var r=t.data.length-1;if(1===a.util.drawState){var i=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];t.data[r].data[n]=i,t.drawFunc()}});var r=function(e){if(1===a.util.drawState){var r=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];t.data[t.data.length-1].data;if(2!==e.button&&t.data[t.data.length-1].data.length>=t.data[t.data.length-1].option.maxPointNum)a.util.drawState=2,null,n=0,t.drawFunc(),t.data[t.data.length-1].event={},t.data[t.data.length-1].event.type=a.util.eventName.drawFinish,a.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[t.data.length-1]);else if(2===e.button&&t.data[t.data.length-1].data.length>2)t.drawFunc(),a.util.drawState=2,null,n=0,t.data[t.data.length-1].data.length=t.data[t.data.length-1].data.length-1,t.drawFunc(),t.data[t.data.length-1].event={},t.data[t.data.length-1].event.type=a.util.eventName.drawFinish,a.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[t.data.length-1]);else{var i=a.util.lineCrossPoly(t.data[t.data.length-1].data,n);if(!1!==i)return;t.data[t.data.length-1].data.push(r),n++,t.drawFunc()}}};s.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",r),s.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",r)},this.draw=function(e){if(!0!==e.option.hide){e.option.selected?(t.ctx.strokeStyle=e.option.selectedColor,e.option.selectedColor):(t.ctx.strokeStyle=e.option.strokeColor,e.option.strokeColor),t.ctx.beginPath();for(var n=0;e.data&&n<4;n++)0===n?t.ctx.moveTo(e.data[n][0]*t.coordinate.widthDraw,e.data[n][1]*t.coordinate.heightDraw):t.ctx.lineTo(e.data[n][0]*t.coordinate.widthDraw,e.data[n][1]*t.coordinate.heightDraw);if(!0===e.option.parkingReload){var r=[],o=[];e.data.length=4,"horizontal"===e.option.parkingDirection?(o=a.util.lineAverageNum([[e.data[2][0],e.data[2][1]],[e.data[1][0],e.data[1][1]]],e.option.parkingNumber),r=a.util.lineAverageNum([[e.data[3][0],e.data[3][1]],[e.data[0][0],e.data[0][1]]],e.option.parkingNumber)):"vertical"===e.option.parkingDirection&&(r=a.util.lineAverageNum([[e.data[0][0],e.data[0][1]],[e.data[1][0],e.data[1][1]]],e.option.parkingNumber),o=a.util.lineAverageNum([[e.data[3][0],e.data[3][1]],[e.data[2][0],e.data[2][1]]],e.option.parkingNumber));for(var s=0;s<r.length;s++)e.data.push(r[s]),e.data.push(o[s])}e.option.parkingReload=!1,t.ctx.lineTo(e.data[0][0]*t.coordinate.widthDraw,e.data[0][1]*t.coordinate.heightDraw);for(var u=4;e.data&&u<e.data.length;u++)u%2===0?t.ctx.moveTo(e.data[u][0]*t.coordinate.widthDraw,e.data[u][1]*t.coordinate.heightDraw):t.ctx.lineTo(e.data[u][0]*t.coordinate.widthDraw,e.data[u][1]*t.coordinate.heightDraw);t.ctx.closePath(),t.ctx.stroke();var c=[0,0],l=(0,i.default)(e.data),f=(e.data.length-4)/2+1;if("vertical"===e.option.parkingDirection){var h=l[1];l[1]=l[3],l[3]=h}for(var d=0;d<f;d++)c=0===d?1===f?a.util.getCenter([l[0],l[1],l[2],l[3]]):a.util.getCenter([l[0],l[1],l[5],l[4]]):d===f-1?a.util.getCenter([l[2*d+2],l[2*d+3],l[2],l[3]]):a.util.getCenter([l[2*d+2],l[2*d+3],l[2*d+5],l[2*d+4]]),a.util.strokeText(t.ctx,e.option.parkingLotTitle[d]||"",c[0]*t.coordinate.widthDraw-6,c[1]*t.coordinate.heightDraw+2);if(e.option.selected){t.ctx.beginPath(),t.ctx.strokeStyle=e.option.selectedColor,e.option.selectedColor;for(var p=0;p<e.data.length;p++){var v=e.data[p];a.util.drawSelectRect(t.ctx,v[0]*t.coordinate.widthDraw,v[1]*t.coordinate.heightDraw)}t.ctx.closePath()}}},this.checkOnPoint=function(e,n){var r=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var i=a.util.onPoint(r,n.data,!1);return!1!==i&&(n.option.selected=!0,{data:n,point:i})},this.checkSelected=function(e,n){var r=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;for(var i=n.data.slice(0,4),o=n.data.slice(4),s=[],u=0;u<o.length;u++)if(u%2!==0){if(s[1]=o[u],a.util.onLine(r,s))return{data:n,resizeLineIndex:(u+1)/2}}else s.length=0,s[0]=o[u];return a.util.pointInPoly(r,i)?(n.option.selected=!0,{data:n,resizeLineIndex:0}):void 0},this.moveShape=function(e,n,r,i,o,u){var c=[Math.round((r.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((r.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],l=c[0]-e[0],f=c[1]-e[1],h=i.data.slice(0,4);i.data.slice(4);if(!0===o);else if(0===u)for(var d=0;d<h.length;d++){var p=a.util.pointInPoly([n.data[d][0]+l,n.data[d][1]+f],i.option.maxPoly);if(!p)return s.EventManager.trigger(t.canvasDom,"mouseup.draw"),!1}if(0===u)for(var v=0;v<i.data.length;v++)i.data[v][0]=n.data[v][0]+l,i.data[v][1]=n.data[v][1]+f;else{var g=n.data[2*u+2][0]+l,m=n.data[2*u+2][1]+f,y=n.data[2*u+2+1][0]+l,w=n.data[2*u+2+1][1]+f,b=!1,S=!1;"horizontal"===i.option.parkingDirection?(S=a.util.segmentsInLine(g,m,y,w,h[1][0],h[1][1],h[2][0],h[2][1]),b=a.util.segmentsInLine(g,m,y,w,h[3][0],h[3][1],h[0][0],h[0][1])):"vertical"===i.option.parkingDirection&&(b=a.util.segmentsInLine(g,m,y,w,h[0][0],h[0][1],h[1][0],h[1][1]),S=a.util.segmentsInLine(g,m,y,w,h[2][0],h[2][1],h[3][0],h[3][1])),!1!==b&&!1!==S&&(i.data[2*u+2][0]=b[0],i.data[2*u+2][1]=b[1],i.data[2*u+2+1][0]=S[0],i.data[2*u+2+1][1]=S[1])}return t.drawFunc(),!0},this.resizeShape=function(e,n,r){var i=[Math.round((n.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],s=o.jQlib.extend(!0,[],r),u=o.jQlib.extend(!0,[],r),c=(u.data.slice(0,4),u.data.slice(0,4)),l=u.data.slice(4);s.data[e][0]=i[0],s.data[e][1]=i[1];var f=a.util.pointInPoly([i[0],i[1]],r.option.maxPoly);if(!f)return!1;if(e<4){var h=a.util.lineCrossPoly(s.data.slice(0,4),e);if(!0===h)return!1;c[e][0]=i[0],c[e][1]=i[1];for(var d=[],p=0;p<l.length;p+=2){var v=l[p][0],g=l[p][1],m=l[p+1][0],y=l[p+1][1],w=!1,b=!1;if("horizontal"===r.option.parkingDirection?(b=a.util.segmentsInLine(v,g,m,y,c[1][0],c[1][1],c[2][0],c[2][1]),w=a.util.segmentsInLine(v,g,m,y,c[3][0],c[3][1],c[0][0],c[0][1])):"vertical"===r.option.parkingDirection&&(w=a.util.segmentsInLine(v,g,m,y,c[0][0],c[0][1],c[1][0],c[1][1]),b=a.util.segmentsInLine(v,g,m,y,c[2][0],c[2][1],c[3][0],c[3][1])),!1===w||!1===b)return!1;d[p+4]=[],d[p+4+1]=[],d[p+4][0]=w[0],d[p+4][1]=w[1],d[p+4+1][0]=b[0],d[p+4+1][1]=b[1]}for(var S=0;S<l.length;S+=2)r.data[S+4][0]=d[S+4][0],r.data[S+4][1]=d[S+4][1],r.data[S+4+1][0]=d[S+4+1][0],r.data[S+4+1][1]=d[S+4+1][1];r.data[e][0]=i[0],r.data[e][1]=i[1]}else{var D,x,_,I,T=e-4;e%2===0?(D=i[0],_=i[1],x=l[T+1][0],I=l[T+1][1]):(D=l[T-1][0],_=l[T-1][1],x=i[0],I=i[1]);var E=!1,k=!1;if("horizontal"===r.option.parkingDirection?(k=a.util.segmentsInLine(D,_,x,I,c[1][0],c[1][1],c[2][0],c[2][1]),E=a.util.segmentsInLine(D,_,x,I,c[3][0],c[3][1],c[0][0],c[0][1])):"vertical"===r.option.parkingDirection&&(E=a.util.segmentsInLine(D,_,x,I,c[0][0],c[0][1],c[1][0],c[1][1]),k=a.util.segmentsInLine(D,_,x,I,c[2][0],c[2][1],c[3][0],c[3][1])),!1===E||!1===k)return!1;e%2===0?(r.data[e][0]=E[0],r.data[e][1]=E[1],r.data[e+1][0]=k[0],r.data[e+1][1]=k[1]):(r.data[e-1][0]=E[0],r.data[e-1][1]=E[1],r.data[e][0]=k[0],r.data[e][1]=k[1])}t.drawFunc()}};var i=r(n(16)),a=n(9),o=n(10),s=n(12)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.CrossLine=function(){var t=this;this.init=function(e,n,r,i,a){t.type="crossLine",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.data=[],t.coordinate=a,t.size={width:70,height:40,distance:2}},this.add=function(e,n){if(t.data.length<t.regionNum){var r={};return r.data=o.jQlib.extend(!0,[],e),r.shapeId=a.util.shapeId++,r.option=o.jQlib.extend(!0,{},n),t.data.push(r),r}},this.drawStart=function(e){var n=null;s.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(r){if(r.preventDefault(),!a.util.moveFlag&&!a.util.resizeFlag)if(n=[Math.round((r.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((r.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],t.data.length>=t.regionNum)n=null;else{var i={data:[]};i.option=o.jQlib.extend(!0,{},e),i.shapeId=a.util.shapeId++,i.option.zindex=a.util.zindex++,i.option.type=t.type,i.option.selected=!0,i.option.fillStyle=i.option.fillStyle||"#00FF00",t.data.push(i),t.data[t.data.length-1].data=o.jQlib.extend(!0,[],n),a.util.drawState=1,t.drawFunc()}}),s.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(t){});var r=function(e){if(1===a.util.drawState){var n=t.data[t.data.length-1];n.event={},n.event.type=a.util.eventName.drawFinish,a.util.eventEnabled&&t.eventFunc&&t.eventFunc(n),a.util.drawState=2}};s.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",r),s.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",r)},this.draw=function(e){var n,r,o,s;if(!0!==e.option.hide){var u=null;e.option.selected?(this.ctx.strokeStyle=e.option.selectedColor,u=e.option.selectedColor):(this.ctx.strokeStyle=e.option.strokeColor,u=e.option.strokeColor);var c=this.getCrossLineCoordinateData(e);this.ctx.beginPath(),(n=this.ctx).moveTo.apply(n,(0,i.default)(c.horizontalLineData[0])),(r=this.ctx).lineTo.apply(r,(0,i.default)(c.horizontalLineData[1])),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),(o=this.ctx).moveTo.apply(o,(0,i.default)(c.verticalLineData[0])),(s=this.ctx).lineTo.apply(s,(0,i.default)(c.verticalLineData[1])),this.ctx.stroke(),this.ctx.closePath(),e.option.title&&a.util.strokeText(t.ctx,e.option.title,(c.horizontalLineData[1][0]-c.horizontalLineData[0][0])/2+c.horizontalLineData[0][0]+t.size.distance,c.horizontalLineData[0][1]+t.size.height/4,"left",u)}},this.checkOnPoint=function(t){return!1},this.checkSelected=function(e,n){var r=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var i=this.getCrossLineCoordinateData(n,1,1),o=i.verticalLineData,s=i.horizontalLineData;return!(!a.util.onLine(r,o)&&!a.util.onLine(r,s))&&(n.option.selected=!0,{data:n})},this.moveShape=function(e,n,r,i,o){var s=[Math.round((r.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((r.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],u=s[0]-e[0],c=s[1]-e[1],l=this.getCrossLineCoordinateData(n,1,1);if(!0===o);else if(i.option.maxPoly&&i.option.maxPoly.length>0){var f=a.util.lineInPoly([[l.horizontalLineData[0][0]+u,l.horizontalLineData[0][1]+c],[l.horizontalLineData[1][0]+u,l.horizontalLineData[1][1]+c]],i.option.maxPoly),h=a.util.lineInPoly([[l.verticalLineData[0][0]+u,l.verticalLineData[0][1]+c],[l.verticalLineData[1][0]+u,l.verticalLineData[1][1]+c]],i.option.maxPoly);if(!1===f&&!1===h)return!0}i.data[0]=n.data[0]+u,i.data[1]=n.data[1]+c,t.drawFunc()},this.getCrossLineCoordinateData=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.coordinate.widthDraw,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.coordinate.heightDraw;return{horizontalLineData:[[(e.data[0]-e.option.horizontalLength/2)*n,e.data[1]*r],[(e.data[0]+e.option.horizontalLength/2)*n,e.data[1]*r]],verticalLineData:[[e.data[0]*n,(e.data[1]-e.option.verticalLength/2)*r],[e.data[0]*n,(e.data[1]+e.option.verticalLength/2)*r]]}}};var i=r(n(16)),a=n(9),o=n(10),s=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WaterLevel=function(){var t=this;this.init=function(e,n,r,i,a){t.type="waterLevel",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.data=[],t.coordinate=a,t.size={}},this.add=function(e,n){if(t.data.length<t.regionNum){var a={};return a.data=i.jQlib.extend(!0,[],e),a.shapeId=r.util.shapeId++,a.option=i.jQlib.extend(!0,{},n),t.data.push(a),a}},this.drawStart=function(t){},this.draw=function(e){if(!0!==e.option.hide){var n=e.option.transText,i=n.strWaterStatus,a=void 0===i?"":i,o=n.strUnknown,s=void 0===o?"":o,u=n.strNormal,c=void 0===u?"":u,l=n.strHigtWaterLevel,f=void 0===l?"":l,h=n.strLowWaterLevel,d=void 0===h?"":h,p=n.strWaterValue,v=void 0===p?"":p,g=e.option.lineWidth||1,m=e.option.fontSize||12,y=e.option.textBaseline||"middle";t.ctx.lineWidth=g,t.ctx.textBaseline=y;for(var w=0;w<e.data.waterLevel.length;w++){var b=e.data.waterLevel[w],S="#000000";S=1===b.cColor?"#0000ff":(b.cColor,"#ff0000");var D=[[0,0],[0,0]];D[0][0]=b.point[0].nx*t.coordinate.widthDraw,D[0][1]=b.point[0].ny*t.coordinate.heightDraw,D[1][0]=b.point[1].nx*t.coordinate.widthDraw,D[1][1]=b.point[1].ny*t.coordinate.heightDraw,t.ctx.strokeStyle=S,r.util.drawAppendLine(t.ctx,D);var x=D[0][0]-D[1][0],_=D[0][1]-D[1][1];if(0===_)return;var I=0;I=0===x?Math.PI/2:Math.atan2(_,x);var T=t.getXEquation(D[0],Math.tan(I)),E=Math.sqrt(x*x+_*_),k=b.fDegree-0;k||(k=.01);var M=Math.abs(b.fRealRuler[0]-0-(b.fRealRuler[1]-0))/k,A=E/M,R={x:0,y:0},C={nx:0,ny:0};if(C.nx=b.textPos.nx*t.coordinate.widthDraw,C.ny=b.textPos.ny*t.coordinate.heightDraw,R.x=C.nx,R.y=C.ny,-1!==R.x&&-1!==R.y){R.x=C.nx,C.ny-4*A<=0?R.y=m:R.y=C.ny-4*A,R.x=R.x+m;var P="".concat(a,":");0===b.cStatus?P+=s:1===b.cStatus?P+=c:2===b.cStatus?P+=f:3===b.cStatus&&(P+=d),r.util.strokeText(t.ctx,"".concat(v,":").concat(b.fLevel).concat("m"),R.x,R.y,null,S),r.util.strokeText(t.ctx,P,R.x,R.y+m,null,S)}for(var O=[[0,0],[0,0]],F={x:0,y:0},B={x:0,y:0},L=D[0][1]>D[1][1]?D[0]:D[1],j=0;j<=M;j++){B.y=L[1]-j*Math.abs(_)/M,B.x=T(B.y),O[0][0]=B.x,O[1][0]=B.x+10,O[0][1]=B.y,O[1][1]=B.y,r.util.drawAppendLine(t.ctx,O);var N="".concat((b.fRealRuler[0]-0+j*k).toFixed(2)).concat("m");F.x=O[1][0],F.y=O[1][1],r.util.strokeText(t.ctx,N,F.x,F.y,null,S)}}}},this.checkOnPoint=function(t){return!1},this.checkSelected=function(t,e){return!1},this.moveShape=function(t,e,n,r,i){},this.getXEquation=function(t,e){var n=t[1]-e*t[0];return function(t){return(t-n)/e}}};var r=n(9),i=n(10)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.RectRotatableShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="rectRotatable",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.coordinate=a,t.data=[]},this.add=function(e,n){if(t.data.length<t.regionNum){var r={};return r.data=o.jQlib.extend(!0,[],e),r.shapeId=a.util.shapeId++,r.option=o.jQlib.extend(!0,{},n),t.data.push(r),r}},this.drawStart=function(e){var n=null;s.EventManager.off(t.canvasDom,"mousedown.draw").on(t.canvasDom,"mousedown.draw",function(r){if(r.preventDefault(),!(a.util.moveFlag||a.util.resizeFlag||t.data.length>=t.regionNum)){n=[Math.round((r.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((r.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];var i={data:[]};i.option=o.jQlib.extend(!0,{},e),i.shapeId=a.util.shapeId++,i.option.zindex=a.util.zindex++,i.option.type=t.type,i.option.selected=!0,i.option._isRotatable=!0,t.data.push(i),t.data[t.data.length-1].data[0]=o.jQlib.extend(!0,[],n),a.util.drawState=1}}),s.EventManager.off(t.canvasDom,"mousemove.draw").on(t.canvasDom,"mousemove.draw",function(e){if(!a.util.moveFlag&&!a.util.resizeFlag){var r=t.data.length-1,i=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(n){if(t.data[r].option.defaultSize)t.data[r].data[1]=[t.data[r].data[0][0]+t.data[r].option.defaultSize.width||2e3,t.data[r].data[0][1]+t.data[r].option.defaultSize.height||1e3];else{var s=t.data[r];if(s.option.lockWH){var u=Math.ceil(0-(s.data[0][0]-i[0])*s.option.lockWH.height/s.option.lockWH.width+s.data[0][1]);if(u>8191||u<0)return;s.data[1]=o.jQlib.extend(!0,[],[i[0],u])}else s.data[1]=o.jQlib.extend(!0,[],i)}a.util.drawState=1,t.drawFunc()}}});var r=function(r){if(!a.util.moveFlag&&!a.util.resizeFlag){var i=null,s=null,u=t.data.length-1;if(n){var c=[Math.round((r.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((r.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(e.supportPoint||c[0]!==n[0]||c[1]!==n[1]){if(t.data[u].option.lockWH);else{if(t.data[u].option.maxRect){var l={};l.width=c[0]-t.data[u].data[0][0],l.height=c[1]-t.data[u].data[0][1],i=t.checkRectSize(t.data[u],l,"maxRect")}if(t.data[u].option.minRect){var f={};f.width=c[0]-t.data[u].data[0][0],f.height=c[1]-t.data[u].data[0][1],s=t.checkRectSize(t.data[u],f,"minRect")}t.data[u].option.defaultSize||(t.data[u].data[1]=o.jQlib.extend(!0,[],i||s||c))}t.drawFunc(),a.util.drawState=2,n=null,t.data[u].event={},t.data[u].event.type=a.util.eventName.drawFinish,a.util.eventEnabled&&t.eventFunc&&t.eventFunc(t.data[u])}else t.data.length=t.data.length-1,a.util.drawState=2,n=null}}};s.EventManager.off(t.canvasDom,"mouseup.draw").on(t.canvasDom,"mouseup.draw",r),s.EventManager.off(t.canvasDom,"mouseleave.draw").on(t.canvasDom,"mouseleave.draw",r)},this.draw=function(e){if(!0!==e.option.hide){var n=null,r=t.getRotationReactData(e,t.coordinate),o=r.rectRotationCoordinate,s=r.middleLine;e.option.selected?(t.ctx.strokeStyle=e.option.selectedColor,n=e.option.selectedColor,[].concat((0,i.default)(o),[s[0]]).forEach(function(e){a.util.drawSelectRect.apply(a.util,[t.ctx].concat((0,i.default)(e)))}),a.util.drawAppendLine(t.ctx,s),t.ctx.closePath()):(t.ctx.strokeStyle=e.option.strokeColor,n=e.option.strokeColor),t.ctx.beginPath(),e.option.fillStyle&&(t.ctx.fillStyle=e.option.fillStyle);for(var u=0;u<4;u++)a.util.drawAppendLine(t.ctx,[o[u],3!==u?o[u+1]:o[0]]);if(e.option.title&&a.util.strokeText(t.ctx,e.option.title,(e.data[0][0]/2+e.data[1][0]/2)*t.coordinate.widthDraw,(e.data[0][1]/2+e.data[1][1]/2+100)*t.coordinate.heightDraw,"center",n),e.option.ruleName&&e.option.ruleName.length>0){var c=10,l=a.util.getStrokeTextAlign(t.ctx,t.canvasDom.width,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+c);"right"===l&&(c=-10);var f=10;e.option.font&&(f=parseInt(e.option.font.split(" ")[3]));var h=e.data[0][1]*t.coordinate.heightDraw+f;a.util.strokeText(t.ctx,e.option.ruleName,e.data[0][0]*t.coordinate.widthDraw+c,h,l,n)}if(e.option.showSize){var d=Math.round(Math.abs(e.data[0][0]-e.data[1][0])*a.util.resolution.width/a.util.defalutCoordinate.width),p=Math.round(Math.abs(e.data[0][1]-e.data[1][1])*a.util.resolution.height/a.util.defalutCoordinate.height);a.util.strokeText(t.ctx,d+"*"+p,(e.data[0][0]+e.data[1][0])/2*t.coordinate.widthDraw,(e.data[0][1]+e.data[1][1])/2*t.coordinate.heightDraw,"center",n)}}},this.checkOnPoint=function(e,n){var r=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var i=t.getRotationReactData(n,t.coordinate),o=i.middleLine,s=i.rectRotationCoordinate8192,u=a.util.onPoint(r,s,!1);if(n.option._isRotatable){var c=a.util.onPoint(r,[[o[0][0]*t.coordinate.widthMouse,o[0][1]*t.coordinate.heightMouse]],!1);!1!==c&&(u=1111111)}return!1!==u?(n.option.selected=!0,n.option._isRotatable=!0,{data:n,point:u}):(n.option._isRotatable=!1,!1)},this.checkSelected=function(e,n){var r=[Math.round((e.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];if(!0===n.option.hide||!0===!n.option.resizeEnable&&!0===!n.option.moveEnable)return!1;var i=t.getRotationReactData(n,t.coordinate),o=i.rectRotationCoordinate8192;if(n.option.selectType&&"inSide"!==n.option.selectType)n.option._isRotatable=!1;else{var s=t.pointInRect(r,o);if(s)return n.option.selected=!0,n.option._isRotatable=!0,{data:n}}return!1},this.getTowPointDistance=function(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},this.getDegreeByPoint=function(t,e,n){var r=180*Math.atan2(t[1]-n[1],t[0]-n[0])/Math.PI,i=180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI;return r<0&&(r+=360),i<0&&(i+=360),i-r},this.getRotationReactData=function(t,e){var n=(0,i.default)(t.data[0]),r=(0,i.default)(t.data[1]);e&&(n[0]*=e.widthDraw,n[1]*=e.heightDraw,r[0]*=e.widthDraw,r[1]*=e.heightDraw);var o=[(n[0]+r[0])/2,[n[1]+r[1]]/2],s=Math.abs(n[0]-r[0]),u=Math.abs(n[1]-r[1]);n=[o[0]-s/2,o[1]-u/2],r=[o[0]+s/2,o[1]+u/2];var c=0,l=[(0,i.default)(n),[r[0],n[1]],(0,i.default)(r),[n[0],r[1]]],f=l.map(function(t){return[Math.round(t[0]*e.widthMouse),Math.round(t[1]*e.heightMouse)]});t.option.normalizeReact&&(t.data=[(0,i.default)(f[0]),(0,i.default)(f[2])]);var h=null,d=null;t.option.rotationEnable&&t.option.rotationAngle&&(c=t.option.rotationAngle%360)<0&&(c+=360),d=l.map(function(t){var n=a.util.getRotateByDegree(t,o,c)[1];return n[0]*=e.widthMouse,n[1]*=e.heightMouse,n}),h=l.map(function(t){var e=a.util.getRotateByDegree(t,o,c)[1];return e});var p=t.option.midLineLength||20;n.some(function(e,n){return Math.abs(e-r[n])<2*(t.option.offsetValue||2)})&&(p=0);var v=a.util.getArrayLineMiddle(n,[r[0],n[1]],p);return v[0][1]-=p,v[1][1]-=p,v=v.map(function(t){return a.util.getRotateByDegree(t,o,c)[1]}),{startPos:n,endPos:r,rotationAngle:c,rectCenter:o,rectCoordinate:l,rectCoordinate8192:f,rectRotationCoordinate:h,rectRotationCoordinate8192:d,middleLine:v}},this.pointInRect=function(t,e){for(var n=t[0],r=t[1],i=0,a=0,o=e.length,s=o-1;a<o;s=a,a++){var u=e[a][0],c=e[a][1],l=e[s][0],f=e[s][1],h=Math.atan2(c-r,u-n)-Math.atan2(f-r,l-n);h>=Math.PI?h-=2*Math.PI:h<=-Math.PI&&(h+=2*Math.PI),i+=h}return 0!==Math.round(i/Math.PI)},this.moveShape=function(e,n,r,i){var o=[Math.round((r.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((r.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],s=o[0]-e[0],u=o[1]-e[1];!0===i.option.horizontalMove&&(u=0);var c=i.option.maxPoly[2][0]||8191,l=i.option.maxPoly[2][1]||8191;return n.data[0][0]+s<0&&(s=0-n.data[0][0]),n.data[0][0]+s>c&&(s=c-n.data[0][0]),n.data[1][0]+s<0&&(s=0-n.data[1][0]),n.data[1][0]+s>c&&(s=c-n.data[1][0]),n.data[0][1]+u<0&&(u=0-n.data[0][1]),n.data[0][1]+u>l&&(u=l-n.data[0][1]),n.data[1][1]+u<0&&(u=0-n.data[1][1]),n.data[1][1]+u>l&&(u=l-n.data[1][1]),i.data[0][0]=n.data[0][0]+s,i.data[0][1]=n.data[0][1]+u,i.data[1][0]=n.data[1][0]+s,i.data[1][1]=n.data[1][1]+u,t.drawFunc(),!0},this.resizeShape=function(e,n,r){var i=[Math.round((n.clientX-a.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((n.clientY-a.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)];this.resizeRectByRegion(r,e,i),t.drawFunc()},this.checkRectSize=function(t,e,n){var r=null,i=Math.abs(t.option[n][1][0]-t.option[n][0][0]),a=Math.abs(t.option[n][1][1]-t.option[n][0][1]),o=Math.abs(e.width),s=Math.abs(e.height);return"maxRect"===n?(o>=i||s>=a)&&(r=[],e.width>0?r[0]=t.data[0][0]+i:r[0]=t.data[0][0]-i,e.height>0?r[1]=t.data[0][1]+a:r[1]=t.data[0][1]-a):"minRect"===n&&(o<=i||s<=a)&&(r=[],e.width>0?r[0]=t.data[0][0]+i:r[0]=t.data[0][0]-i,e.height>0?r[1]=t.data[0][1]+a:r[1]=t.data[0][1]-a),r},this.resizeRectByRegion=function(e,n,r){var i={},o=t.getRotationReactData(e,t.coordinate),s=o.rotationAngle,u=o.rectRotationCoordinate8192,c=o.rectCenter,l=o.middleLine;switch(n){case 0:i.width=t.getTowPointDistance(r,u[1]),i.height=t.getTowPointDistance(r,u[3]);break;case 1:i.width=t.getTowPointDistance(r,u[0]),i.height=t.getTowPointDistance(r,u[2]);break;case 2:i.width=t.getTowPointDistance(r,u[3]),i.height=t.getTowPointDistance(r,u[1]);break;case 3:i.width=t.getTowPointDistance(r,u[2]),i.height=t.getTowPointDistance(r,u[0])}if(1111111!==n){var f=[r,u[(n+2)%4]],h=[(f[0][0]+f[1][0])/2*t.coordinate.widthDraw,(f[0][1]+f[1][1])/2*t.coordinate.heightDraw];e.data=f.map(function(e){var n=a.util.getRotateByDegree([e[0]*t.coordinate.widthDraw,e[1]*t.coordinate.heightDraw],h,360-s)[1];return[Math.round(n[0]*t.coordinate.widthMouse),Math.round(n[1]*t.coordinate.heightMouse)]})}else{var d=t.getDegreeByPoint(l[0],[r[0]*t.coordinate.widthDraw,r[1]*t.coordinate.heightDraw],c);e.option.rotationAngle+=d}}};var i=r(n(16)),a=n(9),o=n(10),s=n(12)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.ImageShape=function(){var t=this;this.init=function(e,n,r,i,a){t.type="image",t.regionNum=999999,t.canvasDom=e,t.ctx=n,t.drawFunc=r,t.eventFunc=i,t.data=[],t.coordinate=a},this.add=function(e,n){if(t.data.length<t.regionNum){var r={};return r.data=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){(0,a.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({coordinate:(0,i.default)(e.coordinate)},e),r.shapeId=o.util.shapeId++,r.option=s.jQlib.extend(!0,{},n),t.data.push(r),r}},this.drawStart=function(){},this.draw=function(e){if(!0!==e.option.hide){var n=e.option.width||e.data.image.width,r=e.option.height||e.data.image.height,i=e.data.image;e.option.mouseoverEnable&&e.option.isMouseover&&(i=e.data.mouseoverImage||e.data.image),this.ctx.drawImage(i,e.data.coordinate[0]*t.coordinate.widthDraw,e.data.coordinate[1]*t.coordinate.heightDraw,n,r)}},this.checkOnPoint=function(t){return!1},this.checkSelected=function(e,n,r){if(!r)return!1;var a=[Math.round((e.clientX-o.util.offset(t.canvasDom).left+window.scrollX)*t.coordinate.widthMouse),Math.round((e.clientY-o.util.offset(t.canvasDom).top+window.scrollY)*t.coordinate.heightMouse)],s=n.option.width||n.data.image.width,u=n.option.height||n.data.image.height,c=o.util.pointInRect(a,[(0,i.default)(n.data.coordinate),[n.data.coordinate[0]+s*t.coordinate.widthMouse,n.data.coordinate[1]+u*t.coordinate.heightMouse]]);return c},this.moveShape=function(t,e,n,r,i){}};var i=r(n(16)),a=r(n(20)),o=n(9),s=n(10);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FactoryGridShapeAction=function(t,e){if(this.toTransDataToInt=function(t,e){var n=function(t){for(var e=0,n=t.length;e<n;e++)for(var r=0,i=t[e].length;r<i;r++)t[e][r]=Math.round(t[e][r])};n(t);for(var r=0,i=e.length;r<i;r++)n(e[r].data)},this.moveLinesInGride=function(t,e){var n=this,r=this.calcLineRelationWrap(t,e),i=r.pointInSide,a=r.calcSide;this.setLineWrapSide(a,i.lineGroup),function(t){for(var e=0,r=t.length;e<r;e++)n.resetMoveLinePos(t[e],t)}(e)},this.isLineIntersectOhterLine=function(t,e){for(var n=t.option,i=t.data,a=i[0][0],o=i[0][1],s=i[1][0],u=i[1][1],c=n.firstSide,l=!0,f=0,h=e.length;f<h;f++){var d=e[f];if(this.equalSide(d.option.firstSide,c))if(d===t);else{var p=d.data,v=t.beforModifyData,g=p[0][0],m=p[0][1],y=p[1][0],w=p[1][1],b=r.util.segmentsInLine(a,o,s,u,g,m,y,w),S=r.util.segmentsInLine(g,m,y,w,a,o,v[0][0],v[0][1]);if(b||S){l=!1;break}}}return!l},this.resetMoveLinePos=function(t,e){var n=t.option,i=n.firstSide,a=n.lastSide,o=t.beforModifyData;if(o){var s=t.data,u=s[0][0],c=s[0][1],l=s[1][0],f=s[1][1],h=r.util.segmentsInLine(u,c,l,f,i[0][0],i[0][1],i[1][0],i[1][1]),d=r.util.segmentsInLine(u,c,l,f,a[0][0],a[0][1],a[1][0],a[1][1]),p=h&&d,v=this.isLineIntersectOhterLine(t,e);p&&!v?this.resetShapeByData(s,[h,d]):(this.resetShapeByData(s,o),this.stopDraw())}},this.resetShapeByData=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];i[0]=e[n][0],i[1]=e[n][1]}},this.stopDraw=function(){this.canvasNode.trigger("mouseup.move")},this.calcLineRelationWrap=function(t,e){var n=t[0].data,r=this.getPointNearSide(n,1);return{pointInSide:this.linesRelationSide(r,e),calcSide:r}},this.asyncGrideWrapDataToLine=function(t,e){var n=t[0].beforModifyData,r=t[0].data,i=this.getPointDiffIndex(n,r);0!==i.length&&(1===i.length?this.asyncResizeToLines(t,e,i):this.asyncMoveToLines(t,e))},this.asyncMoveToLines=function(t,e){for(var n=t[0].beforModifyData,r=t[0].data,i=r[0][0]-n[0][0],a=r[0][1]-n[0][1],o=0,s=e.length;o<s;o++){var u=e[o].data;u[0][0]+=i,u[0][1]+=a,u[1][0]+=i,u[1][1]+=a}},this.isWrapConvex=function(t){var e=!0;if(r.util.segmentsIntr(t[0],t[2],t[1],t[3])){for(var n=t.length,i=0;i<n;i++)for(var a=i+1;a<n;a++)if(this.getTwoPointDistance(t[i],t[a])<100){e=!1;break}}else e=!1;return e},this.equalSide=function(t,e){var n=!0;return n=(n=(n=(n=n&&t[0][0]===e[0][0])&&t[0][1]===e[0][1])&&t[1][0]===e[1][0])&&t[1][1]===e[1][1]},this.asyncResizeToLines=function(t,e,n){var r=n[0],i=t[0].beforModifyData,a=t[0].data,o=this.getPointNearSide(i,r),s=this.getPointNearSide(a,r);if(this.isWrapConvex(a)){var u=this.linesRelationSide(o,e);this.setLineWrapSide(s,u.lineGroup),this.setPointPosWithSide(s,u)}else this.resetShapeByData(a,i),this.stopDraw()},this.setLineWrapSide=function(t,e){var n=t.preSide,r=t.nextSide,i=t.oppositePreSide,a=t.oppositeNextSide,o=e[0].slice(),s=e[1].slice(),u=function(t,e){for(var o=1,s=t.length;o<s-1;o++){var u=t[o].option;u.ignoreMaxPoly=!0,"vertical"===e?(u.firstSide=n,u.lastSide=i):"horizontal"===e&&(u.firstSide=r,u.lastSide=a)}};o.unshift({data:[a[1],a[0]]}),o.push({data:r}),s.unshift({data:n}),s.push({data:[i[1],i[0]]}),u(o,"vertical"),u(s,"horizontal")},this.setPointPosWithSide=function(t,e){var n=function(t,e){for(var n=t[0][0],r=t[0][1],i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=0,s=e.length;o<s;o++){var u=e[o],c=u.scale;u.dot[0]=n+c*i,u.dot[1]=r+c*a}};n(t.preSide,e.onPreSidePoint),n(t.nextSide,e.onNextSidePoint)},this.getLineOutRect=function(t){var e=[],n=t[0][0],r=t[0][1],i=t[1][0],a=t[1][1];return n>i&&(n^=i,n^=i^=n),r>a&&(r^=a,r^=a^=r),e[0]=[n,r],e[1]=[i,a],e},this.getTwoPointDistance=function(t,e){var n=Math.pow(e[0]-t[0],2),r=Math.pow(e[1]-t[1],2);return Math.sqrt(n+r)},this.dotRelationLine=function(t,e){var n=this,i=r.util.onLine(t,e);return t[0],t[1],e[0][0],e[0][1],e[1][0],e[1][1],{isInline:i,scale:function(){var r=n.getTwoPointDistance(e[0],e[1]);return n.getTwoPointDistance(e[0],t)/r}()}},this.linesRelationSide=function(t,e){for(var n=t.preSide,i=t.nextSide,a=t.oppositePreSide,o=t.oppositeNextSide,s=[],u=[],c=[[],[]],l=0,f=e.length;l<f;l++){var h=e[l],d=h.data,p=d[0],v=d[1],g=null,m=d[0][0],y=d[0][1],w=d[1][0],b=d[1][1],S=n[0][0],D=n[0][1],x=n[1][0],_=n[1][1],I=i[0][0],T=i[0][1],E=i[1][0],k=i[1][1],M=a[0][0],A=a[0][1],R=a[1][0],C=a[1][1],P=o[0][0],O=o[0][1],F=o[1][0],B=o[1][1],L=r.util.segmentsInLine(m,y,w,b,S,D,x,_),j=r.util.segmentsInLine(m,y,w,b,M,A,R,C),N=r.util.segmentsInLine(m,y,w,b,I,T,E,k),U=r.util.segmentsInLine(m,y,w,b,P,O,F,B);L&&j?(g=this.dotRelationLine(p,n))&&g.isInline?(s.push({dot:p,scale:g.scale}),c[0].push(h)):(g=this.dotRelationLine(v,n))&&g.isInline&&(s.push({dot:v,scale:g.scale}),c[0].push(h)):N&&U&&((g=this.dotRelationLine(p,i))&&g.isInline?(u.push({dot:p,scale:g.scale}),c[1].push(h)):(g=this.dotRelationLine(v,i))&&g.isInline&&(u.push({dot:v,scale:g.scale}),c[1].push(h)))}return{onPreSidePoint:s,onNextSidePoint:u,lineGroup:c}},this.getGridShapeInfo=function(t){for(var e=[],n=[],r=0,i=t.length;r<i;r++){var a=t[r];"GridShape"===a.option.composeType&&("poly"===a.option.type?e.push(a):"line"===a.option.type&&n.push(a))}return{polyWrap:e,lineArr:n}},this.getPointDiffIndex=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var a=t[r][0]!==e[r][0],o=t[r][1]!==e[r][1];(a||o)&&n.push(r)}return n},this.getPointNearSide=function(t,e){var n=t.length,r=(t[e],(e+1)%n);return{preSide:[t[(e+n-1)%n],t[e]],nextSide:[t[e],t[r]],oppositePreSide:[t[r],t[(r+1)%n]],oppositeNextSide:[t[(r+1)%n],t[(r+2)%n]]}},this.canvasNode=e,0===t.length)return;var n=this.getGridShapeInfo(t),i=n.polyWrap,a=n.lineArr;if(0===i.length)return;var o=i[0].beforModifyData;i[0].data;o?this.asyncGrideWrapDataToLine(i,a):this.moveLinesInGride(i,a);this.toTransDataToInt(i,a)};var r=n(9)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(170)),a=r(n(181)),o=r(n(183)),s=r(n(208)),u=function(t,e,n){var r=n.dType,u=n.isPrivateProtocol,c=null,l=null,f={wsURL:t,rtspURL:e,workerManager:l="Train"===r?new a.default:new i.default,RTSP_STATE:{OK:200,UNAUTHORIZED:401,NOTFOUND:404,INVALID_RANGE:457,NOTSERVICE:503,DISCONNECT:999,BADREQUEST:400,FORBIDDEN:403,INTERNALSERVERERROR:500,SERVICEUNAVAILABLE:503}},h=Object.assign(f,n);function d(){}return c=!0===u?new o.default(h):new s.default(h),d.prototype={init:function(t,e,n,i,a){"Train"===r?l.init(t,n):l.init(t,e,n,i,a,h.wndIndex)},setExtraError:function(t){c.setExtraError(t)},talkInit:function(){l.talkInit()},connect:function(){c.connect()},disconnect:function(){c.disconnect()},controlPlayer:function(t){return c.controlPlayer(t)},setLiveMode:function(t){l.setLiveMode(t)},setPlayMode:function(t,e){c.setPlayMode(t,e)},setRTSPURL:function(t){c.setSignalURL(t)},setCallback:function(t,e){c.setCallback(t,e)},setUserInfo:function(t,e){c.setUserInfo(t,e)},capture:function(t,e){l.capture(t,e)},setLessRate:function(t){l.setLessRate&&l.setLessRate(t)},gotoSecond:function(t){return l.gotoSecond(t)},gotoFrame:function(t){return l.gotoFrame(t)},checkLeftSize:function(t,e){return l.checkLeftSize(t,e)},clearMap:function(){l.clearMap()},getCapture:function(t,e,n){return l.getCapture(t,e,n)}},new d};e.default=u},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(15),a=r(n(171)),o=r(n(173)),s=r(n(174)),u=r(n(175)),c=r(n(176)),l=r(n(177)),f=r(n(178)),h=r(n(179)),d=r(n(180)),p=function(){var t=null,e=null,n=null,r=null,p=null,v=null,g=null,m=null,y=null,w=null,b=null,S=null,D=null,x=null,_=null,I=null,T=null,E=null,k=null,M=null,A=null,R=(0,i.BrowserDetect)(),C=null,P=0,O=null,F=!1,B="",L=!0,j=null,N=null,U=null,z=!1,V=!1,W=null,q=null,Y=null,H={id:1,samples:null,baseMediaDecodeTime:0},X=0,G=0,Q=null,$=1,Z="",J=null,K=null,tt=4,et=1,nt=tt,rt=!1,it=0,at=0,ot=0,st=1e3,ut=null,ct=0,lt=0,ft=0,ht=null,dt=!1,pt=0,vt={type:"live",codec:"",width:0,height:0,isLimitSpeed:null},gt=!1,mt=null,yt=null,wt=null,bt=!1,St=null,Dt=0,xt={5:"MJPEG",8:"H264",12:"H265"},_t={1:4e3,2:8e3,3:11025,4:16e3,5:2e4,6:22050,7:32e3,8:44100,9:48e3,10:96e3,11:128e3,12:192e3,13:64e3};function It(){r=this}function Tt(){return q}function Et(){null!==D&&D(!1)}It.prototype={init:function(n,i,u,c,f,h){if(pt=u,j=n,J=i,r.channel=u,dt=f,window.navigator.userAgent,!dt){(t=new o.default).onmessage=kt;var d=!0===c?500:15;p=new a.default(pt,this,j,d),(A=(0,l.default)()).wndIndex=h,document.getElementById("count-fps"),document.getElementById("span-fps")}(e=new s.default).onmessage=Mt},talkInit:function(){F=!0,(e=new s.default).onmessage=Mt},sendSdpInfo:function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s={type:"sdpInfo",data:{sdpInfo:r,aacCodecInfo:a,decodeMode:B,govLength:O,checkDelay:L,lessRateCanvas:bt,mp4Codec:o}};if(F){e.postMessage(s);try{window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,(n=new d.default).onmessage=At,null===g&&((g=new h.default).init(),g.setSendAudioTalkBufferCallback(Rt)),n.postMessage(s),s={type:"sampleRate",data:g.initAudioOut()},n.postMessage(s)}catch(t){return void i.debug.error("Web Audio API is not supported in this web browser! : "+t)}}else t.postMessage(s),e.postMessage(s);ut=null,rt=!1},parseRTPData:function(n,a){var o=a[4],s=128,u=129,c=130,l=131,f=132,h=133,d=136,p=137,v=138,g=139,m=140,y=144,w=145,b=146,S=147,D=148,x=149,_=150,I=151,E=152,M=153,A=154,R=155,C=156,P=160,O=176,F=255,B={type:"MediaData",data:{rtspInterleave:n,payload:a},info:null,channel:r.channel},L={};if(253==o||254==o||252==o||251==o){if(function(){var t=a[22]+24;L.frameIndex=(a[11]<<24)+(a[10]<<16)+(a[9]<<8)+a[8];for(var e=24;e<t;)if(s==a[e]){if(e+4>t)return i.debug.log("i: "+e),-1;L.width=a[e+2]<<3,L.height=a[e+3]<<3,e+=4}else if(u==a[e]){if(e+4>a.length)return i.debug.log("i: "+e),-1;L.I_frame_interval=a[e+1],L.encode_type=a[e+2],L.frame_rate=a[e+3],e+=4}else if(c==a[e])L.width=(a[e+5]<<8)+a[e+4],L.height=(a[e+7]<<8)+a[e+6],e+=8;else if(l==a[e])e+=4;else if(d==a[e])e+=8;else if(f==a[e]){if(e+4>t)return i.debug.log("i: "+e),-1;var n=(a[e+2]<<8)+a[e+3];e+=n}else if(D==a[e])L.h264_svc_flag=!0,L.svc=a[e+2],e+=4;else if(v==a[e])e+=8;else if(w==a[e])e+=8;else if(M==a[e]){var r=a[e+1],o=a[e+2];e+=8,e+=r*o*16}else if(A==a[e])e+=8;else if(R==a[e])e+=8;else if(b==a[e])e+=8;else if(S==a[e])e+=8;else if(x==a[e])e+=8;else if(P<=a[e]&&a[e]<O)L.timeStampmsw=(a[e+3]<<8)+a[e+2],e+=4;else if(O<=a[e]&&a[e]<F)e+=a[e+1];else if(h==a[e])e+=4;else if(p==a[e])e+=4;else if(g==a[e])e+=4;else if(y==a[e])e+=8;else if(I==a[e]){var r=a[e+1];e+=8,e+=16*r}else if(E==a[e])e+=4;else{if(C!=a[e])return i.debug.log("parseVideoInfo error ext_type:0x"+a[e]),i.debug.log("i: "+e),-1;var t=(a[e+5]<<8)+a[e+4];e+=8,e+=t}}(),null!=mt){if(mt!=L.encode_type&&void 0!==L.encode_type)return mt=L.encode_type,void T(xt[L.encode_type])}else mt=L.encode_type;t&&(B.info=L,t.postMessage(B))}else if(240==o){if(function(){L.ChannelCount=0;for(var t=a[22]+24,e=24;e<t;)if(s==a[e])e+=4;else if(u==a[e])e+=4;else if(c==a[e])e+=8;else if(l==a[e])e+=4;else if(m==a[e])e+=a[e+1];else if(d==a[e])e+=8;else if(f==a[e]){var n=a[e+2]<<8+a[e+3];e+=n}else if(_==a[e])L.ChannelCount=a[e+1],L.channel=a[e+2],e+=4;else if(x==a[e])e+=8;else{if(P!=a[e])return i.debug.log("parseAudioInfo error ext_type:0x"+a[e]),i.debug.log("i: "+e),-1;L.timeStampmsw=(a[e+3]<<8)+a[e+2],e+=4}0==L.ChannelCount&&(L.ChannelCount=1,L.channel=0);for(var t=a[22]+24,e=24;e<t;)if(a[e]==s)e+=4;else if(a[e]==u)e+=4;else if(a[e]==c)e+=8;else if(a[e]==l)L.audio_type=a[e+2],L.samplingRate=_t[a[e+3]],e+=4;else if(a[e]==m)e+=a[e+1];else if(a[e]==d)e+=8;else if(a[e]==f){var n=a[e+2]<<8+a[e+3];e+=n}else if(a[e]==_)e+=4;else if(a[e]==x)e+=8;else if(P==a[e])e+=4;else{if(E!=a[e])return i.debug.log("parseAudioInfo error ext_type:0x"+a[e]),i.debug.log("i: "+e),-1;e+=4}}(),null!=wt){if(wt!=L.audio_type)return wt=L.audio_type,void k("audioType")}else wt=L.audio_type;if(null!=yt){if(yt!=L.samplingRate)return yt=L.samplingRate,void k("samplingRate")}else yt=L.samplingRate;switch(L.audio_type+""){case"8":case"10":case"14":case"16":case"25":case"26":case"27":case"28":case"29":case"30":case"31":e&&(B.info=L,e.postMessage(B))}}else 241==o?t&&(B.info=L,t.postMessage(B)):i.debug.log("mediaType:   "+o)},setCallback:function(t,e){switch(t){case"timeStamp":break;case"ResolutionChanged":m=e,null!==p&&p.setResizeCallback(m);break;case"audioTalk":w=e;break;case"stepRequest":b=e;break;case"metaEvent":break;case"videoMode":S=e;break;case"loadingBar":D=e;break;case"Error":x=e;break;case"PlayStart":y=e,null!==p&&p.setBeginDrawCallback(y);break;case"DecodeStart":_=e;break;case"UpdateCanvas":I=e,null!==p&&p.setupdateCanvasCallback(I);break;case"FrameTypeChange":T=e;break;case"MSEResolutionChanged":E=e;break;case"audioChange":k=e;break;case"WorkerReady":ht=e;break;case"IvsDraw":M=e;break;case"FileOver":this.fileOverCallback=e;break;case"Waiting":this.waitingCallback=e;break;case"UpdateTime":break;default:i.debug.log(t),i.debug.log("workerManager::setCallback() : type is unknown")}},capture:function(t,e){"canvas"===B?p.capture(t,e):"video"===B&&W.capture(t,e)},getCapture:function(t,e,n){return"video"===B?W.getCapture(t,e,n):p.getCapture(t,e,n)},setDeviceInfo:function(t){U=t.mode},setFPS:function(t){P=0===t?30:t,Ct(1!==et)},setGovLength:function(t){O=t},setLiveMode:function(t){null!==S&&S(t),"video"===(B=null===t?"canvas":t)?null!==p&&p.renewCanvas():"canvas"===B&&Ct(!1)},setPlayMode:function(t){V=t},controlAudio:function(t,e){switch(i.debug.log(t+" "+e),t){case"audioPlay":"start"===e?null!==v&&v.play():"stop"===e?(ct=0,null!==v&&v.stop()):null!==v&&v.pause();break;case"volumn":ct=e,null!==v&&v.controlVolumn(e,!0);break;case"audioSamplingRate":null!==v&&v.setSamplingRate(e)}},controlAudioTalk:function(t,e){if(null!==g)switch(t){case"onOff":"on"===e||g.stopAudioOut();break;case"volumn":g.controlVolumnOut(e)}},reassignCanvas:function(){null!==p&&p.reassignCanvas()},digitalZoom:function(t){null!==p&&p.digitalZoom(t)},playbackSpeed:function(t){et=t,p.setFrameInterval(et)},timeStamp:function(t){I&&I(t)},initVideo:function(t){Ct(t)},setFpsFrame:function(t){ft=0},setCheckDelay:function(t){L=t},initStartTime:function(){dt||(t.postMessage({type:"initStartTime"}),p.stopRendering(),p.startRendering())},terminate:function(){"backup"!==U&&(t&&(t.terminate(),t=null),e&&(e.terminate(),e=null)),n&&n.terminate(),g&&(g.terminate(),g=null),p&&p.terminate(),v&&v.terminate(),W&&W.terminate(),ht&&(ht=null),p=null},postRtspOver:function(){t&&t.postMessage({type:"end"}),v&&v.setRtspOver()},pause:function(){W&&W.pause(),t&&p.pause()},play:function(){W&&W.play(),t&&p.play()},setLessRate:function(t){bt=t},playNextFrame:function(){W?W.playNextFrame():t&&p.playNextFrame()},getVideoBufferQueueSize:function(){return W?W.getVideoBufferQueueSize():t?p.getVideoBufferQueueSize():void 0},getCurFrameInfo:function(){return W?W.getCurFrameInfo():t?p.getCurFrameInfo():void 0},sendBufferToAudioWorker:function(t){Mt(t={type:"message",data:{codec:"AAC",data:t,type:"render"}})}};function kt(e){var n,r,a=e.data;switch(a.type){case"WorkerReady":++Dt>=2&&ht&&ht();break;case"canvasRender":Ot(0,"currentTime"),n=a.data,r=a.option,null!==n&&null!==p&&("mjpeg"===C.codecType?p.drawMJPEG(n,C.width,C.height,C.codecType,C.frameType,C.timeStamp,C.frameIndex,r):p.draw(n,C.width,C.height,C.codecType,C.frameType,C.timeStamp,C.frameIndex,r));break;case"initSegment":q=a.data,Pt();break;case"mediaSample":null===H.samples&&(H.samples=new Array(nt)),null===a.data.frame_time_stamp&&(a.data.frameDuration=Math.round(st/P)),1!==et&&(a.data.frameDuration=st/Math.abs(et)),H.samples[X++]=a.data,at+=a.data.frameDuration,ot+=a.data.frameDuration;break;case"videoRender":var o=new Uint8Array(a.data.length+G);if(0!==G&&o.set(Q),o.set(a.data,G),G=(Q=o).length,X%nt===0&&0!==X){if(null!==H.samples[0].frameDuration?(H.baseMediaDecodeTime=1===$?0:it,it=at):H.baseMediaDecodeTime=Math.round(st/P)*nt*($-1),"chrome"==R&&1===et)for(var s=H.samples.length,u=ot/nt,l=0;l<s;l++)H.samples[l].frameDuration=u;ot=0,Y=c.default.mediaSegment($,H,Q,H.baseMediaDecodeTime),$++,X=0,Q=null,G=0,null!==W?W.setMediaSegment(Y,C.frameIndex):!1===rt&&(i.debug.log("workerManager::videoMS error!! recreate videoMS"),Pt()),null!==p&&p.stopRendering()}break;case"mediasegmentData":W.setMediaSegment(a.data),!1===rt&&(i.debug.log("videoMS error!! recreate videoMS"),Pt());break;case"videoInfo":C=a.data,0===ft&&(ft=performance.now(),"canvas"===B&&I(C.timeStamp));break;case"time":break;case"videoTimeStamp":K=a.data,null!==W&&null!==K&&(W.setvideoTimeStamp(K),I(K));break;case"firstFrame":p&&(p.startRendering(),"undefined"!==typeof p.setFPS&&p.setFPS(P));break;case"drop":break;case"codecInfo":Z=a.data,null!==W&&W.setCodecInfo(Z);break;case"stepPlay":switch(a.data){case"needBuffering":b("request",N);break;case"BufferFull":b("complete"),gt&&(t.postMessage({type:"stepPlay",data:"findIFrame"}),p.startRendering(),gt=!1)}break;case"setVideoTagMode":It.prototype.setLiveMode(a.data);break;case"playbackFlag":!0===a.data?vt.type="playback":vt.type="live",null!==W&&W.setPlaybackFlag(a.data);break;case"error":null!==x&&x(a.data);break;case"MSEResolutionChanged":E(a.data);break;case"DecodeStart":var f=a.data.width-0,h=a.data.height-0;j.setAttribute("width",f),j.setAttribute("height",h),It.prototype.setLiveMode(a.data.decodeMode),_(a.data);break;case"ivsDraw":var d=a.data.ivsDraw,v=a.data.channel;if("canvas"===B&&(void 0===C||null===C))break;if("canvas"!==B&&(void 0===K||null===K))break;var g="canvas"===B?C.timeStamp:K;g=1e3*g.timestamp+g.timestamp_usec;var m="canvas"===B?g:g-parseInt(1e3*W.getDuration());null!==M&&(A.setCallback(M),A.draw(d,m,g,v,A.wndIndex));break;case"end":W&&W.setRtspOver(),p&&p.setRtspOver();break;default:i.debug.log("workerManager::videoWorker unknown data = "+a.data)}}function Mt(t){var e=t.data;switch(St!==e.samplingRate&&(St=e.samplingRate,null!=v&&v.setSamplingRate(St)),e.type){case"WorkerReady":++Dt>=2&&ht&&ht();break;case"render":if(!0===z)break;ut!==e.codec&&(null!==v&&(ct=v.getVolume(),lt=v.getInitVideoTimeStamp(),v.terminate()),31===e.audio_type&&"edge"===R?(v=null,null!==x&&x({errorCode:201})):(v=new f.default).setSamplingRate(e.samplingRate),null!==v&&(v.setInitVideoTimeStamp(lt),!0===F&&(ct=1),v.audioInit(ct)||(v=null)),ut=e.codec),null!==v&&(!0===F&&v.setBufferingFlag(),null===C||"undefined"===typeof C?v.bufferAudio(e.data,e.rtpTimeStamp,null):v.bufferAudio(e.data,e.rtpTimeStamp,C.codecType))}}function At(t){var e=t.data;switch(e.type){case"rtpData":w(e.data)}}function Rt(t){var e={type:"getRtpData",data:t};n.postMessage(e)}function Ct(t){null!==W&&(W.close(),W=null),nt=!1===t?tt:Math.abs(et),H.samples=new Array(nt),rt=!1,$=1,Y=null,X=0,Q=null,G=0}function Pt(){rt=!0,null===W?((W=(0,u.default)(r)).setCodecInfo(Z),W.setInitSegmentFunc(Tt),W.setVideoSizeCallback(Et),W.setBeginDrawCallback(y),W.init(J),W.setErrorCallback(x),W.setSpeedPlay(et),W.setPlaybackFlag(V),W.setFPS(P)):(W.getVideoElement(),W.setInitSegment()),W.setAudioStartCallback(Ot)}function Ot(t,e){null!==v&&v.setBufferingFlag(t,e)}return new It};e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(15),i=n(66);var a=function(){this.metrics={},this._clearMetrics(),this._objpool=[]};function o(t,e){function n(t,e){n.prototype.w=t,n.prototype.h=e}return n.prototype={toString:function(){return"("+n.prototype.w+", "+n.prototype.h+")"},getHalfSize:function(){return new o(n.prototype.w>>>1,n.prototype.h>>>1)},length:function(){return n.prototype.w*n.prototype.h}},new n(t,e)}a.prototype.alloc=function(){var t=null;return 0===this._objpool.length?(t=new Image,this.metrics.totalalloc++):(t=this._objpool.pop(),this.metrics.totalfree--),t},a.prototype.free=function(t){t.length>0&&(r.debug.log("It is not zero length = "+t.length),this._objpool.push(t),this.metrics.totalfree++)},a.prototype.collect=function(t){this._objpool=[];var e=this.metrics.totalalloc-this.metrics.totalfree;this._clearMetrics(e)},a.prototype._clearMetrics=function(t){this.metrics.totalalloc=t||0,this.metrics.totalfree=0};var s=function(t,e,n,s){var u=e,c=s,l=t,f=n,h=null,d=null,p=null,v=null,g=null,m=null,y=null,w=null,b=0,S=null,D=0,x=0,_=0,I=0,T=new a,E=null,k="",M=!1,A=!1,R=16.7,C=0,P=!1,O={},F=[],B="png",L=1,j=function(t,e,n,r,i,a,o,s){for(var u in function(t){this.buffer=t,this.previous=null,this.next=null}.call(this,t),this.width=e,this.height=n,this.codecType=r,this.frameType=i,this.timeStamp=a,this.frameIndex=o,this.option={},s)this.option[u]=s[u]},N=null;function U(){var t=c||15;function e(){this.first=null,this.size=0}return e.prototype={enqueue:function(e,n,r,i,a,o,s,u){this.size>=t&&this.clear();var c=new j(e,n,r,i,a,o,s,u);if(null===this.first)this.first=c;else{for(var l=this.first;null!==l.next;)l=l.next;l.next=c}return this.size+=1,c},dequeue:function(){var t=null;return null!==this.first&&(t=this.first,this.first=this.first.next,this.size-=1),t},clear:function(){r.debug.log("BufferQueue clear!");for(var t=null;null!==this.first;)t=this.first,this.first=this.first.next,this.size-=1,t.buffer=null,t=null;this.size=0,this.first=null}},new e}function z(){v="rgb2d",m=null,N=new U,g=R,A=!1}var V=function(t,e){var n=new o(t,e);switch(v){case"RGB2d":h=new RGB2dCanvas(f,n);break;case"YUVWebGL":h=new i.YUVWebGLCanvas(f,n);break;case"ImageWebGL":h=new i.ImageWebGLCanvas(f,n);break;case"WebGL":h=new i.WebGLCanvas(f,n)}};function W(t,e){var n=f.width,r=f.height,i=document.createElement("canvas");i.width=n,i.height=r;for(var a=i.getContext("2d"),o=0;o<t.length;o++)a.drawImage(t[o],0,0,n,r);for(var s=i.toDataURL(),u=atob(s.substring("data:image/png;base64,".length)),c=new Uint8Array(u.length),l=0,h=u.length;l<h;++l)c[l]=u.charCodeAt(l);var d=new Blob([c.buffer],{type:"image/png"});q(d,e+".png")}var q=function(t){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,a=/constructor/i.test(t.HTMLElement),o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=function(t){setTimeout(function(){"string"===typeof t?n().revokeObjectURL(t):t.remove()},4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(e,l,f){f||(e=c(e));var h,d=this,p="application/octet-stream"===e.type,v=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"===typeof i)try{i.call(t,n||t)}catch(t){s(t)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,i)return h=n().createObjectURL(e),void setTimeout(function(){r.href=h,r.download=l,function(t){var e=new MouseEvent("click");t.dispatchEvent(e)}(r),v(),u(h),d.readyState=d.DONE});!function(){if((o||p&&a)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=o?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,d.readyState=d.DONE,v()},r.readAsDataURL(e),void(d.readyState=d.INIT)}h||(h=n().createObjectURL(e)),p?t.location.href=h:t.open(h,"_blank")||(t.location.href=h),d.readyState=d.DONE,v(),u(h)}()},f=l.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(t,e,n){return new l(t,e||t.name||"download",n)})}(window),Y=function(t){if(0==N.size&&!0===P)return u.fileOverCallback(),void z.prototype.stopRendering();if(null!==(E=N.dequeue())&&null!==E.buffer&&("mjpeg"===E.codecType||E.buffer.length>0)){if("undefined"!==typeof d&&"undefined"!==typeof p&&d===E.width&&p===E.height&&m===E.codecType||(v="h264"===E.codecType||"h265"===E.codecType?"YUVWebGL":"ImageWebGL",V(E.width,E.height),"undefined"!=d&&null!=d&&0!=d||y("PlayStart"),d=E.width,p=E.height,m=E.codecType),S=E.timeStamp,u.timeStamp(S),"undefined"!==typeof h)return h.drawCanvas(E.buffer,E.option),f.updatedCanvas=!0,w(S),Math.abs(S.timestamp-D)>3&&u.waitingCallback(!1),O={frameIndex:E.frameIndex,option:E.option,buffer:E.buffer,timeStamp:E.timeStamp},D=S.timestamp,M&&(M=!1,W([f].concat(F),k)),"mjpeg"===E.codecType?T.free(E.buffer):(delete E.buffer,E.buffer=null),E.previous=null,E.next=null,E=null,!0;r.debug.log("drawer is undefined in StreamDrawer!")}return!1},H=function t(e){if(!0===A){if(0===b||e-b<200)return 0===b&&(b=e),void(null!==N&&window.requestAnimationFrame(t));(I+=e-x)>_&&Y()&&(_+=g),I>1e3&&(_=0,I=0),x=e,window.requestAnimationFrame(t)}};return z.prototype={getDrawingStrategy:function(){return v},reassignCanvas:function(){var t=$('canvas[kind-channel-id="'+l+'"]')[0];f!==t&&(d=0,p=0)},drawMJPEG:function(t,e,n,r,i,a,o,s){var u=T.alloc();u.width=e,u.height=n,u.codecType=r,u.frameType=i,u.frameIndex=o,u.time=a,u.onload=function(){null!==N&&N.enqueue(this,this.width,this.height,this.codecType,this.frameType,this.time,this.frameIndex,this.option)},u.setAttribute("src","data:image/jpeg;base64,"+function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(t),i=r.byteLength,a=i%3,o=i-a,s=0,u=0;u<o;u+=3)e+=n[(16515072&(s=r[u]<<16|r[u+1]<<8|r[u+2]))>>18]+n[(258048&s)>>12]+n[(4032&s)>>6]+n[63&s];return 1===a?e+=n[(252&(s=r[o]))>>2]+n[(3&s)<<4]+"==":2===a&&(e+=n[(64512&(s=r[o]<<8|r[o+1]))>>10]+n[(1008&s)>>4]+n[(15&s)<<2]+"="),e}(t))},draw:function(t,e,n,r,i,a,o,s){null!==N&&(document.hidden&&N.size>=15?N.clear():N.enqueue(t,e,n,r,i,a,o,s))},capture:function(t,e){k=t,M=!0,F=e.ivsCanvasArr},getCapture:function(t,e,n){return L=n||1,B="png","jpg"!==e&&"jpeg"!==e||(B="jpeg"),h.drawCanvas(O.buffer,O.option),f.updatedCanvas=!0,f.toDataURL("image/"+B,L)||""},digitalZoom:function(t){"undefined"!==typeof h&&null!==h&&h.updateVertexArray(t)},setResizeCallback:function(t){},getCodecType:function(){return m},getFrameTimestamp:function(){return S},initStartTime:function(){0===b&&window.requestAnimationFrame(H)},startRendering:function(){0===b&&(A=!0,window.requestAnimationFrame(H))},pause:function(){A=!1},play:function(){A=!0},stopRendering:function(){A=!1,b=0},setFPS:function(t){"undefined"===typeof t?g=R:0===t?g=R:g=1e3/t,C=g},setFrameInterval:function(t){g=t*C},getCanvas:function(){return f},renewCanvas:function(){V(d,p),"undefined"!==typeof h&&null!==h&&h.initCanvas()},setBeginDrawCallback:function(t){y=t},setupdateCanvasCallback:function(t){w=t},terminate:function(){b=0,S=null,null!==N&&(N.clear(),N=null),h&&h.clearCanvas(),h=null,P=!1},setRtspOver:function(){P=!0},playNextFrame:Y,getVideoBufferQueueSize:function(){return N.size},getCurFrameInfo:function(){return O}},new z};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$V=e.$P=e.$M=e.$L=void 0,e.Matrix=a;var r=1e-6;function i(){}function a(){}function o(){}function s(){}i.prototype={e:function(t){return t<1||t>this.elements.length?null:this.elements[t-1]},dimensions:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(t){var e=this.elements.length,n=t.elements||t;if(e!=n.length)return!1;do{if(Math.abs(this.elements[e-1]-n[e-1])>r)return!1}while(--e);return!0},dup:function(){return i.create(this.elements)},map:function(t){var e=[];return this.each(function(n,r){e.push(t(n,r))}),i.create(e)},each:function(t){var e,n=this.elements.length,r=n;do{e=r-n,t(this.elements[e],e+1)}while(--n)},toUnitVector:function(){var t=this.modulus();return 0===t?this.dup():this.map(function(e){return e/t})},angleFrom:function(t){var e=t.elements||t,n=this.elements.length;if(n!=e.length)return null;var r=0,i=0,a=0;if(this.each(function(t,n){r+=t*e[n-1],i+=t*t,a+=e[n-1]*e[n-1]}),i=Math.sqrt(i),a=Math.sqrt(a),i*a===0)return null;var o=r/(i*a);return o<-1&&(o=-1),o>1&&(o=1),Math.acos(o)},isParallelTo:function(t){var e=this.angleFrom(t);return null===e?null:e<=r},isAntiparallelTo:function(t){var e=this.angleFrom(t);return null===e?null:Math.abs(e-Math.PI)<=r},isPerpendicularTo:function(t){var e=this.dot(t);return null===e?null:Math.abs(e)<=r},add:function(t){var e=t.elements||t;return this.elements.length!=e.length?null:this.map(function(t,n){return t+e[n-1]})},subtract:function(t){var e=t.elements||t;return this.elements.length!=e.length?null:this.map(function(t,n){return t-e[n-1]})},multiply:function(t){return this.map(function(e){return e*t})},x:function(t){return this.multiply(t)},dot:function(t){var e=t.elements||t,n=0,r=this.elements.length;if(r!=e.length)return null;do{n+=this.elements[r-1]*e[r-1]}while(--r);return n},cross:function(t){var e=t.elements||t;if(3!=this.elements.length||3!=e.length)return null;var n=this.elements;return i.create([n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]])},max:function(){var t,e=0,n=this.elements.length,r=n;do{t=r-n,Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t])}while(--n);return e},indexOf:function(t){var e,n=null,r=this.elements.length,i=r;do{e=i-r,null===n&&this.elements[e]==t&&(n=e+1)}while(--r);return n},toDiagonalMatrix:function(){return a.Diagonal(this.elements)},round:function(){return this.map(function(t){return Math.round(t)})},snapTo:function(t){return this.map(function(e){return Math.abs(e-t)<=r?t:e})},distanceFrom:function(t){if(t.anchor)return t.distanceFrom(this);var e=t.elements||t;if(e.length!=this.elements.length)return null;var n,r=0;return this.each(function(t,i){n=t-e[i-1],r+=n*n}),Math.sqrt(r)},liesOn:function(t){return t.contains(this)},liesIn:function(t){return t.contains(this)},rotate:function(t,e){var n,r,o,s,u;switch(this.elements.length){case 2:return 2!=(n=e.elements||e).length?null:(r=a.Rotation(t).elements,o=this.elements[0]-n[0],s=this.elements[1]-n[1],i.create([n[0]+r[0][0]*o+r[0][1]*s,n[1]+r[1][0]*o+r[1][1]*s]));case 3:if(!e.direction)return null;var c=e.pointClosestTo(this).elements;return r=a.Rotation(t,e.direction).elements,o=this.elements[0]-c[0],s=this.elements[1]-c[1],u=this.elements[2]-c[2],i.create([c[0]+r[0][0]*o+r[0][1]*s+r[0][2]*u,c[1]+r[1][0]*o+r[1][1]*s+r[1][2]*u,c[2]+r[2][0]*o+r[2][1]*s+r[2][2]*u]);default:return null}},reflectionIn:function(t){if(t.anchor){var e=this.elements.slice(),n=t.pointClosestTo(e).elements;return i.create([n[0]+(n[0]-e[0]),n[1]+(n[1]-e[1]),n[2]+(n[2]-(e[2]||0))])}var r=t.elements||t;return this.elements.length!=r.length?null:this.map(function(t,e){return r[e-1]+(r[e-1]-t)})},to3D:function(){var t=this.dup();switch(t.elements.length){case 3:break;case 2:t.elements.push(0);break;default:return null}return t},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(t){return this.elements=(t.elements||t).slice(),this}},i.create=function(t){return(new i).setElements(t)},i.i=i.create([1,0,0]),i.j=i.create([0,1,0]),i.k=i.create([0,0,1]),i.Random=function(t){var e=[];do{e.push(Math.random())}while(--t);return i.create(e)},i.Zero=function(t){var e=[];do{e.push(0)}while(--t);return i.create(e)},a.prototype={e:function(t,e){return t<1||t>this.elements.length||e<1||e>this.elements[0].length?null:this.elements[t-1][e-1]},row:function(t){return t>this.elements.length?null:i.create(this.elements[t-1])},col:function(t){if(t>this.elements[0].length)return null;var e,n=[],r=this.elements.length,a=r;do{e=a-r,n.push(this.elements[e][t-1])}while(--r);return i.create(n)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},eql:function(t){var e=t.elements||t;if("undefined"==typeof e[0][0]&&(e=a.create(e).elements),this.elements.length!=e.length||this.elements[0].length!=e[0].length)return!1;var n,i,o,s=this.elements.length,u=s,c=this.elements[0].length;do{n=u-s,i=c;do{if(o=c-i,Math.abs(this.elements[n][o]-e[n][o])>r)return!1}while(--i)}while(--s);return!0},dup:function(){return a.create(this.elements)},map:function(t){var e,n,r,i=[],o=this.elements.length,s=o,u=this.elements[0].length;do{n=u,i[e=s-o]=[];do{r=u-n,i[e][r]=t(this.elements[e][r],e+1,r+1)}while(--n)}while(--o);return a.create(i)},isSameSizeAs:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=a.create(e).elements),this.elements.length==e.length&&this.elements[0].length==e[0].length},add:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=a.create(e).elements),this.isSameSizeAs(e)?this.map(function(t,n,r){return t+e[n-1][r-1]}):null},subtract:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=a.create(e).elements),this.isSameSizeAs(e)?this.map(function(t,n,r){return t-e[n-1][r-1]}):null},canMultiplyFromLeft:function(t){var e=t.elements||t;return"undefined"==typeof e[0][0]&&(e=a.create(e).elements),this.elements[0].length==e.length},multiply:function(t){if(!t.elements)return this.map(function(e){return e*t});var e=!!t.modulus;if("undefined"==typeof(p=t.elements||t)[0][0]&&(p=a.create(p).elements),!this.canMultiplyFromLeft(p))return null;var n,r,i,o,s,u,c=this.elements.length,l=c,f=p[0].length,h=this.elements[0].length,d=[];do{d[n=l-c]=[],r=f;do{i=f-r,o=0,s=h;do{u=h-s,o+=this.elements[n][u]*p[u][i]}while(--s);d[n][i]=o}while(--r)}while(--c);var p=a.create(d);return e?p.col(1):p},x:function(t){return this.multiply(t)},minor:function(t,e,n,r){var i,o,s,u=[],c=n,l=this.elements.length,f=this.elements[0].length;do{u[i=n-c]=[],o=r;do{s=r-o,u[i][s]=this.elements[(t+i-1)%l][(e+s-1)%f]}while(--o)}while(--c);return a.create(u)},transpose:function(){var t,e,n,r=this.elements.length,i=this.elements[0].length,o=[],s=i;do{o[t=i-s]=[],e=r;do{n=r-e,o[t][n]=this.elements[n][t]}while(--e)}while(--s);return a.create(o)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){var t,e,n,r=0,i=this.elements.length,a=i,o=this.elements[0].length;do{t=a-i,e=o;do{n=o-e,Math.abs(this.elements[t][n])>Math.abs(r)&&(r=this.elements[t][n])}while(--e)}while(--i);return r},indexOf:function(t){var e,n,r,i=this.elements.length,a=i,o=this.elements[0].length;do{e=a-i,n=o;do{if(r=o-n,this.elements[e][r]==t)return{i:e+1,j:r+1}}while(--n)}while(--i);return null},diagonal:function(){if(!this.isSquare)return null;var t,e=[],n=this.elements.length,r=n;do{t=r-n,e.push(this.elements[t][t])}while(--n);return i.create(e)},toRightTriangular:function(){var t,e,n,r,i=this.dup(),a=this.elements.length,o=a,s=this.elements[0].length;do{if(e=o-a,0==i.elements[e][e])for(j=e+1;j<o;j++)if(0!=i.elements[j][e]){t=[],n=s;do{r=s-n,t.push(i.elements[e][r]+i.elements[j][r])}while(--n);i.elements[e]=t;break}if(0!=i.elements[e][e])for(j=e+1;j<o;j++){var u=i.elements[j][e]/i.elements[e][e];t=[],n=s;do{r=s-n,t.push(r<=e?0:i.elements[j][r]-i.elements[e][r]*u)}while(--n);i.elements[j]=t}}while(--a);return i},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;var t,e=this.toRightTriangular(),n=e.elements[0][0],r=e.elements.length-1,i=r;do{t=i-r+1,n*=e.elements[t][t]}while(--r);return n},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;var t,e=this.elements[0][0],n=this.elements.length-1,r=n;do{t=r-n+1,e+=this.elements[t][t]}while(--n);return e},tr:function(){return this.trace()},rank:function(){var t,e,n,i=this.toRightTriangular(),a=0,o=this.elements.length,s=o,u=this.elements[0].length;do{t=s-o,e=u;do{if(n=u-e,Math.abs(i.elements[t][n])>r){a++;break}}while(--e)}while(--o);return a},rk:function(){return this.rank()},augment:function(t){var e=t.elements||t;"undefined"==typeof e[0][0]&&(e=a.create(e).elements);var n,r,i,o=this.dup(),s=o.elements[0].length,u=o.elements.length,c=u,l=e[0].length;if(u!=e.length)return null;do{n=c-u,r=l;do{i=l-r,o.elements[n][s+i]=e[n][i]}while(--r)}while(--u);return o},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var t,e,n,r,i,o,s,u=this.elements.length,c=u,l=this.augment(a.I(u)).toRightTriangular(),f=l.elements[0].length,h=[];do{i=[],n=f,h[t=u-1]=[],o=l.elements[t][t];do{r=f-n,s=l.elements[t][r]/o,i.push(s),r>=c&&h[t].push(s)}while(--n);for(l.elements[t]=i,e=0;e<t;e++){i=[],n=f;do{r=f-n,i.push(l.elements[e][r]-l.elements[t][r]*l.elements[e][t])}while(--n);l.elements[e]=i}}while(--u);return a.create(h)},inv:function(){return this.inverse()},round:function(){return this.map(function(t){return Math.round(t)})},snapTo:function(t){return this.map(function(e){return Math.abs(e-t)<=r?t:e})},inspect:function(){var t,e=[],n=this.elements.length,r=n;do{t=r-n,e.push(i.create(this.elements[t]).inspect())}while(--n);return e.join("\n")},setElements:function(t){var e,n=t.elements||t;if("undefined"!=typeof n[0][0]){var r,i,a,o=n.length,s=o;this.elements=[];do{i=r=n[e=s-o].length,this.elements[e]=[];do{a=i-r,this.elements[e][a]=n[e][a]}while(--r)}while(--o);return this}var u=n.length,c=u;this.elements=[];do{e=c-u,this.elements.push([n[e]])}while(--u);return this}},a.create=function(t){return(new a).setElements(t)},a.I=function(t){var e,n,r,i=[],o=t;do{i[e=o-t]=[],n=o;do{r=o-n,i[e][r]=e==r?1:0}while(--n)}while(--t);return a.create(i)},a.Diagonal=function(t){var e,n=t.length,r=n,i=a.I(n);do{e=r-n,i.elements[e][e]=t[e]}while(--n);return i},a.Rotation=function(t,e){if(!e)return a.create([[Math.cos(t),-Math.sin(t)],[Math.sin(t),Math.cos(t)]]);var n=e.dup();if(3!=n.elements.length)return null;var r=n.modulus(),i=n.elements[0]/r,o=n.elements[1]/r,s=n.elements[2]/r,u=Math.sin(t),c=Math.cos(t),l=1-c;return a.create([[l*i*i+c,l*i*o-u*s,l*i*s+u*o],[l*i*o+u*s,l*o*o+c,l*o*s-u*i],[l*i*s-u*o,l*o*s+u*i,l*s*s+c]])},a.RotationX=function(t){var e=Math.cos(t),n=Math.sin(t);return a.create([[1,0,0],[0,e,-n],[0,n,e]])},a.RotationY=function(t){var e=Math.cos(t),n=Math.sin(t);return a.create([[e,0,n],[0,1,0],[-n,0,e]])},a.RotationZ=function(t){var e=Math.cos(t),n=Math.sin(t);return a.create([[e,-n,0],[n,e,0],[0,0,1]])},a.Random=function(t,e){return a.Zero(t,e).map(function(){return Math.random()})},a.Zero=function(t,e){var n,r,i,o=[],s=t;do{o[n=t-s]=[],r=e;do{i=e-r,o[n][i]=0}while(--r)}while(--s);return a.create(o)},o.prototype={eql:function(t){return this.isParallelTo(t)&&this.contains(t.anchor)},dup:function(){return o.create(this.anchor,this.direction)},translate:function(t){var e=t.elements||t;return o.create([this.anchor.elements[0]+e[0],this.anchor.elements[1]+e[1],this.anchor.elements[2]+(e[2]||0)],this.direction)},isParallelTo:function(t){if(t.normal)return t.isParallelTo(this);var e=this.direction.angleFrom(t.direction);return Math.abs(e)<=r||Math.abs(e-Math.PI)<=r},distanceFrom:function(t){if(t.normal)return t.distanceFrom(this);if(t.direction){if(this.isParallelTo(t))return this.distanceFrom(t.anchor);var e=this.direction.cross(t.direction).toUnitVector().elements,n=this.anchor.elements,r=t.anchor.elements;return Math.abs((n[0]-r[0])*e[0]+(n[1]-r[1])*e[1]+(n[2]-r[2])*e[2])}var i=t.elements||t,a=(n=this.anchor.elements,this.direction.elements),o=i[0]-n[0],s=i[1]-n[1],u=(i[2]||0)-n[2],c=Math.sqrt(o*o+s*s+u*u);if(0===c)return 0;var l=(o*a[0]+s*a[1]+u*a[2])/c,f=1-l*l;return Math.abs(c*Math.sqrt(f<0?0:f))},contains:function(t){var e=this.distanceFrom(t);return null!==e&&e<=r},liesIn:function(t){return t.contains(this)},intersects:function(t){return t.normal?t.intersects(this):!this.isParallelTo(t)&&this.distanceFrom(t)<=r},intersectionWith:function(t){if(t.normal)return t.intersectionWith(this);if(!this.intersects(t))return null;var e=this.anchor.elements,n=this.direction.elements,r=t.anchor.elements,a=t.direction.elements,o=n[0],s=n[1],u=n[2],c=a[0],l=a[1],f=a[2],h=e[0]-r[0],d=e[1]-r[1],p=e[2]-r[2],v=c*c+l*l+f*f,g=o*c+s*l+u*f,m=((-o*h-s*d-u*p)*v/(o*o+s*s+u*u)+g*(c*h+l*d+f*p))/(v-g*g);return i.create([e[0]+m*o,e[1]+m*s,e[2]+m*u])},pointClosestTo:function(t){if(t.direction){if(this.intersects(t))return this.intersectionWith(t);if(this.isParallelTo(t))return null;var e=this.direction.elements,n=t.direction.elements,r=e[0],a=e[1],o=e[2],u=n[0],c=n[1],l=n[2],f=o*u-r*l,h=r*c-a*u,d=a*l-o*c,p=i.create([f*l-h*c,h*u-d*l,d*c-f*u]);return(v=s.create(t.anchor,p)).intersectionWith(this)}var v=t.elements||t;if(this.contains(v))return i.create(v);var g=this.anchor.elements,m=(r=(e=this.direction.elements)[0],a=e[1],o=e[2],g[0]),y=g[1],w=g[2],b=(f=r*(v[1]-y)-a*(v[0]-m),h=a*((v[2]||0)-w)-o*(v[1]-y),d=o*(v[0]-m)-r*((v[2]||0)-w),i.create([a*f-o*d,o*h-r*f,r*d-a*h])),S=this.distanceFrom(v)/b.modulus();return i.create([v[0]+b.elements[0]*S,v[1]+b.elements[1]*S,(v[2]||0)+b.elements[2]*S])},rotate:function(t,e){"undefined"==typeof e.direction&&(e=o.create(e.to3D(),i.k));var n=a.Rotation(t,e.direction).elements,r=e.pointClosestTo(this.anchor).elements,s=this.anchor.elements,u=this.direction.elements,c=r[0],l=r[1],f=r[2],h=s[0]-c,d=s[1]-l,p=s[2]-f;return o.create([c+n[0][0]*h+n[0][1]*d+n[0][2]*p,l+n[1][0]*h+n[1][1]*d+n[1][2]*p,f+n[2][0]*h+n[2][1]*d+n[2][2]*p],[n[0][0]*u[0]+n[0][1]*u[1]+n[0][2]*u[2],n[1][0]*u[0]+n[1][1]*u[1]+n[1][2]*u[2],n[2][0]*u[0]+n[2][1]*u[1]+n[2][2]*u[2]])},reflectionIn:function(t){if(t.normal){var e=this.anchor.elements,n=this.direction.elements,r=e[0],i=e[1],a=e[2],s=n[0],u=n[1],c=n[2],l=this.anchor.reflectionIn(t).elements,f=r+s,h=i+u,d=a+c,p=t.pointClosestTo([f,h,d]).elements,v=[p[0]+(p[0]-f)-l[0],p[1]+(p[1]-h)-l[1],p[2]+(p[2]-d)-l[2]];return o.create(l,v)}if(t.direction)return this.rotate(Math.PI,t);var g=t.elements||t;return o.create(this.anchor.reflectionIn([g[0],g[1],g[2]||0]),this.direction)},setVectors:function(t,e){if(t=i.create(t),e=i.create(e),2==t.elements.length&&t.elements.push(0),2==e.elements.length&&e.elements.push(0),t.elements.length>3||e.elements.length>3)return null;var n=e.modulus();return 0===n?null:(this.anchor=t,this.direction=i.create([e.elements[0]/n,e.elements[1]/n,e.elements[2]/n]),this)}},o.create=function(t,e){return(new o).setVectors(t,e)},o.X=o.create(i.Zero(3),i.i),o.Y=o.create(i.Zero(3),i.j),o.Z=o.create(i.Zero(3),i.k),s.prototype={eql:function(t){return this.contains(t.anchor)&&this.isParallelTo(t)},dup:function(){return s.create(this.anchor,this.normal)},translate:function(t){var e=t.elements||t;return s.create([this.anchor.elements[0]+e[0],this.anchor.elements[1]+e[1],this.anchor.elements[2]+(e[2]||0)],this.normal)},isParallelTo:function(t){var e;return t.normal?(e=this.normal.angleFrom(t.normal),Math.abs(e)<=r||Math.abs(Math.PI-e)<=r):t.direction?this.normal.isPerpendicularTo(t.direction):null},isPerpendicularTo:function(t){var e=this.normal.angleFrom(t.normal);return Math.abs(Math.PI/2-e)<=r},distanceFrom:function(t){if(this.intersects(t)||this.contains(t))return 0;if(t.anchor){var e=this.anchor.elements,n=t.anchor.elements,r=this.normal.elements;return Math.abs((e[0]-n[0])*r[0]+(e[1]-n[1])*r[1]+(e[2]-n[2])*r[2])}var i=t.elements||t;e=this.anchor.elements,r=this.normal.elements;return Math.abs((e[0]-i[0])*r[0]+(e[1]-i[1])*r[1]+(e[2]-(i[2]||0))*r[2])},contains:function(t){if(t.normal)return null;if(t.direction)return this.contains(t.anchor)&&this.contains(t.anchor.add(t.direction));var e=t.elements||t,n=this.anchor.elements,i=this.normal.elements;return Math.abs(i[0]*(n[0]-e[0])+i[1]*(n[1]-e[1])+i[2]*(n[2]-(e[2]||0)))<=r},intersects:function(t){return"undefined"==typeof t.direction&&"undefined"==typeof t.normal?null:!this.isParallelTo(t)},intersectionWith:function(t){if(!this.intersects(t))return null;if(t.direction){var e=t.anchor.elements,n=t.direction.elements,r=this.anchor.elements,s=((c=this.normal.elements)[0]*(r[0]-e[0])+c[1]*(r[1]-e[1])+c[2]*(r[2]-e[2]))/(c[0]*n[0]+c[1]*n[1]+c[2]*n[2]);return i.create([e[0]+n[0]*s,e[1]+n[1]*s,e[2]+n[2]*s])}if(t.normal){for(var u=this.normal.cross(t.normal).toUnitVector(),c=this.normal.elements,l=(e=this.anchor.elements,t.normal.elements),f=t.anchor.elements,h=a.Zero(2,2),d=0;h.isSingular();)d++,h=a.create([[c[d%3],c[(d+1)%3]],[l[d%3],l[(d+1)%3]]]);for(var p=h.inverse().elements,v=c[0]*e[0]+c[1]*e[1]+c[2]*e[2],g=l[0]*f[0]+l[1]*f[1]+l[2]*f[2],m=[p[0][0]*v+p[0][1]*g,p[1][0]*v+p[1][1]*g],y=[],w=1;w<=3;w++)y.push(d==w?0:m[(w+(5-d)%3)%3]);return o.create(y,u)}},pointClosestTo:function(t){var e=t.elements||t,n=this.anchor.elements,r=this.normal.elements,a=(n[0]-e[0])*r[0]+(n[1]-e[1])*r[1]+(n[2]-(e[2]||0))*r[2];return i.create([e[0]+r[0]*a,e[1]+r[1]*a,(e[2]||0)+r[2]*a])},rotate:function(t,e){var n=a.Rotation(t,e.direction).elements,r=e.pointClosestTo(this.anchor).elements,i=this.anchor.elements,o=this.normal.elements,u=r[0],c=r[1],l=r[2],f=i[0]-u,h=i[1]-c,d=i[2]-l;return s.create([u+n[0][0]*f+n[0][1]*h+n[0][2]*d,c+n[1][0]*f+n[1][1]*h+n[1][2]*d,l+n[2][0]*f+n[2][1]*h+n[2][2]*d],[n[0][0]*o[0]+n[0][1]*o[1]+n[0][2]*o[2],n[1][0]*o[0]+n[1][1]*o[1]+n[1][2]*o[2],n[2][0]*o[0]+n[2][1]*o[1]+n[2][2]*o[2]])},reflectionIn:function(t){if(t.normal){var e=this.anchor.elements,n=this.normal.elements,r=e[0],i=e[1],a=e[2],o=n[0],u=n[1],c=n[2],l=this.anchor.reflectionIn(t).elements,f=r+o,h=i+u,d=a+c,p=t.pointClosestTo([f,h,d]).elements,v=[p[0]+(p[0]-f)-l[0],p[1]+(p[1]-h)-l[1],p[2]+(p[2]-d)-l[2]];return s.create(l,v)}if(t.direction)return this.rotate(Math.PI,t);var g=t.elements||t;return s.create(this.anchor.reflectionIn([g[0],g[1],g[2]||0]),this.normal)},setVectors:function(t,e,n){if(null===(t=(t=i.create(t)).to3D()))return null;if(null===(e=(e=i.create(e)).to3D()))return null;if("undefined"==typeof n)n=null;else if(null===(n=(n=i.create(n)).to3D()))return null;var r,a,o=t.elements[0],s=t.elements[1],u=t.elements[2],c=e.elements[0],l=e.elements[1],f=e.elements[2];if(null!==n){var h=n.elements[0],d=n.elements[1],p=n.elements[2];if(0===(a=(r=i.create([(l-s)*(p-u)-(f-u)*(d-s),(f-u)*(h-o)-(c-o)*(p-u),(c-o)*(d-s)-(l-s)*(h-o)])).modulus()))return null;r=i.create([r.elements[0]/a,r.elements[1]/a,r.elements[2]/a])}else{if(0===(a=Math.sqrt(c*c+l*l+f*f)))return null;r=i.create([e.elements[0]/a,e.elements[1]/a,e.elements[2]/a])}return this.anchor=t,this.normal=r,this}},a.Translation=function(t){var e;if(2===t.elements.length)return(e=a.I(3)).elements[2][0]=t.elements[0],e.elements[2][1]=t.elements[1],e;if(3===t.elements.length)return(e=a.I(4)).elements[0][3]=t.elements[0],e.elements[1][3]=t.elements[1],e.elements[2][3]=t.elements[2],e;throw"Invalid length for Translation"},a.prototype.flatten=function(){var t=[];if(0===this.elements.length)return[];for(var e=0;e<this.elements[0].length;e++)for(var n=0;n<this.elements.length;n++)t.push(this.elements[n][e]);return t},a.prototype.ensure4x4=function(){var t;if(4===this.elements.length&&4===this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(t=0;t<this.elements.length;t++)for(var e=this.elements[t].length;e<4;e++)t===e?this.elements[t].push(1):this.elements[t].push(0);for(t=this.elements.length;t<4;t++)0===t?this.elements.push([1,0,0,0]):1===t?this.elements.push([0,1,0,0]):2===t?this.elements.push([0,0,1,0]):3===t&&this.elements.push([0,0,0,1]);return this},a.prototype.make3x3=function(){return 4!==this.elements.length||4!==this.elements[0].length?null:a.create([[this.elements[0][0],this.elements[0][1],this.elements[0][2]],[this.elements[1][0],this.elements[1][1],this.elements[1][2]],[this.elements[2][0],this.elements[2][1],this.elements[2][2]]])},s.create=function(t,e,n){return(new s).setVectors(t,e,n)},s.XY=s.create(i.Zero(3),i.k),s.YZ=s.create(i.Zero(3),i.i),s.ZX=s.create(i.Zero(3),i.j),s.YX=s.XY,s.ZY=s.YZ,s.XZ=s.ZX;var u=i.create;e.$V=u;var c=a.create;e.$M=c;var l=o.create;e.$L=l;var f=s.create;e.$P=f},function(t,e){t.exports=function(){return new Worker("/module/videoWorker.worker.js")}},function(t,e){t.exports=function(){return new Worker("/module/audioWorker.worker.js")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(15);var i=function(t){var e=null,n="",i=null,a=null,o=null,s=null,u=null,c=1,l={timestamp:0,timestamp_usec:0,timezone:0},f={timestamp:0,timestamp_usec:0,timezone:0},h=null,d=!1,p=null,v=null,g=null,m=!1,y=!0,w=0,b=t,S=!1,D=[],x=.5,_=null,I=null,T=null,E=0,k=0,M=!1,A=null,R="png",C=1,P=(0,r.BrowserDetect)(),O=null,F=0,B=0,L=0,j=8,N=null,U=!1,z=!1,V=[],W=[],q={},Y=25,H=.5;function X(){}function G(){$()}function Q(){var t=0;if(null!==p)for(t=0;t<p.length;t++)T.removeEventListener(p[t].type,p[t].function);if(null!==g)for(t=0;t<g.length;t++)I.removeEventListener(g[t].type,g[t].function);if(null!==v)for(t=0;t<v.length;t++)_.removeEventListener(v[t].type,v[t].function)}function $(){if(null===I||"ended"===I.readyState)return function(t){(g=[]).push({type:"sourceopen",function:G}),g.push({type:"error",function:rt});for(var e=0;e<g.length;e++)t.addEventListener(g[e].type,g[e].function)}(I=new MediaSource),_.src=window.URL.createObjectURL(I),void r.debug.log("videoMediaSource::appendInitSegment new MediaSource()");if(r.debug.log("videoMediaSource::appendInitSegment start"),0===I.sourceBuffers.length){I.duration=0;var t='video/mp4;codecs="avc1.'+n+'"';if(!MediaSource.isTypeSupported(t))return r.debug.log("not support"+t),void(N&&N({errorCode:101}));!function(t){(p=[]).push({type:"error",function:it}),p.push({type:"updateend",function:et}),p.push({type:"update",function:nt});for(var e=0;e<p.length;e++)t.addEventListener(p[e].type,p[e].function)}(T=I.addSourceBuffer(t))}var i=e();null!==i?(T.appendBuffer(i),r.debug.log("videoMediaSource::appendInitSegment end, codecInfo = "+n)):I.endOfStream("network")}function Z(){_.paused&&(a(),m||U||_.play())}function J(){_.paused||y||(r.debug.log("pause"),_.pause())}function K(){V.length&&function(t,e){if(null!==T&&"closed"!==I.readyState&&"ended"!==I.readyState)try{if(D.length>0)return r.debug.count("1.segmentWaitDecode.length: "+D.length),D.push(t),void r.debug.count("2.segmentWaitDecode.length: "+D.length);T.updating?(r.debug.log("updating.........."),D.push(t)):(T.appendBuffer(t),q.frameIndex=e)}catch(t){r.debug.log("videoMediaSource::appendNextMediaSegment error >> initVideo"),D.length=0,b.initVideo(!1),N&&N({errorCode:101})}}(V.shift(),W.shift())}function tt(){if(null!==I)try{if(T&&T.buffered.length>0&&(function(){var t=1*T.buffered.start(T.buffered.length-1),e=1*T.buffered.end(T.buffered.length-1);e-t>60&&T.remove(t,e-10)}(),z&&!U||_.duration>H&&(_.currentTime=(_.duration-H).toFixed(3),H+=Y<10?.5:.1),_&&_.duration-_.currentTime>j&&N&&N({errorCode:101}),S&&!d)){var t=1*T.buffered.start(T.buffered.length-1),e=1*T.buffered.end(T.buffered.length-1);if((0===_.currentTime?e-t:e-_.currentTime)>=x+.1){if(r.debug.log("\u8df3\u79d2"),T.updating)return;var n=e-x;_.currentTime=n.toFixed(3)}}}catch(t){r.debug.log("sourceBuffer has been removed")}}function et(){}function nt(){D.length>0&&(r.debug.count("1. onSourceUpdate .segmentWaitDecode.length: "+D.length),T.updating||(r.debug.count("2. onSourceUpdate .appendBuffer: "+D.length+"  "+D[0].length),T.appendBuffer(D[0]),D.shift()))}function rt(){r.debug.log("videoMediaSource::onSourceError")}function it(){r.debug.log("videoMediaSource::onSourceBufferErrormsg")}function at(){r.debug.log("videoMediaSource::onError"),J(),N&&N({errorCode:101})}function ot(){m=!0,y=!1,z=!0,r.debug.log("playing "),M||(M=!0,s("PlayStart"))}function st(){m=!1,y=!0,r.debug.log("\u6682\u505c\u64ad\u653e----------------------------------------------")}function ut(){var t=parseInt(I.duration,10),e=parseInt(_.currentTime,10),n={timestamp:l.timestamp-c*(t-e+(1!==c?1:0)),timestamp_usec:0,timezone:l.timezone};0===e||isNaN(t)||(d&&b.waitingCallback(!1),!d&&Math.abs(t-e)>4&&1===c||_.paused||(null===h?(h=n,o(0,"currentTime")):(h.timestamp<=n.timestamp&&c>=1||h.timestamp>n.timestamp&&c<1)&&(d&&b.timeStamp(n),h=n,++w>4&&o(n.timestamp,"currentTime"))))}function ct(){Z(),tt()}function lt(){a()}function ft(){Z()}function ht(){if(r.debug.log("\u9700\u8981\u7f13\u51b2\u4e0b\u4e00\u5e27"),S=!1,d&&m&&b.waitingCallback(!0),0==k)E=Date.now(),k++;else{k++;var t=Date.now()-E;r.debug.log("diffTime: "+t+"  Count: "+k),k>=5&&t<6e4&&x<=1.8&&(x+=.1,k=0,E=0,r.debug.log("delay + 0.1 = "+x))}}function dt(){r.debug.log("Can play !")}function pt(){r.debug.log("Can play without waiting"),S=!0}function vt(){r.debug.log("loadedmetadata")}function gt(t,e,n){for(var r=t.width,i=t.height,a=t.getContext("2d"),o=0;o<e.length;o++)a.drawImage(e[o],0,0,r,i);for(var s=t.toDataURL(),u=atob(s.substring("data:image/png;base64,".length)),c=new Uint8Array(u.length),l=0,f=u.length;l<f;++l)c[l]=u.charCodeAt(l);var h=new Blob([c.buffer],{type:"image/png"});mt(h,n+".png")}X.prototype={init:function(t){u=(0,r.BrowserDetect)(),r.debug.log("videoMediaSource::init browserType = "+u),(_=t).autoplay="safari"!==u,_.controls=!1,_.preload="auto",function(t){(v=[]).push({type:"durationchange",function:ct}),v.push({type:"playing",function:ot}),v.push({type:"error",function:at}),v.push({type:"pause",function:st}),v.push({type:"timeupdate",function:ut}),v.push({type:"resize",function:lt}),v.push({type:"seeked",function:ft}),v.push({type:"waiting",function:ht}),v.push({type:"canplaythrough",function:pt}),v.push({type:"canplay",function:dt}),v.push({type:"loadedmetadata",function:vt});for(var e=0;e<v.length;e++)t.addEventListener(v[e].type,v[e].function)}(_),$()},setInitSegmentFunc:function(t){e=t},getVideoElement:function(){return _},setCodecInfo:function(t){n=t},setMediaSegment:function(t,e){V.push(t),W.push(e),U||K()},capture:function(t,e){A&&clearInterval(A);var n=document.createElement("canvas");n.width=_.videoWidth,n.height=_.videoHeight;var r=e.ivsCanvasArr;S||"edge"===P?(n.getContext("2d").drawImage(_,0,0,n.width,n.height),gt(n,r,t)):A=setInterval(function(){S&&(n.getContext("2d").drawImage(_,0,0,n.width,n.height),gt(n,r,t),clearInterval(A))},200)},getCapture:function(t,e,n){A&&clearInterval(A),C=n||1,R="png","jpg"!==e&&"jpeg"!==e||(R="jpeg");var r=document.createElement("canvas"),i=null;return r.width=_.videoWidth,r.height=_.videoHeight,S||"edge"===P?(r.getContext("2d").drawImage(_,0,0,r.width,r.height),i=r.toDataURL("image/"+R,C)):S&&(r.getContext("2d").drawImage(_,0,0,r.width,r.height),i=r.toDataURL("image/"+R,C)),i},setInitSegment:function(){$()},setTimeStamp:function(t,e){i=t},setVideoSizeCallback:function(t){a=t},setAudioStartCallback:function(t){o=t},getPlaybackTimeStamp:function(){return i},setSpeedPlay:function(t){c=t},setvideoTimeStamp:function(t){var e=Math.abs(l.timestamp-t.timestamp)>3;0===f.timestamp&&b.timeStamp(t),!0===e&&(w=0,o((f=t).timestamp,"init"),0!==l.timestamp&&d&&(_.currentTime=I.duration-.1,b.waitingCallback(!1)),h=null),l=t},pause:function(){U=!0,J()},play:function(){U=!1},setPlaybackFlag:function(t){d=t},setTimeStampInit:function(){h=null,f={timestamp:0,timestamp_usec:0,timezone:0}},close:function(){Q(),J()},setBeginDrawCallback:function(t){s=t},setErrorCallback:function(t){N=t},terminate:function(){null!==_&&(Q(),"open"===I.readyState&&(T&&I.removeSourceBuffer(T),I.endOfStream()),_.src="",T=null,I=null,_=null,A&&(clearInterval(A),A=null),O&&(clearInterval(O),O=null),L=0,B=0,F=0)},getDuration:function(){return _.duration-_.currentTime},setFPS:function(t){t&&(Y=t)},setRtspOver:function(){_.duration.toFixed(4)-0===_.currentTime.toFixed(4)-0?(b.timeStamp(l),b.fileOverCallback()):(F=parseInt(_.currentTime),B=parseInt(_.duration),O=setInterval(function(){F===parseInt(_.currentTime)&&B===parseInt(_.duration)?L++>10&&(O&&clearInterval(O),O=null,b.timeStamp(l),b.fileOverCallback()):parseInt(_.currentTime)>=parseInt(_.duration)?(O&&clearInterval(O),O=null,b.timeStamp(l),b.fileOverCallback()):(F=parseInt(_.currentTime),B=parseInt(_.duration),L=0)},150))},getVideoBufferQueueSize:function(){return V.length},playNextFrame:function(){K()},getCurFrameInfo:function(){return q.src=function(){var t=document.createElement("canvas");return t.width=_.videoWidth,t.height=_.videoHeight,t.getContext("2d").drawImage(_,0,0,t.width,t.height),t.toDataURL()}(),q}};var mt=function(t){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,a=/constructor/i.test(t.HTMLElement),o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=function(t){setTimeout(function(){"string"===typeof t?n().revokeObjectURL(t):t.remove()},4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(e,l,f){f||(e=c(e));var h,d=this,p="application/octet-stream"===e.type,v=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"===typeof i)try{i.call(t,n||t)}catch(t){s(t)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,i)return h=n().createObjectURL(e),void setTimeout(function(){r.href=h,r.download=l,function(t){var e=new MouseEvent("click");t.dispatchEvent(e)}(r),v(),u(h),d.readyState=d.DONE});!function(){if((o||p&&a)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=o?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,d.readyState=d.DONE,v()},r.readAsDataURL(e),void(d.readyState=d.INIT)}h||(h=n().createObjectURL(e)),p?t.location.href=h:t.open(h,"_blank")||(t.location.href=h),d.readyState=d.DONE,v(),u(h)}()},f=l.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(t,e,n){return new l(t,e||t.name||"download",n)})}(window);return new X};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(15),i=new function(){var t=[],e={};function n(){for(var n in t)t[n]=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)];e.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),e.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),e.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSC=e.STCO=e.STTS,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),e.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),e.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}t={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var i=function(t){for(var e=8,n=Array.prototype.slice.call(arguments,1),r=0;r<n.length;r++)e+=n[r].byteLength;var i=new Uint8Array(e),a=0;for(i[a++]=e>>>24&255,i[a++]=e>>>16&255,i[a++]=e>>>8&255,i[a++]=255&e,i.set(t,a),a+=4,r=0;r<n.length;r++)i.set(n[r],a),a+=n[r].byteLength;return i},a=function(e){return i(t.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),function(e){var n=e.config,r=n.length,a=new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(n).concat([6,1,2]));return i(t.esds,a)}(e))},o=function(n){return"audio"===n.type?i(t.stsd,e.STSD_PREFIX,a(n)):i(t.stsd,e.STSD_PREFIX,function(e){var n=e.sps||[],r=e.pps||[],a=[],o=[],s=0;for(s=0;s<n.length;s++)a.push((65280&n[s].byteLength)>>>8),a.push(255&n[s].byteLength),a=a.concat(Array.prototype.slice.call(n[s]));for(s=0;s<r.length;s++)o.push((65280&r[s].byteLength)>>>8),o.push(255&r[s].byteLength),o=o.concat(Array.prototype.slice.call(r[s]));return i(t.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(t.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(a).concat([r.length]).concat(o))))}(n))},s=function(n){var r=null;return r="audio"===n.type?i(t.smhd,e.SMHD):i(t.vmhd,e.VMHD),i(t.minf,r,i(t.dinf,i(t.dref,e.DREF)),function(n){return i(t.stbl,o(n),i(t.stts,e.STTS),i(t.stsc,e.STSC),i(t.stsz,e.STSZ),i(t.stco,e.STCO))}(n))},u=function(n){return i(t.mdia,function(e){var n=e.timescale,r=e.duration;return i(t.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,85,196,0,0]))}(n),function(n){var r=null;return r="audio"===n.type?e.HDLR_AUDIO:e.HDLR_VIDEO,i(t.hdlr,r)}(n),s(n))},c=function(e){return i(t.trak,function(e){var n=e.id,r=e.duration,a=e.width,o=e.height;return i(t.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>>8&255,255&a,0,0,o>>>8&255,255&o,0,0]))}(e),u(e))},l=function(e){return i(t.mvex,function(e){var n=e.id,r=new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return i(t.trex,r)}(e))},f=function(e){var n,a,o=(n=e.timescale,a=e.duration,r.debug.log("mvhd:  timescale: "+n+"  duration: "+a),i(t.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),s=c(e),u=l(e);return i(t.moov,o,s,u)},h=function(e,n){return"audio"===e.type?audioTrun(e,n):function(e,n){var r,a=null,o=null,s=0,u=n;if(null===(r=e.samples||[])[0].frameDuration)for(u+=24+4*r.length,a=trunHeader(r,u),s=0;s<r.length;s++)o=r[s],a=a.concat([(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size]);else for(a=function(t,e){return[0,0,3,5,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e,0,0,0,0]}(r,u+=24+4*r.length+4*r.length),s=0;s<r.length;s++)o=r[s],a=a.concat([(4278190080&o.frameDuration)>>>24,(16711680&o.frameDuration)>>>16,(65280&o.frameDuration)>>>8,255&o.frameDuration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size]);return i(t.trun,new Uint8Array(a))}(e,n)},d=function(e,n){return i(t.moof,function(e){var n=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return i(t.mfhd,n)}(e),function(e){var n,r,a;return n=i(t.tfhd,new Uint8Array([0,2,0,0,0,0,0,1])),r=i(t.tfdt,new Uint8Array([0,0,0,0,e.baseMediaDecodeTime>>>24&255,e.baseMediaDecodeTime>>>16&255,e.baseMediaDecodeTime>>>8&255,255&e.baseMediaDecodeTime])),a=h(e,72),i(t.traf,n,r,a)}(n))};return n.prototype={initSegment:function(n){var a=i(t.ftyp,e.FTYP);r.debug.log(n);var o=f(n),s=new Uint8Array(a.byteLength+o.byteLength);return s.set(a,0),s.set(o,a.byteLength),s},mediaSegment:function(e,n,r,a){var o=d(e,n),s=function(e){return i(t.mdat,e)}(r),u=null;return(u=new Uint8Array(o.byteLength+s.byteLength)).set(o),u.set(s,o.byteLength),u}},new n};e.default=i},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(14)),a=n(15);var o=function(){var t={},e=null,n=s(),r=s();function o(t,e){this.data=t,this.timeStamp=e,this.next=null}function s(){function t(){this.first=null,this.size=0}return t.prototype={enqueue:function(t){if(null===this.first)this.first=t;else{for(var e=this.first;null!==e.next;)e=e.next;e.next=t}this.size+=1},dequeue:function(){var t=null;return null!==this.first&&(t=this.first,this.first=this.first.next,this.size-=1),t},clear:function(){this.size=0,this.first=null},delete:function(t){if(null!==this.first){this.first.data.data&&delete this.first.data.data[t];for(var e=this.first;null!==e.next;)(e=e.next).data.data&&delete e.data.data[t]}}},new t}function u(t,n,r){var i=n.first;if(i)if(t>i.timeStamp){for(;i&&t>i.timeStamp;)(i=n.dequeue())&&i.data&&2===i.data.type&&e&&e(i.data,r);i&&e&&e(i.data,r)}else t<i.timeStamp?i.data&&2!==i.data.type&&e&&e(i.data,r):(e&&e(i.data,r),n.dequeue())}function c(){this.wndIndex=0}return c.prototype={draw:function(c,l,f,h,d){a.debug.log("type:"+c.type+"   jsondata:"+JSON.stringify(c.params));var p=c.params;if(p){var v=!!p.isTrack,g=!1,m={type:0,data:null,channel:h};if(p.hasOwnProperty("VideoAnalyseRule")){var y=p.VideoAnalyseRule||[];m.type=0,m.data=y.filter(function(t){return"ObjectDetect"!==t.Class}),e&&e(m,d),m.data=y.filter(function(t){return"ObjectDetect"===t.Class}),m.data=m.data.map(function(t){return g||(g=t&&t.Config&&t.Config.DetectRegion),t&&t.Config}),g&&(m.type=4,e&&e(m,d))}if(p.hasOwnProperty("VideoAnalyseModule")&&(g||(m.type=4,m.data=p.VideoAnalyseModule,e&&e(m,d))),p.hasOwnProperty("FocusStatus")&&(m.type=3,m.data=p.FocusStatus,e&&e(m,d)),p.hasOwnProperty("Event")&&(m.type=2,m.data=p.Event,r.enqueue(new o(JSON.parse(JSON.stringify(m)),f))),p.hasOwnProperty("Events")&&(m.type=9,m.data=p.Events,r.enqueue(new o(JSON.parse(JSON.stringify(m)),f))),p.hasOwnProperty("FloorIdentification")&&(m.type=6,m.data=p.FloorIdentification,e&&e(m,d)),p.hasOwnProperty("Lanes")&&(m.type=8,m.data=p.Lanes,e&&e(m,d)),u(l,r,d),5===c.type)for(var w=p.object,b=p.coordinate,S=0;S<w.length;S++)!function(e){var n=(w[e].classID||"")+w[e].objectId;switch(w[e].operateType){case 1:t[n]={},t[n].show=!0,w[e].hasOwnProperty("track")&&(t[n].pos=w[e].track[0]),t[n].type=w[e].objectType,t[n].coordinate=b,t[n].isTrack=v,t[n].timeout=setTimeout(function(){t[n].show=!1},500);break;case 2:t.hasOwnProperty(n)||(t[n]={},t[n].coordinate=b),w[e].hasOwnProperty("track")&&(t[n].pos=w[e].track[0],t[n].show=!0),t[n].type=w[e].objectType,t[n].isTrack=v,t[n].timeout&&clearTimeout(t[n].timeout),t[n].timeout=setTimeout(function(){t[n].show=!1},500);break;case 3:t.hasOwnProperty(n)&&(t[n].timeout&&clearTimeout(t[n].timeout),delete t[n]);break;case 4:t.hasOwnProperty(n)&&(t[n].show=!1)}}(S);else if(14===c.type)for(var D=function(e){return setTimeout(function(){var r={};m.type=1,m.data=r,r[e]={type:14,show:!1},n.enqueue(new o(JSON.parse(JSON.stringify(m)),f)),n.first.next&&n.dequeue(),u(l,n,d),delete t[e],n.delete(e)},500)},x=0;x<p.length;x++){if(b=p[x].coordinate,w=[],p[x].object)for(var _ in p[x].object)"commonObject"!==_&&"vehicleObject"!==_||(w=w.concat(p[x].object[_]));for(S=0;S<w.length;S++)!function(e){var n=(p[x].classID||"")+w[e].objectId;for(var r in w[e])if("object"===(0,i.default)(w[e][r]))switch(w[e].operateType){case 1:t[n]||(t[n]={}),t[n].show=!0,w[e].hasOwnProperty("track")?t[n].pos=w[e].track[0]:t[n].pos=w[e][r][0].track[0],t[n].track=w[e][r][0].track,t[n].type=w[e].type,t[n].coordinate=b,t[n].beliefVal=w[e].beliefVal,t[n].timeout=D(n);break;case 2:t.hasOwnProperty(n)||(t[n]={},t[n].coordinate=b),w[e].hasOwnProperty("track")?t[n].pos=w[e].track[0]:t[n].pos=w[e][r][0].track[0],t[n].track=w[e][r][0].track,t[n].show=!0,t[n].type=w[e].type,t[n].beliefVal=w[e].beliefVal,t[n].timeout&&clearTimeout(t[n].timeout),t[n].timeout=D(n)}}(S)}else if(20===c.type){var I=function(e){return setTimeout(function(){var r={};m.type=1,m.data=r,r[e]={type:20,show:!1};var i=s();i.enqueue(new o(JSON.parse(JSON.stringify(m)),f)),u(l,i,d),delete t[e],n.delete(e)},500)};for(S=0;S<p.length;S++){var T={show:!0,type:20,appInfo:(k=p[S]).appendInfo},E=String("0x14_")+k.objectId;switch(k.objectStatus){case 0:t.hasOwnProperty(E)||(t[E]=T),t[E].data=k.params.object,t[E].timeout&&clearTimeout(t[E].timeout),t[E].timeout=I(E);break;case 1:t.hasOwnProperty(E)&&(t[E].show=!1);break;case 2:t.hasOwnProperty(E)||(t[E]=T),t[E].data=k.params.object,t[E].timeout&&clearTimeout(t[E].timeout),t[E].timeout=I(E);break;case 3:t.hasOwnProperty(E)&&delete t[E]}}}else if(21===c.type)m.type=5,m.data=p,e&&e(m,d);else if(25===c.type)for(I=function(e){return setTimeout(function(){var n={};m.type=1,m.data=n,n[e]={type:25,show:!1};var r=s();r.enqueue(new o(JSON.parse(JSON.stringify(m)),f)),u(l,r,d),delete t[e]},500)},S=0;S<p.length;S++){var k;T={show:!0,type:25,objectType:(k=p[S]).objectType},E=String("0x19_")+k.objectId,t.hasOwnProperty(E)||(t[E]=T),t[E].pos=k.pos,t[E].timeout&&clearTimeout(t[E].timeout),t[E].timeout=I(E)}else 23===c.type&&(m.type=7,m.data=p,e&&e(m,d));m.type=1,m.data=t,n.enqueue(new o(JSON.parse(JSON.stringify(m)),f)),u(l,n,d)}},setCallback:function(t){e||(e=t)}},new c};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=200,e=8e3,n=null,i=null,a=null,o=0,s={type:"G.711",samplingRate:e,bitrate:"8000"},u=0,c=!1,l=0,f=0,h=null,d=!1,p=new Float32Array(8e4),v=0,g=null,m=!1,y=[],w=!1,b=null,S=0,D=0;function x(t){t&&(t.connect(a),t.start(),t.onended=function(){t.disconnect(),S+=D,b.timeUpdate(S),w||(y.length?x(y.shift()):b.audioPlayEnd())})}function _(){}return _.prototype={audioInit:function(t){if(u=0,null!==n&&c)r.debug.info("Audio context already defined!");else try{return n&&!c&&/Apple Computer/.test(navigator.vendor)&&/Safari/.test(navigator.userAgent)&&n.close(),window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,(n=new AudioContext).onstatechange=function(){r.debug.info("Audio Context State changed :: "+n.state),"running"===n.state&&(c=!0)},i=n.createGain(),(a=n.createBiquadFilter()).connect(i),a.type="lowpass",a.frequency.value=4e3,a.gain.value=40,i.connect(n.destination),this.controlVolumn(t),!0}catch(t){return r.debug.error("Web Audio API is not supported in this web browser! : "+t),!1}},play:function(){this.controlVolumn(o),w=!1,x(y.shift())},stop:function(){o=0,i.gain.value=0,u=0},bufferAudio:function(r,i,o,f){c&&(f?function(t){d||(m||5===y.length&&(m=!0,x(y.shift()),b.audioPlayBegin()),y.push(function(t,e){var r=n.createBuffer(1,t.length,e.samplingRate);return D=t.length/e.samplingRate,r.getChannelData(0).set(t),(g=n.createBufferSource()).buffer=r,g}(t,s)))}(r):function(r,i){if(!(null==r||r.length<=0)){var o=i-l;if((o>t||o<0)&&(u=0,v=0,d=!0,null!==g&&g.stop()),u-n.currentTime<0&&(u=0),l=i,p=function(t,e,n){var r=t;return n+e.length>=r.length&&(r=new Float32Array(r.length+8e4)).set(r,0),r.set(e,n),r}(p,r,v),v+=r.length,!d){var c=0;if(v/r.length>1&&(null!==h&&(c=h*e),c>=v||null===h))return void(v=0);var f=null;/Apple Computer/.test(navigator.vendor)&&/Safari/.test(navigator.userAgent)&&s.samplingRate<32e3?(8e3==s.samplingRate?p=function(t){for(var e=0,n=0,r=0,i=0,a=(1-Math.cos(.2*Math.PI))/2,o=new Float32Array(4*t.length),s=0,u=0;s<t.length;s++)u=4*s,e=t[s],n=s<t.length-1?t[s+1]:e,r=s<t.length-2?t[s+2]:e,i=s<t.length-3?t[s+3]:e,i=(r=(n=e*(1-a)+n*a)*(1-a)+r*a)*(1-a)+i*a,o[u]=e,o[u+1]=n,o[u+2]=r,o[u+3]=i;return o}(p.subarray(c,v)):16e3==s.samplingRate&&(p=function(t){for(var e=0,n=0,r=new Float32Array(2*t.length),i=0,a=0;i<t.length;i++)a=2*i,e=t[i],n=i<t.length-1?t[i+1]:e,r[a]=e,r[a+1]=(e+n)/2;return r}(p.subarray(c,v))),(f=n.createBuffer(1,p.length,32e3)).getChannelData(0).set(p)):(f=n.createBuffer(1,v-c,s.samplingRate)).getChannelData(0).set(p.subarray(c,v)),v=0,(g=n.createBufferSource()).buffer=f,g.connect(a),u||(u=n.currentTime+.1),g.start(u),u+=f.duration}}}(r,i))},controlVolumn:function(t,e){e&&/Apple Computer/.test(navigator.vendor)&&/Safari/.test(navigator.userAgent)&&this.audioInit(1),o=t;var n=t/1;n<=0?(i.gain.value=0,u=0):i.gain.value=n>=1?1:n},getVolume:function(){return o},terminate:function(){n&&"closed"!==n.state&&(u=0,c=!1,n.close())},setBufferingFlag:function(t,e){"init"===e?f=t:d&&(0===t||"undefined"===typeof t||null===t?h=null:(h=t-f,f=0),d=!1)},getBufferingFlag:function(){return d},setInitVideoTimeStamp:function(t){f=t},getInitVideoTimeStamp:function(){return f},setSamplingRate:function(t){s.samplingRate=t},pause:function(){w=!0},timeUpdate:function(){},setRtspOver:function(){!0},audioPlayBegin:function(){},audioPlayEnd:function(){}},b=new _};var r=n(15)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(15),i=function(){var t=null,e=null,n=null,i=null,a=!1,o=null,s={audio:!0,video:!1},u=null;function c(){}return c.prototype={init:function(){if(void 0===t||null===t)try{window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,(t=new AudioContext).onstatechange=function(){r.debug.info("Audio Context State changed :: "+t.state)}}catch(t){return void r.debug.error("Web Audio API is not supported in this web browser! : "+t)}},initAudioOut:function(){if(null!==e&&null!==n||(e=t.createGain(),(n=t.createScriptProcessor(4096,1,1)).onaudioprocess=function(t){if(null!==o){var e=t.inputBuffer.getChannelData(0);null!==u&&!0===a&&u(e)}},e.connect(n),n.connect(t.destination),i=t.sampleRate,e.gain.value=1),void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t,e,n){var r=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return r?new Promise(function(e,n){r.call(navigator,t,e,n)}):(n(),Promise.reject(new Error("getUserMedia is not implemented in this browser")))}),navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(s).then(function(n){o=n,t.createMediaStreamSource(n).connect(e)}).catch(function(t){r.debug.error(t)}),a=!0,i;r.debug.error("Cannot open local media stream! :: navigator.mediaDevices.getUserMedia is not defined!")},controlVolumnOut:function(t){var n=t/20*2;e.gain.value=n<=0?0:n>=10?10:n},stopAudioOut:function(){if(null!==o&&a)try{for(var t=o.getAudioTracks(),e=0,n=t.length;e<n;e++)t[e].stop();a=!1,o=null}catch(t){r.debug.log(t)}},terminate:function(){this.stopAudioOut(),t.close(),e=null,n=null},setSendAudioTalkBufferCallback:function(t){u=t}},new c};e.default=i},function(t,e){t.exports=function(){return new Worker("/module/audioTalkWorker.worker.js")}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(182)),a=n(15),o=n(66);function s(t,e){function n(t,e){n.prototype.w=t,n.prototype.h=e}return n.prototype={toString:function(){return"("+n.prototype.w+", "+n.prototype.h+")"},getHalfSize:function(){return new s(n.prototype.w>>>1,n.prototype.h>>>1)},length:function(){return n.prototype.w*n.prototype.h}},new n(t,e)}var u=function(){var t=null,e=null,n=null,r=!0,u=0,c=new Map,l=new Map,f=this,h=null;function d(){}function p(r){var i=r.data;switch(i.type){case"WorkerReady":e&&e();break;case"canvasRender":!function(e,r){if(null!=e){if(null===n){var i=new s(r.ylen,r.height);n=new o.YUVWebGLCanvas(t,i)}var a=Math.floor((v(r.time).getTime()-u)/1e3),l={frameData:e,option:r};c.size>600&&c.clear(),!1===c.has(a)&&c.set(a,l)}}(i.data,i.option);break;default:a.debug.log("workerManager::videoWorker unknown data = "+i.data)}}function v(t){var e=2e3+(t>>26),n=t>>22&15,r=t>>17&31,i=t>>12&31,a=t>>6&63,o=63&t,s=new Date;return s.setFullYear(e,n-1,r),s.setHours(i,a,o,0),s}return d.prototype={init:function(e,n){t=e,f.channel=n,(h=new i.default).onmessage=p},parseRTPData:function(t,e){!0===r&&(u=v(u=(e[19]<<24)+(e[18]<<16)+(e[17]<<8)+e[16]>>>0).getTime()),r=!1;var n=e[4],i={type:"MediaData",data:{rtspInterleave:t,payload:e},info:null,channel:f.channel};253!=n&&254!=n&&252!=n&&251!=n||h.postMessage(i)},setCallback:function(t,n){switch(t){case"WorkerReady":e=n;break;case"FileOver":this.fileOverCallback=n;break;default:a.debug.log(t),a.debug.log("workerManager::setCallback() : type is unknown")}},terminate:function(){h&&(h.terminate(),h=null),c&&(c=null),l&&(l=null)},play:function(){},initStartTime:function(){},pause:function(){},setLiveMode:function(){},setPlayMode:function(){},setFPS:function(){},sendSdpInfo:function(){},postRtspOver:function(){},gotoSecond:function(e,r){if(e=(e=e<0?0:e)>r?r:e,!0===c.has(e)){var i=c.get(e);return n.drawCanvas(i.frameData,i.option),{pngData:t.toDataURL(),option:i.option}}return!1},gotoFrame:function(e){if(!0===l.has(e)){var r=l.get(e);return n.drawCanvas(r.frameData,r.option),{pngData:t.toDataURL(),option:r.option}}return!1},checkLeftSize:function(t,e,n,r){var i=!1;if("next"===e)for(var a=1;a<=r;a++){var o=t+a>n?n:t+a;if(!1===(i=c.has(o)))break}else if("pre"===e)for(a=1;a<=r&&(o=t-a<1?1:t-a,!1!==(i=c.has(o)));a++);return i},clearMap:function(){c.clear(),l.clear()}},new d};e.default=u},function(t,e){t.exports=function(){return new Worker("/module/videoWorkerTrain.worker.js")}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(15),a=r(n(65)),o=r(n(184)),s=r(n(67)),u=r(n(96)),c=function(t){var e=t.wsURL,n=t.rtspURL,r=null,c=t.isTalkService,l=t.realm,f=6,h=null,d=null,p=0,v=0,g='Authorization: WSSE profile="UsernameToken"',m=-1!==n.search("&srctype=raw"),y=new s.default,w=t.RTSP_STATE,b=t.workerManager,S=new u.default,D=!1,x=new Function,_=4e4,I=null,T=[],E=0,k=function(){},M={},A="UnAuthorized",R=null,C={},P=null,O=null,F=null,B=null,L=!0,j={},N="",U=!1,z=0,V=!1,W={PLAY:0,PAUSE:1,KEEP_LIVE:2,STOP:3},q="";if(t.isRecord){["init","sendSdpInfo","parseRTPData","setCallback"].forEach(function(t,e){b[t]=function(){}});var Y=1048576;S.postMessage({type:"init",options:{singleSize:500*Y,nameOptions:{namedBy:"date",nameFormat:["ymd_his"]},limitOptions:{limitBy:"count",count:10}}}),S.onMessage=function(t){switch(t.type){case"pendding":x(t);break;case"download":K(t.data.name,t.data.buffer);break;case"closed":x(t),D=!1}}}t.speed>1&&(["parseRTPData"].forEach(function(t,e){b[t]=function(){}}),Y=1048576,S.postMessage({type:"init",options:{singleSize:500*Y,nameOptions:{namedBy:"date",nameFormat:["ymd_his"]},limitOptions:{limitBy:"count",count:10}}}),S.onMessage=function(t){switch(t.type){case"pendding":x(t);break;case"download":K(t.data.name,t.data.buffer);break;case"closed":x(t),D=!1}});function H(){}function X(t,r){var s="",u="",f=(0,a.default)(j.username+":"+l+":"+j.password),h=e.split("://")[1].split("/")[0].split(":")[0]+":8086";switch(t){case 0:var d=function(){for(var t=function(){var t=window.crypto||window.msCrypto,e=256*Math.random()|0;return t&&(e=t.getRandomValues(new Uint32Array(1))[0]/4294967296*256|0),e},e=[],n=0;n<32;n++)e.push(String.fromCharCode(t()));return(0,a.default)(e.join(""))}(),p=function(){var t=new Date,e=t.getTimezoneOffset(),n=t.getTime()+60*e*1e3,r=new Date(n),i=r.getFullYear(),a=r.getMonth()+1,o=r.getDate(),s=r.getHours(),u=r.getMinutes(),c=r.getSeconds(),l=function(t){return t<10?"0"+t:t};return i+"-"+l(a)+"-"+l(o)+"T"+l(s)+":"+l(u)+":"+l(c)+"Z"}(),v=function(t){for(var e,n,r,i,a,o,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;l<t.length;)e=t[l++],n=t[l++],r=t[l++],i=e>>2,a=(3&e)<<4|n>>4,o=(15&n)<<2|r>>6,s=63&r,isNaN(n)?o=s=64:isNaN(r)&&(s=64),c=c+u.charAt(i)+u.charAt(a)+u.charAt(o)+u.charAt(s);return c}(function(t){var e,n=t.trim(),r="0x"===n.substr(0,2).toLowerCase()?n.substr(2):n,i=r.length;if(i%2!==0)return"";for(var a=[],o=0;o<i;o+=2)e=parseInt(r.substr(o,2),16),a.push(e);return a}((0,o.default)(d+p+f.toUpperCase())));s="GET "+n+(U?"?":"&")+"method="+t+" HTTP/1.1\r\n",s+="Accept-Sdp: Private\r\n",s+=I+"\r\n",s+="Connection: keep-alive\r\nCseq: "+E+q+"\r\nHost: "+h+"\r\n",r?s+="Range: npt="+r+"-\r\n":"ContinuePlay"!==A&&(s+="Range: npt=0.000000-\r\n"),!0===c&&(u+="v=0\r\n",u+="o=- 2208989105 2208989105 IN IP4 0.0.0.0\r\n",u+="s=Media Server\r\n",u+="c=IN IP4 0.0.0.0\r\n",u+="t=0 0\r\n",u+="a=control:*\r\n",u+="a=packetization-supported:DH\r\n",u+="a=rtppayload-supported:DH\r\n",u+="a=range:npt=now-\r\n",u+="m=audio 0 RTP/AVP 8\r\n",u+="a=control:trackID=5\r\n",u+="a=rtpmap:8 PCMA/16000\r\n",s+="Private-Length: "+(u+="a=sendonly\r\n").length+"\r\n",s+="Private-Type: application/sdp\r\n"),s+=I===g?'WSSE: UsernameToken Username="'+j.username+'", PasswordDigest="'+v+'", Nonce="'+d+'", Created="'+p+'"\r\n\r\n':"\r\n",s+=u;break;case 1:s="GET "+n+"?method="+t+" HTTP/1.1\r\n",s+="Connection: keep-alive\r\nCseq: "+E+q+"\r\nHost: "+h+"\r\n\r\n";break;case 2:case 3:s="GET "+n+(U?"?":"&")+"method="+t+" HTTP/1.1\r\n",s+="Connection: keep-alive\r\nCseq: "+E+q+"\r\nHost: "+h+"\r\n\r\n"}return i.debug.log(s),s}function G(t){i.debug.log(t);var e,r=t.search("Cseq: ")+5;if(E=parseInt(t.slice(r,r+10))+1,isNaN(E)&&(E=1),(e=function(t){var e={},n=0,r=0,i=null,a=null;if(-1!==t.search("Private-Type: application/sdp")){var o=t.split("\r\n\r\n");a=o[0]}else a=t;var s=a.split("\r\n"),u=s[0].split(" ");if(u.length>2&&(e.ResponseCode=parseInt(u[1]),e.ResponseMessage=u[2]),e.ResponseCode===w.OK){for(n=1;n<s.length;n++)if("Cseq"===(i=s[n].split(":"))[0])e.Cseq=parseInt(i[1]);else if("Private-Type"===i[0])e.ContentType=i[1],-1!==e.ContentType.search("application/sdp")&&(e.SDPData=J(t));else if("Private-Length"===i[0])e.ContentLength=parseInt(i[1]);else if("Session-Id"===i[0]){var c=i[1].split(";");e.SessionID=parseInt(c[0])}}else if(e.ResponseCode===w.UNAUTHORIZED)for(n=1;n<s.length;n++)if("Cseq"===(i=s[n].split(":"))[0])e.Cseq=parseInt(i[1]);else if("WWW-Authenticate"===i[0]){var l=i[1].split(",");for(r=0;r<l.length;r++){var f=l[r].search("Digest realm=");if(-1!==f){var h=l[r].substr(f+13).split('"');e.Realm=h[1]}if(-1!==(f=l[r].search("nonce="))){var d=l[r].substr(f+6).split('"');e.Nonce=d[1]}}}return e}(t)).ResponseCode===w.UNAUTHORIZED&&I===g)!function(t){var e=j.username,r=j.password,a={Method:null,Realm:null,Nonce:null,Uri:null},o=null;a={Method:"GET",Realm:t.Realm,Nonce:t.Nonce,Uri:n},o=(0,i.formAuthorizationResponse)(e,r,a.Uri,a.Realm,a.Nonce,a.Method),I='Authorization: Digest username="'+e+'", realm="'+a.Realm+'",',I+=' nonce="'+a.Nonce+'", uri="'+a.Uri+'", response="'+o+'"',Q(X(W.PLAY,z))}(e);else if(e.ResponseCode===w.OK)if("UnAuthorized"===A){if((M=J(t)).Sessions.RecordRange){var a=parseInt(M.Sessions.RecordRange);F(a)}var o=0;for(o=0;o<M.Sessions.length;o+=1){var s={};"JPEG"===M.Sessions[o].CodecMime||"H264"===M.Sessions[o].CodecMime||"H265"===M.Sessions[o].CodecMime||"H264-SVC"==M.Sessions[o].CodecMime||"RAW"==M.Sessions[o].CodecMime?(s.codecName=M.Sessions[o].CodecMime,"H264-SVC"===M.Sessions[o].CodecMime&&(s.codecName="H264"),"H265"!==M.Sessions[o].CodecMime&&"RAW"!==M.Sessions[o].CodecMime||H.prototype.setLiveMode("canvas"),s.trackID=M.Sessions[o].ControlURL,s.ClockFreq=M.Sessions[o].ClockFreq,s.Port=parseInt(M.Sessions[o].Port),"undefined"!==typeof M.Sessions[o].Framerate&&(s.Framerate=parseInt(M.Sessions[o].Framerate),b.setFPS(s.Framerate),P(s.Framerate)),T.push(s)):"PCMU"===M.Sessions[o].CodecMime||-1!==M.Sessions[o].CodecMime.search("G726-16")||-1!==M.Sessions[o].CodecMime.search("G726-24")||-1!==M.Sessions[o].CodecMime.search("G726-32")||-1!==M.Sessions[o].CodecMime.search("G726-40")||"PCMA"===M.Sessions[o].CodecMime||-1!==M.Sessions[o].CodecMime.search("L16")?("PCMU"===M.Sessions[o].CodecMime?s.codecName="G.711Mu":"G726-16"===M.Sessions[o].CodecMime?s.codecName="G.726-16":"G726-24"===M.Sessions[o].CodecMime?s.codecName="G.726-24":"G726-32"===M.Sessions[o].CodecMime?s.codecName="G.726-32":"G726-40"===M.Sessions[o].CodecMime?s.codecName="G.726-40":"PCMA"===M.Sessions[o].CodecMime?s.codecName="G.711A":"L16"===M.Sessions[o].CodecMime&&(s.codecName="PCM"),s.trackID=M.Sessions[o].ControlURL,s.ClockFreq=M.Sessions[o].ClockFreq,s.Port=parseInt(M.Sessions[o].Port),s.Bitrate=parseInt(M.Sessions[o].Bitrate),s.TalkTransType=M.Sessions[o].TalkTransType,T.push(s)):"mpeg4-generic"===M.Sessions[o].CodecMime||"MPEG4-GENERIC"===M.Sessions[o].CodecMime?(s.codecName="mpeg4-generic",s.trackID=M.Sessions[o].ControlURL,s.ClockFreq=M.Sessions[o].ClockFreq,s.Port=parseInt(M.Sessions[o].Port),s.Bitrate=parseInt(M.Sessions[o].Bitrate),s.TalkTransType=M.Sessions[o].TalkTransType,T.push(s)):"vnd.onvif.metadata"===M.Sessions[o].CodecMime?(s.codecName="MetaData",s.trackID=M.Sessions[o].ControlURL,s.ClockFreq=M.Sessions[o].ClockFreq,s.Port=parseInt(M.Sessions[o].Port),T.push(s)):"stream-assist-frame"===M.Sessions[o].CodecMime?(s.codecName="stream-assist-frame",s.trackID=M.Sessions[o].ControlURL,s.ClockFreq=M.Sessions[o].ClockFreq,s.Port=parseInt(M.Sessions[o].Port),T.push(s)):("audio"===M.Sessions[o].Type&&k({errorCode:201}),i.debug.log("Unknown codec type:",M.Sessions[o].CodecMime,M.Sessions[o].ControlURL))}if(!1===c)return void k({errorCode:404,description:"rtsp not found"});for(var u=0;u<T.length;u++)T[u].RtpInterlevedID=2*(T[u].trackID.split("=")[1]-0);!m&&b.sendSdpInfo(T,C),!0===c&&b.setCallback("audioTalk",$),clearInterval(R),R=setInterval(function(){return Q(X(W.KEEP_LIVE,null))},_),A="Playing"}else"ContinuePlay"===A?A="Playing":"Playing"===A||i.debug.log("unknown rtsp state:"+A);else{if(e.ResponseCode===w.NOTSERVICE)return!0===c?void k({errorCode:504,description:"Talk Service Unavilable",place:"RtspClient.js"}):void k({errorCode:503,description:"Service Unavilable"});if(e.ResponseCode===w.NOTFOUND)return void k({errorCode:404,description:"rtsp not found"});if(e.ResponseCode===w.INTERNALSERVERERROR)return void k({errorCode:500,description:"Internal Server Error"})}}function Q(t){void 0!=t&&null!=t&&""!=t&&(r&&r.readyState===WebSocket.OPEN?void 0!=t&&r.send((0,i.stringToUint8Array)(t)):i.debug.log("ws\u672a\u8fde\u63a5"))}function $(t){!0===c&&function(t){null!==r&&r.readyState===WebSocket.OPEN?r.send(t):i.debug.log("SendRtpData - Websocket does not exist")}(t)}function Z(t){var e=new Uint8Array,n=new Uint8Array(t.data);for((e=new Uint8Array(n.length)).set(n,0),p=e.length;p>0;)if(36!==e[0]){var i=String.fromCharCode.apply(null,e),a=null;if(-1!==i.indexOf("OffLine:File Over")&&(r.fileOver=!0,b.postRtspOver()),-1!==i.indexOf("OffLine: KmsUnavailable"))return void k({errorCode:203});if(-1!==i.indexOf("OffLine: CheckChannelAuthFailed"))return void k({errorCode:204});if(-1!==i.indexOf("OffLine: PasswdUnitFailed"))return void k({errorCode:205});if(-1!==i.indexOf("OffLine: OverFlowMaxConnect"))return void k({errorCode:206});if(-1!==i.indexOf("OffLine: StreamSourceStartFailed"))return void k({errorCode:404});!1===V&&-1!==i.indexOf("200 OK")?(a=i.lastIndexOf("\r\n"),V=!0):a=i.search("\r\n\r\n");var o=i.search("HTTP");if(-1===o)return void(e=new Uint8Array);if(-1===a)return void(p=e.length);h=e.subarray(o,a+f),e=e.subarray(a+f),G(String.fromCharCode.apply(null,h)),p=e.length}else{if("RAW"===T[0].codecName)return void(/.aac/.test(rtspUrl)?b.sendBufferToAudioWorker(e.subarray(f,e.length)):y.setMovieData(e.subarray(f,e.length)));if(!0===L&&O&&O(),L=!1,d=e.subarray(0,f),!((v=d[2]<<24|d[3]<<16|d[4]<<8|d[5])+f<=e.length))return void(p=e.length);var s=e.subarray(f,v+f),u=(s[19]<<24)+(s[18]<<16)+(s[17]<<8)+s[16]>>>0,c=Date.UTC("20"+(u>>>26),(u>>>22&15)-1,u>>>17&31,u>>>12&31,u>>>6&63,63&u)/1e3;c+=(new Date).getTimezoneOffset()/60*3600,B&&B({timestamp:c}),D&&S.postMessage({type:"addBuffer",buffer:s}),b.parseRTPData(d,s),e=e.subarray(v+f),p=e.length}}function J(t){var e={Sessions:[]},n=(-1!==t.search("Private-Type: application/sdp")?t.split("\r\n\r\n")[1]:t).split("\r\n"),r=0,i=!1;for(r=0;r<n.length;r++){var a=n[r].split("=");if(a.length>0)switch(a[0]){case"a":var o=a[1].split(":");if(o.length>1){if("control"===o[0]){var s=n[r].search("control:");!0===i?-1!==s&&(e.Sessions[e.Sessions.length-1].ControlURL=n[r].substr(s+8)):-1!==s&&(e.BaseURL=n[r].substr(s+8))}else if("rtpmap"===o[0]){var u=o[1].split(" ");e.Sessions[e.Sessions.length-1].PayloadType=u[0];var l=u[1].split("/");e.Sessions[e.Sessions.length-1].CodecMime=l[0],l.length>1&&(e.Sessions[e.Sessions.length-1].ClockFreq=l[1])}else if("framesize"===o[0]){var f=o[1].split(" ");if(f.length>1){var h=f[1].split("-");e.Sessions[e.Sessions.length-1].Width=h[0],e.Sessions[e.Sessions.length-1].Height=h[1]}}else if("framerate"===o[0])e.Sessions[e.Sessions.length-1].Framerate=o[1];else if("fmtp"===o[0]){var d=n[r].split(" ");if(d.length<2)continue;for(var p=1;p<d.length;p++){var v=d[p].split(";"),g=0;for(g=0;g<v.length;g++){var m=v[g].search("mode=");if(-1!==m&&(e.Sessions[e.Sessions.length-1].mode=v[g].substr(m+5)),-1!==(m=v[g].search("config="))&&(e.Sessions[e.Sessions.length-1].config=v[g].substr(m+7),C.config=e.Sessions[e.Sessions.length-1].config,C.clockFreq=e.Sessions[e.Sessions.length-1].ClockFreq,C.bitrate=e.Sessions[e.Sessions.length-1].Bitrate),-1!==(m=v[g].search("sprop-vps="))&&(e.Sessions[e.Sessions.length-1].VPS=v[g].substr(m+10)),-1!==(m=v[g].search("sprop-sps="))&&(e.Sessions[e.Sessions.length-1].SPS=v[g].substr(m+10)),-1!==(m=v[g].search("sprop-pps="))&&(e.Sessions[e.Sessions.length-1].PPS=v[g].substr(m+10)),-1!==(m=v[g].search("sprop-parameter-sets="))){var y=v[g].substr(m+21).split(",");y.length>1&&(e.Sessions[e.Sessions.length-1].SPS=y[0],e.Sessions[e.Sessions.length-1].PPS=y[1])}}}}else if("range"===o[0]&&a[2]){var w=a[2].split("-")[1];e.Sessions&&w&&(e.Sessions.RecordRange=w)}}else 1===o.length&&("recvonly"===o[0]?e.Sessions[e.Sessions.length-1].TalkTransType="recvonly":"sendonly"===o[0]&&(e.Sessions[e.Sessions.length-1].TalkTransType="sendonly"));break;case"m":var b=a[1].split(" "),S={};S.Type=b[0],S.Port=b[1],S.Payload=b[3],e.Sessions.push(S),i=!0;break;case"b":if(!0===i){var D=a[1].split(":");e.Sessions[e.Sessions.length-1].Bitrate=D[1]}}}if(!0===c)for(var x=0;x<e.Sessions.length;x+=1)"1"!==e.Sessions[x].ControlURL.split("=")[1]&&"2"!==e.Sessions[x].ControlURL.split("=")[1]||e.Sessions.splice(x,1);return e}function K(t,e){t=(t=(t||Date.now())+"").toLowerCase().split(".dav")[0];var n=new Blob([e]),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=t+".dav",r.click(),setTimeout(function(){URL.revokeObjectURL(r.href),r=null},100),e=null}return H.prototype={setExtraError:function(t){t&&(q="\r\nExtraError: support")},connect:function(){r||((r=new WebSocket(e)).binaryType="arraybuffer",r.fileOver=!1,r.addEventListener("message",Z,!1),r.onopen=function(){I=g,Q(X(W.PLAY,z))},r.onerror=function(t){k({errorCode:202,description:"Open WebSocket Error"})},r.onclose=function(t){r&&!r.fileOver&&k({errorCode:202,description:"Open WebSocket Error"})})},disconnect:function(){Q(X(W.STOP,null)),clearInterval(R),R=null,r&&(r.onerror=null,r.close(),r=null),b.terminate()},controlPlayer:function(t){var e="",n=null;switch(N=t.command,t.command){case"PLAY":if(b.play(),"Pause"===A&&(A="ContinuePlay"),null!==t.range&&void 0!==t.range){e=X(W.PLAY,t.range);break}e=X(W.PLAY,null),N&&b.initStartTime();break;case"PAUSE":if("PAUSE"===A)break;A="PAUSE",e=X(W.PAUSE,null),b.pause();break;case"TEARDOWN":e=X(W.STOP,null);break;case"audioPlay":if("start"===t.data)A="Playing",e=X("PLAY",t.range);else if("stop"===t.data)e=X("TEARDOWN",null);else{if("PAUSE"===A)break;A="PAUSE",e=X("PAUSE",null)}b.controlAudio(t.command,t.data);break;case"volumn":case"audioSamplingRate":b.controlAudio(t.command,t.data);break;case"playNextFrame":b.getVideoBufferQueueSize()<5&&this.getNextFrameData(1e3),b.playNextFrame();break;case"getCurFrameInfo":n=b.getCurFrameInfo();break;case"getCapture":b.getCapture();break;case"startRecord":(D=t.data)||S.postMessage({type:"close"});break;default:i.debug.log("\u672a\u77e5\u6307\u4ee4: "+t.command)}if(""!=e&&Q(e),n)return n},setLiveMode:function(t){b.setLiveMode(t)},setPlayMode:function(t,e){U=t,z=e,b.setPlayMode(t)},setSignalURL:function(t){n=t},setCallback:function(t,e){"GetFrameRate"===t?P=e:"GetFirstFrame"===t?O=e:"recordChanged"===t?x=e:"GetTotalTime"===t?F=e:"UpdateTimeStamp"===t?B=e:b.setCallback(t,e),"Error"==t&&(k=e)},setUserInfo:function(t,e){j.username=t,j.password=e},getNextFrameData:function(t){Q(X("PLAY",null)),setTimeout(function(){Q(X("PAUSE",null))},t)}},y.CodecCallback=function(t){C=t.AudioCodecInfo,T[0].Framerate=t.Framerate,"H264"===C.VideoCodec&&H.prototype.setLiveMode("video"),b.sendSdpInfo(T,C,t)},y.TrackCallback=function(t){var e=new Uint8Array(t.subarray(6,t.length));b.parseRTPData(t.subarray(0,6),e)},new H};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=0;function i(t){return o(a(s(t)))}function a(t){return c(l(u(t),8*t.length))}function o(t){for(var e,n=r?"0123456789ABCDEF":"0123456789abcdef",i="",a=0;a<t.length;a++)e=t.charCodeAt(a),i+=n.charAt(e>>>4&15)+n.charAt(15&e);return i}function s(t){for(var e,n,r="",i=-1;++i<t.length;)e=t.charCodeAt(i),n=i+1<t.length?t.charCodeAt(i+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),i++),e<=127?r+=String.fromCharCode(e):e<=2047?r+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?r+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(r+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return r}function u(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<24-n%32;return e}function c(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>24-n%32&255);return e}function l(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n=Array(80),r=1732584193,i=-271733879,a=-1732584194,o=271733878,s=-1009589776,u=0;u<t.length;u+=16){for(var c=r,l=i,v=a,g=o,m=s,y=0;y<80;y++){n[y]=y<16?t[u+y]:p(n[y-3]^n[y-8]^n[y-14]^n[y-16],1);var w=d(d(p(r,5),f(y,i,a,o)),d(d(s,n[y]),h(y)));s=o,o=a,a=p(i,30),i=r,r=w}r=d(r,c),i=d(i,l),a=d(a,v),o=d(o,g),s=d(s,m)}return Array(r,i,a,o,s)}function f(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function h(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function d(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function p(t,e){return t<<e|t>>>32-e}var v=i;e.default=v},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(16)),a=r(n(1)),o=r(n(2)),s={4000:1,8000:2,11025:3,16000:4,20000:5,22050:6,32000:7,44100:8,48000:9,96000:16,128000:17,192000:18,64000:19};function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=[];if(!0===(arguments.length>2?arguments[2]:void 0))for(var r=0;r<e;r++)n[r]=t>>>8*(e-1-r)&255;else for(var i=0;i<e;i++)n[i]=t>>>8*i&255;return n}var c=function(){function t(e,n,r){(0,a.default)(this,t),this.RtpInterlevedID=e,this.timestamp=0,this.currTime=null,this.preTime=null,this.VideoCodec=n,this.AudioCodec=r,this.MAXFRAMEINTERVAL=65535,this.rtpDataHeadExtLength=12,this.rtpDataHeadLength=24+this.rtpDataHeadExtLength,this.rtpDataFootLength=8,this.rtpPacketHead=[36,e,0,0,0,0],this.DHAV=[68,72,65,86],this.dhav=[100,104,97,118],this.frameNum=245}return(0,o.default)(t,[{key:"getRTPPacket",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ArrayBuffer(0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;this.rtpDataHeadExtLength=8+("audio"===e.type?4:e.width>2048||e.height>2048?12:8),this.rtpDataHeadLength=24+this.rtpDataHeadExtLength;var r=new Uint8Array(this.rtpPacketHead.length+this.rtpDataHeadLength+t.byteLength+this.rtpDataFootLength);r.set([36,this.RtpInterlevedID],n),n+=2,r.set(u(this.rtpDataHeadLength+t.byteLength+this.rtpDataFootLength,4,!0),n),n+=4,r.set(this.DHAV,n),n+=4;var a="audio"===e.type?[240]:e.keyframe?[253]:[252];r.set(a,n),n+=1,r.set([0],n),n+=1,r.set([1],n),n+=1,r.set([0],n),n+=1,this.frameNum>65535&&(this.frameNum=240),r.set(u(this.frameNum),n),n+=4,this.frameNum++;var o=u(this.rtpDataHeadLength+t.byteLength+this.rtpDataFootLength);r.set(o,n),n+=4;var c=new Date("2000-01-01 00:00:00").getTime();this.timestamp=1e3*e.timestamp/e.timescale,this.timestamp>this.MAXFRAMEINTERVAL&&(this.timestamp=this.timestamp-this.MAXFRAMEINTERVAL),r.set(u(Math.floor((c+this.timestamp)/1e3)),n),n+=4,r.set(u(this.timestamp,2),n),n+=2,r.set([this.rtpDataHeadExtLength],n),n+=1;var l=function(t,e){for(var n=0,r=e;r<t.length;r++)n+=t[r];return n}(r,6);r.set([l],n),n+=1;var f=[];f="video"===e.type?e.width>2048||e.height>2048?[130,0,0,0].concat((0,i.default)(u(e.width,2)),(0,i.default)(u(e.height,2))):[128,0,e.width/8,e.height/8]:[131,1,26,s[e.timescale]],r.set(f,n),n+=f.length,"video"===e.type&&(r.set([129,0,this.getHexByCodec(this.VideoCodec),50],n),n+=4);var h=function(t,e){for(var n=0,r=0;r<e;r++)n+=t[r]<<r%4*8;return n}(t,t.byteLength);return r.set([136],n),n+=1,r.set(u(h),n),n+=4,r.set([0,0,0],n),n+=3,r.set(t,n),n+=t.byteLength,r.set(this.dhav,n),n+=4,r.set(o,n),r}},{key:"getHexByCodec",value:function(t){var e=8;switch(t){case"H264":e=8;break;case"H265":e=12}return e}}]),t}();e.default=c},function(t,e,n){"use strict";t.exports=n(187)},function(t,e,n){"use strict";var r=n(37),i=n(38),a=n(27),o=n(26),s=n(39),u=n(21),c=n(22),l=n(40),f=n(190),h=n(191),d=n(194),p=n(68),v=n(94),g=n(204);t.exports={Movie:r,Track:i,VideoTrack:a,AudioTrack:o,Sample:s,VideoSample:u,AudioSample:c,Fragment:l,FragmentList:f,FragmentReader:h,MovieParser:d,MP4Parser:p,FLVParser:v,HLSPacketizer:g}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=n(40),s=function(){function t(){(0,i.default)(this,t),this.fragmentDuration=0,this.duration=0,this.timescale=0,this.video=null,this.audio=null,this.fragments=[]}return(0,a.default)(t,[{key:"createFragment",value:function(t){var e={timestamp:t,duration:0,samples:[]};return this.fragments.push(e),e}},{key:"chop",value:function(){this.fragments.length>0&&0===this.fragments[this.fragments.length-1].duration&&this.fragments.splice(this.fragments.length-2,1)}},{key:"relativeDuration",value:function(){return this.timescale?this.duration/this.timescale:this.duration||0}},{key:"size",value:function(){return[this.video,this.audio].filter(function(t){return null!==t}).reduce(function(t,e){return t+e.size},0)}},{key:"count",value:function(){return this.fragments.length}},{key:"get",value:function(t){var e=this.fragments[t];if(e){var n=new o;return n.timestamp=e.timestamp,n.duration=e.duration,n.samples=e.samples,n.timescale=this.timescale,this.video&&(n.videoExtraData=this.video.extraData),this.audio&&(n.audioExtraData=this.audio.extraData),n}}}]),t}();t.exports=s},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2)),o=n(28),s=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"readSamples",value:function(t,n){for(var r=t.samples.map(function(t,e){return{index:e,offset:t.offset,size:t.size,bufferIndex:0,bufferOffset:0}}).sort(function(t,e){return t.offset-e.offset}),i=[],a=null,s=0,u=r.length;s<u;s++){var c=r[s];a&&a.offset+a.size>=c.offset+c.size?(c.bufferIndex=i.length-1,c.bufferOffset=c.offset-a.offset):(a={offset:c.offset,size:1048576,buffer:e.allocUnsafe(1048576)},i.push(a),c.bufferIndex=i.length-1,c.bufferOffset=0)}for(var l=o.create(n),f=0,h=i.length;f<h;f++){var d=i[f];l.read(d.buffer,d.offset)}return r.sort(function(t,e){return t.index-e.index}),t.samples.map(function(t,e){var n=r[e];return i[n.bufferIndex].buffer.slice(n.bufferOffset,n.bufferOffset+n.size)})}}]),t}();t.exports=s}).call(this,n(3).Buffer)},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(r,t);var n=c(r);function r(t){var e;return(0,i.default)(this,r),(e=n.call(this)).fd=t,e}return(0,a.default)(r,[{key:"size",value:function(){return this.fd.byteLength}},{key:"read",value:function(t,e,n){n=n||0;var r=this.fd.slice(e,e+t.length-n);return this.toBuffer(r)}},{key:"toBuffer",value:function(t){for(var n=new e(t.byteLength),r=new Uint8Array(t),i=0;i<n.length;++i)n[i]=r[i];return n}}]),r}(n(41));t.exports=l}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(t){(0,o.default)(n,t);var e=c(n);function n(t){var r;return(0,i.default)(this,n),(r=e.call(this)).buffer=t,r}return(0,a.default)(n,[{key:"size",value:function(){return this.buffer.length}},{key:"read",value:function(t,e,n){return n=n||0,this.buffer.copy(t,n,e,e+t.length-n)}}]),n}(n(41));t.exports=l},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2)),o=n(28),s=[n(68),n(94)],u=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"parse",value:function(t){o.create(t),e.allocUnsafe(8);return s[0].parse(t)}}]),t}();t.exports=u}).call(this,n(3).Buffer)},function(t,e,n){var r={"./atom-avc1":69,"./atom-avc1.js":69,"./atom-co64":70,"./atom-co64.js":70,"./atom-ctts":71,"./atom-ctts.js":71,"./atom-esds":72,"./atom-esds.js":72,"./atom-ftyp":73,"./atom-ftyp.js":73,"./atom-hdlr":74,"./atom-hdlr.js":74,"./atom-hev1":75,"./atom-hev1.js":75,"./atom-hvc1":76,"./atom-hvc1.js":76,"./atom-mdhd":77,"./atom-mdhd.js":77,"./atom-mdia":78,"./atom-mdia.js":78,"./atom-minf":79,"./atom-minf.js":79,"./atom-moov":80,"./atom-moov.js":80,"./atom-mp4a":81,"./atom-mp4a.js":81,"./atom-mvhd":82,"./atom-mvhd.js":82,"./atom-smhd":83,"./atom-smhd.js":83,"./atom-stbl":84,"./atom-stbl.js":84,"./atom-stco":85,"./atom-stco.js":85,"./atom-stsc":86,"./atom-stsc.js":86,"./atom-stsd":87,"./atom-stsd.js":87,"./atom-stss":88,"./atom-stss.js":88,"./atom-stsz":89,"./atom-stsz.js":89,"./atom-stts":90,"./atom-stts.js":90,"./atom-tkhd":91,"./atom-tkhd.js":91,"./atom-trak":92,"./atom-trak.js":92,"./atom-vmhd":93,"./atom-vmhd.js":93};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id=195},function(t,e,n){var r=n(197);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(4);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2));function o(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u=n(8),c=n(37),l=n(26),f=n(27),h=n(22),d=n(21),p=n(28),v=n(43),g=n(23),m=function(){function t(e){(0,i.default)(this,t),this.source=e,this.isFullMoov=!1,this.reader=p.create(this.source)}return(0,a.default)(t,[{key:"parse",value:function(){if(this._findMoovAtom(),this.isFullMoov){this._createMovie();var t,e=o(this.moovAtom.getAtoms(u.ATOM_TRAK));try{for(e.s();!(t=e.n()).done;){var n=t.value;this._createTrack(n)}}catch(t){e.e(t)}finally{e.f()}this.movie.tracks.forEach(function(t){t.sortSamples(),t.ensureDuration()}),this.movie.ensureDuration()}return this.movie}},{key:"_findMoovAtom",value:function(){this.moovAtom=null;for(var t=0,n=this.reader.size(),r=e.allocUnsafe(8);t<n;){var i=8,a=(r=this.reader.read(r,t)).readUInt32BE(0),o=r.toString("ascii",4);if(0===a?a=n-t:1===a&&(r=this.reader.read(r,t+r.length),a=g.readUInt64BE(r,0),i+=8),u.ATOM_MOOV===o){var s=e.allocUnsafe(a-i);if((s=this.reader.read(s,t+i)).byteLength===s.length){try{this.moovAtom=u.createAtom(o),this.moovAtom.parse(s),this.isFullMoov=!0}catch(t){}break}}else t+=a}this.moovAtom}},{key:"_createMovie",value:function(){this.movie=new c;var t=this.moovAtom.getAtom(u.ATOM_MVHD);t&&(this.movie.timescale=t.timescale,this.movie.duration=t.duration)}},{key:"_createTrack",value:function(e){var n=e.getAtom(u.ATOM_MDIA);if(null!==n){var r=n.getAtom(u.ATOM_HDLR),i=n.getAtom(u.ATOM_MDHD),a=n.getAtom(u.ATOM_MINF);if(null!==r&&null!==i&&null!==a){var o=a.getAtom(u.ATOM_STBL);if(null!==o){var s=o.getAtom(u.ATOM_STSD),c=null,p=null;if(u.TRACK_TYPE_AUDIO===r.handlerType){var g=s.getAudioAtom();null!==g&&(c=new l,p=h.prototype,c.channels=g.channels,c.sampleRate=g.sampleRate,c.sampleSize=g.sampleSize,c.extraData=g.extraData)}else if(u.TRACK_TYPE_VIDEO===r.handlerType){var m=s.getVideoAtom();null!==m&&(c=new f,p=d.prototype,c.width=m.width,c.height=m.height,c.extraData=m.extraData)}if(null!==c){c.duration=i.duration,c.timescale=i.timescale;var y=v.parse(c.extraData);null!==y&&(c.codec=y.codec());var w=t._getEntries(o,u.ATOM_CTTS),b=t._getEntries(o,u.ATOM_STSZ),S=t._getEntries(o,u.ATOM_STSC),D=t._getEntries(o,u.ATOM_STSS),x=t._getEntries(o,u.ATOM_STTS),_=t._getEntries(o,u.ATOM_STCO);0===_.length&&(_=t._getEntries(o,u.ATOM_CO64));var I=0,T=0,E=0,k=0,M=0,A=0,R=0,C=0,P=0,O=0;S.length>0&&(M=S[0],O=S[1]);for(var F=new Array(b.length),B=0,L=0,j=x.length;L<j;L+=2)for(var N=x[L+1]||0,U=0;U<x[L];U++){var z=Object.create(p);if(z.timestamp=I,z.timescale=c.timescale,z.size=b[C],z.offset=_[T]+E,c instanceof f){z.width=c.width,z.height=c.height,z.type="video";var V=0;2*A+1<w.length&&(V=w[2*A+1]||0,++R>=w[2*A]&&(A++,R=0)),z.compositionOffset=V,P<D.length&&D[P]===C+1?(z.keyframe=!0,P++):z.keyframe=!1}else z.type="audio";z.size>0&&(F[B++]=z),++k<O?E+=b[C]:(k=0,E=0,T++,3*M+1<S.length&&T+1>=S[3*M]&&(O=S[3*M+1],M++)),I+=N,C++}B<F.length?c.samples=F.slice(0,B):c.samples=F,c.extraData&&c.samples.length>0&&this.movie.addTrack(c)}}}}}}],[{key:"_getEntries",value:function(t,e){var n=[],r=t.getAtom(e);return null!==r&&(n=r.entries),n}}]),t}();t.exports=m}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(44),f=n(29),h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],d=[0,1,2,3,4,5,6,8],p=function(t){(0,o.default)(n,t);var e=c(n);function n(t){var r;return(0,i.default)(this,n),(r=e.call(this)).extraData=t,r.rateIndex=null,r.sampleRate=null,r.channelsIndex=null,r.channels=null,r.profileObjectType=null,r}return(0,a.default)(n,[{key:"type",value:function(){return f.CODEC_AAC}},{key:"parse",value:function(){var t=this.extraData[0],e=this.extraData[1];this.profileObjectType=(248&t)>>3,this.rateIndex=((7&t)<<1)+((128&e)>>7&1),this.sampleRate=h[this.rateIndex]||null,this.channelsIndex=(127&e)>>3,this.channels=d[this.channelsIndex]||null}},{key:"codec",value:function(){return"mp4a.40.".concat(this.profileObjectType)}}]),n}(l);t.exports=p},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(44),f=n(29);var h=function(t){(0,o.default)(n,t);var e=c(n);function n(t){var r;return(0,i.default)(this,n),(r=e.call(this)).extraData=t,r._units=[],r._pos=0,r}return(0,a.default)(n,[{key:"type",value:function(){return f.CODEC_H264}},{key:"parse",value:function(){this._pos=5;for(var t=31&this.extraData[this._pos++],e=0;e<t;e++)this._units.push(this._readNalUnit());for(var n=this.extraData[this._pos++],r=0;r<n;r++)this._units.push(this._readNalUnit())}},{key:"units",value:function(){return this._units}},{key:"codec",value:function(){for(var t,e,n="",r=1;r<4;r++)n+=(t=this.extraData[r].toString(16),e=2,"0".repeat(Math.max(0,e-t.length))+t);return"avc1.".concat(n)}},{key:"_readNalUnit",value:function(){var t=this.extraData.readUInt16BE(this._pos);this._pos+=2;var e=this.extraData.slice(this._pos,this._pos+t);return this._pos+=t,e}}]),n}(l);t.exports=h},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=r(n(5)),s=r(n(6)),u=r(n(4));function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,u.default)(t);if(e){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=n(44),f=n(29),h=function(t){(0,o.default)(n,t);var e=c(n);function n(t){var r;return(0,i.default)(this,n),(r=e.call(this)).extraData=t,r._units=[],r._pos=0,r}return(0,a.default)(n,[{key:"type",value:function(){return f.CODEC_H265}},{key:"parse",value:function(){this._pos=22;for(var t=this.extraData[this._pos++],e=0;e<t;e++){var n=63&this.extraData[this._pos++],r=this.extraData.readUInt16BE(this._pos);this._pos+=2;for(var i=0;i<r;i++){var a=this._readNalUnit();32!==n&&33!==n&&34!==n||this._units.push(a)}}}},{key:"units",value:function(){return this._units}},{key:"codec",value:function(){for(var t=this.extraData[1],e=1===(t>>5&1),n=this.extraData.readUInt32LE(2).toString(16).replace(/0+$/,""),r=this.extraData[12],i=[],a=6;a<12;a++)i.push(this.extraData[a]);for(var o=0,s=i.length-1;s>0;s--)if(i[s]>0){o=s;break}for(var u=["hvc1",(t>>6)+(31&t),n,"".concat(e?"H":"L").concat(r)],c=0;c<=o;c++)u.push(i[c].toString(16).replace(/0+$/,""));return u.join(".")}},{key:"_readNalUnit",value:function(){var t=this.extraData.readUInt16BE(this._pos);this._pos+=2;var e=this.extraData.slice(this._pos,this._pos+t);return this._pos+=t,e}}]),n}(l);t.exports=h},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),a=r(n(2)),o=n(203),s=n(95),u=n(37),c=n(26),l=n(27),f=n(22),h=n(21),d=n(28),p=n(43),v=function(){function t(e){(0,i.default)(this,t),this.source=e,this.reader=d.create(this.source)}return(0,a.default)(t,[{key:"parse",value:function(){var t=this;return this._parseHeader(),this._createMovie(),this._parseBody(),[this.videoTrack,this.audioTrack].forEach(function(e){e.extraData&&e.samples.length>0&&(e.sortSamples(),e.ensureDuration(),t.movie.addTrack(e))}),this.movie.ensureDuration(),this.movie}},{key:"_parseHeader",value:function(){var t=e.allocUnsafe(s.HEADER_SIZE);if(this.reader.read(t,0),t.toString("ascii",0,3)!==s.HEADER_PREFIX||t[3]!==s.HEADER_VERSION)throw new Error("FLV header not found");this.pos=t[8]}},{key:"_createMovie",value:function(){this.movie=new u,this.movie.timescale=s.MOVIE_TIMESCALE,this.videoTrack=new l,this.videoTrack.timescale=s.MOVIE_TIMESCALE,this.audioTrack=new c,this.audioTrack.timescale=s.MOVIE_TIMESCALE}},{key:"_parseBody",value:function(){for(var t=e.allocUnsafe(15),n=this.reader.size();this.pos<n;){this.pos+=this.reader.read(t,this.pos);var r=t[4];if(void 0===r)break;var i=t.readUIntBE(5,3),a=(t[11]<<24)+t.readUIntBE(8,3);s.TYPE_SCRIPT===r?this._parseScript(i):s.TYPE_AUDIO===r?this._parseAudio(i,a):s.TYPE_VIDEO===r&&this._parseVideo(i,a),this.pos+=i}}},{key:"_parseScript",value:function(t){var n=e.allocUnsafe(t);this.reader.read(n,this.pos);var r=o.parse(n);if(r&&r.length>1){var i=r[1];if(void 0!==i.duration){var a=i.duration*s.MOVIE_TIMESCALE;this.movie.duration=a,this.videoTrack.duration=a,this.audioTrack.duration=a}void 0!==i.width&&(this.videoTrack.width=i.width),void 0!==i.height&&(this.videoTrack.height=i.height)}}},{key:"_parseAudio",value:function(t,n){var r=e.allocUnsafe(2);this.reader.read(r,this.pos);var i=r[0],a=1&i,o=(2&i)>>1,u=(12&i)>>2,c=(240&i)>>4;if(s.AUDIO_FORMAT_AAC===c)if(0===r[1]){this.audioTrack.channels=1===a?2:1,this.audioTrack.sampleRate=5512.5*(1<<u)<<0,this.audioTrack.sampleSize=1===o?16:8;var l=e.allocUnsafe(4+t-2);l.write("mp4a"),this.reader.read(l,this.pos+2,4),this.audioTrack.extraData=l,this.audioTrack.codec=p.parse(l).codec()}else{var h=Object.create(f.prototype);h.timestamp=n,h.timescale=this.audioTrack.timescale,h.size=t-2,h.offset=this.pos+2,0<h.size&&this.audioTrack.samples.push(h)}}},{key:"_parseVideo",value:function(t,n){var r=e.allocUnsafe(5);this.reader.read(r,this.pos);var i=r[0],a=15&i,o=(240&i)>>4,u=r.readUIntBE(2,3);if(s.VIDEO_FORMAT_H264===a)if(0===r[1]){var c=e.allocUnsafe(4+t-5);c.write("avcC"),this.reader.read(c,this.pos+5,4),this.videoTrack.extraData=c,this.videoTrack.codec=p.parse(c).codec()}else{var l=Object.create(h.prototype);l.timestamp=n,l.timescale=this.videoTrack.timescale,l.size=t-5,l.offset=this.pos+5,l.compositionOffset=u,l.keyframe=1===o,0<l.size&&this.videoTrack.samples.push(l)}}}]),t}();t.exports=v}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=function(){function t(e){(0,i.default)(this,t),this.buffer=e,this.pos=0}return(0,a.default)(t,[{key:"read",value:function(){for(var t=[];this.pos<this.buffer.length;)t.push(this._readByType(this._readByte()));return t}},{key:"_readByType",value:function(t){switch(t){case 0:return this._readDouble();case 1:return this._readBoolean();case 2:return this._readString();case 3:return this._readObject();case 5:return null;case 6:return;case 13:return null;case 7:return this._readReference();case 8:return this._readEcmaArray();case 10:return this._readStrictArray();case 11:return this._readDate();case 12:return this._readLongString();case 15:return this._readXmlDocument()}}},{key:"_readByte",value:function(){return this.buffer[this.pos++]}},{key:"_readDouble",value:function(){var t=this.buffer.readDoubleBE(this.pos);return this.pos+=8,t}},{key:"_readBoolean",value:function(){return 0!==this._readByte()}},{key:"_readString",value:function(){var t=this.buffer.readUInt16BE(this.pos);this.pos+=2;var e=this.buffer.toString("utf8",this.pos,this.pos+t);return this.pos+=t,e}},{key:"_readObject",value:function(){var t,e,n={};do{t=this._readString(),9!==(e=this._readByte())&&(n[t]=this._readByType(e))}while(9!==e);return n}},{key:"_readReference",value:function(){var t=this.buffer.readUInt16BE(this.pos);return this.pos+=2,"Reference #".concat(t)}},{key:"_readEcmaArray",value:function(){return this.pos+=4,this._readObject()}},{key:"_readStrictArray",value:function(){var t=this.buffer.readUInt32BE(this.pos);this.pos+=4;for(var e=[],n=0;n<t;n++)e.push(this._readByType(this._readByte()));return e}},{key:"_readDate",value:function(){var t=this.buffer.readDoubleBE(this.pos+2);return this.pos+=10,t}},{key:"_readLongString",value:function(){var t=this.buffer.readUInt32BE(this.pos);this.pos+=4;var e=this.buffer.toString("utf8",this.pos,this.pos+t);return this.pos+=t,e}},{key:"_readXmlDocument",value:function(){return this._readLongString()}}]),t}(),s=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"parse",value:function(t){return new o(t).read()}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=n(40),s=n(205),u=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,null,[{key:"packetize",value:function(t,e){if(!(t instanceof o))throw new Error("Argument 1 should be instance of Fragment");return new s(t,e).packFragment()}}]),t}();t.exports=u},function(t,e,n){"use strict";(function(e){var r,i=n(0),a=i(n(1)),o=i(n(2)),s=i(n(20)),u=n(206),c=n(207),l=n(21),f=n(22),h=n(43),d=n(29),p=(r={},(0,s.default)(r,d.CODEC_AAC,15),(0,s.default)(r,d.CODEC_H264,27),(0,s.default)(r,d.CODEC_H265,36),r),v=function(){function t(n,r){(0,a.default)(this,t),this.fragment=n,this.sampleBuffers=r,this._counter=new c,this.fragment.hasAudio()?this._audioCodecInfo=h.parse(this.fragment.audioExtraData):this._audioCodecInfo=null,this.fragment.hasVideo()?(this._videoCodecInfo=h.parse(this.fragment.videoExtraData),this._videoConfig=this._buildVideoConfig()):(this._videoCodecInfo=null,this._videoConfig=e.allocUnsafe(0))}return(0,o.default)(t,[{key:"packFragment",value:function(){var t=[],n=0,r=90*this.fragment.timescale,i=this._buildHeader();t.push(i),n+=i.length;for(var a=[],o=0,s=null,u=0,c=function(){var r=this._packAudioPayload(e.concat(a,o),s,u);t.push(r),n+=r.length,a=[],o=0}.bind(this),h=0,d=this.fragment.samples.length;h<d;h++){var p=this.fragment.samples[h],v=this.sampleBuffers[h],g=r*p.timestamp/p.timescale<<0;if(p instanceof f){var m=this._convertAudioSample(v);5===a.length&&c(),0===a.length&&(s=p,u=g),a.push(m),o+=m.length}else if(p instanceof l){a.length>0&&c();var y=g+(r*p.compositionOffset/p.timescale<<0),w=this._convertVideoSample(v,p.keyframe),b=this._packVideoPayload(w,p,y,g);t.push(b),n+=b.length}}return a.length>0&&c(),e.concat(t,n)}},{key:"_convertAudioSample",value:function(t){var n=7+t.length,r=e.allocUnsafe(n);return r[0]=255,r[1]=241,r[2]=((this._audioCodecInfo.profileObjectType-1&3)<<6)+(this._audioCodecInfo.rateIndex<<2&60)+(this._audioCodecInfo.channelsIndex>>2&1)&255,r[3]=(3&this._audioCodecInfo.channelsIndex)<<6&255,r[5]=5+((7&n)<<5)&255,n>>=3,r[4]=255&n,n>>=8,r[3]+=3&n,r[6]=4092,t.copy(r,7),r}},{key:"_convertVideoSample",value:function(t,n){var r=6+t.length+(n?this._videoConfig.length:0);this._videoCodecInfo.type()===d.CODEC_H265&&r++;var i=e.allocUnsafe(r),a=0;for(i.writeUInt32BE(1,a),a+=4,this._videoCodecInfo.type()===d.CODEC_H265?(i[a++]=70,i[a++]=1):i[a++]=9,i[a++]=16,n&&(this._videoConfig.copy(i,a),a+=this._videoConfig.length),t.copy(i,a);a<i.length;){var o=i.readInt32BE(a);i.writeUInt32BE(1,a),a+=4+o}return i}},{key:"_packAudioPayload",value:function(n,r,i){var a=e.allocUnsafe(14+n.length),o=0,s=8+n.length;return a[o++]=0,a[o++]=0,a[o++]=1,a[o++]=192,a[o++]=s>>8&255,a[o++]=255&s,a[o++]=128,a[o++]=128,a[o++]=5,o+=t._writeTime(a,o,i,32),n.copy(a,o),this._packPayload(a,r,257,i)}},{key:"_packVideoPayload",value:function(n,r,i,a){var o=e.allocUnsafe(19+n.length),s=0;return o[s++]=0,o[s++]=0,o[s++]=1,o[s++]=224,o[s++]=0,o[s++]=0,o[s++]=128,o[s++]=192,o[s++]=10,s+=t._writeTime(o,s,i,48),s+=t._writeTime(o,s,a,16),n.copy(o,s),this._packPayload(o,r,256,a)}},{key:"_packPayload",value:function(t,n,r,i){var a=Math.ceil(t.length/184);n instanceof l&&184*a-8<t.length&&a++;for(var o=e.allocUnsafe(188*a),s=0,u=0;u<a;u++){var c=t.length-s,f=!1;(0===u&&n instanceof l||c<184)&&(f=!0);var h=188*u;if(o[h++]=71,o[h++]=(0===u?64:0)+(r>>8&31),o[h++]=255&r,o[h++]=this._counter.next(n)+(f?48:16),f){var d=0;if(n instanceof l&&0===u&&(d=7),c<183&&(d=Math.max(d,183-c)),o[h++]=d,0<d){var p=1,v=0;n instanceof l&&0===u&&(v=n.keyframe?80:16,p+=6,o[h+1]=i>>25&255,o[h+2]=i>>17&255,o[h+3]=i>>9&255,o[h+4]=i>>1&255,o[h+5]=(1&i)<<7|126,o[h+6]=0),o[h]=v,h+=p,p<d&&(o.fill(-1,h,h+d-p),h+=d-p)}}var g=188*(u+1)-h;0<g&&(t.copy(o,h,s,s+g),s+=g)}return o}},{key:"_buildHeader",value:function(){var n=e.allocUnsafe(376),r=0;n[r++]=71,n[r++]=64,n[r++]=0,n[r++]=16,n[r++]=0;var i=13;n[r++]=0,n[r++]=176+(i>>8&15),n[r++]=255&i,n[r++]=0,n[r++]=1,n[r++]=193,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=1,n[r++]=239,n[r++]=255,n.writeInt32BE(u.checksum(n,r-i+1,r),r),(r+=4)<188&&(n.fill(-1,r,188),r+=188-r),n[r++]=71,n[r++]=79,n[r++]=255,n[r++]=16,n[r++]=0,i=13;var a=0;return this.fragment.hasAudio()&&(i+=5,a=257),this.fragment.hasVideo()&&(i+=5,a=256),n[r++]=2,n[r++]=176+(i>>8&15),n[r++]=255&i,n[r++]=0,n[r++]=1,n[r++]=193,n[r++]=0,n[r++]=0,r+=t._writePid(n,r,a),this.fragment.hasVideo()&&(n[r++]=p[this._videoCodecInfo.type()]||0,r+=t._writePid(n,r,256)),this.fragment.hasAudio()&&(n[r++]=p[this._audioCodecInfo.type()]||0,r+=t._writePid(n,r,257)),n.writeInt32BE(u.checksum(n,r-i+1,r),r),(r+=4)<376&&n.fill(-1,r),n}},{key:"_buildVideoConfig",value:function(){for(var t=this._videoCodecInfo.units(),n=e.allocUnsafe(4*t.length+t.reduce(function(t,e){return t+e.length},0)),r=0,i=0,a=t.length;i<a;i++){var o=t[i];n.writeUInt32BE(1,r),o.copy(n,r+4),r+=o.length+4}return n}}],[{key:"_writeTime",value:function(t,e,n,r){return t[e+0]=n>>29&14|240&r|1,t[e+1]=n>>22,t[e+2]=n>>14|1,t[e+3]=n>>7,t[e+4]=n<<1|1,5}},{key:"_writePid",value:function(t,e,n){return t[e+0]=224+(n>>8&31),t[e+1]=255&n,t[e+2]=240,t[e+3]=0,4}}]),t}();t.exports=v}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=[0,3072180484,1849393673,3643163405,3698721811,1802224919,2991425050,89147166,3102541862,267438370,3604384303,1640713003,1687882805,3548826929,178294332,3183300408,1893405004,3351695432,518034245,2851951169,2897024351,464573531,3264649046,1972065874,3358988650,2133579886,2785909603,286284391,339746169,2740837501,2054922096,3446038132,3770033048,1470882460,2391646609,965763221,1019225995,2346575503,1392223618,3857081478,1482369982,4014402234,912304567,2172479667,2217553837,858844841,3927354788,1561029792,2423075540,661713872,4267094237,1229681113,1276851911,4211537859,572568782,2503833034,679492338,2677930998,1186707707,4054219263,4109778657,1139539941,2597174504,768638444,2003863092,3228387120,424346685,2924922169,2869330471,471548707,3309109294,1914749226,3483209234,2021674774,2712013851,381406495,334203393,2767604485,2110785544,3402483980,128685944,2964739708,1771050353,3733836917,3688731499,1824543343,3051753826,50057318,3209076574,140205658,3514637655,1717623891,1664129869,3559742025,218831172,3122059328,2546378156,551249064,4194117541,1323361953,1269866943,4239220923,629875638,2459361970,791391626,2553703566,1091579779,4128108167,4083001753,1145071773,2640718736,712764052,3877483744,1342207460,2300983017,1044117485,996913395,2356572663,1431319290,3796759550,1609612486,3907878338,835403471,2262237131,2206644437,882604497,3988601564,1520499672,4007660649,1509805421,2161872480,935743332,848693370,2240530814,1554877043,3954199415,1443693647,3775972683,943097414,2401978178,2323316828,1030144344,3829432917,1398621009,2654674213,690412577,4026572588,1193106984,1112348982,4115716146,745970495,2607503931,651564291,2446054407,1223530250,4293940750,4204794128,1304285204,2493223705,596005405,240529393,3108761333,1617800696,3614469372,3525323746,1698556646,3155929579,184969455,3065718743,27715283,3632309726,1872585946,1791828932,3721454272,83272141,3018547401,2123185853,3381723065,280411316,2813033904,2734373550,367459242,3435182247,2078112163,3328194203,1904080799,2824582290,524711318,437662344,2903241612,1949151361,3274731909,2576386653,781011801,4155181140,1085720912,1172737614,4076556106,735906887,2629881155,561873531,2522891135,1329987698,4166762870,4245390952,1242974060,2469397601,606979429,3914046225,1582717461,2272270616,812505116,893230850,2183159302,1527127307,3961248783,1369871159,3871035955,1067258174,2290143290,2379257636,986535456,3823834413,1425462313,2032576965,3459999937,387787724,2684414664,2773528022,307064018,3412799455,2088169179,3251347939,1993760999,2951750634,418243310,498968048,2862638324,1938171897,3298551549,167622793,3202382221,1741044352,3504077700,3582704794,1654029726,3148889747,212729751,2970661039,101544363,3744150182,1748431778,1835447484,3665524152,56440501,3024156593,1];t.exports={checksum:function(t,e,n){e=e||0,n=n||t.length;for(var i,a,o=-1,s=e;s<n;s++)i=255&(o^t[s]),o=r[i]^o>>8&16777215;return(a=o)>>>24|a>>8&65280|a<<8&16711680|a<<24}}},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),a=r(n(2)),o=n(22),s=n(21),u=function(){function t(){(0,i.default)(this,t),this._audioCounter=0,this._videoCounter=0}return(0,a.default)(t,[{key:"next",value:function(t){var e=0;return t instanceof o?(e=this._audioCounter,this._audioCounter=this._audioCounter+1&15):t instanceof s&&(e=this._videoCounter,this._videoCounter=this._videoCounter+1&15),e}}]),t}();t.exports=u},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(15),a=r(n(67)),o=r(n(96)),s=function(t){var e=t.wsURL,n=t.rtspURL,r=null,s=t.isTalkService,u=t.speed,c=6,l=null,f=null,h=0,d=0,p=!1,v=!1,g=t.RTSP_STATE,m=-1!==n.search("&srctype=raw"),y=new a.default,w=t.workerManager,b=4e4,S="",D=[],x=1,_=function(){},I={},T="Options",E=null,k=null,M="",A=null,R={},C=null,P=null,O=null,F=null,B=!0,L={},j="",N=!1,U=0,z=0,V="",W=new o.default,q=!1,Y=new Function;if(t.isRecord){["init","sendSdpInfo","parseRTPData","setCallback"].forEach(function(t,e){w[t]=function(){}});var H=1048576;W.postMessage({type:"init",options:{singleSize:500*H,nameOptions:{namedBy:"date",nameFormat:["ymd_his"]},limitOptions:{limitBy:"count",count:10}}}),W.onMessage=function(t){switch(t.type){case"pendding":Y(t);break;case"download":tt(t.data.name,t.data.buffer);break;case"closed":Y(t),q=!1}}}t.speed>1&&(["parseRTPData"].forEach(function(t,e){w[t]=function(){}}),H=1048576,W.postMessage({type:"init",options:{singleSize:500*H,nameOptions:{namedBy:"date",nameFormat:["ymd_his"]},limitOptions:{limitBy:"count",count:10}}}),W.onMessage=function(t){switch(t.type){case"pendding":Y(t);break;case"download":tt(t.data.name,t.data.buffer);break;case"closed":Y(t),q=!1}});function X(){}function G(t,e,r,a){var o="";switch(t){case"OPTIONS":case"TEARDOWN":case"GET_PARAMETER":case"SET_PARAMETERS":o=t+" "+n+" RTSP/1.0\r\nCSeq: "+x+V+"\r\n"+S+"\r\n";break;case"DESCRIBE":o=t+" "+n+" RTSP/1.0\r\nCSeq: "+x+V,!0===s&&(o+="\r\nRequire: www.onvif.org/ver20/backchannel"),o=o+"\r\n"+S+"\r\n";break;case"SETUP":i.debug.log("trackID: "+e),o=t+" "+n+"/trackID="+e+" RTSP/1.0\r\nCSeq: "+x+V+"\r\n"+S+"Transport: DH/AVP/TCP;unicast;interleaved="+2*e+"-"+(2*e+1)+"\r\n",o+=0!=k?"Session: "+k+"\r\n\r\n":"\r\n";break;case"PLAY":o=t+" "+n+" RTSP/1.0\r\nCSeq: "+x+V+"\r\nSession: "+k+"\r\n",u&&(o+="Speed: "+u+"\r\n"),void 0!=a&&0!=a?(o+="Range:".concat(m?"byte":"npt","=").concat(a,"-\r\n"),o+=S+"\r\n"):o+=S+"\r\n";break;case"PAUSE":o=t+" "+n+" RTSP/1.0\r\nCSeq: "+x+V+"\r\nSession: "+k+"\r\n\r\n";break;case"SCALE":o="PLAY "+n+" RTSP/1.0\r\nCSeq: "+x+V+"\r\nSession: "+k+"\r\n",o+="Speed: "+a+"\r\n",o+=S+"\r\n"}return i.debug.log(o),o}function Q(t){i.debug.log(t);var e,r=t.search("CSeq: ")+5;if(x=parseInt(t.slice(r,r+10))+1,(e=function(t){var e={},n=0,r=0,i=null,a=null;if(-1!==t.search("Content-Type: application/sdp")){var o=t.split("\r\n\r\n");a=o[0]}else a=t;var s=a.split("\r\n"),u=s[0].split(" ");if(u.length>2&&(e.ResponseCode=parseInt(u[1]),e.ResponseMessage=u[2]),e.ResponseCode===g.OK){for(n=1;n<s.length;n++)if("Public"===(i=s[n].split(":"))[0])e.MethodsSupported=i[1].split(",");else if("CSeq"===i[0])e.CSeq=parseInt(i[1]);else if("Content-Type"===i[0])e.ContentType=i[1],-1!==e.ContentType.search("application/sdp")&&(e.SDPData=K(t));else if("Content-Length"===i[0])e.ContentLength=parseInt(i[1]);else if("Content-Base"===i[0]){var c=s[n].search("Content-Base:");-1!==c&&(e.ContentBase=s[n].substr(c+13))}else if("Session"===i[0]){var l=i[1].split(";");e.SessionID=parseInt(l[0])}else if("Transport"===i[0]){var f=i[1].split(";");for(r=0;r<f.length;r++){var h=f[r].search("interleaved=");if(-1!==h){var d=f[r].substr(h+12),p=d.split("-");p.length>1&&(e.RtpInterlevedID=parseInt(p[0]),e.RtcpInterlevedID=parseInt(p[1]))}}}else if("RTP-Info"===i[0]){i[1]=s[n].substr(9);var v=i[1].split(",");for(e.RTPInfoList=[],r=0;r<v.length;r++){var m=v[r].split(";"),y={},w=0;for(w=0;w<m.length;w++){var b=m[w].search("url=");-1!==b&&(y.URL=m[w].substr(b+4)),-1!==(b=m[w].search("seq="))&&(y.Seq=parseInt(m[w].substr(b+4)))}e.RTPInfoList.push(y)}}}else if(e.ResponseCode===g.UNAUTHORIZED)for(n=1;n<s.length;n++)if("CSeq"===(i=s[n].split(":"))[0])e.CSeq=parseInt(i[1]);else if("WWW-Authenticate"===i[0]){var S=i[1].split(",");for(r=0;r<S.length;r++){var D=S[r].search("Digest realm=");if(-1!==D){var x=S[r].substr(D+13).split('"');e.Realm=x[1]}if(-1!==(D=S[r].search("nonce="))){var _=S[r].substr(D+6).split('"');e.Nonce=_[1]}}}return e}(t)).ResponseCode===g.UNAUTHORIZED&&""===S)!function(t){var e=L.username,r=L.passWord,a={Method:null,Realm:null,Nonce:null,Uri:null},o=null;a={Method:T.toUpperCase(),Realm:t.Realm,Nonce:t.Nonce,Uri:n},o=(0,i.formAuthorizationResponse)(e,r,a.Uri,a.Realm,a.Nonce,a.Method),S='Authorization: Digest username="'+e+'", realm="'+a.Realm+'",',S+=' nonce="'+a.Nonce+'", uri="'+a.Uri+'", response="'+o+'"',S+="\r\n",Z(G("OPTIONS",null))}(e);else if(e.ResponseCode===g.OK){if("Options"===T)return T="Describe",z=setTimeout(function(){_({errorCode:404})},15e3),G("DESCRIBE",null);if("Describe"===T){if(z&&clearTimeout(z),z=0,I=K(t),"undefined"!==typeof e.ContentBase&&(I.ContentBase=e.ContentBase),I.Sessions.RecordRange){var a=parseInt(I.Sessions.RecordRange);O(a)}var o=0;for(o=0;o<I.Sessions.length;o+=1){var u={};"JPEG"===I.Sessions[o].CodecMime||"H264"===I.Sessions[o].CodecMime||"H265"===I.Sessions[o].CodecMime||"H264-SVC"==I.Sessions[o].CodecMime||"RAW"==I.Sessions[o].CodecMime?(u.codecName=I.Sessions[o].CodecMime,"H264-SVC"===I.Sessions[o].CodecMime&&(u.codecName="H264"),"H265"!==I.Sessions[o].CodecMime&&"RAW"!==I.Sessions[o].CodecMime||X.prototype.setLiveMode("canvas"),u.trackID=I.Sessions[o].ControlURL,u.ClockFreq=I.Sessions[o].ClockFreq,u.Port=parseInt(I.Sessions[o].Port),"undefined"!==typeof I.Sessions[o].Framerate&&(u.Framerate=parseInt(I.Sessions[o].Framerate),w.setFPS(u.Framerate),C(u.Framerate)),D.push(u)):"PCMU"===I.Sessions[o].CodecMime||-1!==I.Sessions[o].CodecMime.search("G726-16")||-1!==I.Sessions[o].CodecMime.search("G726-24")||-1!==I.Sessions[o].CodecMime.search("G726-32")||-1!==I.Sessions[o].CodecMime.search("G726-40")||"PCMA"===I.Sessions[o].CodecMime||-1!==I.Sessions[o].CodecMime.search("L16")?("PCMU"===I.Sessions[o].CodecMime?u.codecName="G.711Mu":"G726-16"===I.Sessions[o].CodecMime?u.codecName="G.726-16":"G726-24"===I.Sessions[o].CodecMime?u.codecName="G.726-24":"G726-32"===I.Sessions[o].CodecMime?u.codecName="G.726-32":"G726-40"===I.Sessions[o].CodecMime?u.codecName="G.726-40":"PCMA"===I.Sessions[o].CodecMime?u.codecName="G.711A":"L16"===I.Sessions[o].CodecMime&&(u.codecName="PCM"),u.trackID=I.Sessions[o].ControlURL,u.ClockFreq=I.Sessions[o].ClockFreq,u.Port=parseInt(I.Sessions[o].Port),u.Bitrate=parseInt(I.Sessions[o].Bitrate),u.TalkTransType=I.Sessions[o].TalkTransType,D.push(u)):"mpeg4-generic"===I.Sessions[o].CodecMime||"MPEG4-GENERIC"===I.Sessions[o].CodecMime?(u.codecName="mpeg4-generic",u.trackID=I.Sessions[o].ControlURL,u.ClockFreq=I.Sessions[o].ClockFreq,u.Port=parseInt(I.Sessions[o].Port),u.Bitrate=parseInt(I.Sessions[o].Bitrate),u.TalkTransType=I.Sessions[o].TalkTransType,D.push(u)):"vnd.onvif.metadata"===I.Sessions[o].CodecMime?(u.codecName="MetaData",u.trackID=I.Sessions[o].ControlURL,u.ClockFreq=I.Sessions[o].ClockFreq,u.Port=parseInt(I.Sessions[o].Port),D.push(u)):"stream-assist-frame"===I.Sessions[o].CodecMime?(u.codecName="stream-assist-frame",u.trackID=I.Sessions[o].ControlURL,u.ClockFreq=I.Sessions[o].ClockFreq,u.Port=parseInt(I.Sessions[o].Port),D.push(u)):("audio"===I.Sessions[o].Type&&_({errorCode:201}),i.debug.log("Unknown codec type:",I.Sessions[o].CodecMime,I.Sessions[o].ControlURL))}return!1===s?void _({errorCode:404,description:"rtsp not found"}):(E=0,T="Setup",i.debug.log(D),G("SETUP",D[E].trackID.split("=")[1]-0))}if("Setup"===T){if(k=e.SessionID,E<D.length)return D[E].RtpInterlevedID=e.RtpInterlevedID,D[E].RtcpInterlevedID=e.RtcpInterlevedID,(E+=1)!==D.length?G("SETUP",D[E].trackID.split("=")[1]-0):(!m&&w.sendSdpInfo(D,R),!0===s&&w.setCallback("audioTalk",$),T="Play",N?G("PLAY",null,0,U):G("PLAY",null));i.debug.log("Unknown setup SDP index")}else"Play"===T?(k=e.SessionID,clearInterval(A),A=setInterval(function(){return Z(G("GET_PARAMETER",null))},b),T="Playing"):"Playing"===T||i.debug.log("unknown rtsp state:"+T)}else if(e.ResponseCode===g.NOTSERVICE){if("Setup"===T&&"sendonly"===D[E].TalkTransType)return D[E].RtpInterlevedID=-1,D[E].RtcpInterlevedID=-1,E+=1,s=!1,_({errorCode:"504",description:"Talk Service Unavilable",place:"RtspClient.js"}),E<D.length?G("SETUP",D[E].trackID):(T="Play",G("PLAY",null));_({errorCode:"503",description:"Service Unavilable"})}else if(e.ResponseCode===g.NOTFOUND){if("Describe"===T||"Options"===T)return void _({errorCode:404,description:"rtsp not found"})}else if(e.ResponseCode===g.INVALID_RANGE)return"backup"!==M&&"playback"!==M||_({errorCode:"457",description:"Invalid range"}),void i.debug.log("RTP disconnection detect!!!")}function $(t){!0===s&&function(t){null!==r&&r.readyState===WebSocket.OPEN?r.send(t):i.debug.log("SendRtpData - Websocket does not exist")}(t)}function Z(t){void 0!=t&&null!=t&&""!=t&&(r&&r.readyState===WebSocket.OPEN?(!1===v&&-1!==t.search("DESCRIBE")&&(p=!0,v=!0),void 0!=t&&r.send((0,i.stringToUint8Array)(t))):i.debug.log("ws\u672a\u8fde\u63a5"))}function J(t){var e=new Uint8Array,i=new Uint8Array(t.data);for((e=new Uint8Array(i.length)).set(i,0),h=e.length;h>0;)if(36!==e[0]){var a=String.fromCharCode.apply(null,e),o=null;-1===a.indexOf("OffLine:File Over")&&-1===a.indexOf("OffLine:Internal Error")||(r.fileOver=!0,w.postRtspOver()),-1!==a.indexOf("OffLine:KmsUnavailable")&&_({errorCode:203}),!0===p?(o=a.lastIndexOf("\r\n"),p=!1):o=a.search("\r\n\r\n");var s=a.search("RTSP");if(-1===s)return void(e=new Uint8Array);if(-1===o)return void(h=e.length);l=e.subarray(s,o+c),e=e.subarray(o+c),Z(Q(String.fromCharCode.apply(null,l))),h=e.length}else{if("RAW"===D[0].codecName)return void(/.aac/.test(n)?w.sendBufferToAudioWorker(e.subarray(c,e.length)):y.setMovieData(e.subarray(c,e.length)));if(!0===B&&P&&P(),B=!1,f=e.subarray(0,c),!((d=f[2]<<24|f[3]<<16|f[4]<<8|f[5])+c<=e.length))return void(h=e.length);var u=e.subarray(c,d+c),v=(u[19]<<24)+(u[18]<<16)+(u[17]<<8)+u[16]>>>0,g=Date.UTC("20"+(v>>>26),(v>>>22&15)-1,v>>>17&31,v>>>12&31,v>>>6&63,63&v)/1e3;g+=(new Date).getTimezoneOffset()/60*3600,F&&F({timestamp:g}),q&&W.postMessage({type:"addBuffer",buffer:u}),w.parseRTPData(f,u),e=e.subarray(d+c),h=e.length}}function K(t){var e={Sessions:[]},n=(-1!==t.search("Content-Type: application/sdp")?t.split("\r\n\r\n")[1]:t).split("\r\n"),r=0,i=!1;for(r=0;r<n.length;r++){var a=n[r].split("=");if(a.length>0)switch(a[0]){case"a":var o=a[1].split(":");if(o.length>1){if("control"===o[0]){var s=n[r].search("control:");!0===i?-1!==s&&(e.Sessions[e.Sessions.length-1].ControlURL=n[r].substr(s+8)):-1!==s&&(e.BaseURL=n[r].substr(s+8))}else if("rtpmap"===o[0]){var u=o[1].split(" ");e.Sessions[e.Sessions.length-1].PayloadType=u[0];var c=u[1].split("/");e.Sessions[e.Sessions.length-1].CodecMime=c[0],c.length>1&&(e.Sessions[e.Sessions.length-1].ClockFreq=c[1])}else if("framesize"===o[0]){var l=o[1].split(" ");if(l.length>1){var f=l[1].split("-");e.Sessions[e.Sessions.length-1].Width=f[0],e.Sessions[e.Sessions.length-1].Height=f[1]}}else if("framerate"===o[0])e.Sessions[e.Sessions.length-1].Framerate=o[1];else if("fmtp"===o[0]){var h=n[r].split(" ");if(h.length<2)continue;for(var d=1;d<h.length;d++){var p=h[d].split(";"),v=0;for(v=0;v<p.length;v++){var g=p[v].search("mode=");if(-1!==g&&(e.Sessions[e.Sessions.length-1].mode=p[v].substr(g+5)),-1!==(g=p[v].search("config="))&&(e.Sessions[e.Sessions.length-1].config=p[v].substr(g+7),R.config=e.Sessions[e.Sessions.length-1].config,R.clockFreq=e.Sessions[e.Sessions.length-1].ClockFreq,R.bitrate=e.Sessions[e.Sessions.length-1].Bitrate),-1!==(g=p[v].search("sprop-vps="))&&(e.Sessions[e.Sessions.length-1].VPS=p[v].substr(g+10)),-1!==(g=p[v].search("sprop-sps="))&&(e.Sessions[e.Sessions.length-1].SPS=p[v].substr(g+10)),-1!==(g=p[v].search("sprop-pps="))&&(e.Sessions[e.Sessions.length-1].PPS=p[v].substr(g+10)),-1!==(g=p[v].search("sprop-parameter-sets="))){var m=p[v].substr(g+21).split(",");m.length>1&&(e.Sessions[e.Sessions.length-1].SPS=m[0],e.Sessions[e.Sessions.length-1].PPS=m[1])}}}}else if("range"===o[0]&&a[2]){var y=a[2].split("-")[1];e.Sessions&&y&&(e.Sessions.RecordRange=y)}}else 1===o.length&&("recvonly"===o[0]?e.Sessions[e.Sessions.length-1].TalkTransType="recvonly":"sendonly"===o[0]&&(e.Sessions[e.Sessions.length-1].TalkTransType="sendonly"));break;case"m":var w=a[1].split(" "),b={};b.Type=w[0],b.Port=w[1],b.Payload=w[3],e.Sessions.push(b),i=!0;break;case"b":if(!0===i){var S=a[1].split(":");e.Sessions[e.Sessions.length-1].Bitrate=S[1]}}}return e}function tt(t,e){t=(t=(t||Date.now())+"").toLowerCase().split(".dav")[0];var n=new Blob([e]),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=t+".dav",r.click(),setTimeout(function(){URL.revokeObjectURL(r.href),r=null},100),e=null}return X.prototype={setExtraError:function(t){t&&(V="\r\nExtraError: support")},connect:function(){r||((r=new WebSocket(e)).binaryType="arraybuffer",r.fileOver=!1,r.addEventListener("message",J,!1),r.onopen=function(){var t="OPTIONS "+n+" RTSP/1.0\r\nCSeq: "+x+V+"\r\n\r\n",e=(0,i.stringToUint8Array)(t);r.send(e)},r.onerror=function(t){_({errorCode:202,description:"Open WebSocket Error"})},r.onclose=function(t){r&&!r.fileOver&&_({errorCode:202,description:"Open WebSocket Error"})})},disconnect:function(){Z(G("TEARDOWN",null)),clearInterval(A),A=null,r&&(r.close(),r=null,k=null),w.terminate(),z&&clearTimeout(z)},controlPlayer:function(t){var e="",n=null;switch(j=t.command,t.command){case"PLAY":if(T="Play",w.play(),null!=t.range){e=G("PLAY",null,0,t.range);break}e=G("PLAY",null),j&&w.initStartTime();break;case"PAUSE":if("PAUSE"===T)break;T="PAUSE",e=G("PAUSE",null),w.pause();break;case"SCALE":e=G("SCALE",null,0,t.data),w.playbackSpeed(t.data);break;case"TEARDOWN":e=G("TEARDOWN",null);break;case"audioPlay":if("start"===t.data)T="Play",e=G("PLAY",null,0,t.range);else if("stop"===t.data)e=G("TEARDOWN",null);else{if("PAUSE"===T)break;T="PAUSE",e=G("PAUSE",null)}w.controlAudio(t.command,t.data);break;case"volumn":case"audioSamplingRate":w.controlAudio(t.command,t.data);break;case"playNextFrame":w.getVideoBufferQueueSize()<5&&this.getNextFrameData(1e3),w.playNextFrame();break;case"getCurFrameInfo":n=w.getCurFrameInfo();break;case"getCapture":w.getCapture();break;case"startRecord":(q=t.data)||W.postMessage({type:"close"});break;default:i.debug.log("\u672a\u77e5\u6307\u4ee4: "+t.command)}if(""!=e&&Z(e),n)return n},setLiveMode:function(t){w.setLiveMode(t)},setPlayMode:function(t,e){N=t,U=e,w.setPlayMode(t)},setSignalURL:function(t){n=t},setCallback:function(t,e){"GetFrameRate"===t?C=e:"GetFirstFrame"===t?P=e:"recordChanged"===t?Y=e:"GetTotalTime"===t?O=e:"UpdateTimeStamp"===t?F=e:w.setCallback(t,e),"Error"==t&&(_=e)},setUserInfo:function(t,e){L.username=t,L.passWord=e},getNextFrameData:function(t){Z(G("PLAY",null)),setTimeout(function(){Z(G("PAUSE",null))},t)}},y.CodecCallback=function(t){R=t.AudioCodecInfo,D[0].Framerate=t.Framerate,"H264"===R.VideoCodec&&X.prototype.setLiveMode("video"),w.sendSdpInfo(D,R,t)},y.TrackCallback=function(t){var e=new Uint8Array(t.subarray(6,t.length));w.parseRTPData(t.subarray(0,6),e)},new X};e.default=s},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(16)),a=r(n(20)),o=n(63),s=r(n(210)),u=n(9),c=n(10);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){(0,a.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var h=function(){var t={};return{subscribe:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t[r]||(t[r]={}),t[r][e]||(t[r][e]=[]),n?t[r][e]=[n]:t[r][e].length=0},publish:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!t[r]||!t[r][e])return!1;t[r][e].forEach(function(t,e){t.apply(null,n)})},unsubscribe:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!t[r])return!1;if(!n&&t[r][e])t[r][e].length=0;else{var i=t[r][e]||[];i.forEach(function(t,e){t===n&&i.splice(e,1)})}}}}(),d={osdModel:{setOption:function(t){for(var e in t)this.options[e]=t[e]},CreateSuperRegions:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.canvasDraw.setRegionNum("rect",Math.abs(t)),this.SetSuperRegionProperty(e,n),0===t)return this.canvasDraw.delShapeById(),this.canvasDraw.drawShape(),this.data={},this.shapeIndex=[],this.curShapeId=-1,!1;this.canvasDraw.addChangeShapeEvent(),this.canvasDraw.drawStart("rect",this.options)},SetSuperRegionProperty:function(t,e){var n={moveEnable:!0,fillStyle:!!t&&"#000",resizeEnable:e,title:arguments.length>2&&void 0!==arguments[2]&&arguments[2]};this.setOption(n)},SetSuperRegionData:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.setOption({title:a});var o=[[e,n],[r,i]],s=this.canvasDraw.addShape(o,"rect",this.options);this.canvasDraw.drawShape();var u=this.shapeIndex;this.data[s.shapeId]=o,this.curShapeId=s.shapeId;for(var c=0,l=u.length;c<=l;c++)void 0===u[c]&&(u[c]=s.shapeId)},SelectSuperRegion:function(t){this.canvasDraw.selectedById(this.curShapeId,!1),this.curShapeId=this.shapeIndex[t],this.canvasDraw.selectedById(this.curShapeId,!0)},RedrawSelectedSuperRegion:function(){this.canvasDraw.delShapeById(this.curShapeId),this.canvasDraw.drawShape();var t=Object.keys(this.data);t[0]&&(this.canvasDraw.selectedById(t[0]),this.curShapeId=t[0]-0)},RedrawAllSuperRegions:function(){this.canvasDraw.delShapeById(),this.canvasDraw.drawShape(),this.data={},this.shapeIndex=[]},SetSuperRegionTip:function(t,e){this.setOption({title:e,resizeEnable:!1})},DeleteAllSuperRegions:function(t){var e=this;t?this.shapeIndex.forEach(function(t){e.canvasDraw.delShapeById(t)}):this.canvasDraw.delShapeById(),this.canvasDraw.drawShape(),this.data={},this.shapeIndex=[],this.curShapeId=-1,this.canvasDraw.setRegionNum("rect",0)},ActiveLocalFocus:function(t){t?this.canvasDraw.drawStart("rect"):(this.canvasDraw.delShapeById(this.curShapeId),this.canvasDraw.drawShape(),this.canvasDraw.removeShapeDrawEvent())},ActivePTZLocate:function(t){t?this.canvasDraw.drawStart("rect",{disappear:!0}):this.canvasDraw.removeShapeDrawEvent()},RegionClip:function(t,e,n,r,i,a){},ActivateReactAreaSelection:function(t,e){this.eventName="ReactAreaSelected",this.reactName=t,this.canvasDraw.drawStart("rect",{modelName:"osdModel",supportPoint:e})},DeactivateReactAreaSelection:function(){this.canvasDraw.removeShapeDrawEvent(),this.eventName="SuperRegionDataChangeded",this.reactName=""},DisableReactAreaDrawing:function(){this.canvasDraw.delShapeById(this.curShapeId),this.canvasDraw.drawShape()}},ivsModel:{CreateVideoAnalyseContainer:function(){var t=(1e6*Math.random()).toFixed();return this.containerID=t,this.data[t]={},this.EnableVideoAnalyseContainer(!0),t},ReleaseVideoAnalyseContainer:function(t){this.canvasDraw.clear(),delete this.data[t],this.shapeNum={},this.EnableVideoAnalyseContainer(!1)},EnableVideoAnalyseContainer:function(t){t?this.canvasDraw.addChangeShapeEvent():(this.canvasDraw.removeShapeEvent(),this.canvasDraw.removeShapeDrawEvent())},CreateMainVideoAnalyseShape:function(t,e,n,r,i,a){var o=this;this.containerID=t,"UserComposeShape"===n&&(n="ComposeShape");var s=(1e6*Math.random()).toFixed()+"",u=y(n,r,!0),c=u.canvasShapeType;if(a)try{if((a=JSON.parse(a)).selectType&&(u.options.selectType=a.selectType),void 0!==a.PenStyle&&(u.options.PenStyle=a.PenStyle),"LimitRectangleShape"===n&&a.limit&&6===a.limit.length){var l=a.limit,f=l[0],h=l[1],d=Math.floor(8191*l[2]/f),p=Math.floor(8191*l[3]/h),v=Math.floor(8191*l[4]/f),g=Math.floor(8191*l[5]/h);u.options.maxRect=[[0,0],[d,p]],u.options.minRect=[[0,0],[v,g]]}}catch(t){}var m={ruleType:n,type:c,relShapeId:"",eventName:e,markedName:r,subShape:{},_typeInfo:u};if(this.curShapeId=s,this.data[t][s]=m,["ParkingDetection"].includes(n))return this.drawParkingLot("ParkingDetection",s),i&&(i=JSON.parse(i||"{}").ParkingDetection,this.SetVideoAnalyseLimitRegion(t,s,i,!0)),s;if(!c)return s;if(this.shapeNum[c]||(this.shapeNum[c]=0),this.shapeNum[c]+=1,this.canvasDraw.setRegionNum(c,this.shapeNum[c]),"RegionClip"===n)return function(t,e){return new Promise(function(n,r){!function r(){if(e.width){var i=[t[1],t[2]],a=t[0],o=Math.floor(8191*a[0]/e.width),s=Math.floor(8191*a[1]/e.height);t[1][0]||t[1][1]||t[2][0]||t[2][1]||(i=[[(8191-o)/2,(8191-s)/2],[(8191-o)/2+o,(8191-s)/2+s]]);var u={resizeEnable:!0,moveEnable:!0,lockWH:{width:o,height:s},minRect:[[0,0],[o,s]]};n({pos:i,clipOptions:u})}else window.setTimeout(r,1e3)}()})}(JSON.parse(i)[r],this.resolution).then(function(t){var e=t.pos,n=t.clipOptions;o.canvasDraw.drawStart(c,n);var r=o.canvasDraw.addShape(e,"rect",n);m.relShapeId=r.shapeId,m.data=e,o.canvasDraw.drawShape()}),s;if(i&&(i=JSON.parse(i),"ScaleRectangle"===n&&i.rate&&(u.options.lockWH={width:i.rate*(9/16),height:1},i.area?delete i.rate:i=""),i&&(i=JSON.stringify(i))),i){if(i=JSON.parse(i),"OvalShape"===n){var w=i.OvalShape;i.OvalShape=[w[0],[w[1][0],w[0][1]],w[1],[w[0][0],w[1][1]]],u.options.title=u.options.ruleName}for(var b in"PointShape"===n&&(i.Point=i.Point[0],u.options.horizontalLength=200,u.options.verticalLength=200,u.options.title=u.options.ruleName),i){var S=this.canvasDraw.addShape(i[b],c,Object.assign({moveEnable:!1,resizeEnable:!1,shapeId:s,modelName:"ivsModel"},u.options));m.relShapeId=S.shapeId,m.data=i[b]}this.canvasDraw.drawShape()}else this.canvasDraw.drawStart(c,Object.assign({moveEnable:!0,resizeEnable:!0,shapeId:s,modelName:"ivsModel"},u.options));return s},AddSubVideoAnalyseShape:function(t,e,n,r,i){if(this.containerID=t,!this.data[t])return!1;if("ParkPolygon"===n||"ParkLine"===n)return this.drawParkingLot(n,e,r,i),!1;var a=(1e6*Math.random()).toFixed()+"",o=y(n,void 0),s=o.canvasShapeType,u=this.data[t][e];!function(t,e){if("GridShape"===t.ruleType){var n=e.options;n.selectType="onLine",n.composeType="GridShape"}}(u,o);var c={ruleType:s,type:s,relShapeId:"",markedName:n,eventName:u.eventName};0===Object.getOwnPropertyNames(u.subShape).length&&(c.isFirst=!0),this.curShapeId=a,u.subShape[a]=c,this.shapeNum[s]||(this.shapeNum[s]=0),this.shapeNum[s]+=1;var l=D("draw",u,c);if(Object.assign(l,{moveEnable:!0,resizeEnable:!0,shapeId:a},o.options),"LeftLane"===s||"RightLane"===s)return function(){c.data=r?JSON.parse(r)[s]:r,"LeftLane"===c.type?c.linkRight=void 0:c.linkLeft=void 0;var t=u.subShape,e=[],n=[],i=null;for(var l in t){var f=t[l];if(!f.linkLeft&&!f.linkRight){if("LeftLane"===f.type)if(void 0!==n[0]){var h=n.shift();h.linkLeft=l,f.linkRight=h.__subId,i=[f.data,h.data]}else f.__subId=l,e.unshift(f);if("RightLane"===f.type)if(void 0!==e[0]){var d=e.shift();d.linkRight=l,f.linkLeft=d.__subId,i=[d.data,f.data]}else f.__subId=l,n.unshift(f)}}i&&(this.canvasDraw.setRegionNum("lane",this.shapeNum.RightLane),r||this.canvasDraw.drawStart("lane",Object.assign({moveEnable:!0,resizeEnable:!0,shapeId:a,modelName:"ivsModel",detectLineColor:"#FF0000"},{detectLine:!0},o.options)),i=null)}.call(this),a;if("XLaneShape"===u.ruleType&&"poly"===c.type)return function(){if(this.canvasDraw.setRegionNum("lane",this.shapeNum.RightLane),r){var t=u.subShape,e=[];for(var n in t){var i=t[n];if("LeftLane"!==i.type&&"RightLane"!==i.type);else if(!i.linkDetectLine&&i.data){i.linkDetectLine=a,c.isDetectLinked=!0,e.push(i),"LeftLane"===i.type?(t[i.linkRight].linkDetectLine=a,e.push(t[i.linkRight])):"RightLane"===i.type&&(t[i.linkLeft].linkDetectLine=a,e.unshift(t[i.linkLeft]));break}}if(2!==e.length)throw new Error("XLaneShape Error occurred");var s=[];if(e[0].data.length>2){var f=JSON.parse(r).DetectLine;(s=e[0].data)[4]=f[0],s[5]=f[1]}else s=(s=(s=s.concat(e[0].data)).concat(e[1].data)).concat(JSON.parse(r).DetectLine);l.shapeId=e[1].linkLeft;var h=this.canvasDraw.addShape(s,"lane",Object.assign(l,{detectLine:!0,modelName:"ivsModel",detectLineColor:"#FF0000"}));h?(c.relShapeId=h.shapeId,e[0].relShapeId=h.shapeId,e[1].relShapeId=h.shapeId):c.relShapeId=e[0].relShapeId,c.data=JSON.parse(r).DetectLine[0],this.canvasDraw.drawShape(),D.apply(this,["show",u,c])}else this.canvasDraw.drawStart("lane",Object.assign({moveEnable:!0,resizeEnable:!0,shapeId:a,modelName:"ivsModel",detectLineColor:"#FF0000"},{drawDetectLine:!0},o.options))}.call(this),a;if(this.canvasDraw.setRegionNum(s,this.shapeNum[s]),r){for(var f in r=JSON.parse(r)){var h=S(r[f],n),d=this.canvasDraw.addShape(h,s,l);c.relShapeId=d.shapeId,c.data=h}this.canvasDraw.drawShape(),D.apply(this,["show",u,c])}else this.canvasDraw.drawStart(s,l);return a},SetShapeParam:function(t,e,n){"ParkingDetection"===e?(n.dir&&(this.parkData[t].dir=n.dir),n.num&&(this.parkData[t].num=n.num),n.name&&(this.parkData[t].name[n.index]=n.name,this.SetVideoAnalyseShapeOption(t,{parkingLotTitle:this.parkData[t].name}))):this.SetVideoAnalyseShapeOption(t,n)},SetVideoAnalyseLimitRegion:function(t,e,n,r){this.containerID=t;var i=this.data[t][e];if(!e||!i)return!1;var a=i._typeInfo&&i._typeInfo.options||{};if(r){if(!(n=n||[]).length)return!1;var o=this.canvasDraw.addShape(n,"poly",Object.assign({strokeColor:"#FFFF00",moveEnable:!1,resizeEnable:!1},a));a.maxPoly=n,i.limitShpeId=o&&o.shapeId,this.SetVideoAnalyseShapeOption(e,{maxPoly:n})}else{if(!i.limitShpeId)return!1;var s=i.limitShpeId;this.SetVideoAnalyseShapeOption(e,{maxPoly:[[0,0],[8191,0],[8191,8191],[0,8191]]}),this.canvasDraw.delShapeById(s),a.maxPoly=[],i.limitShpeId=0}this.canvasDraw.drawShape()},DeleteVideoAnalyseShape:function(t,e,n){this.containerID=t;var r=this.data[t];if(!e||!this.data[t])return!1;var i=b(r,e);if(void 0===i.mainShapeId){if(!r[e])return!1;var a=r[e].type;if(a)i.relShapeId&&("parkingLot"===a&&delete this.parkData[e],this.canvasDraw.delShapeById(i.relShapeId));else{var o=r[e].subShape;if(o)for(var s in r[e].parentsId&&this.canvasDraw.disParent(r[e].parentsId),o){var u=o[s].type;o[s].relShapeId&&this.canvasDraw.delShapeById(o[s].relShapeId),this.shapeNum[u]-=1,this.canvasDraw.setRegionNum(u,this.shapeNum[u])}delete r[e]}if(n){r[e].relShapeId="",r[e].subShapes={};var c=y(r[e].ruleType||r[e].type,r[e].markedName);this.canvasDraw.drawStart(a,Object.assign({moveEnable:!0,resizeEnable:!0},c.options))}else a&&(this.shapeNum[a]-=1,this.canvasDraw.setRegionNum(a,this.shapeNum[a]),delete r[e])}else if(a=(o=r[i.mainShapeId].subShape)[e].type,i.relShapeId&&("XLaneShape"===r[i.mainShapeId].ruleType&&"poly"===a||this.canvasDraw.delShapeById(i.relShapeId)),c=y(o[e].markedName),n){o[e].relShapeId="";var l=D("draw",r[i.mainShapeId],o[e]);Object.assign(l,{moveEnable:!0,resizeEnable:!0},c.options),this.canvasDraw.drawStart(a,l)}else{if(this.shapeNum[a]-=1,"LeftLane"===a||"RightLane"===a)this.canvasDraw.setRegionNum("lane",this.shapeNum[a]);else if("XLaneShape"===r[i.mainShapeId].ruleType&&"poly"===a){var f=r[i.mainShapeId].subShape,h=!1;for(var d in f)f[d].linkDetectLine===e&&(h=!0,f[d].linkDetectLine=void 0,f[d].relShapeId=i.relShapeId);if(h)this.canvasDraw.shape.laneShape.data.map(function(t,e){t.shapeId===i.relShapeId&&(t.data.length=4)});else this.shapeNum.lane-=1,this.canvasDraw.delShapeById(i.relShapeId)}else this.canvasDraw.setRegionNum(a,this.shapeNum[a]);delete o[e]}this.curShapeId=e,this.canvasDraw.drawShape()},DeleteAllVideoAnalyseShape:function(t){for(var e in this.containerID=t,this.canvasDraw.delShapeById(),this.data[t]={},this.parkData=null,this.shapeNum)"LeftLane"!==e&&"RightLane"!==e&&this.canvasDraw.setRegionNum(e,0);this.shapeNum={},this.canvasDraw.drawShape()},SelectVideoAnalyseShape:function(t,e,n){var r=b(this.data[t],e);void 0!==e&&(this.curShapeId=e,this.canvasDraw.selectedById(r.relShapeId,n))},SetVideoAnalyseShapeDirection:function(t,e,n){var r=this.data[t],i=b(r,e);r[i.mainShapeId]&&"lane"===r[i.mainShapeId].type&&"XLaneShape"===r[i.mainShapeId].ruleType?(this.canvasDraw.shape.laneShape.data.map(function(t,e){if(t.shapeId===i.relShapeId){var r=t.data,a=!1;switch(n){case 3:r[0][1]<r[1][1]&&(a=!0);break;case 4:r[0][1]>r[1][1]&&(a=!0)}if(a){var o=[r[0],r[1]];r[1]=o[0],r[0]=o[1];var s=[r[2],r[3]];r[3]=s[0],r[2]=s[1]}}}),this.canvasDraw.drawShape()):this.canvasDraw.setOption(i.relShapeId,{direction:n})},EnableVideoAnalyseShape:function(t,e,n){var r=b(this.data[t],e);this.curShapeId=e,this.canvasDraw.setOption(r.relShapeId,{moveEnable:n,resizeEnable:n,selected:n})},MoveVideoAnalyseShape:function(t,e){var n=this.containerID,r=b(this.data[n],t);this.curShapeId=t,this.canvasDraw.setOption(r.relShapeId,{moveEnable:e})},RedrawVideoAnalyseShape:function(t,e){this.DeleteVideoAnalyseShape(t,e,!0)},ShowVideoAnalyseShape:function(t,e,n){if(!e)return!1;var r=this.data[t],i=b(r,e);if(void 0===i.mainShapeId){var a=r[e]&&r[e].subShape;if(a)for(var o in a)this.canvasDraw.hideShape(a[o].relShapeId,!n)}""!==i.relShapeId&&this.canvasDraw.hideShape(i.relShapeId,!n)},SetVideoAnalyseShapeColor:function(t,e,n,r,i,o){if(!e)return!1;var s=b(this.data[t],e),u="#"+((1<<24)+(n<<16)+(r<<8)+i).toString(16).slice(1);""!==s.relShapeId&&this.canvasDraw.setOption(s.relShapeId,(0,a.default)({},o?"selectedColor":"strokeColor",u))},SetVideoAnalyseShapeShowName:function(t,e,n){if(!e)return!1;var r=b(this.data[t],e);""!==r.relShapeId&&this.canvasDraw.setOption(r.relShapeId,{ruleName:n})},SetVideoAnalyseShapeTip:function(t,e,n,r){if(!e)return!1;var i=b(this.data[t],e);""!==i.relShapeId&&this.canvasDraw.setOption(i.relShapeId,(0,a.default)({},r||"ruleName",n))},SetVideoAnalyseContainerTip:function(t,e){this.canvasDraw.strokeText(e,"center")},SetMaxPointNum:function(t,e,n){if(!e)return!1;var r=this.data[t],i=r[e]&&r[e]._typeInfo;i&&i.options&&(i.options.maxPointNum=n,this.canvasDraw.drawStart(i.canvasShapeType,Object.assign({moveEnable:!0,resizeEnable:!0,shapeId:e,modelName:"ivsModel"},i.options)))},SetMinPointNum:function(t,e,n){if(!e)return!1;var r=this.data[t],i=r[e]&&r[e]._typeInfo;i&&i.options&&(i.options.minPointNum=n,this.canvasDraw.drawStart(i.canvasShapeType,Object.assign({moveEnable:!0,resizeEnable:!0,shapeId:e,modelName:"ivsModel"},i.options)))},GetVideoAnalyseShapeConfigData:function(t,e){var n=this.data[t],r=null;if(n[e])if("parkingLot"===n[e].type){var i=this.parkData[e];r=function(t,e,n){for(var r=e.length,i=[],a=0;a<r;a++){var o=null;o=0===a?1===r?"vertical"===n?[t[3],t[0],t[1],t[2]]:[t[0],t[1],t[2],t[3]]:"vertical"===n?[t[3],t[0],t[4],t[5]]:[t[0],t[1],t[5],t[4]]:a===r-1?"vertical"===n?[t[2*a+3],t[2*a+2],t[1],t[2]]:[t[2*a+2],t[2*a+3],t[2],t[3]]:"vertical"===n?[t[2*a+3],t[2*a+2],t[2*a+4],t[2*a+5]]:[t[2*a+2],t[2*a+3],t[2*a+5],t[2*a+4]],i.push({name:e[a],data:o})}return i}(n[e].data.concat([]),i.name,i.dir)}else r={data:n[e].data};else{var o=function(t,e){var n=t[e],r=null,i=null,a=null,o=null;if("LeftLane"===n.type)i=t[(r=n).linkRight],a=t[r.linkDetectLine];else if("RightLane"===n.type)r=t[(i=n).linkLeft],a=t[i.linkDetectLine];else if("poly"===n.type)for(var s in a=n,t)t[s].linkDetectLine===e&&("LeftLane"===t[s].type?r=t[s]:"RightLane"===t[s].type&&(i=t[s]));r&&i&&a&&(o=(o=(o=r.relShapeId)||i.relShapeId)||a.relShapeId,r.relShapeId=o,i.relShapeId=o,a.relShapeId=o)};for(var s in n){var u=n[s].subShape;if(u[e]){u[e].relShapeId||o(u,e);var c=this.canvasDraw.getShapeById(u[e].relShapeId),l=u[e].type;"LeftLane"===l||"RightLane"===l?"LeftLane"===l?r=(0,a.default)({},u[e].markedName,c.data.slice(0,2)):"RightLane"===l&&(r=(0,a.default)({},u[e].markedName,c.data.slice(2,4))):"poly"===l&&u[e].isDetectLinked?r=(0,a.default)({},u[e].markedName,c.data.slice(4,6)):(u[e].data=c.data,r=(0,a.default)({},u[e].markedName,u[e].data));break}}}return JSON.stringify(r)},SetVideoAnalyseShapeOption:function(t,e){var n=this.containerID,r=b(this.data[n],t);""!==r.relShapeId&&this.canvasDraw.setOption(r.relShapeId,e)},ChangeLimitOption:function(t,e){var n,r=this.data[this.containerID][t],i=r.subShape;if("CalibrateRegion"===r.ruleType&&"poly"===e.type)for(n in i)"line"===i[n].type&&this.SetVideoAnalyseShapeOption(n,{maxPoly:e.data});if("ComposeShape"===r.ruleType&&e.isFirst)for(n in i)if(!i[n].isFirst){var a=e.data;if(2===e.data.length){var o=[a[0],[a[0][0],a[1][1]],a[1],[a[1][0],a[0][1]]];this.SetVideoAnalyseShapeOption(n,{maxPoly:o})}else this.SetVideoAnalyseShapeOption(n,{maxPoly:a})}if("DRectSmall"===e.markedName)for(n in i)"DRectBig"===i[n].markedName&&this.SetVideoAnalyseShapeOption(n,{minRect:e.data});else if("DRectBig"===e.markedName)for(n in i)"DRectSmall"===i[n].markedName&&this.SetVideoAnalyseShapeOption(n,{maxRect:e.data})},drawParkingLot:function(t,e,n,r){if("ParkingDetection"===t)this.parkData||(this.parkData={},this.shapeNum.parkingLot=0),this.shapeNum.parkingLot+=1,this.canvasDraw.setRegionNum("parkingLot",this.shapeNum.parkingLot),this.parkData[e]={data:[],name:[]};else{if(n=JSON.parse(n),-1!==this.parkData[e].name.indexOf("name"))return;this.parkData[e].name.push(r);var i=function(t,e){if("vertical"!==e)return t;if(4===t.length){var n=t.splice(0,1);Array.prototype.push.apply(t,n)}else 2===t.length&&t.reverse();return t}(Object.values(n)[0],this.parkData[e].dir);Array.prototype.push.apply(this.parkData[e].data,i);var a=this.data[this.containerID][e]._typeInfo.options||{};if(this.parkData[e].name.length===this.parkData[e].num){var o=this.parkData[e],s=this.canvasDraw.addShape(this.parkData[e].data,"parkingLot",{resizeEnable:!0,moveEnable:!0,parkingDirection:o.dir,parkingNumber:o.num,parkingLotTitle:o.name,maxPoly:a.maxPoly||[]});this.data[this.containerID][e].relShapeId=s.shapeId,this.data[this.containerID][e].data=this.parkData[e].data,this.canvasDraw.drawShape()}}}},previewModel:{SetIVSEnable:function(t){this.ivsEnable=t,this.clear(),t||this.clearDetect()},SetRuleEnable:function(t){this.ruleEnable=t,t||this.clear()},SetIVSTrackEnable:function(t){},ActivateAutoFocus:function(t){this.focusEnable=t},SetBoxTailEnable:function(t){this.boxTailEnable=t},SetDetectEnable:function(t){this.detectEnable=t,t||this.clearDetect()},SetFloorIdentificationEnable:function(t){this.floorIdentificationEnable=t;var e=this.highThrowData;for(var n in e)(function(t){var e=!0;return-1===n.indexOf("Floor")&&(e=!1),e})()&&(e[n].bling||(this.ivsCanvasDraw.delShapeById(e[n].shapeId),delete this.highThrowData[n]))},SetAFEnable:function(t){if(this.AFEnable=t,!t){var e=this.AFData;e.curAF.shapeId&&(this.ivsCanvasDraw.delShapeById(e.curAF.shapeId),this.ivsCanvasDraw.delShapeById(e.maxAF.shapeId)),this.AFData={curAF:{},maxAF:{}},this.drawAF()}},SetMasterSlaveObjectEx:function(t,e,n,r){if("Over"!==r){var i=this.MSTrackData.data,a=e+n,o=[1,2,16,17];for(var s in i)-1!==o.indexOf(i[s].type)&&s===a&&(this.MSTrackData.option={MSTrackColor:"#e37a0c",MSTrackId:a,channel:t});this.drawObject(i)}},SetMasterSlaveObject:function(t,e,n){var r=this.MSTrackData.data,i=e+n,a=[1,2,16,17];for(var o in r)-1!==a.indexOf(r[o].type)&&o===i&&(this.MSTrackData.option={MSTrackColor:"#e37a0c",MSTrackId:i,channel:t});this.drawObject(r)}},motionModel:{SetNumberOfGrid:function(t,e){this.canvasDraw.removeShapeEvent(),this.options.row=t,this.options.column=e,this.canvasDraw.drawGrid(t,e)},CreateFilledGridAreas:function(t){var e=t.split(" "),n=[];e.forEach(function(t,e){var r=t.split("-")[1].split(":");n.push({Region:r.map(function(t){return t-0})})}),this.canvasDraw.addShape(n,"motionDetect",this.options),this.canvasDraw.drawStart("motionDetect")},SetCurrentDrawId:function(t){this.curAreaID=t,this.canvasDraw.shape.motionDetectShape.setCurrentDrawId(t)},ResetGridArea:function(t){this.canvasDraw.shape.motionDetectShape.deleteMotionDetect(t)},ResetAllGridArea:function(){this.canvasDraw.shape.motionDetectShape.deleteMotionDetect()}}},p={osdModel:function(){this.num=0,this.options={modelName:"osdModel",moveEnable:!0,resizeEnable:!0,fillStyle:!1,title:!1},this.curShapeId=-1,this.data={},this.shapeIndex=[],this.eventName="SuperRegionDataChangeded",this.reactName="",this.receiveData=function(t){var e=t.event.type,n=t.shapeId,r=this.shapeIndex,i=r.indexOf(n),a=t.data;switch(this.curShapeId=n,e){case"drawFinish":this.data[n]=t.data;for(var o=0,s=r.length;o<=s;o++)if(void 0===r[o]){r[o]=n,i=o;break}break;case"moveFinish":case"resizeFinish":for(var u in this.data)u===n&&(this.data[u]=t.data);break;case"deleteFinish":a=[[0,0],[0,0]],delete this.data[n],r[i]=void 0}return"SuperRegionDataChangeded"===this.eventName?{name:"SuperRegionDataChangeded",data:[i,a[0][0],a[0][1],a[1][0],a[1][1]]}:"ReactAreaSelected"===this.eventName?!(!t.option.supportPoint&&a[0][0]===a[1][0]||"deleteFinish"===e)&&{name:"ReactAreaSelected",data:[this.reactName,{left:a[0][0],top:a[0][1],right:a[1][0],bottom:a[1][1]}]}:void 0},this.clear=function(){this.data={},this.shapeIndex=[],this.curShapeId=-1,this.SetSuperRegionProperty(!1,!0,!0,!1)}},ivsModel:function(){this.num=0,this.options={modelName:"ivsModel",moveEnable:!0,resizeEnable:!0,title:!1,closeEnable:!0},this.curShapeId=-1,this.data={},this.shapeNum={},this.receiveData=function(t){Array.isArray(t)&&(t=t[0]);var e,n=t.event.type,r=t.shapeId,i=t.data,a=this.data[this.containerID],o=function(t,e,n,r){if("LeftLane"===e.type||"RightLane"===e.type){var i="LeftLane"===e.type?e.linkRight:e.linkLeft;if(a[t].subShape[i][n]=r,!e.linkDetectLine){var o=a[t].subShape;for(var s in o)if("poly"===o[s].type&&!o[s].isDetectLinked){o[s].isDetectLinked=!0,o[s][n]=r,e.linkDetectLine=s,a[t].subShape[i].linkDetectLine=s;break}}}};switch(t.option&&t.option.shapeId&&t.option.shapeId!==this.curShapeId&&(this.curShapeId=t.option.shapeId),n){case"addFinish":return!(!(e=a[this.curShapeId])||"RegionClip"!==e.ruleType)&&{name:"VideoAnalyzeConfig",data:[this.curShapeId,i,3,4,0,e.eventName,e.markedName,e.ruleType]};case"drawFinish":if(a[this.curShapeId])e=a[this.curShapeId];else for(var s in a)if(a[s].subShape[this.curShapeId]&&((e=a[s].subShape[this.curShapeId]).relShapeId=r,o(s,e,"relShapeId",r,a[s]),o(s,e,"data",i)),"CalibrateRegion"===a[s].ruleType||"ComposeShape"===a[s].ruleType){var u=[],c="",l="",f=a[s].subShape;for(c in f)"poly"===f[c].type&&"CalibrateRegion"===a[s].ruleType||f[c].isFirst?l=f[c].relShapeId:u.push(f[c].relShapeId);this.canvasDraw.disParent(l),this.canvasDraw.setParent(l,u),a[s].parentsId=l}return e.relShapeId=r,e.data=i,this.canvasDraw.addChangeShapeEvent(),{name:"VideoAnalyzeConfig",data:[this.curShapeId,i,3,2,0,e.eventName,e.markedName,e.ruleType],baseShapeInfo:e};case"moveFinish":case"resizeFinish":case"selectedFinish":var h=function(t,e){var n={};for(var r in t){if(t[r].relShapeId===e){n.mainShapeId=r;break}var i=t[r].subShape;if(i)for(var a in i)if(i[a].relShapeId===e){n.mainShapeId=r,n.subShapeId=a;break}}return n}(a,r);void 0!==h.subShapeId?(e=a[h.mainShapeId].subShape[h.subShapeId],this.curShapeId=h.subShapeId,e.data=i,o(h.mainShapeId,e,"data",i),this.ChangeLimitOption(h.mainShapeId,e)):(e=a[h.mainShapeId],this.curShapeId=h.mainShapeId,e.data=i);var d=4;if("selectedFinish"===n&&(d=3),function(){if("RightLane"===e.type||"LeftLane"===e.type){var t=[],n=a[h.mainShapeId].subShape;for(var r in n)"poly"!==n[r].type||n[r].isDetectLinked||t.push(r);e.linkDetectLine||(e.linkDetectLine=t.shift(),e.linkDetectLine&&(n[e.linkDetectLine].isDetectLinked=!0))}}.call(this),"poly"===e.type&&"XLaneShape"===a[h.mainShapeId].ruleType){var p=a[h.mainShapeId].subShape,v=null;for(var g in p)if(p[g].linkDetectLine===h.subShapeId){v=p[g];break}return{name:"VideoAnalyzeConfig",data:[g,i,3,d,0,v.eventName,v.markedName,v.ruleType],baseShapeInfo:v}}return{name:"VideoAnalyzeConfig",data:[this.curShapeId,i,3,d,0,e.eventName,e.markedName,e.ruleType],baseShapeInfo:e}}},this.clear=function(){this.ReleaseVideoAnalyseContainer()}},previewModel:function(){this.ivsEnable=!0,this.ruleEnable=!0,this.focusEnable=!0,this.boxTailEnable=!0,this.detectEnable=!0,this.AFEnable=!1,this.floorIdentificationEnable=!0,this.ivsData={},this.highThrowData={},this.objectData={},this.alarmObject={},this.detectData={},this.AFData={curAF:{},maxAF:{}},this.waterRulerData={},this.iotboxCommData={},this.drawRule=E,this.drawObject=C,this.MSTrackData={},this.drawSDEV=F,this.drawFloorIdentification=x,this.drawWaterRuler=_,this.drawEvent=B,this.drawEvents=I,this.blingbling=L,this.drawDetect=j,this.drawRuleInfo=N,this.drawAF=U,this.drawGlobalRule=z,this.prepareToDrawFloor=function(){},this.clear=function(){this.ivsCanvasDraw.delShapeById(),this.ivsCanvasDraw.drawShape(),this.ivsData={},this.highThrowData={},this.ivsRuleData={},this.objectData={},this.alarmObject={},this.AFData={curAF:{},maxAF:{}},this.MSTrackData={}},this.clearDetect=function(){this.detectData={},this.detectCanvasDraw.delShapeById(),this.detectCanvasDraw.drawShape()}},motionModel:function(){this.options={modelName:"motionModel",column:22,row:18},this.curAreaID=0,this.data={},this.receiveData=function(t){return{name:"MotionDetectConfig",data:[t.data]}},this.clear=function(){}}};p.osdModel.prototype=d.osdModel,p.ivsModel.prototype=d.ivsModel,p.previewModel.prototype=d.previewModel,p.motionModel.prototype=d.motionModel,p.factory=function(t){return new p[t]},p.addMethod=function(t,e,n){for(var r in d[n])t[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r)};var v={LocalFocus:"osdModel",SuperRegionDataChangeded:"osdModel",VideoAnalyzeConfig:"ivsModel",AnalysisShapeSelected:"ivsModel",MotionDetectConfig:"motionModel",ReactAreaSelected:"ivsModel"},g=["FocusStatus"];function m(t,e,n,r){this.viewIndex=r,this.channel=0,this.ivsCanvasDom=t,this.canvasDom=e,this.detectCanvasDom=n,this.models={},this.modelList=["osdModel","ivsModel","previewModel","motionModel"],this.curModel=null,this.curEvents=[],this.resolution={width:"",height:""},this.init()}function y(t,e,n){var r="",i={lineWidth:2};switch(e&&(i.ruleName=e),t){case"CrossLineDetection":case"DetectLine":case"CrossFenceDetection":case"CrossFenceDetectionDown":r="poly",i.closeEnable=!1,i.allowLineCrossPoly=!0;break;case"HorizontalLine":case"TrafficLine":case"line":case"Line":case"XLineShape":case"LineShape":r="line";break;case"ArrowLineShape":r="line",i.array=!0;break;case"Horizontal":r="line",i.horizontal=!0;break;case"VerticalLine":case"Vertical":r="line",i.vertical=!0;break;case"CrossRegionDetection":case"TakenAwayDetection":case"MoveDetection":case"WanderDetection":case"RioterDetection":case"LeftDetection":case"Polygon":case"ExcludeRegion":case"ObjectPlacement":case"ObjectRemoval":r="poly",i.closeEnable=!0,i.selectType="onLine",n&&(i.selectType="inSide");break;case"BigSmallFilterBox":case"CalibrateRegion":case"DRectBigSmallShape":case"ComposeShape":case"UserComposeShape":case"GridShape":r="";break;case"DRectSmall":case"DRectBig":r="rect",i.selectType="onLine",i.showSize=!0;break;case"Rect":case"Rectangle":case"SubRect":case"DetectRegion":case"ScaleRectangle":case"LimitRectangleShape":r="rect",i.selectType="onLine",i.showSize=!1,n&&(i.selectType="inSide");break;case"DFilterSmall":case"DFilter":r="rect",i.selectType="inSide",i.showSize=!1,delete i.ruleName;break;case"PixelCountShape":case"PixelRectangle":r="rect",i.showSize=!0,delete i.ruleName;break;case"XLaneShape":i.detectLine=!0,i.unCheckLeftRight=!1,r="lane",i.leftLaneName="itc.LEFT",i.rightLaneName="itc.RIGHT",i.closeEnable=!1;break;case"TrafficLane":case"lane":r="lane",i.leftLaneName="itc.LEFT",i.rightLaneName="itc.RIGHT",i.closeEnable=!1;break;case"RegionClip":r="rect";break;case"ParkingDetection":r="parkingLot";break;case"PrivacyMaskPolygon":r="poly",i.maxPointNum=4;break;case"OvalShape":r="ellipse";break;case"PointShape":r="crossLine";break;default:r=t}return{canvasShapeType:r,options:i}}function w(t,e){var n={None:-1,Enter:"Enter",Leave:"Leave",LeftToRight:0,RightToLeft:1,Both:2},r={},i=e&&e.DetectRegion&&(Array.isArray(e.DetectRegion)?e.DetectRegion:e.DetectRegion.value);switch(t){case"ParkingStatusChangeDetection":case"ParkingLotStatusDetection":case"TrafficParkingStatistics":case"ParkingLimitDetection":r=(e.ParkingGroup||[]).reduce(function(t,e){var n=e.ParkingArray.reduce(function(t,n){return t.concat([{data:n.Region,shapeType:"poly",showName:!1},{data:n.CenterPoint,shapeType:"circle",options:{fillStyle:e.RealParkingNum>0?"#00ff00":"#ff0000",radius:40},ID:n.ID,showName:!1}])},[]);return t.concat(n)},[]);break;case"CrossLineDetection":r.data=e.DetectLine,r.shapeType="poly",r.options={closeEnable:!1,direction:n[e.Direction]};break;case"CrossRegionDetection":case"LeftDetection":case"TakenAwayDetection":case"WanderDetection":case"ManStandDetection":case"ManNumDetection":case"RioterDetection":case"MoveDetection":case"ObjectPlacement":case"ObjectRemoval":"CrossRegionDetection"===t&&-1===e.Action.indexOf("Cross")&&(e.Direction="None"),r.data=i,r.shapeType="poly",r.options={closeEnable:!0,direction:{None:-1,Enter:"Enter",Leave:"Leave",LeftToRight:0,RightToLeft:1,Both:"Both"}[e.Direction]};break;case"NumberStat":(r=[]).push({data:i,shapeType:"poly",options:{closeEnable:!0}},{data:e.DetectLine,shapeType:"poly",options:{closeEnable:!1,direction:e.Direction[0][0]>e.Direction[1][0]&&e.Direction[0][1]>e.Direction[1][1]?n.RightToLeft:n.LeftToRight},showName:!1});break;case"FaceDetection":case"FaceAnalysis":case"RelayTrack":r=null;break;case"CrossFenceDetection":(r=[]).push({data:e.UpstairsLine,shapeType:"poly",options:{closeEnable:!1,direction:n[e.Direction]}},{data:e.DownstairsLine,shapeType:"poly",options:{closeEnable:!1}});break;case"FloorIdentification":r={data:e.coordinate,shapeType:"poly",options:{closeEnable:!0,fontColor:"#FFFF00"}};break;case"ABCRiseDetection":(r=[]).push({data:i,shapeType:"poly",options:{closeEnable:!0}},{data:e.BedMiddleLine,shapeType:"line",options:{}},{data:e.Direction,shapeType:"line",options:{array:!0}});break;case"TrafficParkingSpaceNoParking":r=null;break;case"TrafficParkingSpaceParking":(r=[]).push({data:i,shapeType:"poly",options:{closeEnable:!!e.DetectRegion,direction:n[e.Direction]}},{data:e.DetectLine,shapeType:"line",options:{closeEnable:!!e.DetectLine,direction:n[e.DetectLine]},showName:!1}),e.DetectLine||(r=r[0]);break;case"TrafficParking":(r=[]).push({data:i,shapeType:"poly",options:{closeEnable:!!e.DetectRegion,direction:n[e.Direction]}});break;case"SewageDetection":(r=[]).push({data:i,shapeType:"poly",options:{closeEnable:!!e.DetectRegion,direction:n[e.Direction]}},{data:e.DetectLine,shapeType:"line",options:{closeEnable:!!e.DetectLine},showName:!1});break;case"TrafficCarLine":r=e&&e.DetectLine&&e.LeftLine&&e.RightLine?{data:e.LeftLine.concat(e.RightLine).concat(e.DetectLine),shapeType:"lane",options:{lineWidth:2,detectLine:!0,detectLineColor:"#FF0000"}}:null;break;default:e&&(e.DetectRegion||e.DetectLine)?(r.data=i||e.DetectLine,r.shapeType="poly",r.options={closeEnable:!!e.DetectRegion,direction:n[e.Direction]}):r=null}return r}function b(t,e){var n={};if(t[e])n={relShapeId:t[e].relShapeId};else for(var r in t){var i=t[r].subShape;if(i[e]){n={relShapeId:i[e].relShapeId,mainShapeId:r};break}}return n}function S(t,e){var n=[];switch(e){case"DRectSmall":case"DRectBig":var r=Math.round((8192-t[0])/2),i=Math.round((8192-t[1])/2);n[0]=[r,i],n[1]=[r+t[0],i+t[1]];break;default:n=t}return n}function D(t,e,n){var r,i=e.subShape;if("draw"===t){if("CalibrateRegion"===e.ruleType&&("line"===n.type||"Vertical"===n.type||"Horizontal"===n.type))for(r in i)if("Polygon"===i[r].markedName)return{maxPoly:i[r].data};if("ComposeShape"===e.ruleType&&!n.isFirst)for(r in i)if(i[r].isFirst){var a=i[r].data;return 2===a.length?{maxPoly:[a[0],[a[0][0],a[1][1]],a[1],[a[1][0],a[0][1]]]}:{maxPoly:a}}if("DRectSmall"===n.markedName){for(r in i)if("DRectBig"===i[r].markedName)return{maxRect:i[r].data}}else if("DRectBig"===n.markedName){for(r in i)if("DRectSmall"===i[r].markedName)return{minRect:i[r].data}}else if("TrafficLine"===n.markedName){return{segment:[[e.data[0],e.data[1]],[e.data[2],e.data[3]]]}}}else if("show"===t){if("CalibrateRegion"===e.ruleType){var o,s=[];for(r in i)"poly"===i[r].type?o=i[r].relShapeId:s.push(i[r].relShapeId);s.length&&(this.canvasDraw.setParent(o,s),e.parentsId=o)}if("ComposeShape"===e.ruleType){var u,c=[];for(r in i)i[r].isFirst?u=i[r].relShapeId:c.push(i[r].relShapeId);c.length&&(this.canvasDraw.setParent(u,c),e.parentsId=u)}if("DRectSmall"===n.markedName)for(r in i)"DRectBig"===i[r].markedName&&(this.canvasDraw.setOption(i[r].relShapeId,{minRect:n.data}),this.canvasDraw.setOption(n.relShapeId,{maxRect:i[r].data}));"DFilterSmall"===n.markedName&&this.canvasDraw.setParent(e.relShapeId,[n.relShapeId])}return{}}function x(t){if(function(t,e){if(e=e||function(){return!0},!t||!t.length)return this.clear(),!1;var n=this.highThrowData;for(var r in n)e(r)&&(n[r].bling||(this.ivsCanvasDraw.delShapeById(n[r].shapeId),delete this.highThrowData[r]));return!0}.call(this,t,function(t){var e=!0;return-1===t.indexOf("Floor")&&(e=!1),e})&&this.floorIdentificationEnable){var e=this;t.forEach(function(t,n){var r=w("FloorIdentification",t);if(t.BoxNameEnable&&(r.options.ruleName=t.BoxName),t.BoxEnable){var i=e.ivsCanvasDraw.addShape(r.data,r.shapeType,r.options);r.shapeId=i.shapeId,e.highThrowData["Floor"+n]=r}}),e.ivsCanvasDraw.drawShape()}}function _(t){var e=this;e.waterRulerData.shapeId&&e.ivsCanvasDraw.delShapeById(e.waterRulerData.shapeId);window.plugin&&window.plugin.$t;var n=e.ivsCanvasDraw.addShape(t,"waterLevel",{transText:{strWaterStatus:"Water Level Status",strUnknown:"Unknown",strNormal:"Normal",strHigtWaterLevel:"High Water Level",strLowWaterLevel:"Low Water Level",strWaterValue:"Water Level Value"},font:"normal normal bold 16px Arial",fontSize:24,lineWidth:3});e.waterRulerData.shapeId=n.shapeId,e.ivsCanvasDraw.drawShape()}function I(t){var e=this;e.iotboxCommData.shapeId&&e.ivsCanvasDraw.delShapeById(e.iotboxCommData.shapeId);var n=e.ivsCanvasDraw.addShape(t,"waterLevel",{transText:{strWaterStatus:"Water Level Status",strUnknown:"Unknown",strNormal:"Normal",strHigtWaterLevel:"High Water Level",strLowWaterLevel:"Low Water Level",strWaterValue:"Water Level Value"},font:"normal normal bold 16px Arial",fontSize:24,lineWidth:3});e.waterRulerData.shapeId=n.shapeId,e.ivsCanvasDraw.drawShape()}m.prototype={constructor:m,init:function(){var t=this;this.ivsCanvasDraw=new o.PluginCanvasES6,this.ivsCanvasDraw.init(this.ivsCanvasDom),this.detectCanvasDom&&(this.detectCanvasDraw=new o.PluginCanvasES6,this.detectCanvasDraw.init(this.detectCanvasDom)),this.canvasDraw=new o.PluginCanvasES6,this.canvasDraw.init(this.canvasDom,this.receiveData.bind(this)),this.modelList.forEach(function(e){t.models[e]=p.factory(e),t.models[e].canvasDraw=t.canvasDraw,t.models[e].ivsCanvasDraw=t.ivsCanvasDraw,t.detectCanvasDom&&(t.models[e].detectCanvasDraw=t.detectCanvasDraw),t.models[e].resolution=t.resolution,p.addMethod(t,t.models[e],e)})},setModel:function(t){this.curModel=t},close:function(){this.canvasDraw.clear(),this.ivsCanvasDraw.clear(),this.detectCanvasDraw&&this.detectCanvasDraw.clear()},resize:function(){this.ivsCanvasDraw.resize(),this.canvasDraw.resize(),this.detectCanvasDraw&&this.detectCanvasDraw.resize()},addEvent:function(t,e){if(-1===g.indexOf(t))if(e)h.subscribe(t,e,this.channel),this.curEvents.push(t);else{var n=this.curEvents.indexOf(t);h.unsubscribe(t,e,this.channel),this.curEvents.splice(n,1);var r=v[t];r&&this.models[r].clear()}else this.addStreamEvent(t,e)},addStreamEvent:function(t,e){e?h.subscribe(t,e,this.channel):h.unsubscribe(t,e,this.channel)},receiveData:function(t){if(!this.curEvents.length)return!1;var e=this.curEvents[this.curEvents.length-1],n=v[e],r=[],i=[];if(Array.isArray(t)){if(!t[0])return;if(!t[0].option.modelName)return;(function(){var e=t[0].option.modelName,n=this.models[e],a=n.containerID,o=(n.curShapeId,n.data[a]),s=function(t){var e=[],n=[];return t.map(function(t,r){var i=function(t,e){var n={};for(var r in t){if(t[r].relShapeId===e){n.mainShapeId=r;break}var i=t[r].subShape;if(i)for(var a in i)if(i[a].relShapeId===e&&"poly"===i[a].type){n.mainShapeId=r,n.subShapeId=a;break}}return n}(o,t.shapeId);void 0!==i.subShapeId&&o[i.mainShapeId].subShape[i.subShapeId].isDetectLinked?n.push({shapeId:i.subShapeId,data:t,shapeInfo:o[i.mainShapeId].subShape[i.subShapeId]}):e.push(t)}),{remainResult:e,fullResult:n}}(t),u=s.remainResult,c=s.fullResult;0===u.length&&0===c.length||(t=(t=u[0])||c[0],i=c,r=u.slice(1),this.canvasDraw.removeShapeDrawEvent())}).call(this)}if(t.option&&t.option.modelName&&(n=t.option.modelName),!n)return!1;var a=this.models[n].receiveData(t);if(a)if("RightLane"===a.data[7]||"LeftLane"===a.data[7]){var o="LeftLane"===a.data[7]?a.data[0]:a.baseShapeInfo.linkLeft,u="RightLane"===a.data[7]?a.data[0]:a.baseShapeInfo.linkRight,c=a.baseShapeInfo.linkDetectLine,l={name:a.name,data:a.data.slice()},f={name:a.name,data:a.data.slice()},d={name:a.name,data:a.data.slice()};l.data[0]=o,l.data[6]="LeftLane",l.data[7]="LeftLane",l.data[1]=l.data[1].slice(0,2),f.data[0]=u,f.data[6]="RightLane",f.data[7]="RightLane",f.data[1]=f.data[1].slice(2,4),d.data[0]=c,d.data[6]="DetectLine",d.data[7]="DetectLine",d.data[1]=d.data[1].slice(4,6),h.publish(l.name,l.data,this.channel),h.publish(f.name,f.data,this.channel),d.data[1].length>0&&h.publish(d.name,d.data,this.channel),function(){var t=this.channel;r.length>0&&r.forEach(function(e,n){var r={name:a.name,data:a.data.slice()};r.data[0]=void 0,r.data[1]=e.data.slice(4,6),r.data[2]=0,r.data[3]=0,r.data[6]="Lane",r.data[7]="Lane",h.publish(r.name,r.data,t)}),i.length>0&&i.forEach(function(e,n){e.shapeInfo;var r={name:a.name,data:a.data.slice()};r.data[0]=e.shapeId,r.data[6]="DetectLine",r.data[7]="DetectLine",r.data[1]=e.data.data.slice(4,6),h.publish(r.name,r.data,t)})}.call(this)}else if("OvalShape"===a.data[7]){var p=s.default.cloneDeep(a.data);p[1][0][0]=Math.min(a.data[1][0][0],a.data[1][2][0]),p[1][0][1]=Math.min(a.data[1][0][1],a.data[1][2][1]),p[1][2][0]=Math.max(a.data[1][0][0],a.data[1][2][0]),p[1][2][1]=Math.max(a.data[1][0][1],a.data[1][2][1]),p[1].splice(3,1),p[1].splice(1,1),h.publish(a.name,p,this.channel)}else if("PointShape"===a.data[7]){var g=s.default.cloneDeep(a.data);g[1]=[a.data[1]],h.publish(a.name,g,this.channel)}else h.publish(a.name,a.data,this.channel)},receiveDataFromStream:function(t,e,n){var r=this;if(!t)return!1;var a=t.type,o=t.data;switch(this.models.previewModel.MSTrackData.data=o,a){case 3:this.models.previewModel.focusEnable&&h.publish("FocusStatus",[o.Focus,o.Zoom,o.Status,e],this.channel),this.models.previewModel.AFEnable&&o.AutofocusPeak&&this.models.previewModel.drawAF(o.AutofocusPeak,e)}if(!this.models.previewModel.ivsEnable)return!1;if(4===a&&this.models.previewModel.detectEnable&&this.models.previewModel.drawDetect(o),!this.models.previewModel.ruleEnable)return!1;switch(a){case 0:this.models.previewModel.drawRule(o);break;case 1:var s,l,f={},d={},p=function(){if(20===o[v].type)s=o[v].appInfo,void 0===(l=r.models.previewModel.ivsOptions)||"all"===l.appInfo?d[v]=o[v]:20===l.type&&s===l.appInfo&&(d[v]=o[v]);else{if(-1!==[1,2,16,17].indexOf(o[v].type)){var t={widthDraw:c.jQlib.getWidth(r.canvasDraw.canvasDom)/u.util.defalutCoordinate.width,heightDraw:c.jQlib.getHeight(r.canvasDraw.canvasDom)/u.util.defalutCoordinate.height,widthMouse:u.util.defalutCoordinate.width/c.jQlib.getWidth(r.canvasDraw.canvasDom),heightMouse:u.util.defalutCoordinate.height/c.jQlib.getHeight(r.canvasDraw.canvasDom)};r.canvasDraw.canvasDom.addEventListener("click",function n(i){var a=[Math.round((i.clientX-u.util.offset(r.canvasDraw.canvasDom).left+window.scrollX)*t.widthMouse),Math.round((i.clientY-u.util.offset(r.canvasDraw.canvasDom).top+window.scrollY)*t.heightMouse)];for(var s in o){var c=V(o[s].pos,o[s].coordinate),l=[[c[0],c[1]],[c[2],c[3]]];if(u.util.pointInRect(a,l)){var f={objectID:s.replace(/\D*/,"")-0,channel:e||0};h.publish("IPCManualTrack",[f.channel,f.objectID],r.channel)}}r.canvasDraw.canvasDom.removeEventListener("click",n,!1)},!1)}f[v]=o[v]}};for(var v in o)p();"{}"!==JSON.stringify(d)&&this.models.previewModel.drawSDEV(d),"{}"!==JSON.stringify(f)&&this.models.previewModel.drawObject(f);break;case 2:this.models.previewModel.drawEvent(o);break;case 6:this.models.previewModel.prepareToDrawFloor=function(){return r.models.previewModel.drawFloorIdentification((0,i.default)(o))};break;case 5:this.models.previewModel.drawRuleInfo(o,e);break;case 7:this.models.previewModel.drawWaterRuler(o);break;case 8:this.models.previewModel.drawGlobalRule(o,e);break;case 9:this.models.previewModel.drawEvents(o)}},setResolution:function(t){this.canvasDraw.setResolution(t),this.resolution.width=t.width,this.resolution.height=t.height}};var T=["Traffic"];function E(t){var e=this;if(!t||!t.length)return this.clear(),!1;var n=e.ivsData;for(var r in n)n[r].bling||(e.ivsCanvasDraw.delShapeById(n[r].shapeId),delete e.ivsData[r]);this.prepareToDrawFloor(),t.forEach(function(t,n){var r;if(!(r="OpenIntelli"===t.Class?w(t.Type,t.Config.RuleConfig):w(t.Type,t.Config))||T.includes(t.Class)&&!["ParkVehicleDetection"].includes(t.Type))return!1;if(Array.isArray(r))e.ivsData[t.Name]||(r.forEach(function(n,r){if(n.options&&!1!==n.showName){var i=s.default.get(e,["ivsRuleData","setRuleName"]),a=t.Name;i&&(a=e.ivsRuleData.setRuleName(t,a,n.options)),n.options.ruleName=a,n.options.lineWidth=2}var o=e.ivsCanvasDraw.addShape(n.data,n.shapeType,n.options);n.shapeId=o.shapeId}),e.ivsData[t.Name]=r);else{var i=s.default.get(e,["ivsRuleData","setRuleName"]),a=t.Name;if(i&&(a=e.ivsRuleData.setRuleName(t,a,r.options)),r.options.ruleName=a,r.options.lineWidth=2,!e.ivsData[t.Name]){var o=e.ivsCanvasDraw.addShape(r.data,r.shapeType,r.options);r.shapeId=o.shapeId,e.ivsData[t.Name]=r}}}),e.ivsCanvasDraw.drawShape()}var k={1:"#00CCFF",2:"#FFD800",16:"#FFD800",17:"#24FF00"},M={1:"#FFD800",2:"#00CCFF"},A={0:"\u672a\u77e5",1:"\u4eba\u4f53",2:"\u673a\u52a8\u8f66",3:"\u706b",4:"\u70df",5:"\u8f66\u724c",6:"\u4eba\u8138",7:"\u96c6\u88c5\u7bb1",8:"\u52a8\u7269",9:"\u4ea4\u901a\u706f",10:"\u8d34\u6761",11:"\u4eba\u5934",12:"\u4ea4\u901a\u7ebf",13:"\u666e\u901a\u7269\u4f53",14:"\u5f39\u5b54",15:"\u4eba\u8138\u7279\u5f81\u7b97\u6cd5\u79c1\u6709\u6570\u636e",16:"\u673a\u52a8\u8f66",17:"\u975e\u673a\u52a8\u8f66",18:"\u4fe1\u53f7\u673a\u6d41\u91cf",19:"\u4eba\u884c\u9053\u884c\u4eba\u4fe1\u606f",20:"\u8054\u52a8\u7ec6\u8282\u76f8\u673a\u4fe1\u606f",21:"X\u5149\u7269\u54c1\u68c0\u6d4b\u5f71\u50cf",22:"\u5360\u9053\u7ecf\u8425\u7269\u4f53",23:"\u6d41\u52a8\u644a\u8d29\u7269\u4f53",24:"\u6c34\u4f4d\u5c3a",25:"\u8239\u53ea",26:"\u6c34\u679c",27:"\u4e8c\u7ef4\u7801",28:"\u624b\u5957",29:"\u68af\u5b50",30:"\u5e03\u5e54",31:"\u56f4\u680f",32:"\u6807\u8bc6\u724c",33:"\u7535\u529b\u5b89\u5168\u5e26",34:"\u505c\u8f66\u573a\u8f66\u4f4d",35:"\u4eba\u6c11\u5e01",36:"\u94a5\u5319",37:"\u5370\u7ae0",38:"\u5916\u5e01",39:"\u6c34\u9762\u6f02\u6d6e\u7269",40:"\u6d88\u9632\u5360\u9053\u7269"},R="#24FF00";function C(t,e){var n=this;window.plugin&&window.plugin.$t;for(var r in n.objectData)n.ivsCanvasDraw.delShapeById(n.objectData[r].shapeId),n.objectData[r].trackId&&n.ivsCanvasDraw.delShapeById(n.objectData[r].trackId);for(var i in n.objectData={},t)if(t[i].show){var a=k[t[i].type]||R,o=A[t[i].type]||t[i].type,s={strokeColor:a},u=[],c={};25===t[i].type&&(s.strokeColor=M[t[i].objectType]||R);var l=t[i].beliefVal||0;if(e&&e.showObjectInfoText&&(s.textArr=[i,o,"Confidence Level".concat(l)]),(n.alarmObject[i]||t[i].isTrack)&&(s.strokeColor="#FF0000"),t[i].track&&t[i].track.length>1&&n.boxTailEnable){u=V(t[i].track[t[i].track.length-1],t[i].coordinate);var h=t[i].track.map(function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]});c=n.ivsCanvasDraw.addShape(h,"poly",f(f({},s),{},{closeEnable:!1}))}else u=t[i].track&&t[i].track.length>1?V(t[i].track[t[i].track.length-1],t[i].coordinate):V(t[i].pos,t[i].coordinate);var d=null;if(n.MSTrackData&&n.MSTrackData.option&&this.MSTrackData.option.MSTrackId&&i===this.MSTrackData.option.MSTrackId){var p=n.MSTrackData.option.MSTrackId;u=V(t[p].pos,t[p].coordinate),s.strokeColor=n.MSTrackData.option.MSTrackColor,s.rectLine=!0,d=n.ivsCanvasDraw.addShape([[u[0],u[1]],[u[2],u[3]]],"rectAD",f(f({},s),{},{lineWidth:2}))}else d=n.ivsCanvasDraw.addShape([[u[0],u[1]],[u[2],u[3]]],"rectAD",f(f({},s),{},{lineWidth:2}));n.objectData[i]={pos:u,shapeId:d.shapeId,trackId:c.shapeId}}n.ivsCanvasDraw.drawShape()}function P(t){var e=t.slice(),n=e.pop();return n=(n/255).toFixed(2),e.push(n),"rgba("+e.join(",")+")"}function O(t,e,n){var r=n.borderColor,i=n.fillColor;switch(r=P(r),i=P(i),e){case 0:t.strokeColor="rgba(0, 0, 0, 0)",t.fillStyle="rgba(0, 0, 0, 0)";break;case 1:t.strokeColor=r,t.fillStyle="rgba(0, 0, 0, 0)";break;case 2:t.strokeColor=r,t.fillStyle="rgba(0, 0, 0, 0)",t.dashed=[5,5];break;case 16:t.lineWidth=0,t.strokeColor="rgba(0, 0, 0, 0)",t.fillStyle=i;break;case 17:t.strokeColor=r,t.fillStyle=i;break;case 18:t.strokeColor=r,t.fillStyle=i,t.dashed=[5,5]}}function F(t){var e=this;for(var n in e.objectData)e.ivsCanvasDraw.delShapeById(e.objectData[n].shapeId),e.objectData[n].trackId&&e.ivsCanvasDraw.delShapeById(e.objectData[n].trackId);for(var r in e.objectDataSDEV)e.ivsCanvasDraw.delShapeById(e.objectDataSDEV[r].shapeId);for(r in e.objectDataSDEV={},t)if(t[r].show)for(var i=t[r].data,a=0,o=i.length;a<o;a++)!function(t){var n,a,o,s,u,c=i[t];switch(c.type){case 1:n=c.lineWidth,a=c.coordinate,o=c.strokeStyle,O(s={lineWidth:n,radius:c.radius},o,c),s.dashed&&(s.dashed=[2*n,2*n]),u=e.ivsCanvasDraw.addShape(a,"circle",s),e.objectDataSDEV[u.shapeId]={shapeId:u.shapeId};break;case 2:n=c.lineWidth;var l=c.lineColor;l=P(l),a=c.coordinate,s={lineWidth:n,strokeColor:l,closeEnable:!1},2===(o=c.strokeStyle)&&(s.dashed=[2*n,2*n]),u=e.ivsCanvasDraw.addShape(a,"poly",s),e.objectDataSDEV[u.shapeId]={shapeId:u.shapeId};break;case 3:n=c.lineWidth,a=c.coordinate,o=c.strokeStyle;if(s={lineWidth:n},-1===[0,1,2,16,17,18].indexOf(o))return;O(s,o,c),e.alarmObject[r]&&(s.strokeColor="#FF0000"),s.dashed&&(s.dashed=[2*n,2*n]),u=e.ivsCanvasDraw.addShape(a,"poly",s),e.objectDataSDEV[u.shapeId]={shapeId:u.shapeId},e.objectData[r]={shapeId:u.shapeId};break;case 4:var f=c.fontColor;f=P(f),s={font:c.fontSize+"px Arial",textAlign:["left","right"][c.textAlign],textBaseline:c.textBaseline,strokeColor:f,title:c.content},u=e.ivsCanvasDraw.addShape([c.coordinate[0],c.coordinate[1]],"text",s),e.objectDataSDEV[u.shapeId]={shapeId:u.shapeId}}}(a);e.ivsCanvasDraw.drawShape()}function B(t){var e=this;t.forEach(function(t,n){var r=e.ivsData[t.Data.Name];if(["ParkingStatusChangeDetection","ParkingLotStatusDetection","TrafficParkingStatistics","ParkingLimitDetection"].includes(t.Code))return r.bling=void 0,void r.forEach(function(n){"circle"===n.shapeType&&t.Data.ParkingStatus.some(function(t){if(t.ID===n.ID)return 0===t.ParkedNumber?n.options.fillStyle="#00ff00":(n.options.fillStyle="#ff0000",r.bling=1),e.ivsCanvasDraw.setOption(n.shapeId,n.options),!0})});if(Array.isArray(r))r.forEach(function(t){if(t&&!t.bling){var n=t.options;n.strokeColor="#FF0000",e.ivsCanvasDraw.setOption(t.shapeId,n),t.bling=1}});else if(r&&!r.bling){var i=r.options;i.strokeColor="#FF0000",e.ivsCanvasDraw.setOption(r.shapeId,i),r.bling=1}else r={};var a=[],o=t.Data.Class,s=t.Data.Objects||[];t.Data.Object&&s.push(t.Data.Object),s.forEach(function(t,n){var r=o+t.ObjectID;a.push(r),e.alarmObject[r]?e.alarmObject[r]+=1:e.alarmObject[r]=1;try{e.ivsCanvasDraw.setOption(e.objectData[r].shapeId,{strokeColor:"#FF0000"})}catch(t){e.objectData}}),Array.isArray(r)?r.map(function(t){e.blingbling(t,a)}):e.blingbling(r,a)})}function L(t,e){var n=this;if(t.bling<20)t.shapeId&&n.ivsCanvasDraw.hideShape(t.shapeId,!!(t.bling%2)),t.bling++,window.setTimeout(function(){n.blingbling(t,e)},100);else{var r=t.options;r&&(r.strokeColor="#0000ff",n.ivsCanvasDraw.setOption(t.shapeId,r),n.ivsCanvasDraw.hideShape(t.shapeId,!1)),t.bling=0,e.forEach(function(t,e){var r=n.alarmObject[t];1===r?delete n.alarmObject[t]:n.alarmObject[t]=r-1})}}function j(t){var e=this,n=[],r=e.detectData;if(e.detectCanvasDraw)if(t){for(var i in r)s.default.get(r,"".concat(i,".shapeId"),[]).forEach(function(t){e.detectCanvasDraw.delShapeById(t)}),delete r[i];Array.isArray(t)||(t=[t]),t.forEach(function(t,i){if(t){var a=s.default.get(t,"DetectRegion"),o=s.default.get(t,"ExcludeRegion");a&&n.push({type:"DetectRegion"+i,data:[a],shapeType:"poly",shapeId:[],options:{strokeColor:"#FF5700",lineWidth:2}}),o&&n.push({type:"ExcludeRegion"+i,data:o,shapeType:"poly",shapeId:[],options:{strokeColor:"#FFFFFF",lineWidth:2}}),n.forEach(function(t,n){if(!t)return!1;t.data.forEach(function(n){var r=e.detectCanvasDraw.addShape(n,t.shapeType,t.options);t.shapeId.push(r.shapeId)}),r[t.type]=t})}}),e.detectCanvasDraw.drawShape()}else this.clearDetect()}function N(t,e){var n=this,r=(window.plugin&&window.plugin.$t,s.default.get(t,["classType"])),i={};"VehiclesDistri"===r?i={data:t,setRuleName:function(t,e,n){var r=this.data.data||[],i=r.findIndex(function(e){return e.ruleId===t.Id});if(-1===i)return e;var a=r[i];return e="".concat(e,":Vehicle Statistics:").concat(a.carNum,"vehicles"),n.fontColor="#ffffff",n.font="normal normal 100 25px arial",e}}:"NumberStat"===r&&(i={data:t,setRuleName:function(t,e,r){var i="",a=[255,255,255],o=s.default.get(n,["resolution","height"]),u=s.default.get(n,["resolution","width"]),c=20;if(o&&u){var l=o*u,f=n.canvasDraw.canvasDom.width*n.canvasDraw.canvasDom.height;c=Math.floor(c*Math.sqrt(f/l))}var h="#"+((1<<24)+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1),d=this.data.data||[],p=s.default.get(t,["Config","AreaID"]),v=d.findIndex(function(e){return e.ruleType===t.Type}),g=s.default.get(d,[v,"data",p]);return g?(Object.keys({enter:"com.Enter",leave:"com.Exits",in:"com.PeopleNum",cross:"com.Passed",enterAgain:"ivs.RepeatEnter",leaveAgain:"ivs.RepeatLeave"}).forEach(function(t){void 0!==g[t]&&(i+="".concat(t,": ").concat(g[t]," "))}),r.textArr=[i,e],r.fontColor=h,r.font="normal normal 100 ".concat(c,"px arial"),""):e}}),this.ivsRuleData=i}function U(t,e){var n=this,r=function(t){var e=[255,255,255];return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)}(),i=n.AFData,a=window.plugin&&1===window.plugin.totalViews?"normal normal 500 50px arial":"normal normal 200 25px arial";i.curAF.shapeId&&(n.ivsCanvasDraw.delShapeById(i.curAF.shapeId),n.ivsCanvasDraw.delShapeById(i.maxAF.shapeId)),(t>i.maxAF.data||!i.maxAF.data)&&(i.maxAF.data=t);var o=n.AFEnable&&n.ivsCanvasDraw.addShape([100,1e3],"text",{title:"AF Peak: ".concat(t),font:a,strokeColor:r}),s=n.AFEnable&&n.ivsCanvasDraw.addShape([100,2e3],"text",{title:"AF Max: ".concat(i.maxAF.data),font:a,strokeColor:r});i.curAF.shapeId=o.shapeId,i.maxAF.shapeId=s.shapeId,n.ivsCanvasDraw.drawShape()}function z(t){var e=this;window.plugin&&window.plugin.$t;if(t){for(var n in e.ivsData)n.includes("TrafficCarLine")&&(s.default.get(e.ivsData,"".concat(n,".shapeId"),[]).forEach(function(t){e.ivsCanvasDraw.delShapeById(t)}),delete e.ivsData[n]);Array.isArray(t)||(t=[t]),t.forEach(function(t,n){var r=w("TrafficCarLine",t);if(r){t.Number;r.options.leftLaneName="";var i=e.ivsCanvasDraw.addShape(r.data,r.shapeType,r.options);r.shapeId=i.shapeId,e.ivsData["TrafficCarLine"+n]=r}}),e.ivsCanvasDraw.drawShape()}else this.clear()}function V(t,e){return"1024"!==e&&1024!==e||(t=t.map(function(t){return"number"===typeof t?8*t:t.map(function(t){return 8*t})})),t}var W=m;e.default=W},function(t,e,n){(function(t,r){var i;(function(){var a,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",d=1,p=2,v=4,g=1,m=2,y=1,w=2,b=4,S=8,D=16,x=32,_=64,I=128,T=256,E=512,k=30,M="...",A=800,R=16,C=1,P=2,O=1/0,F=9007199254740991,B=1.7976931348623157e308,L=NaN,j=4294967295,N=j-1,U=j>>>1,z=[["ary",I],["bind",y],["bindKey",w],["curry",S],["curryRight",D],["flip",E],["partial",x],["partialRight",_],["rearg",T]],V="[object Arguments]",W="[object Array]",q="[object AsyncFunction]",Y="[object Boolean]",H="[object Date]",X="[object DOMException]",G="[object Error]",Q="[object Function]",$="[object GeneratorFunction]",Z="[object Map]",J="[object Number]",K="[object Null]",tt="[object Object]",et="[object Proxy]",nt="[object RegExp]",rt="[object Set]",it="[object String]",at="[object Symbol]",ot="[object Undefined]",st="[object WeakMap]",ut="[object WeakSet]",ct="[object ArrayBuffer]",lt="[object DataView]",ft="[object Float32Array]",ht="[object Float64Array]",dt="[object Int8Array]",pt="[object Int16Array]",vt="[object Int32Array]",gt="[object Uint8Array]",mt="[object Uint8ClampedArray]",yt="[object Uint16Array]",wt="[object Uint32Array]",bt=/\b__p \+= '';/g,St=/\b(__p \+=) '' \+/g,Dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xt=/&(?:amp|lt|gt|quot|#39);/g,_t=/[&<>"']/g,It=RegExp(xt.source),Tt=RegExp(_t.source),Et=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/[\\^$.*+?()[\]{}|]/g,Ot=RegExp(Pt.source),Ft=/^\s+/,Bt=/\s/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jt=/\{\n\/\* \[wrapped with (.+)\] \*/,Nt=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/[()=,{}\[\]\/\s]/,Vt=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qt=/\w*$/,Yt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Xt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,Kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="[\\ud800-\\udfff]",ne="["+te+"]",re="["+Kt+"]",ie="\\d+",ae="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",se="[^\\ud800-\\udfff"+te+ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ue="\\ud83c[\\udffb-\\udfff]",ce="[^\\ud800-\\udfff]",le="(?:\\ud83c[\\udde6-\\uddff]){2}",fe="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",de="(?:"+oe+"|"+se+")",pe="(?:"+he+"|"+se+")",ve="(?:"+re+"|"+ue+")"+"?",ge="[\\ufe0e\\ufe0f]?"+ve+("(?:\\u200d(?:"+[ce,le,fe].join("|")+")[\\ufe0e\\ufe0f]?"+ve+")*"),me="(?:"+[ae,le,fe].join("|")+")"+ge,ye="(?:"+[ce+re+"?",re,le,fe,ee].join("|")+")",we=RegExp("['\u2019]","g"),be=RegExp(re,"g"),Se=RegExp(ue+"(?="+ue+")|"+ye+ge,"g"),De=RegExp([he+"?"+oe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ne,he,"$"].join("|")+")",pe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ne,he+de,"$"].join("|")+")",he+"?"+de+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",he+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie,me].join("|"),"g"),xe=RegExp("[\\u200d\\ud800-\\udfff"+Kt+"\\ufe0e\\ufe0f]"),_e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Te=-1,Ee={};Ee[ft]=Ee[ht]=Ee[dt]=Ee[pt]=Ee[vt]=Ee[gt]=Ee[mt]=Ee[yt]=Ee[wt]=!0,Ee[V]=Ee[W]=Ee[ct]=Ee[Y]=Ee[lt]=Ee[H]=Ee[G]=Ee[Q]=Ee[Z]=Ee[J]=Ee[tt]=Ee[nt]=Ee[rt]=Ee[it]=Ee[st]=!1;var ke={};ke[V]=ke[W]=ke[ct]=ke[lt]=ke[Y]=ke[H]=ke[ft]=ke[ht]=ke[dt]=ke[pt]=ke[vt]=ke[Z]=ke[J]=ke[tt]=ke[nt]=ke[rt]=ke[it]=ke[at]=ke[gt]=ke[mt]=ke[yt]=ke[wt]=!0,ke[G]=ke[Q]=ke[st]=!1;var Me={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ae=parseFloat,Re=parseInt,Ce="object"==typeof t&&t&&t.Object===Object&&t,Pe="object"==typeof self&&self&&self.Object===Object&&self,Oe=Ce||Pe||Function("return this")(),Fe=e&&!e.nodeType&&e,Be=Fe&&"object"==typeof r&&r&&!r.nodeType&&r,Le=Be&&Be.exports===Fe,je=Le&&Ce.process,Ne=function(){try{var t=Be&&Be.require&&Be.require("util").types;return t||je&&je.binding&&je.binding("util")}catch(t){}}(),Ue=Ne&&Ne.isArrayBuffer,ze=Ne&&Ne.isDate,Ve=Ne&&Ne.isMap,We=Ne&&Ne.isRegExp,qe=Ne&&Ne.isSet,Ye=Ne&&Ne.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Xe(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function Ge(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Qe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function $e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ze(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Je(t,e){return!!(null==t?0:t.length)&&cn(t,e,0)>-1}function Ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function tn(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function en(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function nn(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function rn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function an(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=dn("length");function sn(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function un(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function cn(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):un(t,fn,n)}function ln(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function fn(t){return t!==t}function hn(t,e){var n=null==t?0:t.length;return n?gn(t,e)/n:L}function dn(t){return function(e){return null==e?a:e[t]}}function pn(t){return function(e){return null==t?a:t[e]}}function vn(t,e,n,r,i){return i(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)}),n}function gn(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==a&&(n=n===a?o:n+o)}return n}function mn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function yn(t){return t?t.slice(0,Fn(t)+1).replace(Ft,""):t}function wn(t){return function(e){return t(e)}}function bn(t,e){return tn(e,function(e){return t[e]})}function Sn(t,e){return t.has(e)}function Dn(t,e){for(var n=-1,r=t.length;++n<r&&cn(e,t[n],0)>-1;);return n}function xn(t,e){for(var n=t.length;n--&&cn(e,t[n],0)>-1;);return n}var _n=pn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),In=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Tn(t){return"\\"+Me[t]}function En(t){return xe.test(t)}function kn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Mn(t,e){return function(n){return t(e(n))}}function An(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==h||(t[n]=h,a[i++]=n)}return a}function Rn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Pn(t){return En(t)?function(t){var e=Se.lastIndex=0;for(;Se.test(t);)++e;return e}(t):on(t)}function On(t){return En(t)?function(t){return t.match(Se)||[]}(t):function(t){return t.split("")}(t)}function Fn(t){for(var e=t.length;e--&&Bt.test(t.charAt(e)););return e}var Bn=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ln=function t(e){var n=(e=null==e?Oe:Ln.defaults(Oe.Object(),e,Ln.pick(Oe,Ie))).Array,r=e.Date,i=e.Error,Bt=e.Function,Kt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,re=e.TypeError,ie=n.prototype,ae=Bt.prototype,oe=te.prototype,se=e["__core-js_shared__"],ue=ae.toString,ce=oe.hasOwnProperty,le=0,fe=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),he=oe.toString,de=ue.call(te),pe=Oe._,ve=ee("^"+ue.call(ce).replace(Pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=Le?e.Buffer:a,me=e.Symbol,ye=e.Uint8Array,Se=ge?ge.allocUnsafe:a,xe=Mn(te.getPrototypeOf,te),Me=te.create,Ce=oe.propertyIsEnumerable,Pe=ie.splice,Fe=me?me.isConcatSpreadable:a,Be=me?me.iterator:a,je=me?me.toStringTag:a,Ne=function(){try{var t=Na(te,"defineProperty");return t({},"",{}),t}catch(t){}}(),on=e.clearTimeout!==Oe.clearTimeout&&e.clearTimeout,pn=r&&r.now!==Oe.Date.now&&r.now,jn=e.setTimeout!==Oe.setTimeout&&e.setTimeout,Nn=Kt.ceil,Un=Kt.floor,zn=te.getOwnPropertySymbols,Vn=ge?ge.isBuffer:a,Wn=e.isFinite,qn=ie.join,Yn=Mn(te.keys,te),Hn=Kt.max,Xn=Kt.min,Gn=r.now,Qn=e.parseInt,$n=Kt.random,Zn=ie.reverse,Jn=Na(e,"DataView"),Kn=Na(e,"Map"),tr=Na(e,"Promise"),er=Na(e,"Set"),nr=Na(e,"WeakMap"),rr=Na(te,"create"),ir=nr&&new nr,ar={},or=fo(Jn),sr=fo(Kn),ur=fo(tr),cr=fo(er),lr=fo(nr),fr=me?me.prototype:a,hr=fr?fr.valueOf:a,dr=fr?fr.toString:a;function pr(t){if(Ms(t)&&!ys(t)&&!(t instanceof yr)){if(t instanceof mr)return t;if(ce.call(t,"__wrapped__"))return ho(t)}return new mr(t)}var vr=function(){function t(){}return function(e){if(!ks(e))return{};if(Me)return Me(e);t.prototype=e;var n=new t;return t.prototype=a,n}}();function gr(){}function mr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}function yr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Sr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Sr;++e<n;)this.add(t[e])}function xr(t){var e=this.__data__=new br(t);this.size=e.size}function _r(t,e){var n=ys(t),r=!n&&ms(t),i=!n&&!r&&Ds(t),a=!n&&!r&&!i&&Ls(t),o=n||r||i||a,s=o?mn(t.length,ne):[],u=s.length;for(var c in t)!e&&!ce.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ha(c,u))||s.push(c);return s}function Ir(t){var e=t.length;return e?t[Di(0,e-1)]:a}function Tr(t,e){return uo(ra(t),Fr(e,0,t.length))}function Er(t){return uo(ra(t))}function kr(t,e,n){(n===a||ps(t[e],n))&&(n!==a||e in t)||Pr(t,e,n)}function Mr(t,e,n){var r=t[e];ce.call(t,e)&&ps(r,n)&&(n!==a||e in t)||Pr(t,e,n)}function Ar(t,e){for(var n=t.length;n--;)if(ps(t[n][0],e))return n;return-1}function Rr(t,e,n,r){return Ur(t,function(t,i,a){e(r,t,n(t),a)}),r}function Cr(t,e){return t&&ia(e,au(e),t)}function Pr(t,e,n){"__proto__"==e&&Ne?Ne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Or(t,e){for(var r=-1,i=e.length,o=n(i),s=null==t;++r<i;)o[r]=s?a:tu(t,e[r]);return o}function Fr(t,e,n){return t===t&&(n!==a&&(t=t<=n?t:n),e!==a&&(t=t>=e?t:e)),t}function Br(t,e,n,r,i,o){var s,u=e&d,c=e&p,l=e&v;if(n&&(s=i?n(t,r,i,o):n(t)),s!==a)return s;if(!ks(t))return t;var f=ys(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ce.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return ra(t,s)}else{var h=Va(t),g=h==Q||h==$;if(Ds(t))return Zi(t,u);if(h==tt||h==V||g&&!i){if(s=c||g?{}:qa(t),!u)return c?function(t,e){return ia(t,za(t),e)}(t,function(t,e){return t&&ia(e,ou(e),t)}(s,t)):function(t,e){return ia(t,Ua(t),e)}(t,Cr(s,t))}else{if(!ke[h])return i?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case ct:return Ji(t);case Y:case H:return new i(+t);case lt:return function(t,e){var n=e?Ji(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ft:case ht:case dt:case pt:case vt:case gt:case mt:case yt:case wt:return Ki(t,n);case Z:return new i;case J:case it:return new i(t);case nt:return function(t){var e=new t.constructor(t.source,qt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case rt:return new i;case at:return r=t,hr?te(hr.call(r)):{}}}(t,h,u)}}o||(o=new xr);var m=o.get(t);if(m)return m;o.set(t,s),Os(t)?t.forEach(function(r){s.add(Br(r,e,n,r,t,o))}):As(t)&&t.forEach(function(r,i){s.set(i,Br(r,e,n,i,t,o))});var y=f?a:(l?c?Ca:Ra:c?ou:au)(t);return Ge(y||t,function(r,i){y&&(r=t[i=r]),Mr(s,i,Br(r,e,n,i,t,o))}),s}function Lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=te(t);r--;){var i=n[r],o=e[i],s=t[i];if(s===a&&!(i in t)||!o(s))return!1}return!0}function jr(t,e,n){if("function"!=typeof t)throw new re(u);return io(function(){t.apply(a,n)},e)}function Nr(t,e,n,r){var i=-1,a=Je,s=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=tn(e,wn(n))),r?(a=Ke,s=!1):e.length>=o&&(a=Sn,s=!1,e=new Dr(e));t:for(;++i<u;){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,s&&h===h){for(var d=l;d--;)if(e[d]===h)continue t;c.push(f)}else a(e,h,r)||c.push(f)}return c}pr.templateSettings={escape:Et,evaluate:kt,interpolate:Mt,variable:"",imports:{_:pr}},pr.prototype=gr.prototype,pr.prototype.constructor=pr,mr.prototype=vr(gr.prototype),mr.prototype.constructor=mr,yr.prototype=vr(gr.prototype),yr.prototype.constructor=yr,wr.prototype.clear=function(){this.__data__=rr?rr(null):{},this.size=0},wr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wr.prototype.get=function(t){var e=this.__data__;if(rr){var n=e[t];return n===l?a:n}return ce.call(e,t)?e[t]:a},wr.prototype.has=function(t){var e=this.__data__;return rr?e[t]!==a:ce.call(e,t)},wr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rr&&e===a?l:e,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=Ar(e,t);return!(n<0)&&(n==e.length-1?e.pop():Pe.call(e,n,1),--this.size,!0)},br.prototype.get=function(t){var e=this.__data__,n=Ar(e,t);return n<0?a:e[n][1]},br.prototype.has=function(t){return Ar(this.__data__,t)>-1},br.prototype.set=function(t,e){var n=this.__data__,r=Ar(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Sr.prototype.clear=function(){this.size=0,this.__data__={hash:new wr,map:new(Kn||br),string:new wr}},Sr.prototype.delete=function(t){var e=La(this,t).delete(t);return this.size-=e?1:0,e},Sr.prototype.get=function(t){return La(this,t).get(t)},Sr.prototype.has=function(t){return La(this,t).has(t)},Sr.prototype.set=function(t,e){var n=La(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Dr.prototype.add=Dr.prototype.push=function(t){return this.__data__.set(t,l),this},Dr.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.clear=function(){this.__data__=new br,this.size=0},xr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xr.prototype.get=function(t){return this.__data__.get(t)},xr.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!Kn||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Sr(r)}return n.set(t,e),this.size=n.size,this};var Ur=sa(Gr),zr=sa(Qr,!0);function Vr(t,e){var n=!0;return Ur(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Wr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(u===a?s===s&&!Bs(s):n(s,u)))var u=s,c=o}return c}function qr(t,e){var n=[];return Ur(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Yr(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=Ya),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Yr(s,e-1,n,r,i):en(i,s):r||(i[i.length]=s)}return i}var Hr=ua(),Xr=ua(!0);function Gr(t,e){return t&&Hr(t,e,au)}function Qr(t,e){return t&&Xr(t,e,au)}function $r(t,e){return Ze(e,function(e){return Is(t[e])})}function Zr(t,e){for(var n=0,r=(e=Xi(e,t)).length;null!=t&&n<r;)t=t[lo(e[n++])];return n&&n==r?t:a}function Jr(t,e,n){var r=e(t);return ys(t)?r:en(r,n(t))}function Kr(t){return null==t?t===a?ot:K:je&&je in te(t)?function(t){var e=ce.call(t,je),n=t[je];try{t[je]=a;var r=!0}catch(t){}var i=he.call(t);return r&&(e?t[je]=n:delete t[je]),i}(t):function(t){return he.call(t)}(t)}function ti(t,e){return t>e}function ei(t,e){return null!=t&&ce.call(t,e)}function ni(t,e){return null!=t&&e in te(t)}function ri(t,e,r){for(var i=r?Ke:Je,o=t[0].length,s=t.length,u=s,c=n(s),l=1/0,f=[];u--;){var h=t[u];u&&e&&(h=tn(h,wn(e))),l=Xn(h.length,l),c[u]=!r&&(e||o>=120&&h.length>=120)?new Dr(u&&h):a}h=t[0];var d=-1,p=c[0];t:for(;++d<o&&f.length<l;){var v=h[d],g=e?e(v):v;if(v=r||0!==v?v:0,!(p?Sn(p,g):i(f,g,r))){for(u=s;--u;){var m=c[u];if(!(m?Sn(m,g):i(t[u],g,r)))continue t}p&&p.push(g),f.push(v)}}return f}function ii(t,e,n){var r=null==(t=eo(t,e=Xi(e,t)))?t:t[lo(_o(e))];return null==r?a:He(r,t,n)}function ai(t){return Ms(t)&&Kr(t)==V}function oi(t,e,n,r,i){return t===e||(null==t||null==e||!Ms(t)&&!Ms(e)?t!==t&&e!==e:function(t,e,n,r,i,o){var s=ys(t),u=ys(e),c=s?W:Va(t),l=u?W:Va(e),f=(c=c==V?tt:c)==tt,h=(l=l==V?tt:l)==tt,d=c==l;if(d&&Ds(t)){if(!Ds(e))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new xr),s||Ls(t)?Ma(t,e,n,r,i,o):function(t,e,n,r,i,a,o){switch(n){case lt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ct:return!(t.byteLength!=e.byteLength||!a(new ye(t),new ye(e)));case Y:case H:case J:return ps(+t,+e);case G:return t.name==e.name&&t.message==e.message;case nt:case it:return t==e+"";case Z:var s=kn;case rt:var u=r&g;if(s||(s=Rn),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;r|=m,o.set(t,e);var l=Ma(s(t),s(e),r,i,a,o);return o.delete(t),l;case at:if(hr)return hr.call(t)==hr.call(e)}return!1}(t,e,c,n,r,i,o);if(!(n&g)){var p=f&&ce.call(t,"__wrapped__"),v=h&&ce.call(e,"__wrapped__");if(p||v){var y=p?t.value():t,w=v?e.value():e;return o||(o=new xr),i(y,w,n,r,o)}}return!!d&&(o||(o=new xr),function(t,e,n,r,i,o){var s=n&g,u=Ra(t),c=u.length,l=Ra(e).length;if(c!=l&&!s)return!1;for(var f=c;f--;){var h=u[f];if(!(s?h in e:ce.call(e,h)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var v=!0;o.set(t,e),o.set(e,t);for(var m=s;++f<c;){h=u[f];var y=t[h],w=e[h];if(r)var b=s?r(w,y,h,e,t,o):r(y,w,h,t,e,o);if(!(b===a?y===w||i(y,w,n,r,o):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var S=t.constructor,D=e.constructor;S!=D&&"constructor"in t&&"constructor"in e&&!("function"==typeof S&&S instanceof S&&"function"==typeof D&&D instanceof D)&&(v=!1)}return o.delete(t),o.delete(e),v}(t,e,n,r,i,o))}(t,e,n,r,oi,i))}function si(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=te(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var c=(u=n[i])[0],l=t[c],f=u[1];if(s&&u[2]){if(l===a&&!(c in t))return!1}else{var h=new xr;if(r)var d=r(l,f,c,t,e,h);if(!(d===a?oi(f,l,g|m,r,h):d))return!1}}return!0}function ui(t){return!(!ks(t)||(e=t,fe&&fe in e))&&(Is(t)?ve:Xt).test(fo(t));var e}function ci(t){return"function"==typeof t?t:null==t?Ru:"object"==typeof t?ys(t)?vi(t[0],t[1]):pi(t):Uu(t)}function li(t){if(!Za(t))return Yn(t);var e=[];for(var n in te(t))ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fi(t){if(!ks(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=Za(t),n=[];for(var r in t)("constructor"!=r||!e&&ce.call(t,r))&&n.push(r);return n}function hi(t,e){return t<e}function di(t,e){var r=-1,i=bs(t)?n(t.length):[];return Ur(t,function(t,n,a){i[++r]=e(t,n,a)}),i}function pi(t){var e=ja(t);return 1==e.length&&e[0][2]?Ka(e[0][0],e[0][1]):function(n){return n===t||si(n,t,e)}}function vi(t,e){return Ga(t)&&Ja(e)?Ka(lo(t),e):function(n){var r=tu(n,t);return r===a&&r===e?eu(n,t):oi(e,r,g|m)}}function gi(t,e,n,r,i){t!==e&&Hr(e,function(o,s){if(i||(i=new xr),ks(o))!function(t,e,n,r,i,o,s){var u=no(t,n),c=no(e,n),l=s.get(c);if(l)kr(t,n,l);else{var f=o?o(u,c,n+"",t,e,s):a,h=f===a;if(h){var d=ys(c),p=!d&&Ds(c),v=!d&&!p&&Ls(c);f=c,d||p||v?ys(u)?f=u:Ss(u)?f=ra(u):p?(h=!1,f=Zi(c,!0)):v?(h=!1,f=Ki(c,!0)):f=[]:Cs(c)||ms(c)?(f=u,ms(u)?f=Ys(u):ks(u)&&!Is(u)||(f=qa(c))):h=!1}h&&(s.set(c,f),i(f,c,r,o,s),s.delete(c)),kr(t,n,f)}}(t,e,s,n,gi,r,i);else{var u=r?r(no(t,s),o,s+"",t,e,i):a;u===a&&(u=o),kr(t,s,u)}},ou)}function mi(t,e){var n=t.length;if(n)return Ha(e+=e<0?n:0,n)?t[e]:a}function yi(t,e,n){e=e.length?tn(e,function(t){return ys(t)?function(e){return Zr(e,1===t.length?t[0]:t)}:t}):[Ru];var r=-1;return e=tn(e,wn(Ba())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(di(t,function(t,n,i){return{criteria:tn(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var u=ta(i[r],a[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function wi(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=Zr(t,o);n(s,o)&&Ei(a,Xi(o,t),s)}return a}function bi(t,e,n,r){var i=r?ln:cn,a=-1,o=e.length,s=t;for(t===e&&(e=ra(e)),n&&(s=tn(t,wn(n)));++a<o;)for(var u=0,c=e[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Pe.call(s,u,1),Pe.call(t,u,1);return t}function Si(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;Ha(i)?Pe.call(t,i,1):Ni(t,i)}}return t}function Di(t,e){return t+Un($n()*(e-t+1))}function xi(t,e){var n="";if(!t||e<1||e>F)return n;do{e%2&&(n+=t),(e=Un(e/2))&&(t+=t)}while(e);return n}function _i(t,e){return ao(to(t,e,Ru),t+"")}function Ii(t){return Ir(pu(t))}function Ti(t,e){var n=pu(t);return uo(n,Fr(e,0,n.length))}function Ei(t,e,n,r){if(!ks(t))return t;for(var i=-1,o=(e=Xi(e,t)).length,s=o-1,u=t;null!=u&&++i<o;){var c=lo(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var f=u[c];(l=r?r(f,c,u):a)===a&&(l=ks(f)?f:Ha(e[i+1])?[]:{})}Mr(u,c,l),u=u[c]}return t}var ki=ir?function(t,e){return ir.set(t,e),t}:Ru,Mi=Ne?function(t,e){return Ne(t,"toString",{configurable:!0,enumerable:!1,value:ku(e),writable:!0})}:Ru;function Ai(t){return uo(pu(t))}function Ri(t,e,r){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=n(a);++i<a;)o[i]=t[i+e];return o}function Ci(t,e){var n;return Ur(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Pi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=U){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!Bs(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return Oi(t,e,Ru,n)}function Oi(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!==e,u=null===e,c=Bs(e),l=e===a;i<o;){var f=Un((i+o)/2),h=n(t[f]),d=h!==a,p=null===h,v=h===h,g=Bs(h);if(s)var m=r||v;else m=l?v&&(r||d):u?v&&d&&(r||!p):c?v&&d&&!p&&(r||!g):!p&&!g&&(r?h<=e:h<e);m?i=f+1:o=f}return Xn(o,N)}function Fi(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!ps(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Bi(t){return"number"==typeof t?t:Bs(t)?L:+t}function Li(t){if("string"==typeof t)return t;if(ys(t))return tn(t,Li)+"";if(Bs(t))return dr?dr.call(t):"";var e=t+"";return"0"==e&&1/t==-O?"-0":e}function ji(t,e,n){var r=-1,i=Je,a=t.length,s=!0,u=[],c=u;if(n)s=!1,i=Ke;else if(a>=o){var l=e?null:xa(t);if(l)return Rn(l);s=!1,i=Sn,c=new Dr}else c=e?[]:u;t:for(;++r<a;){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,s&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),u.push(f)}else i(c,h,n)||(c!==u&&c.push(h),u.push(f))}return u}function Ni(t,e){return null==(t=eo(t,e=Xi(e,t)))||delete t[lo(_o(e))]}function Ui(t,e,n,r){return Ei(t,e,n(Zr(t,e)),r)}function zi(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?Ri(t,r?0:a,r?a+1:i):Ri(t,r?a+1:0,r?i:a)}function Vi(t,e){var n=t;return n instanceof yr&&(n=n.value()),nn(e,function(t,e){return e.func.apply(e.thisArg,en([t],e.args))},n)}function Wi(t,e,r){var i=t.length;if(i<2)return i?ji(t[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=t[a],u=-1;++u<i;)u!=a&&(o[a]=Nr(o[a]||s,t[u],e,r));return ji(Yr(o,1),e,r)}function qi(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var u=r<o?e[r]:a;n(s,t[r],u)}return s}function Yi(t){return Ss(t)?t:[]}function Hi(t){return"function"==typeof t?t:Ru}function Xi(t,e){return ys(t)?t:Ga(t,e)?[t]:co(Hs(t))}var Gi=_i;function Qi(t,e,n){var r=t.length;return n=n===a?r:n,!e&&n>=r?t:Ri(t,e,n)}var $i=on||function(t){return Oe.clearTimeout(t)};function Zi(t,e){if(e)return t.slice();var n=t.length,r=Se?Se(n):new t.constructor(n);return t.copy(r),r}function Ji(t){var e=new t.constructor(t.byteLength);return new ye(e).set(new ye(t)),e}function Ki(t,e){var n=e?Ji(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ta(t,e){if(t!==e){var n=t!==a,r=null===t,i=t===t,o=Bs(t),s=e!==a,u=null===e,c=e===e,l=Bs(e);if(!u&&!l&&!o&&t>e||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!c)return-1}return 0}function ea(t,e,r,i){for(var a=-1,o=t.length,s=r.length,u=-1,c=e.length,l=Hn(o-s,0),f=n(c+l),h=!i;++u<c;)f[u]=e[u];for(;++a<s;)(h||a<o)&&(f[r[a]]=t[a]);for(;l--;)f[u++]=t[a++];return f}function na(t,e,r,i){for(var a=-1,o=t.length,s=-1,u=r.length,c=-1,l=e.length,f=Hn(o-u,0),h=n(f+l),d=!i;++a<f;)h[a]=t[a];for(var p=a;++c<l;)h[p+c]=e[c];for(;++s<u;)(d||a<o)&&(h[p+r[s]]=t[a++]);return h}function ra(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function ia(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],c=r?r(n[u],t[u],u,n,t):a;c===a&&(c=t[u]),i?Pr(n,u,c):Mr(n,u,c)}return n}function aa(t,e){return function(n,r){var i=ys(n)?Xe:Rr,a=e?e():{};return i(n,t,Ba(r,2),a)}}function oa(t){return _i(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=t.length>3&&"function"==typeof o?(i--,o):a,s&&Xa(n[0],n[1],s)&&(o=i<3?a:o,i=1),e=te(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e})}function sa(t,e){return function(n,r){if(null==n)return n;if(!bs(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=te(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function ua(t){return function(e,n,r){for(var i=-1,a=te(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}function ca(t){return function(e){var n=En(e=Hs(e))?On(e):a,r=n?n[0]:e.charAt(0),i=n?Qi(n,1).join(""):e.slice(1);return r[t]()+i}}function la(t){return function(e){return nn(Iu(mu(e).replace(we,"")),t,"")}}function fa(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vr(t.prototype),r=t.apply(n,e);return ks(r)?r:n}}function ha(t){return function(e,n,r){var i=te(e);if(!bs(e)){var o=Ba(n,3);e=au(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:a}}function da(t){return Aa(function(e){var n=e.length,r=n,i=mr.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new re(u);if(i&&!s&&"wrapper"==Oa(o))var s=new mr([],!0)}for(r=s?r:n;++r<n;){var c=Oa(o=e[r]),l="wrapper"==c?Pa(o):a;s=l&&Qa(l[0])&&l[1]==(I|S|x|T)&&!l[4].length&&1==l[9]?s[Oa(l[0])].apply(s,l[3]):1==o.length&&Qa(o)?s[c]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&ys(r))return s.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}})}function pa(t,e,r,i,o,s,u,c,l,f){var h=e&I,d=e&y,p=e&w,v=e&(S|D),g=e&E,m=p?a:fa(t);return function y(){for(var w=arguments.length,b=n(w),S=w;S--;)b[S]=arguments[S];if(v)var D=Fa(y),x=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,D);if(i&&(b=ea(b,i,o,v)),s&&(b=na(b,s,u,v)),w-=x,v&&w<f){var _=An(b,D);return Sa(t,e,pa,y.placeholder,r,b,_,c,l,f-w)}var I=d?r:this,T=p?I[t]:t;return w=b.length,c?b=function(t,e){for(var n=t.length,r=Xn(e.length,n),i=ra(t);r--;){var o=e[r];t[r]=Ha(o,n)?i[o]:a}return t}(b,c):g&&w>1&&b.reverse(),h&&l<w&&(b.length=l),this&&this!==Oe&&this instanceof y&&(T=m||fa(T)),T.apply(I,b)}}function va(t,e){return function(n,r){return function(t,e,n,r){return Gr(t,function(t,i,a){e(r,n(t),i,a)}),r}(n,t,e(r),{})}}function ga(t,e){return function(n,r){var i;if(n===a&&r===a)return e;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=Li(n),r=Li(r)):(n=Bi(n),r=Bi(r)),i=t(n,r)}return i}}function ma(t){return Aa(function(e){return e=tn(e,wn(Ba())),_i(function(n){var r=this;return t(e,function(t){return He(t,r,n)})})})}function ya(t,e){var n=(e=e===a?" ":Li(e)).length;if(n<2)return n?xi(e,t):e;var r=xi(e,Nn(t/Pn(e)));return En(e)?Qi(On(r),0,t).join(""):r.slice(0,t)}function wa(t){return function(e,r,i){return i&&"number"!=typeof i&&Xa(e,r,i)&&(r=i=a),e=zs(e),r===a?(r=e,e=0):r=zs(r),function(t,e,r,i){for(var a=-1,o=Hn(Nn((e-t)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=t,t+=r;return s}(e,r,i=i===a?e<r?1:-1:zs(i),t)}}function ba(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=qs(e),n=qs(n)),t(e,n)}}function Sa(t,e,n,r,i,o,s,u,c,l){var f=e&S;e|=f?x:_,(e&=~(f?_:x))&b||(e&=~(y|w));var h=[t,e,i,f?o:a,f?s:a,f?a:o,f?a:s,u,c,l],d=n.apply(a,h);return Qa(t)&&ro(d,h),d.placeholder=r,oo(d,t,e)}function Da(t){var e=Kt[t];return function(t,n){if(t=qs(t),(n=null==n?0:Xn(Vs(n),292))&&Wn(t)){var r=(Hs(t)+"e").split("e");return+((r=(Hs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var xa=er&&1/Rn(new er([,-0]))[1]==O?function(t){return new er(t)}:Bu;function _a(t){return function(e){var n=Va(e);return n==Z?kn(e):n==rt?Cn(e):function(t,e){return tn(e,function(e){return[e,t[e]]})}(e,t(e))}}function Ia(t,e,r,i,o,s,c,l){var f=e&w;if(!f&&"function"!=typeof t)throw new re(u);var d=i?i.length:0;if(d||(e&=~(x|_),i=o=a),c=c===a?c:Hn(Vs(c),0),l=l===a?l:Vs(l),d-=o?o.length:0,e&_){var p=i,v=o;i=o=a}var g=f?a:Pa(t),m=[t,e,r,i,o,p,v,s,c,l];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<(y|w|I),o=r==I&&n==S||r==I&&n==T&&t[7].length<=e[8]||r==(I|T)&&e[7].length<=e[8]&&n==S;if(!a&&!o)return t;r&y&&(t[2]=e[2],i|=n&y?0:b);var s=e[3];if(s){var u=t[3];t[3]=u?ea(u,s,e[4]):s,t[4]=u?An(t[3],h):e[4]}(s=e[5])&&(u=t[5],t[5]=u?na(u,s,e[6]):s,t[6]=u?An(t[5],h):e[6]),(s=e[7])&&(t[7]=s),r&I&&(t[8]=null==t[8]?e[8]:Xn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(m,g),t=m[0],e=m[1],r=m[2],i=m[3],o=m[4],!(l=m[9]=m[9]===a?f?0:t.length:Hn(m[9]-d,0))&&e&(S|D)&&(e&=~(S|D)),e&&e!=y)E=e==S||e==D?function(t,e,r){var i=fa(t);return function o(){for(var s=arguments.length,u=n(s),c=s,l=Fa(o);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:An(u,l);return(s-=f.length)<r?Sa(t,e,pa,o.placeholder,a,u,f,a,a,r-s):He(this&&this!==Oe&&this instanceof o?i:t,this,u)}}(t,e,l):e!=x&&e!=(y|x)||o.length?pa.apply(a,m):function(t,e,r,i){var a=e&y,o=fa(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==Oe&&this instanceof e?o:t;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return He(h,a?r:this,f)}}(t,e,r,i);else var E=function(t,e,n){var r=e&y,i=fa(t);return function e(){return(this&&this!==Oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return oo((g?ki:ro)(E,m),t,e)}function Ta(t,e,n,r){return t===a||ps(t,oe[n])&&!ce.call(r,n)?e:t}function Ea(t,e,n,r,i,o){return ks(t)&&ks(e)&&(o.set(e,t),gi(t,e,a,Ea,o),o.delete(e)),t}function ka(t){return Cs(t)?a:t}function Ma(t,e,n,r,i,o){var s=n&g,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(t),f=o.get(e);if(l&&f)return l==e&&f==t;var h=-1,d=!0,p=n&m?new Dr:a;for(o.set(t,e),o.set(e,t);++h<u;){var v=t[h],y=e[h];if(r)var w=s?r(y,v,h,e,t,o):r(v,y,h,t,e,o);if(w!==a){if(w)continue;d=!1;break}if(p){if(!an(e,function(t,e){if(!Sn(p,e)&&(v===t||i(v,t,n,r,o)))return p.push(e)})){d=!1;break}}else if(v!==y&&!i(v,y,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Aa(t){return ao(to(t,a,wo),t+"")}function Ra(t){return Jr(t,au,Ua)}function Ca(t){return Jr(t,ou,za)}var Pa=ir?function(t){return ir.get(t)}:Bu;function Oa(t){for(var e=t.name+"",n=ar[e],r=ce.call(ar,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function Fa(t){return(ce.call(pr,"placeholder")?pr:t).placeholder}function Ba(){var t=pr.iteratee||Cu;return t=t===Cu?ci:t,arguments.length?t(arguments[0],arguments[1]):t}function La(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ja(t){for(var e=au(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ja(i)]}return e}function Na(t,e){var n=function(t,e){return null==t?a:t[e]}(t,e);return ui(n)?n:a}var Ua=zn?function(t){return null==t?[]:(t=te(t),Ze(zn(t),function(e){return Ce.call(t,e)}))}:Wu,za=zn?function(t){for(var e=[];t;)en(e,Ua(t)),t=xe(t);return e}:Wu,Va=Kr;function Wa(t,e,n){for(var r=-1,i=(e=Xi(e,t)).length,a=!1;++r<i;){var o=lo(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Es(i)&&Ha(o,i)&&(ys(t)||ms(t))}function qa(t){return"function"!=typeof t.constructor||Za(t)?{}:vr(xe(t))}function Ya(t){return ys(t)||ms(t)||!!(Fe&&t&&t[Fe])}function Ha(t,e){var n=typeof t;return!!(e=null==e?F:e)&&("number"==n||"symbol"!=n&&Qt.test(t))&&t>-1&&t%1==0&&t<e}function Xa(t,e,n){if(!ks(n))return!1;var r=typeof e;return!!("number"==r?bs(n)&&Ha(e,n.length):"string"==r&&e in n)&&ps(n[e],t)}function Ga(t,e){if(ys(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Bs(t))||Rt.test(t)||!At.test(t)||null!=e&&t in te(e)}function Qa(t){var e=Oa(t),n=pr[e];if("function"!=typeof n||!(e in yr.prototype))return!1;if(t===n)return!0;var r=Pa(n);return!!r&&t===r[0]}(Jn&&Va(new Jn(new ArrayBuffer(1)))!=lt||Kn&&Va(new Kn)!=Z||tr&&"[object Promise]"!=Va(tr.resolve())||er&&Va(new er)!=rt||nr&&Va(new nr)!=st)&&(Va=function(t){var e=Kr(t),n=e==tt?t.constructor:a,r=n?fo(n):"";if(r)switch(r){case or:return lt;case sr:return Z;case ur:return"[object Promise]";case cr:return rt;case lr:return st}return e});var $a=se?Is:qu;function Za(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||oe)}function Ja(t){return t===t&&!ks(t)}function Ka(t,e){return function(n){return null!=n&&n[t]===e&&(e!==a||t in te(n))}}function to(t,e,r){return e=Hn(e===a?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=Hn(i.length-e,0),s=n(o);++a<o;)s[a]=i[e+a];a=-1;for(var u=n(e+1);++a<e;)u[a]=i[a];return u[e]=r(s),He(t,this,u)}}function eo(t,e){return e.length<2?t:Zr(t,Ri(e,0,-1))}function no(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var ro=so(ki),io=jn||function(t,e){return Oe.setTimeout(t,e)},ao=so(Mi);function oo(t,e,n){var r=e+"";return ao(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ge(z,function(n){var r="_."+n[0];e&n[1]&&!Je(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(jt);return e?e[1].split(Nt):[]}(r),n)))}function so(t){var e=0,n=0;return function(){var r=Gn(),i=R-(r-n);if(n=r,i>0){if(++e>=A)return arguments[0]}else e=0;return t.apply(a,arguments)}}function uo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===a?r:e;++n<e;){var o=Di(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var co=function(t){var e=us(t,function(t){return n.size===f&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ct,function(t,n,r,i){e.push(r?i.replace(Vt,"$1"):n||t)}),e});function lo(t){if("string"==typeof t||Bs(t))return t;var e=t+"";return"0"==e&&1/t==-O?"-0":e}function fo(t){if(null!=t){try{return ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ho(t){if(t instanceof yr)return t.clone();var e=new mr(t.__wrapped__,t.__chain__);return e.__actions__=ra(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var po=_i(function(t,e){return Ss(t)?Nr(t,Yr(e,1,Ss,!0)):[]}),vo=_i(function(t,e){var n=_o(e);return Ss(n)&&(n=a),Ss(t)?Nr(t,Yr(e,1,Ss,!0),Ba(n,2)):[]}),go=_i(function(t,e){var n=_o(e);return Ss(n)&&(n=a),Ss(t)?Nr(t,Yr(e,1,Ss,!0),a,n):[]});function mo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Vs(n);return i<0&&(i=Hn(r+i,0)),un(t,Ba(e,3),i)}function yo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==a&&(i=Vs(n),i=n<0?Hn(r+i,0):Xn(i,r-1)),un(t,Ba(e,3),i,!0)}function wo(t){return null!=t&&t.length?Yr(t,1):[]}function bo(t){return t&&t.length?t[0]:a}var So=_i(function(t){var e=tn(t,Yi);return e.length&&e[0]===t[0]?ri(e):[]}),Do=_i(function(t){var e=_o(t),n=tn(t,Yi);return e===_o(n)?e=a:n.pop(),n.length&&n[0]===t[0]?ri(n,Ba(e,2)):[]}),xo=_i(function(t){var e=_o(t),n=tn(t,Yi);return(e="function"==typeof e?e:a)&&n.pop(),n.length&&n[0]===t[0]?ri(n,a,e):[]});function _o(t){var e=null==t?0:t.length;return e?t[e-1]:a}var Io=_i(To);function To(t,e){return t&&t.length&&e&&e.length?bi(t,e):t}var Eo=Aa(function(t,e){var n=null==t?0:t.length,r=Or(t,e);return Si(t,tn(e,function(t){return Ha(t,n)?+t:t}).sort(ta)),r});function ko(t){return null==t?t:Zn.call(t)}var Mo=_i(function(t){return ji(Yr(t,1,Ss,!0))}),Ao=_i(function(t){var e=_o(t);return Ss(e)&&(e=a),ji(Yr(t,1,Ss,!0),Ba(e,2))}),Ro=_i(function(t){var e=_o(t);return e="function"==typeof e?e:a,ji(Yr(t,1,Ss,!0),a,e)});function Co(t){if(!t||!t.length)return[];var e=0;return t=Ze(t,function(t){if(Ss(t))return e=Hn(t.length,e),!0}),mn(e,function(e){return tn(t,dn(e))})}function Po(t,e){if(!t||!t.length)return[];var n=Co(t);return null==e?n:tn(n,function(t){return He(e,a,t)})}var Oo=_i(function(t,e){return Ss(t)?Nr(t,e):[]}),Fo=_i(function(t){return Wi(Ze(t,Ss))}),Bo=_i(function(t){var e=_o(t);return Ss(e)&&(e=a),Wi(Ze(t,Ss),Ba(e,2))}),Lo=_i(function(t){var e=_o(t);return e="function"==typeof e?e:a,Wi(Ze(t,Ss),a,e)}),jo=_i(Co);var No=_i(function(t){var e=t.length,n=e>1?t[e-1]:a;return n="function"==typeof n?(t.pop(),n):a,Po(t,n)});function Uo(t){var e=pr(t);return e.__chain__=!0,e}function zo(t,e){return e(t)}var Vo=Aa(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof yr&&Ha(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:zo,args:[i],thisArg:a}),new mr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(a),t})):this.thru(i)});var Wo=aa(function(t,e,n){ce.call(t,n)?++t[n]:Pr(t,n,1)});var qo=ha(mo),Yo=ha(yo);function Ho(t,e){return(ys(t)?Ge:Ur)(t,Ba(e,3))}function Xo(t,e){return(ys(t)?Qe:zr)(t,Ba(e,3))}var Go=aa(function(t,e,n){ce.call(t,n)?t[n].push(e):Pr(t,n,[e])});var Qo=_i(function(t,e,r){var i=-1,a="function"==typeof e,o=bs(t)?n(t.length):[];return Ur(t,function(t){o[++i]=a?He(e,t,r):ii(t,e,r)}),o}),$o=aa(function(t,e,n){Pr(t,n,e)});function Zo(t,e){return(ys(t)?tn:di)(t,Ba(e,3))}var Jo=aa(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ko=_i(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Xa(t,e[0],e[1])?e=[]:n>2&&Xa(e[0],e[1],e[2])&&(e=[e[0]]),yi(t,Yr(e,1),[])}),ts=pn||function(){return Oe.Date.now()};function es(t,e,n){return e=n?a:e,e=t&&null==e?t.length:e,Ia(t,I,a,a,a,a,e)}function ns(t,e){var n;if("function"!=typeof e)throw new re(u);return t=Vs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=a),n}}var rs=_i(function(t,e,n){var r=y;if(n.length){var i=An(n,Fa(rs));r|=x}return Ia(t,r,e,n,i)}),is=_i(function(t,e,n){var r=y|w;if(n.length){var i=An(n,Fa(is));r|=x}return Ia(e,r,t,n,i)});function as(t,e,n){var r,i,o,s,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof t)throw new re(u);function v(e){var n=r,o=i;return r=i=a,f=e,s=t.apply(o,n)}function g(t){var n=t-l;return l===a||n>=e||n<0||d&&t-f>=o}function m(){var t=ts();if(g(t))return y(t);c=io(m,function(t){var n=e-(t-l);return d?Xn(n,o-(t-f)):n}(t))}function y(t){return c=a,p&&r?v(t):(r=i=a,s)}function w(){var t=ts(),n=g(t);if(r=arguments,i=this,l=t,n){if(c===a)return function(t){return f=t,c=io(m,e),h?v(t):s}(l);if(d)return $i(c),c=io(m,e),v(l)}return c===a&&(c=io(m,e)),s}return e=qs(e)||0,ks(n)&&(h=!!n.leading,o=(d="maxWait"in n)?Hn(qs(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),w.cancel=function(){c!==a&&$i(c),f=0,r=l=i=c=a},w.flush=function(){return c===a?s:y(ts())},w}var os=_i(function(t,e){return jr(t,1,e)}),ss=_i(function(t,e,n){return jr(t,qs(e)||0,n)});function us(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new re(u);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(us.Cache||Sr),n}function cs(t){if("function"!=typeof t)throw new re(u);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}us.Cache=Sr;var ls=Gi(function(t,e){var n=(e=1==e.length&&ys(e[0])?tn(e[0],wn(Ba())):tn(Yr(e,1),wn(Ba()))).length;return _i(function(r){for(var i=-1,a=Xn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return He(t,this,r)})}),fs=_i(function(t,e){var n=An(e,Fa(fs));return Ia(t,x,a,e,n)}),hs=_i(function(t,e){var n=An(e,Fa(hs));return Ia(t,_,a,e,n)}),ds=Aa(function(t,e){return Ia(t,T,a,a,a,e)});function ps(t,e){return t===e||t!==t&&e!==e}var vs=ba(ti),gs=ba(function(t,e){return t>=e}),ms=ai(function(){return arguments}())?ai:function(t){return Ms(t)&&ce.call(t,"callee")&&!Ce.call(t,"callee")},ys=n.isArray,ws=Ue?wn(Ue):function(t){return Ms(t)&&Kr(t)==ct};function bs(t){return null!=t&&Es(t.length)&&!Is(t)}function Ss(t){return Ms(t)&&bs(t)}var Ds=Vn||qu,xs=ze?wn(ze):function(t){return Ms(t)&&Kr(t)==H};function _s(t){if(!Ms(t))return!1;var e=Kr(t);return e==G||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Cs(t)}function Is(t){if(!ks(t))return!1;var e=Kr(t);return e==Q||e==$||e==q||e==et}function Ts(t){return"number"==typeof t&&t==Vs(t)}function Es(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=F}function ks(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ms(t){return null!=t&&"object"==typeof t}var As=Ve?wn(Ve):function(t){return Ms(t)&&Va(t)==Z};function Rs(t){return"number"==typeof t||Ms(t)&&Kr(t)==J}function Cs(t){if(!Ms(t)||Kr(t)!=tt)return!1;var e=xe(t);if(null===e)return!0;var n=ce.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==de}var Ps=We?wn(We):function(t){return Ms(t)&&Kr(t)==nt};var Os=qe?wn(qe):function(t){return Ms(t)&&Va(t)==rt};function Fs(t){return"string"==typeof t||!ys(t)&&Ms(t)&&Kr(t)==it}function Bs(t){return"symbol"==typeof t||Ms(t)&&Kr(t)==at}var Ls=Ye?wn(Ye):function(t){return Ms(t)&&Es(t.length)&&!!Ee[Kr(t)]};var js=ba(hi),Ns=ba(function(t,e){return t<=e});function Us(t){if(!t)return[];if(bs(t))return Fs(t)?On(t):ra(t);if(Be&&t[Be])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Be]());var e=Va(t);return(e==Z?kn:e==rt?Rn:pu)(t)}function zs(t){return t?(t=qs(t))===O||t===-O?(t<0?-1:1)*B:t===t?t:0:0===t?t:0}function Vs(t){var e=zs(t),n=e%1;return e===e?n?e-n:e:0}function Ws(t){return t?Fr(Vs(t),0,j):0}function qs(t){if("number"==typeof t)return t;if(Bs(t))return L;if(ks(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ks(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=yn(t);var n=Ht.test(t);return n||Gt.test(t)?Re(t.slice(2),n?2:8):Yt.test(t)?L:+t}function Ys(t){return ia(t,ou(t))}function Hs(t){return null==t?"":Li(t)}var Xs=oa(function(t,e){if(Za(e)||bs(e))ia(e,au(e),t);else for(var n in e)ce.call(e,n)&&Mr(t,n,e[n])}),Gs=oa(function(t,e){ia(e,ou(e),t)}),Qs=oa(function(t,e,n,r){ia(e,ou(e),t,r)}),$s=oa(function(t,e,n,r){ia(e,au(e),t,r)}),Zs=Aa(Or);var Js=_i(function(t,e){t=te(t);var n=-1,r=e.length,i=r>2?e[2]:a;for(i&&Xa(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=ou(o),u=-1,c=s.length;++u<c;){var l=s[u],f=t[l];(f===a||ps(f,oe[l])&&!ce.call(t,l))&&(t[l]=o[l])}return t}),Ks=_i(function(t){return t.push(a,Ea),He(uu,a,t)});function tu(t,e,n){var r=null==t?a:Zr(t,e);return r===a?n:r}function eu(t,e){return null!=t&&Wa(t,e,ni)}var nu=va(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),t[e]=n},ku(Ru)),ru=va(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),ce.call(t,e)?t[e].push(n):t[e]=[n]},Ba),iu=_i(ii);function au(t){return bs(t)?_r(t):li(t)}function ou(t){return bs(t)?_r(t,!0):fi(t)}var su=oa(function(t,e,n){gi(t,e,n)}),uu=oa(function(t,e,n,r){gi(t,e,n,r)}),cu=Aa(function(t,e){var n={};if(null==t)return n;var r=!1;e=tn(e,function(e){return e=Xi(e,t),r||(r=e.length>1),e}),ia(t,Ca(t),n),r&&(n=Br(n,d|p|v,ka));for(var i=e.length;i--;)Ni(n,e[i]);return n});var lu=Aa(function(t,e){return null==t?{}:function(t,e){return wi(t,e,function(e,n){return eu(t,n)})}(t,e)});function fu(t,e){if(null==t)return{};var n=tn(Ca(t),function(t){return[t]});return e=Ba(e),wi(t,n,function(t,n){return e(t,n[0])})}var hu=_a(au),du=_a(ou);function pu(t){return null==t?[]:bn(t,au(t))}var vu=la(function(t,e,n){return e=e.toLowerCase(),t+(n?gu(e):e)});function gu(t){return _u(Hs(t).toLowerCase())}function mu(t){return(t=Hs(t))&&t.replace($t,_n).replace(be,"")}var yu=la(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),wu=la(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),bu=ca("toLowerCase");var Su=la(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Du=la(function(t,e,n){return t+(n?" ":"")+_u(e)});var xu=la(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),_u=ca("toUpperCase");function Iu(t,e,n){return t=Hs(t),(e=n?a:e)===a?function(t){return _e.test(t)}(t)?function(t){return t.match(De)||[]}(t):function(t){return t.match(Ut)||[]}(t):t.match(e)||[]}var Tu=_i(function(t,e){try{return He(t,a,e)}catch(t){return _s(t)?t:new i(t)}}),Eu=Aa(function(t,e){return Ge(e,function(e){e=lo(e),Pr(t,e,rs(t[e],t))}),t});function ku(t){return function(){return t}}var Mu=da(),Au=da(!0);function Ru(t){return t}function Cu(t){return ci("function"==typeof t?t:Br(t,d))}var Pu=_i(function(t,e){return function(n){return ii(n,t,e)}}),Ou=_i(function(t,e){return function(n){return ii(t,n,e)}});function Fu(t,e,n){var r=au(e),i=$r(e,r);null!=n||ks(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=$r(e,au(e)));var a=!(ks(n)&&"chain"in n)||!!n.chain,o=Is(t);return Ge(i,function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=ra(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,en([this.value()],arguments))})}),t}function Bu(){}var Lu=ma(tn),ju=ma($e),Nu=ma(an);function Uu(t){return Ga(t)?dn(lo(t)):function(t){return function(e){return Zr(e,t)}}(t)}var zu=wa(),Vu=wa(!0);function Wu(){return[]}function qu(){return!1}var Yu=ga(function(t,e){return t+e},0),Hu=Da("ceil"),Xu=ga(function(t,e){return t/e},1),Gu=Da("floor");var Qu=ga(function(t,e){return t*e},1),$u=Da("round"),Zu=ga(function(t,e){return t-e},0);return pr.after=function(t,e){if("function"!=typeof e)throw new re(u);return t=Vs(t),function(){if(--t<1)return e.apply(this,arguments)}},pr.ary=es,pr.assign=Xs,pr.assignIn=Gs,pr.assignInWith=Qs,pr.assignWith=$s,pr.at=Zs,pr.before=ns,pr.bind=rs,pr.bindAll=Eu,pr.bindKey=is,pr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ys(t)?t:[t]},pr.chain=Uo,pr.chunk=function(t,e,r){e=(r?Xa(t,e,r):e===a)?1:Hn(Vs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,u=n(Nn(i/e));o<i;)u[s++]=Ri(t,o,o+=e);return u},pr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},pr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return en(ys(r)?ra(r):[r],Yr(e,1))},pr.cond=function(t){var e=null==t?0:t.length,n=Ba();return t=e?tn(t,function(t){if("function"!=typeof t[1])throw new re(u);return[n(t[0]),t[1]]}):[],_i(function(n){for(var r=-1;++r<e;){var i=t[r];if(He(i[0],this,n))return He(i[1],this,n)}})},pr.conforms=function(t){return function(t){var e=au(t);return function(n){return Lr(n,t,e)}}(Br(t,d))},pr.constant=ku,pr.countBy=Wo,pr.create=function(t,e){var n=vr(t);return null==e?n:Cr(n,e)},pr.curry=function t(e,n,r){var i=Ia(e,S,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},pr.curryRight=function t(e,n,r){var i=Ia(e,D,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},pr.debounce=as,pr.defaults=Js,pr.defaultsDeep=Ks,pr.defer=os,pr.delay=ss,pr.difference=po,pr.differenceBy=vo,pr.differenceWith=go,pr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Ri(t,(e=n||e===a?1:Vs(e))<0?0:e,r):[]},pr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Ri(t,0,(e=r-(e=n||e===a?1:Vs(e)))<0?0:e):[]},pr.dropRightWhile=function(t,e){return t&&t.length?zi(t,Ba(e,3),!0,!0):[]},pr.dropWhile=function(t,e){return t&&t.length?zi(t,Ba(e,3),!0):[]},pr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Xa(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Vs(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:Vs(r))<0&&(r+=i),r=n>r?0:Ws(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},pr.filter=function(t,e){return(ys(t)?Ze:qr)(t,Ba(e,3))},pr.flatMap=function(t,e){return Yr(Zo(t,e),1)},pr.flatMapDeep=function(t,e){return Yr(Zo(t,e),O)},pr.flatMapDepth=function(t,e,n){return n=n===a?1:Vs(n),Yr(Zo(t,e),n)},pr.flatten=wo,pr.flattenDeep=function(t){return null!=t&&t.length?Yr(t,O):[]},pr.flattenDepth=function(t,e){return null!=t&&t.length?Yr(t,e=e===a?1:Vs(e)):[]},pr.flip=function(t){return Ia(t,E)},pr.flow=Mu,pr.flowRight=Au,pr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},pr.functions=function(t){return null==t?[]:$r(t,au(t))},pr.functionsIn=function(t){return null==t?[]:$r(t,ou(t))},pr.groupBy=Go,pr.initial=function(t){return null!=t&&t.length?Ri(t,0,-1):[]},pr.intersection=So,pr.intersectionBy=Do,pr.intersectionWith=xo,pr.invert=nu,pr.invertBy=ru,pr.invokeMap=Qo,pr.iteratee=Cu,pr.keyBy=$o,pr.keys=au,pr.keysIn=ou,pr.map=Zo,pr.mapKeys=function(t,e){var n={};return e=Ba(e,3),Gr(t,function(t,r,i){Pr(n,e(t,r,i),t)}),n},pr.mapValues=function(t,e){var n={};return e=Ba(e,3),Gr(t,function(t,r,i){Pr(n,r,e(t,r,i))}),n},pr.matches=function(t){return pi(Br(t,d))},pr.matchesProperty=function(t,e){return vi(t,Br(e,d))},pr.memoize=us,pr.merge=su,pr.mergeWith=uu,pr.method=Pu,pr.methodOf=Ou,pr.mixin=Fu,pr.negate=cs,pr.nthArg=function(t){return t=Vs(t),_i(function(e){return mi(e,t)})},pr.omit=cu,pr.omitBy=function(t,e){return fu(t,cs(Ba(e)))},pr.once=function(t){return ns(2,t)},pr.orderBy=function(t,e,n,r){return null==t?[]:(ys(e)||(e=null==e?[]:[e]),ys(n=r?a:n)||(n=null==n?[]:[n]),yi(t,e,n))},pr.over=Lu,pr.overArgs=ls,pr.overEvery=ju,pr.overSome=Nu,pr.partial=fs,pr.partialRight=hs,pr.partition=Jo,pr.pick=lu,pr.pickBy=fu,pr.property=Uu,pr.propertyOf=function(t){return function(e){return null==t?a:Zr(t,e)}},pr.pull=Io,pr.pullAll=To,pr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,Ba(n,2)):t},pr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,a,n):t},pr.pullAt=Eo,pr.range=zu,pr.rangeRight=Vu,pr.rearg=ds,pr.reject=function(t,e){return(ys(t)?Ze:qr)(t,cs(Ba(e,3)))},pr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=Ba(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Si(t,i),n},pr.rest=function(t,e){if("function"!=typeof t)throw new re(u);return _i(t,e=e===a?e:Vs(e))},pr.reverse=ko,pr.sampleSize=function(t,e,n){return e=(n?Xa(t,e,n):e===a)?1:Vs(e),(ys(t)?Tr:Ti)(t,e)},pr.set=function(t,e,n){return null==t?t:Ei(t,e,n)},pr.setWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:Ei(t,e,n,r)},pr.shuffle=function(t){return(ys(t)?Er:Ai)(t)},pr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Xa(t,e,n)?(e=0,n=r):(e=null==e?0:Vs(e),n=n===a?r:Vs(n)),Ri(t,e,n)):[]},pr.sortBy=Ko,pr.sortedUniq=function(t){return t&&t.length?Fi(t):[]},pr.sortedUniqBy=function(t,e){return t&&t.length?Fi(t,Ba(e,2)):[]},pr.split=function(t,e,n){return n&&"number"!=typeof n&&Xa(t,e,n)&&(e=n=a),(n=n===a?j:n>>>0)?(t=Hs(t))&&("string"==typeof e||null!=e&&!Ps(e))&&!(e=Li(e))&&En(t)?Qi(On(t),0,n):t.split(e,n):[]},pr.spread=function(t,e){if("function"!=typeof t)throw new re(u);return e=null==e?0:Hn(Vs(e),0),_i(function(n){var r=n[e],i=Qi(n,0,e);return r&&en(i,r),He(t,this,i)})},pr.tail=function(t){var e=null==t?0:t.length;return e?Ri(t,1,e):[]},pr.take=function(t,e,n){return t&&t.length?Ri(t,0,(e=n||e===a?1:Vs(e))<0?0:e):[]},pr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Ri(t,(e=r-(e=n||e===a?1:Vs(e)))<0?0:e,r):[]},pr.takeRightWhile=function(t,e){return t&&t.length?zi(t,Ba(e,3),!1,!0):[]},pr.takeWhile=function(t,e){return t&&t.length?zi(t,Ba(e,3)):[]},pr.tap=function(t,e){return e(t),t},pr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new re(u);return ks(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),as(t,e,{leading:r,maxWait:e,trailing:i})},pr.thru=zo,pr.toArray=Us,pr.toPairs=hu,pr.toPairsIn=du,pr.toPath=function(t){return ys(t)?tn(t,lo):Bs(t)?[t]:ra(co(Hs(t)))},pr.toPlainObject=Ys,pr.transform=function(t,e,n){var r=ys(t),i=r||Ds(t)||Ls(t);if(e=Ba(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:ks(t)&&Is(a)?vr(xe(t)):{}}return(i?Ge:Gr)(t,function(t,r,i){return e(n,t,r,i)}),n},pr.unary=function(t){return es(t,1)},pr.union=Mo,pr.unionBy=Ao,pr.unionWith=Ro,pr.uniq=function(t){return t&&t.length?ji(t):[]},pr.uniqBy=function(t,e){return t&&t.length?ji(t,Ba(e,2)):[]},pr.uniqWith=function(t,e){return e="function"==typeof e?e:a,t&&t.length?ji(t,a,e):[]},pr.unset=function(t,e){return null==t||Ni(t,e)},pr.unzip=Co,pr.unzipWith=Po,pr.update=function(t,e,n){return null==t?t:Ui(t,e,Hi(n))},pr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:Ui(t,e,Hi(n),r)},pr.values=pu,pr.valuesIn=function(t){return null==t?[]:bn(t,ou(t))},pr.without=Oo,pr.words=Iu,pr.wrap=function(t,e){return fs(Hi(e),t)},pr.xor=Fo,pr.xorBy=Bo,pr.xorWith=Lo,pr.zip=jo,pr.zipObject=function(t,e){return qi(t||[],e||[],Mr)},pr.zipObjectDeep=function(t,e){return qi(t||[],e||[],Ei)},pr.zipWith=No,pr.entries=hu,pr.entriesIn=du,pr.extend=Gs,pr.extendWith=Qs,Fu(pr,pr),pr.add=Yu,pr.attempt=Tu,pr.camelCase=vu,pr.capitalize=gu,pr.ceil=Hu,pr.clamp=function(t,e,n){return n===a&&(n=e,e=a),n!==a&&(n=(n=qs(n))===n?n:0),e!==a&&(e=(e=qs(e))===e?e:0),Fr(qs(t),e,n)},pr.clone=function(t){return Br(t,v)},pr.cloneDeep=function(t){return Br(t,d|v)},pr.cloneDeepWith=function(t,e){return Br(t,d|v,e="function"==typeof e?e:a)},pr.cloneWith=function(t,e){return Br(t,v,e="function"==typeof e?e:a)},pr.conformsTo=function(t,e){return null==e||Lr(t,e,au(e))},pr.deburr=mu,pr.defaultTo=function(t,e){return null==t||t!==t?e:t},pr.divide=Xu,pr.endsWith=function(t,e,n){t=Hs(t),e=Li(e);var r=t.length,i=n=n===a?r:Fr(Vs(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},pr.eq=ps,pr.escape=function(t){return(t=Hs(t))&&Tt.test(t)?t.replace(_t,In):t},pr.escapeRegExp=function(t){return(t=Hs(t))&&Ot.test(t)?t.replace(Pt,"\\$&"):t},pr.every=function(t,e,n){var r=ys(t)?$e:Vr;return n&&Xa(t,e,n)&&(e=a),r(t,Ba(e,3))},pr.find=qo,pr.findIndex=mo,pr.findKey=function(t,e){return sn(t,Ba(e,3),Gr)},pr.findLast=Yo,pr.findLastIndex=yo,pr.findLastKey=function(t,e){return sn(t,Ba(e,3),Qr)},pr.floor=Gu,pr.forEach=Ho,pr.forEachRight=Xo,pr.forIn=function(t,e){return null==t?t:Hr(t,Ba(e,3),ou)},pr.forInRight=function(t,e){return null==t?t:Xr(t,Ba(e,3),ou)},pr.forOwn=function(t,e){return t&&Gr(t,Ba(e,3))},pr.forOwnRight=function(t,e){return t&&Qr(t,Ba(e,3))},pr.get=tu,pr.gt=vs,pr.gte=gs,pr.has=function(t,e){return null!=t&&Wa(t,e,ei)},pr.hasIn=eu,pr.head=bo,pr.identity=Ru,pr.includes=function(t,e,n,r){t=bs(t)?t:pu(t),n=n&&!r?Vs(n):0;var i=t.length;return n<0&&(n=Hn(i+n,0)),Fs(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&cn(t,e,n)>-1},pr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Vs(n);return i<0&&(i=Hn(r+i,0)),cn(t,e,i)},pr.inRange=function(t,e,n){return e=zs(e),n===a?(n=e,e=0):n=zs(n),function(t,e,n){return t>=Xn(e,n)&&t<Hn(e,n)}(t=qs(t),e,n)},pr.invoke=iu,pr.isArguments=ms,pr.isArray=ys,pr.isArrayBuffer=ws,pr.isArrayLike=bs,pr.isArrayLikeObject=Ss,pr.isBoolean=function(t){return!0===t||!1===t||Ms(t)&&Kr(t)==Y},pr.isBuffer=Ds,pr.isDate=xs,pr.isElement=function(t){return Ms(t)&&1===t.nodeType&&!Cs(t)},pr.isEmpty=function(t){if(null==t)return!0;if(bs(t)&&(ys(t)||"string"==typeof t||"function"==typeof t.splice||Ds(t)||Ls(t)||ms(t)))return!t.length;var e=Va(t);if(e==Z||e==rt)return!t.size;if(Za(t))return!li(t).length;for(var n in t)if(ce.call(t,n))return!1;return!0},pr.isEqual=function(t,e){return oi(t,e)},pr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:a)?n(t,e):a;return r===a?oi(t,e,a,n):!!r},pr.isError=_s,pr.isFinite=function(t){return"number"==typeof t&&Wn(t)},pr.isFunction=Is,pr.isInteger=Ts,pr.isLength=Es,pr.isMap=As,pr.isMatch=function(t,e){return t===e||si(t,e,ja(e))},pr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:a,si(t,e,ja(e),n)},pr.isNaN=function(t){return Rs(t)&&t!=+t},pr.isNative=function(t){if($a(t))throw new i(s);return ui(t)},pr.isNil=function(t){return null==t},pr.isNull=function(t){return null===t},pr.isNumber=Rs,pr.isObject=ks,pr.isObjectLike=Ms,pr.isPlainObject=Cs,pr.isRegExp=Ps,pr.isSafeInteger=function(t){return Ts(t)&&t>=-F&&t<=F},pr.isSet=Os,pr.isString=Fs,pr.isSymbol=Bs,pr.isTypedArray=Ls,pr.isUndefined=function(t){return t===a},pr.isWeakMap=function(t){return Ms(t)&&Va(t)==st},pr.isWeakSet=function(t){return Ms(t)&&Kr(t)==ut},pr.join=function(t,e){return null==t?"":qn.call(t,e)},pr.kebabCase=yu,pr.last=_o,pr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=Vs(n))<0?Hn(r+i,0):Xn(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):un(t,fn,i,!0)},pr.lowerCase=wu,pr.lowerFirst=bu,pr.lt=js,pr.lte=Ns,pr.max=function(t){return t&&t.length?Wr(t,Ru,ti):a},pr.maxBy=function(t,e){return t&&t.length?Wr(t,Ba(e,2),ti):a},pr.mean=function(t){return hn(t,Ru)},pr.meanBy=function(t,e){return hn(t,Ba(e,2))},pr.min=function(t){return t&&t.length?Wr(t,Ru,hi):a},pr.minBy=function(t,e){return t&&t.length?Wr(t,Ba(e,2),hi):a},pr.stubArray=Wu,pr.stubFalse=qu,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Qu,pr.nth=function(t,e){return t&&t.length?mi(t,Vs(e)):a},pr.noConflict=function(){return Oe._===this&&(Oe._=pe),this},pr.noop=Bu,pr.now=ts,pr.pad=function(t,e,n){t=Hs(t);var r=(e=Vs(e))?Pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ya(Un(i),n)+t+ya(Nn(i),n)},pr.padEnd=function(t,e,n){t=Hs(t);var r=(e=Vs(e))?Pn(t):0;return e&&r<e?t+ya(e-r,n):t},pr.padStart=function(t,e,n){t=Hs(t);var r=(e=Vs(e))?Pn(t):0;return e&&r<e?ya(e-r,n)+t:t},pr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Qn(Hs(t).replace(Ft,""),e||0)},pr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Xa(t,e,n)&&(e=n=a),n===a&&("boolean"==typeof e?(n=e,e=a):"boolean"==typeof t&&(n=t,t=a)),t===a&&e===a?(t=0,e=1):(t=zs(t),e===a?(e=t,t=0):e=zs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=$n();return Xn(t+i*(e-t+Ae("1e-"+((i+"").length-1))),e)}return Di(t,e)},pr.reduce=function(t,e,n){var r=ys(t)?nn:vn,i=arguments.length<3;return r(t,Ba(e,4),n,i,Ur)},pr.reduceRight=function(t,e,n){var r=ys(t)?rn:vn,i=arguments.length<3;return r(t,Ba(e,4),n,i,zr)},pr.repeat=function(t,e,n){return e=(n?Xa(t,e,n):e===a)?1:Vs(e),xi(Hs(t),e)},pr.replace=function(){var t=arguments,e=Hs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pr.result=function(t,e,n){var r=-1,i=(e=Xi(e,t)).length;for(i||(i=1,t=a);++r<i;){var o=null==t?a:t[lo(e[r])];o===a&&(r=i,o=n),t=Is(o)?o.call(t):o}return t},pr.round=$u,pr.runInContext=t,pr.sample=function(t){return(ys(t)?Ir:Ii)(t)},pr.size=function(t){if(null==t)return 0;if(bs(t))return Fs(t)?Pn(t):t.length;var e=Va(t);return e==Z||e==rt?t.size:li(t).length},pr.snakeCase=Su,pr.some=function(t,e,n){var r=ys(t)?an:Ci;return n&&Xa(t,e,n)&&(e=a),r(t,Ba(e,3))},pr.sortedIndex=function(t,e){return Pi(t,e)},pr.sortedIndexBy=function(t,e,n){return Oi(t,e,Ba(n,2))},pr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Pi(t,e);if(r<n&&ps(t[r],e))return r}return-1},pr.sortedLastIndex=function(t,e){return Pi(t,e,!0)},pr.sortedLastIndexBy=function(t,e,n){return Oi(t,e,Ba(n,2),!0)},pr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Pi(t,e,!0)-1;if(ps(t[n],e))return n}return-1},pr.startCase=Du,pr.startsWith=function(t,e,n){return t=Hs(t),n=null==n?0:Fr(Vs(n),0,t.length),e=Li(e),t.slice(n,n+e.length)==e},pr.subtract=Zu,pr.sum=function(t){return t&&t.length?gn(t,Ru):0},pr.sumBy=function(t,e){return t&&t.length?gn(t,Ba(e,2)):0},pr.template=function(t,e,n){var r=pr.templateSettings;n&&Xa(t,e,n)&&(e=a),t=Hs(t),e=Qs({},e,r,Ta);var o,s,u=Qs({},e.imports,r.imports,Ta),l=au(u),f=bn(u,l),h=0,d=e.interpolate||Zt,p="__p += '",v=ee((e.escape||Zt).source+"|"+d.source+"|"+(d===Mt?Wt:Zt).source+"|"+(e.evaluate||Zt).source+"|$","g"),g="//# sourceURL="+(ce.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Te+"]")+"\n";t.replace(v,function(e,n,r,i,a,u){return r||(r=i),p+=t.slice(h,u).replace(Jt,Tn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),p+="';\n";var m=ce.call(e,"variable")&&e.variable;if(m){if(zt.test(m))throw new i(c)}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(bt,""):p).replace(St,"$1").replace(Dt,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Tu(function(){return Bt(l,g+"return "+p).apply(a,f)});if(y.source=p,_s(y))throw y;return y},pr.times=function(t,e){if((t=Vs(t))<1||t>F)return[];var n=j,r=Xn(t,j);e=Ba(e),t-=j;for(var i=mn(r,e);++n<t;)e(n);return i},pr.toFinite=zs,pr.toInteger=Vs,pr.toLength=Ws,pr.toLower=function(t){return Hs(t).toLowerCase()},pr.toNumber=qs,pr.toSafeInteger=function(t){return t?Fr(Vs(t),-F,F):0===t?t:0},pr.toString=Hs,pr.toUpper=function(t){return Hs(t).toUpperCase()},pr.trim=function(t,e,n){if((t=Hs(t))&&(n||e===a))return yn(t);if(!t||!(e=Li(e)))return t;var r=On(t),i=On(e);return Qi(r,Dn(r,i),xn(r,i)+1).join("")},pr.trimEnd=function(t,e,n){if((t=Hs(t))&&(n||e===a))return t.slice(0,Fn(t)+1);if(!t||!(e=Li(e)))return t;var r=On(t);return Qi(r,0,xn(r,On(e))+1).join("")},pr.trimStart=function(t,e,n){if((t=Hs(t))&&(n||e===a))return t.replace(Ft,"");if(!t||!(e=Li(e)))return t;var r=On(t);return Qi(r,Dn(r,On(e))).join("")},pr.truncate=function(t,e){var n=k,r=M;if(ks(e)){var i="separator"in e?e.separator:i;n="length"in e?Vs(e.length):n,r="omission"in e?Li(e.omission):r}var o=(t=Hs(t)).length;if(En(t)){var s=On(t);o=s.length}if(n>=o)return t;var u=n-Pn(r);if(u<1)return r;var c=s?Qi(s,0,u).join(""):t.slice(0,u);if(i===a)return c+r;if(s&&(u+=c.length-u),Ps(i)){if(t.slice(u).search(i)){var l,f=c;for(i.global||(i=ee(i.source,Hs(qt.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var h=l.index;c=c.slice(0,h===a?u:h)}}else if(t.indexOf(Li(i),u)!=u){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+r},pr.unescape=function(t){return(t=Hs(t))&&It.test(t)?t.replace(xt,Bn):t},pr.uniqueId=function(t){var e=++le;return Hs(t)+e},pr.upperCase=xu,pr.upperFirst=_u,pr.each=Ho,pr.eachRight=Xo,pr.first=bo,Fu(pr,function(){var t={};return Gr(pr,function(e,n){ce.call(pr.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),pr.VERSION="4.17.21",Ge(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pr[t].placeholder=pr}),Ge(["drop","take"],function(t,e){yr.prototype[t]=function(n){n=n===a?1:Hn(Vs(n),0);var r=this.__filtered__&&!e?new yr(this):this.clone();return r.__filtered__?r.__takeCount__=Xn(n,r.__takeCount__):r.__views__.push({size:Xn(n,j),type:t+(r.__dir__<0?"Right":"")}),r},yr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ge(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==C||3==n;yr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ba(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Ge(["head","last"],function(t,e){var n="take"+(e?"Right":"");yr.prototype[t]=function(){return this[n](1).value()[0]}}),Ge(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");yr.prototype[t]=function(){return this.__filtered__?new yr(this):this[n](1)}}),yr.prototype.compact=function(){return this.filter(Ru)},yr.prototype.find=function(t){return this.filter(t).head()},yr.prototype.findLast=function(t){return this.reverse().find(t)},yr.prototype.invokeMap=_i(function(t,e){return"function"==typeof t?new yr(this):this.map(function(n){return ii(n,t,e)})}),yr.prototype.reject=function(t){return this.filter(cs(Ba(t)))},yr.prototype.slice=function(t,e){t=Vs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new yr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==a&&(n=(e=Vs(e))<0?n.dropRight(-e):n.take(e-t)),n)},yr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},yr.prototype.toArray=function(){return this.take(j)},Gr(yr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=pr[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(pr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof yr,c=s[0],l=u||ys(e),f=function(t){var e=i.apply(pr,en([t],s));return r&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,v=u&&!d;if(!o&&l){e=v?e:new yr(this);var g=t.apply(e,s);return g.__actions__.push({func:zo,args:[f],thisArg:a}),new mr(g,h)}return p&&v?t.apply(this,s):(g=this.thru(f),p?r?g.value()[0]:g.value():g)})}),Ge(["pop","push","shift","sort","splice","unshift"],function(t){var e=ie[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ys(i)?i:[],t)}return this[n](function(n){return e.apply(ys(n)?n:[],t)})}}),Gr(yr.prototype,function(t,e){var n=pr[e];if(n){var r=n.name+"";ce.call(ar,r)||(ar[r]=[]),ar[r].push({name:e,func:n})}}),ar[pa(a,w).name]=[{name:"wrapper",func:a}],yr.prototype.clone=function(){var t=new yr(this.__wrapped__);return t.__actions__=ra(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ra(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ra(this.__views__),t},yr.prototype.reverse=function(){if(this.__filtered__){var t=new yr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},yr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ys(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Xn(e,t+o);break;case"takeRight":t=Hn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,f=l.length,h=0,d=Xn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return Vi(t,this.__actions__);var p=[];t:for(;u--&&h<d;){for(var v=-1,g=t[c+=e];++v<f;){var m=l[v],y=m.iteratee,w=m.type,b=y(g);if(w==P)g=b;else if(!b){if(w==C)continue t;break t}}p[h++]=g}return p},pr.prototype.at=Vo,pr.prototype.chain=function(){return Uo(this)},pr.prototype.commit=function(){return new mr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===a&&(this.__values__=Us(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?a:this.__values__[this.__index__++]}},pr.prototype.plant=function(t){for(var e,n=this;n instanceof gr;){var r=ho(n);r.__index__=0,r.__values__=a,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},pr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof yr){var e=t;return this.__actions__.length&&(e=new yr(this)),(e=e.reverse()).__actions__.push({func:zo,args:[ko],thisArg:a}),new mr(e,this.__chain__)}return this.thru(ko)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Vi(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Be&&(pr.prototype[Be]=function(){return this}),pr}();Oe._=Ln,(i=function(){return Ln}.call(e,n,e,r))===a||(r.exports=i)}).call(this)}).call(this,n(32),n(211)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]).default;